(self.webpackChunkevaluacionds02=self.webpackChunkevaluacionds02||[]).push([[179],{2011:(ut,be,F)=>{"use strict";F.d(be,{hO:()=>je,xv:()=>le,Dh:()=>ae,GT:()=>de,cc:()=>De,on:()=>H,pX:()=>re});var h=F(5e3),Q=F(127),k=F(5813);ut=F.hmd(ut);const se=["ngOnDestroy"],re=(ne,ge,Te,ye={})=>new Proxy(ne,{get:(He,Ae)=>Te.runOutsideAngular(()=>{var rt;if(ne[Ae])return(null===(rt=null==ye?void 0:ye.spy)||void 0===rt?void 0:rt.get)&&ye.spy.get(Ae,ne[Ae]),ne[Ae];if(se.indexOf(Ae)>-1)return()=>{};const Ye=ge.toPromise().then(pt=>{const J=pt&&pt[Ae];return"function"==typeof J?J.bind(pt):J&&J.then?J.then(pe=>Te.run(()=>pe)):Te.run(()=>J)});return new Proxy(()=>{},{get:(pt,J)=>Ye[J],apply:(pt,J,pe)=>Ye.then(ve=>{var Ie;const Fe=ve&&ve(...pe);return(null===(Ie=null==ye?void 0:ye.spy)||void 0===Ie?void 0:Ie.apply)&&ye.spy.apply(Ae,pe,Fe),Fe})})})}),de=(ne,ge)=>{ge.forEach(Te=>{Object.getOwnPropertyNames(Te.prototype||Te).forEach(ye=>{Object.defineProperty(ne.prototype,ye,Object.getOwnPropertyDescriptor(Te.prototype||Te,ye))})})};class oe{constructor(ge){return ge}}const ae=new h.OlP("angularfire2.app.options"),le=new h.OlP("angularfire2.app.name");function H(ne,ge,Te){const He="object"==typeof Te&&Te||{};He.name=He.name||"string"==typeof Te&&Te||"[DEFAULT]";const rt=Q.Z.apps.filter(Ye=>Ye&&Ye.name===He.name)[0]||ge.runOutsideAngular(()=>Q.Z.initializeApp(ne,He));try{JSON.stringify(ne)!==JSON.stringify(rt.options)&&$("error",`${rt.name} Firebase App already initialized with different options${ut.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ye){}return new oe(rt)}const $=(ne,...ge)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[ne](...ge)},X={provide:oe,useFactory:H,deps:[ae,h.R0b,[new h.FiY,le]]};let je=(()=>{class ne{constructor(Te){Q.Z.registerVersion("angularfire",k.q4.full,"core"),Q.Z.registerVersion("angularfire",k.q4.full,"app-compat"),Q.Z.registerVersion("angular",h.q4F.full,Te.toString())}static initializeApp(Te,ye){return{ngModule:ne,providers:[{provide:ae,useValue:Te},{provide:le,useValue:ye}]}}}return ne.\u0275fac=function(Te){return new(Te||ne)(h.LFG(h.Lbi))},ne.\u0275mod=h.oAB({type:ne}),ne.\u0275inj=h.cJS({providers:[X]}),ne})();function De(ne,ge,Te,ye,He){const[,Ae,rt]=globalThis.\u0275AngularfireInstanceCache.find(Ye=>Ye[0]===ne)||[];if(Ae)return function Pe(ne,ge){try{return ne.toString()===ge.toString()}catch(Te){return ne===ge}}(He,rt)||(K("error",`${ge} was already initialized on the ${Te} Firebase App with different settings.${Be?" You may need to reload as Firebase is not HMR aware.":""}`),K("warn",{is:He,was:rt})),Ae;{const Ye=ye();return globalThis.\u0275AngularfireInstanceCache.push([ne,Ye,He]),Ye}}const Be=!!ut.hot,K=(ne,...ge)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[ne](...ge)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ut,be,F)=>{"use strict";F.d(be,{q4:()=>Ud,iC:()=>ga,HU:()=>to,vb:()=>Hd,JM:()=>jd});var h=F(5e3),Q=F(5867),k=F(5861),se=F(9681),re=F(2090),de=F(4859),oe=F(1877),ae=F(2940);const le="@firebase/installations",H="0.5.5",X=`w:${H}`,je="FIS_v2",ge=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Te(b){return b instanceof re.ZR&&b.code.includes("request-failed")}function ye({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function He(b){return{token:b.token,requestStatus:2,expiresIn:ve(b.expiresIn),creationTime:Date.now()}}function Ae(b,D){return rt.apply(this,arguments)}function rt(){return(rt=(0,k.Z)(function*(b,D){const U=(yield D.json()).error;return ge.create("request-failed",{requestName:b,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function Ye({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function pt(b,{refreshToken:D}){const N=Ye(b);return N.append("Authorization",function Ie(b){return`${je} ${b}`}(D)),N}function J(b){return pe.apply(this,arguments)}function pe(){return(pe=(0,k.Z)(function*(b){const D=yield b();return D.status>=500&&D.status<600?b():D})).apply(this,arguments)}function ve(b){return Number(b.replace("s","000"))}function Fe(b,D){return ce.apply(this,arguments)}function ce(){return(ce=(0,k.Z)(function*(b,{fid:D}){const N=ye(b),ie={method:"POST",headers:Ye(b),body:JSON.stringify({fid:D,authVersion:je,appId:b.appId,sdkVersion:X})},Oe=yield J(()=>fetch(N,ie));if(Oe.ok){const Ze=yield Oe.json();return{fid:Ze.fid||D,registrationStatus:2,refreshToken:Ze.refreshToken,authToken:He(Ze.authToken)}}throw yield Ae("Create Installation",Oe)})).apply(this,arguments)}function Tt(b){return new Promise(D=>{setTimeout(D,b)})}const Sr=/^[cdef][\w-]{21}$/;function gt(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const N=function ur(b){return function jt(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Sr.test(N)?N:""}catch(b){return""}}function Kt(b){return`${b.appName}!${b.appId}`}const _r=new Map;function sn(b,D){const N=Kt(b);Rn(N,D),function bi(b,D){const N=function Wt(){return!en&&"BroadcastChannel"in self&&(en=new BroadcastChannel("[Firebase] FID Change"),en.onmessage=b=>{Rn(b.data.key,b.data.fid)}),en}();N&&N.postMessage({key:b,fid:D}),function vo(){0===_r.size&&en&&(en.close(),en=null)}()}(N,D)}function Rn(b,D){const N=_r.get(b);if(N)for(const U of N)U(D)}let en=null;const Me="firebase-installations-store";let vr=null;function ot(){return vr||(vr=(0,ae.openDb)("firebase-installations-database",1,b=>{0===b.oldVersion&&b.createObjectStore(Me)})),vr}function Di(b,D){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,k.Z)(function*(b,D){const N=Kt(b),Z=(yield ot()).transaction(Me,"readwrite"),ie=Z.objectStore(Me),Oe=yield ie.get(N);return yield ie.put(D,N),yield Z.complete,(!Oe||Oe.fid!==D.fid)&&sn(b,D.fid),D})).apply(this,arguments)}function Kn(b){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,k.Z)(function*(b){const D=Kt(b),U=(yield ot()).transaction(Me,"readwrite");yield U.objectStore(Me).delete(D),yield U.complete})).apply(this,arguments)}function xr(b,D){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,k.Z)(function*(b,D){const N=Kt(b),Z=(yield ot()).transaction(Me,"readwrite"),ie=Z.objectStore(Me),Oe=yield ie.get(N),Ze=D(Oe);return void 0===Ze?yield ie.delete(N):yield ie.put(Ze,N),yield Z.complete,Ze&&(!Oe||Oe.fid!==Ze.fid)&&sn(b,Ze.fid),Ze})).apply(this,arguments)}function yn(b){return gi.apply(this,arguments)}function gi(){return(gi=(0,k.Z)(function*(b){let D;const N=yield xr(b,U=>{const Z=Wo(U),ie=Nt(b,Z);return D=ie.registrationPromise,ie.installationEntry});return""===N.fid?{installationEntry:yield D}:{installationEntry:N,registrationPromise:D}})).apply(this,arguments)}function Wo(b){return ln(b||{fid:gt(),registrationStatus:0})}function Nt(b,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(ge.create("app-offline"))};const N={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},U=function lt(b,D){return yt.apply(this,arguments)}(b,N);return{installationEntry:N,registrationPromise:U}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:wo(b)}:{installationEntry:D}}function yt(){return(yt=(0,k.Z)(function*(b,D){try{return Di(b,yield Fe(b,D))}catch(N){throw Te(N)&&409===N.customData.serverCode?yield Kn(b):yield Di(b,{fid:D.fid,registrationStatus:0}),N}})).apply(this,arguments)}function wo(b){return fs.apply(this,arguments)}function fs(){return(fs=(0,k.Z)(function*(b){let D=yield dt(b);for(;1===D.registrationStatus;)yield Tt(100),D=yield dt(b);if(0===D.registrationStatus){const{installationEntry:N,registrationPromise:U}=yield yn(b);return U||N}return D})).apply(this,arguments)}function dt(b){return xr(b,D=>{if(!D)throw ge.create("installation-not-found");return ln(D)})}function ln(b){return function wr(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function Ti(b,D){return B.apply(this,arguments)}function B(){return(B=(0,k.Z)(function*({appConfig:b,platformLoggerProvider:D},N){const U=q(b,N),Z=pt(b,N),ie=D.getImmediate({optional:!0});ie&&Z.append("x-firebase-client",ie.getPlatformInfoString());const Ze={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:X}})},Ke=yield J(()=>fetch(U,Ze));if(Ke.ok)return He(yield Ke.json());throw yield Ae("Generate Auth Token",Ke)})).apply(this,arguments)}function q(b,{fid:D}){return`${ye(b)}/${D}/authTokens:generate`}function W(b){return we.apply(this,arguments)}function we(){return(we=(0,k.Z)(function*(b,D=!1){let N;const U=yield xr(b.appConfig,ie=>{if(!it(ie))throw ge.create("not-registered");const Oe=ie.authToken;if(!D&&bt(Oe))return ie;if(1===Oe.requestStatus)return N=ee(b,D),ie;{if(!navigator.onLine)throw ge.create("app-offline");const Ze=on(ie);return N=_e(b,Ze),Ze}});return N?yield N:U.authToken})).apply(this,arguments)}function ee(b,D){return qe.apply(this,arguments)}function qe(){return(qe=(0,k.Z)(function*(b,D){let N=yield Ce(b.appConfig);for(;1===N.authToken.requestStatus;)yield Tt(100),N=yield Ce(b.appConfig);const U=N.authToken;return 0===U.requestStatus?W(b,D):U})).apply(this,arguments)}function Ce(b){return xr(b,D=>{if(!it(D))throw ge.create("not-registered");return function lr(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function _e(b,D){return $e.apply(this,arguments)}function $e(){return($e=(0,k.Z)(function*(b,D){try{const N=yield Ti(b,D),U=Object.assign(Object.assign({},D),{authToken:N});return yield Di(b.appConfig,U),N}catch(N){if(!Te(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const U=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Di(b.appConfig,U)}else yield Kn(b.appConfig);throw N}})).apply(this,arguments)}function it(b){return void 0!==b&&2===b.registrationStatus}function bt(b){return 2===b.requestStatus&&!function ft(b){const D=Date.now();return D<b.creationTime||b.creationTime+b.expiresIn<D+36e5}(b)}function on(b){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:D})}function zo(){return(zo=(0,k.Z)(function*(b){const D=b,{installationEntry:N,registrationPromise:U}=yield yn(D.appConfig);return U?U.catch(console.error):W(D).catch(console.error),N.fid})).apply(this,arguments)}function Eo(){return(Eo=(0,k.Z)(function*(b,D=!1){const N=b;return yield cr(N.appConfig),(yield W(N,D)).token})).apply(this,arguments)}function cr(b){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,k.Z)(function*(b){const{registrationPromise:D}=yield yn(b);D&&(yield D)})).apply(this,arguments)}function Pa(b){return ge.create("missing-app-config-values",{valueName:b})}const ei="installations",At=b=>{const D=b.getProvider("app").getImmediate(),N=function Qn(b){if(!b||!b.options)throw Pa("App Configuration");if(!b.name)throw Pa("App Name");const D=["projectId","apiKey","appId"];for(const N of D)if(!b.options[N])throw Pa(N);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(D);return{app:D,appConfig:N,platformLoggerProvider:(0,se._getProvider)(D,"platform-logger"),_delete:()=>Promise.resolve()}},zt=b=>{const D=b.getProvider("app").getImmediate(),N=(0,se._getProvider)(D,ei).getImmediate();return{getId:()=>function Ul(b){return zo.apply(this,arguments)}(N),getToken:Z=>function Vu(b){return Eo.apply(this,arguments)}(N,Z)}};(function Nn(){(0,se._registerComponent)(new de.wA(ei,At,"PUBLIC")),(0,se._registerComponent)(new de.wA("installations-internal",zt,"PRIVATE"))})(),(0,se.registerVersion)(le,H),(0,se.registerVersion)(le,H,"esm2017");const Rr="@firebase/remote-config",On=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Kg{constructor(D,N,U,Z){this.client=D,this.storage=N,this.storageCache=U,this.logger=Z}isCachedDataFresh(D,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-N,Z=U<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Z}.`),Z}fetch(D){var N=this;return(0,k.Z)(function*(){const[U,Z]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(Z&&N.isCachedDataFresh(D.cacheMaxAgeMillis,U))return Z;D.eTag=Z&&Z.eTag;const ie=yield N.client.fetch(D),Oe=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ie.status&&Oe.push(N.storage.setLastSuccessfulFetchResponse(ie)),yield Promise.all(Oe),ie})()}}function Nf(b=navigator){return b.languages&&b.languages[0]||b.language}class Ri{constructor(D,N,U,Z,ie,Oe){this.firebaseInstallations=D,this.sdkVersion=N,this.namespace=U,this.projectId=Z,this.apiKey=ie,this.appId=Oe}fetch(D){var N=this;return(0,k.Z)(function*(){const[U,Z]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),Oe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,Ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},Ke={sdk_version:N.sdkVersion,app_instance_id:U,app_instance_id_token:Z,app_id:N.appId,language_code:Nf()},Lt={method:"POST",headers:Ze,body:JSON.stringify(Ke)},nn=fetch(Oe,Lt),Hr=new Promise((yi,Ts)=>{D.signal.addEventListener(()=>{const No=new Error("The operation was aborted.");No.name="AbortError",Ts(No)})});let Wn;try{yield Promise.race([nn,Hr]),Wn=yield nn}catch(yi){let Ts="fetch-client-network";throw"AbortError"===yi.name&&(Ts="fetch-timeout"),On.create(Ts,{originalErrorMessage:yi.message})}let gn=Wn.status;const no=Wn.headers.get("ETag")||void 0;let mi,ma;if(200===Wn.status){let yi;try{yi=yield Wn.json()}catch(Ts){throw On.create("fetch-client-parse",{originalErrorMessage:Ts.message})}mi=yi.entries,ma=yi.state}if("INSTANCE_STATE_UNSPECIFIED"===ma?gn=500:"NO_CHANGE"===ma?gn=304:("NO_TEMPLATE"===ma||"EMPTY_CONFIG"===ma)&&(mi={}),304!==gn&&200!==gn)throw On.create("fetch-status",{httpStatus:gn});return{status:gn,eTag:no,config:mi}})()}}class md{constructor(D,N){this.client=D,this.storage=N}fetch(D){var N=this;return(0,k.Z)(function*(){const U=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(D,U)})()}attemptFetch(D,{throttleEndTimeMillis:N,backoffCount:U}){var Z=this;return(0,k.Z)(function*(){yield function Fa(b,D){return new Promise((N,U)=>{const Z=Math.max(D-Date.now(),0),ie=setTimeout(N,Z);b.addEventListener(()=>{clearTimeout(ie),U(On.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,N);try{const ie=yield Z.client.fetch(D);return yield Z.storage.deleteThrottleMetadata(),ie}catch(ie){if(!function Of(b){if(!(b instanceof re.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}(ie))throw ie;const Oe={throttleEndTimeMillis:Date.now()+(0,re.$s)(U),backoffCount:U+1};return yield Z.storage.setThrottleMetadata(Oe),Z.attemptFetch(D,Oe)}})()}}class Yg{constructor(D,N,U,Z,ie){this.app=D,this._client=N,this._storageCache=U,this._storage=Z,this._logger=ie,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function La(b,D){const N=b.target.error||void 0;return On.create(D,{originalErrorMessage:N&&N.message})}const Yo="app_namespace_store";class Qg{constructor(D,N,U,Z=function vd(){return new Promise((b,D)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=U=>{D(La(U,"storage-open"))},N.onsuccess=U=>{b(U.target.result)},N.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(Yo,{keyPath:"compositeKey"})}}catch(N){D(On.create("storage-open",{originalErrorMessage:N}))}})}()){this.appId=D,this.appName=N,this.namespace=U,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var N=this;return(0,k.Z)(function*(){const U=yield N.openDbPromise;return new Promise((Z,ie)=>{const Ze=U.transaction([Yo],"readonly").objectStore(Yo),Ke=N.createCompositeKey(D);try{const Lt=Ze.get(Ke);Lt.onerror=nn=>{ie(La(nn,"storage-get"))},Lt.onsuccess=nn=>{const Hr=nn.target.result;Z(Hr?Hr.value:void 0)}}catch(Lt){ie(On.create("storage-get",{originalErrorMessage:Lt&&Lt.message}))}})})()}set(D,N){var U=this;return(0,k.Z)(function*(){const Z=yield U.openDbPromise;return new Promise((ie,Oe)=>{const Ke=Z.transaction([Yo],"readwrite").objectStore(Yo),Lt=U.createCompositeKey(D);try{const nn=Ke.put({compositeKey:Lt,value:N});nn.onerror=Hr=>{Oe(La(Hr,"storage-set"))},nn.onsuccess=()=>{ie()}}catch(nn){Oe(On.create("storage-set",{originalErrorMessage:nn&&nn.message}))}})})()}delete(D){var N=this;return(0,k.Z)(function*(){const U=yield N.openDbPromise;return new Promise((Z,ie)=>{const Ze=U.transaction([Yo],"readwrite").objectStore(Yo),Ke=N.createCompositeKey(D);try{const Lt=Ze.delete(Ke);Lt.onerror=nn=>{ie(La(nn,"storage-delete"))},Lt.onsuccess=()=>{Z()}}catch(Lt){ie(On.create("storage-delete",{originalErrorMessage:Lt&&Lt.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class wd{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,k.Z)(function*(){const N=D.storage.getLastFetchStatus(),U=D.storage.getLastSuccessfulFetchTimestampMillis(),Z=D.storage.getActiveConfig(),ie=yield N;ie&&(D.lastFetchStatus=ie);const Oe=yield U;Oe&&(D.lastSuccessfulFetchTimestampMillis=Oe);const Ze=yield Z;Ze&&(D.activeConfig=Ze)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Ed(){return $l.apply(this,arguments)}function $l(){return($l=(0,k.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(b){return!1}})).apply(this,arguments)}!function Jg(){(0,se._registerComponent)(new de.wA("remote-config",function b(D,{instanceIdentifier:N}){const U=D.getProvider("app").getImmediate(),Z=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw On.create("registration-window");if(!(0,re.hl)())throw On.create("indexed-db-unavailable");const{projectId:ie,apiKey:Oe,appId:Ze}=U.options;if(!ie)throw On.create("registration-project-id");if(!Oe)throw On.create("registration-api-key");if(!Ze)throw On.create("registration-app-id");const Ke=new Qg(Ze,U.name,N=N||"firebase"),Lt=new wd(Ke),nn=new oe.Yd(Rr);nn.logLevel=oe.in.ERROR;const Hr=new Ri(Z,se.SDK_VERSION,N,ie,Oe,Ze),Wn=new md(Hr,Ke),gn=new Kg(Wn,Ke,Lt,nn),no=new Yg(U,gn,Lt,Ke,nn);return function cn(b){const D=(0,re.m9)(b);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(no),no},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(Rr,"0.3.4"),(0,se.registerVersion)(Rr,"0.3.4","esm2017")}();const Cd="/firebase-messaging-sw.js",To="/firebase-cloud-messaging-push-scope",Uu="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ao="google.c.a.c_id",Ba="google.c.a.c_l",Ws="google.c.a.ts",Bu="google.c.a.e";var Nr=(()=>{return(b=Nr||(Nr={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",Nr;var b})();function Ni(b){const D=new Uint8Array(b);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Gl(b){const N=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(N),Z=new Uint8Array(U.length);for(let ie=0;ie<U.length;++ie)Z[ie]=U.charCodeAt(ie);return Z}const ni="fcm_token_details_db",bd="fcm_token_object_Store";function ju(b){return Dd.apply(this,arguments)}function Dd(){return Dd=(0,k.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ie=>ie.name).includes(ni))return null;let D=null;return(yield(0,ae.openDb)(ni,5,function(){var U=(0,k.Z)(function*(Z){var ie;if(Z.oldVersion<2||!Z.objectStoreNames.contains(bd))return;const Oe=Z.transaction.objectStore(bd),Ze=yield Oe.index("fcmSenderId").get(b);if(yield Oe.clear(),Ze)if(2===Z.oldVersion){const Ke=Ze;if(!Ke.auth||!Ke.p256dh||!Ke.endpoint)return;D={token:Ke.fcmToken,createTime:null!==(ie=Ke.createTime)&&void 0!==ie?ie:Date.now(),subscriptionOptions:{auth:Ke.auth,p256dh:Ke.p256dh,endpoint:Ke.endpoint,swScope:Ke.swScope,vapidKey:"string"==typeof Ke.vapidKey?Ke.vapidKey:Ni(Ke.vapidKey)}}}else if(3===Z.oldVersion){const Ke=Ze;D={token:Ke.fcmToken,createTime:Ke.createTime,subscriptionOptions:{auth:Ni(Ke.auth),p256dh:Ni(Ke.p256dh),endpoint:Ke.endpoint,swScope:Ke.swScope,vapidKey:Ni(Ke.vapidKey)}}}else if(4===Z.oldVersion){const Ke=Ze;D={token:Ke.fcmToken,createTime:Ke.createTime,subscriptionOptions:{auth:Ni(Ke.auth),p256dh:Ni(Ke.p256dh),endpoint:Ke.endpoint,swScope:Ke.swScope,vapidKey:Ni(Ke.vapidKey)}}}});return function(Z){return U.apply(this,arguments)}}())).close(),yield(0,ae.deleteDb)(ni),yield(0,ae.deleteDb)("fcm_vapid_details_db"),yield(0,ae.deleteDb)("undefined"),ql(D)?D:null}),Dd.apply(this,arguments)}function ql(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:D}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const zs="firebase-messaging-store";let Ad=null;function an(){return Ad||(Ad=(0,ae.openDb)("firebase-messaging-database",1,b=>{0===b.oldVersion&&b.createObjectStore(zs)})),Ad}function kf(b){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,k.Z)(function*(b){const D=Qi(b),U=yield(yield an()).transaction(zs).objectStore(zs).get(D);if(U)return U;{const Z=yield ju(b.appConfig.senderId);if(Z)return yield Xn(b,Z),Z}})).apply(this,arguments)}function Xn(b,D){return jn.apply(this,arguments)}function jn(){return(jn=(0,k.Z)(function*(b,D){const N=Qi(b),Z=(yield an()).transaction(zs,"readwrite");return yield Z.objectStore(zs).put(D,N),yield Z.complete,D})).apply(this,arguments)}function gs(b){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,k.Z)(function*(b){const D=Qi(b),U=(yield an()).transaction(zs,"readwrite");yield U.objectStore(zs).delete(D),yield U.complete})).apply(this,arguments)}function Qi({appConfig:b}){return b.appId}const er=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ji(b,D){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,k.Z)(function*(b,D){const N=yield Ha(b),U=ea(D),Z={method:"POST",headers:N,body:JSON.stringify(U)};let ie;try{ie=yield(yield fetch(hr(b.appConfig),Z)).json()}catch(Oe){throw er.create("token-subscribe-failed",{errorInfo:Oe})}if(ie.error)throw er.create("token-subscribe-failed",{errorInfo:ie.error.message});if(!ie.token)throw er.create("token-subscribe-no-token");return ie.token})).apply(this,arguments)}function Ur(b,D){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,k.Z)(function*(b,D){const N=yield Ha(b),U=ea(D.subscriptionOptions),Z={method:"PATCH",headers:N,body:JSON.stringify(U)};let ie;try{ie=yield(yield fetch(`${hr(b.appConfig)}/${D.token}`,Z)).json()}catch(Oe){throw er.create("token-update-failed",{errorInfo:Oe})}if(ie.error)throw er.create("token-update-failed",{errorInfo:ie.error.message});if(!ie.token)throw er.create("token-update-no-token");return ie.token})).apply(this,arguments)}function Xo(b,D){return mt.apply(this,arguments)}function mt(){return(mt=(0,k.Z)(function*(b,D){const U={method:"DELETE",headers:yield Ha(b)};try{const ie=yield(yield fetch(`${hr(b.appConfig)}/${D}`,U)).json();if(ie.error)throw er.create("token-unsubscribe-failed",{errorInfo:ie.error.message})}catch(Z){throw er.create("token-unsubscribe-failed",{errorInfo:Z})}})).apply(this,arguments)}function hr({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Ha(b){return $a.apply(this,arguments)}function $a(){return($a=(0,k.Z)(function*({appConfig:b,installations:D}){const N=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function ea({p256dh:b,auth:D,endpoint:N,vapidKey:U}){const Z={web:{endpoint:N,auth:D,p256dh:b}};return U!==Uu&&(Z.web.applicationPubKey=U),Z}const ta=6048e5;function zl(b){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,k.Z)(function*(b){const D=yield ri(b.swRegistration,b.vapidKey),N={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:D.endpoint,auth:Ni(D.getKey("auth")),p256dh:Ni(D.getKey("p256dh"))},U=yield kf(b.firebaseDependencies);if(U){if(Gu(U.subscriptionOptions,N))return Date.now()>=U.createTime+ta?$u(b,{token:U.token,createTime:Date.now(),subscriptionOptions:N}):U.token;try{yield Xo(b.firebaseDependencies,U.token)}catch(Z){console.warn(Z)}return So(b.firebaseDependencies,N)}return So(b.firebaseDependencies,N)})).apply(this,arguments)}function xe(b){return xt.apply(this,arguments)}function xt(){return(xt=(0,k.Z)(function*(b){const D=yield kf(b.firebaseDependencies);D&&(yield Xo(b.firebaseDependencies,D.token),yield gs(b.firebaseDependencies));const N=yield b.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function $u(b,D){return dn.apply(this,arguments)}function dn(){return(dn=(0,k.Z)(function*(b,D){try{const N=yield Ur(b.firebaseDependencies,D),U=Object.assign(Object.assign({},D),{token:N,createTime:Date.now()});return yield Xn(b.firebaseDependencies,U),N}catch(N){throw yield xe(b),N}})).apply(this,arguments)}function So(b,D){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,k.Z)(function*(b,D){const U={token:yield Ji(b,D),createTime:Date.now(),subscriptionOptions:D};return yield Xn(b,U),U.token})).apply(this,arguments)}function ri(b,D){return ms.apply(this,arguments)}function ms(){return(ms=(0,k.Z)(function*(b,D){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Gl(D)})})).apply(this,arguments)}function Gu(b,D){return D.vapidKey===b.vapidKey&&D.endpoint===b.endpoint&&D.auth===b.auth&&D.p256dh===b.p256dh}function qu(b){const D={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function Wu(b,D){if(!D.notification)return;b.notification={};const N=D.notification.title;N&&(b.notification.title=N);const U=D.notification.body;U&&(b.notification.body=U);const Z=D.notification.image;Z&&(b.notification.image=Z)}(D,b),function na(b,D){!D.data||(b.data=D.data)}(D,b),function Ga(b,D){if(!D.fcmOptions)return;b.fcmOptions={};const N=D.fcmOptions.link;N&&(b.fcmOptions.link=N);const U=D.fcmOptions.analytics_label;U&&(b.fcmOptions.analyticsLabel=U)}(D,b),D}function tr(b){return"object"==typeof b&&!!b&&Ao in b}function Oi(b,D){const N=[];for(let U=0;U<b.length;U++)N.push(b.charAt(U)),U<D.length&&N.push(D.charAt(U));return N.join("")}function ys(b){return er.create("missing-app-config-values",{valueName:b})}Oi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Oi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Pi{constructor(D,N,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function zu(b){if(!b||!b.options)throw ys("App Configuration Object");if(!b.name)throw ys("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:N}=b;for(const U of D)if(!N[U])throw ys(U);return{appName:b.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Z,installations:N,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Sd(b){return ra.apply(this,arguments)}function ra(){return(ra=(0,k.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(Cd,{scope:To}),b.swRegistration.update().catch(()=>{})}catch(D){throw er.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function Zu(b,D){return qa.apply(this,arguments)}function qa(){return(qa=(0,k.Z)(function*(b,D){if(!D&&!b.swRegistration&&(yield Sd(b)),D||!b.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw er.create("invalid-sw-registration");b.swRegistration=D}})).apply(this,arguments)}function ia(b,D){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,k.Z)(function*(b,D){D?b.vapidKey=D:b.vapidKey||(b.vapidKey=Uu)})).apply(this,arguments)}function Za(){return(Za=(0,k.Z)(function*(b,D){if(!navigator)throw er.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw er.create("permission-blocked");return yield ia(b,null==D?void 0:D.vapidKey),yield Zu(b,null==D?void 0:D.serviceWorkerRegistration),zl(b)})).apply(this,arguments)}function Zl(b,D,N){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,k.Z)(function*(b,D,N){const U=sa(D);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:N[Ao],message_name:N[Ba],message_time:N[Ws],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function sa(b){switch(b){case Nr.NOTIFICATION_CLICKED:return"notification_open";case Nr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ka(){return(Ka=(0,k.Z)(function*(b,D){const N=D.data;if(!N.isFirebaseMessaging)return;b.onMessageHandler&&N.messageType===Nr.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(qu(N)):b.onMessageHandler.next(qu(N)));const U=N.data;tr(U)&&"1"===U[Bu]&&(yield Zl(b,N.messageType,U))})).apply(this,arguments)}const Yl="@firebase/messaging",Ku=b=>{const D=new Pi(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function xd(b,D){return Ka.apply(this,arguments)}(D,N)),D},Md=b=>{const D=b.getProvider("messaging").getImmediate();return{getToken:U=>function za(b,D){return Za.apply(this,arguments)}(D,U)}};function fr(){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,k.Z)(function*(){try{yield(0,re.eu)()}catch(b){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Xg(){(0,se._registerComponent)(new de.wA("messaging",Ku,"PUBLIC")),(0,se._registerComponent)(new de.wA("messaging-internal",Md,"PRIVATE")),(0,se.registerVersion)(Yl,"0.9.9"),(0,se.registerVersion)(Yl,"0.9.9","esm2017")}();const Ys="analytics",Yu="firebase_id",Nd="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_s="https://www.googletagmanager.com/gtag/js",In=new oe.Yd("@firebase/analytics");function Bf(b){return Promise.all(b.map(D=>D.catch(N=>N)))}function em(b,D){const N=document.createElement("script");N.src=`${_s}?l=${b}&id=${D}`,N.async=!0,document.head.appendChild(N)}function Ju(b,D,N,U,Z,ie){return Od.apply(this,arguments)}function Od(){return(Od=(0,k.Z)(function*(b,D,N,U,Z,ie){const Oe=U[Z];try{if(Oe)yield D[Oe];else{const Ke=(yield Bf(N)).find(Lt=>Lt.measurementId===Z);Ke&&(yield D[Ke.appId])}}catch(Ze){In.error(Ze)}b("config",Z,ie)})).apply(this,arguments)}function Xa(b,D,N,U,Z){return Pd.apply(this,arguments)}function Pd(){return(Pd=(0,k.Z)(function*(b,D,N,U,Z){try{let ie=[];if(Z&&Z.send_to){let Oe=Z.send_to;Array.isArray(Oe)||(Oe=[Oe]);const Ze=yield Bf(N);for(const Ke of Oe){const Lt=Ze.find(Hr=>Hr.measurementId===Ke),nn=Lt&&D[Lt.appId];if(!nn){ie=[];break}ie.push(nn)}}0===ie.length&&(ie=Object.values(D)),yield Promise.all(ie),b("event",U,Z||{})}catch(ie){In.error(ie)}})).apply(this,arguments)}function Qs(){const b=window.document.getElementsByTagName("script");for(const D of Object.values(b))if(D.src&&D.src.includes(_s))return D;return null}const Xe=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),aa=new class oa{constructor(D={},N=1e3){this.throttleMetadata=D,this.intervalMillis=N}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,N){this.throttleMetadata[D]=N}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function $n(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function nr(b){return jr.apply(this,arguments)}function jr(){return(jr=(0,k.Z)(function*(b){var D;const{appId:N,apiKey:U}=b,Z={method:"GET",headers:$n(U)},ie=Nd.replace("{app-id}",N),Oe=yield fetch(ie,Z);if(200!==Oe.status&&304!==Oe.status){let Ze="";try{const Ke=yield Oe.json();(null===(D=Ke.error)||void 0===D?void 0:D.message)&&(Ze=Ke.error.message)}catch(Ke){}throw Xe.create("config-fetch-failed",{httpStatus:Oe.status,responseMessage:Ze})}return Oe.json()})).apply(this,arguments)}function _t(b){return ki.apply(this,arguments)}function ki(){return(ki=(0,k.Z)(function*(b,D=aa,N){const{appId:U,apiKey:Z,measurementId:ie}=b.options;if(!U)throw Xe.create("no-app-id");if(!Z){if(ie)return{measurementId:ie,appId:U};throw Xe.create("no-api-key")}const Oe=D.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ze=new ec;return setTimeout((0,k.Z)(function*(){Ze.abort()}),void 0!==N?N:6e4),ua({appId:U,apiKey:Z,measurementId:ie},Oe,Ze,D)})).apply(this,arguments)}function ua(b,D,N){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,k.Z)(function*(b,{throttleEndTimeMillis:D,backoffCount:N},U,Z=aa){const{appId:ie,measurementId:Oe}=b;try{yield jf(U,D)}catch(Ze){if(Oe)return In.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Oe} provided in the "measurementId" field in the local Firebase config. [${Ze.message}]`),{appId:ie,measurementId:Oe};throw Ze}try{const Ze=yield nr(b);return Z.deleteThrottleMetadata(ie),Ze}catch(Ze){if(!eu(Ze)){if(Z.deleteThrottleMetadata(ie),Oe)return In.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Oe} provided in the "measurementId" field in the local Firebase config. [${Ze.message}]`),{appId:ie,measurementId:Oe};throw Ze}const Ke=503===Number(Ze.customData.httpStatus)?(0,re.$s)(N,Z.intervalMillis,30):(0,re.$s)(N,Z.intervalMillis),Lt={throttleEndTimeMillis:Date.now()+Ke,backoffCount:N+1};return Z.setThrottleMetadata(ie,Lt),In.debug(`Calling attemptFetch again in ${Ke} millis`),ua(b,Lt,U,Z)}})).apply(this,arguments)}function jf(b,D){return new Promise((N,U)=>{const Z=Math.max(D-Date.now(),0),ie=setTimeout(N,Z);b.addEventListener(()=>{clearTimeout(ie),U(Xe.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function eu(b){if(!(b instanceof re.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}class ec{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function tu(){return vs.apply(this,arguments)}function vs(){return(vs=(0,k.Z)(function*(){if(!(0,re.hl)())return In.warn(Xe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(b){return In.warn(Xe.create("indexeddb-unavailable",{errorInfo:b}).message),!1}return!0})).apply(this,arguments)}function ii(){return(ii=(0,k.Z)(function*(b,D,N,U,Z,ie,Oe){var Ze;const Ke=_t(b);Ke.then(gn=>{N[gn.measurementId]=gn.appId,b.options.measurementId&&gn.measurementId!==b.options.measurementId&&In.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${gn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(gn=>In.error(gn)),D.push(Ke);const Lt=tu().then(gn=>{if(gn)return U.getId()}),[nn,Hr]=yield Promise.all([Ke,Lt]);Qs()||em(ie,nn.measurementId),Z("js",new Date);const Wn=null!==(Ze=null==Oe?void 0:Oe.config)&&void 0!==Ze?Ze:{};return Wn.origin="firebase",Wn.update=!0,null!=Hr&&(Wn[Yu]=Hr),Z("config",nn.measurementId,Wn),nn.measurementId})).apply(this,arguments)}class kd{constructor(D){this.app=D}_delete(){return delete Xi[this.app.options.appId],Promise.resolve()}}let Xi={},tc=[];const Xu={};let tl,kn,el="dataLayer",bn=!1;function ws(b,D,N){!function Js(){const b=[];if((0,re.ru)()&&b.push("This is a browser extension environment."),(0,re.zI)()||b.push("Cookies are not available."),b.length>0){const D=b.map((U,Z)=>`(${Z+1}) ${U}`).join(" "),N=Xe.create("invalid-analytics-context",{errorInfo:D});In.warn(N.message)}}();const U=b.options.appId;if(!U)throw Xe.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw Xe.create("no-api-key");In.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Xi[U])throw Xe.create("already-exists",{id:U});if(!bn){!function Ja(b){let D=[];Array.isArray(window[b])?D=window[b]:window[b]=D}(el);const{wrappedGtag:ie,gtagCore:Oe}=function Xl(b,D,N,U,Z){let ie=function(...Oe){window[U].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(ie=window[Z]),window[Z]=function tm(b,D,N,U){function ie(){return(ie=(0,k.Z)(function*(Oe,Ze,Ke){try{"event"===Oe?yield Xa(b,D,N,Ze,Ke):"config"===Oe?yield Ju(b,D,N,U,Ze,Ke):b("set",Ze)}catch(Lt){In.error(Lt)}})).apply(this,arguments)}return function Z(Oe,Ze,Ke){return ie.apply(this,arguments)}}(ie,b,D,N),{gtagCore:ie,wrappedGtag:window[Z]}}(Xi,tc,Xu,el,"gtag");kn=ie,tl=Oe,bn=!0}return Xi[U]=function nu(b,D,N,U,Z,ie,Oe){return ii.apply(this,arguments)}(b,tc,Xu,D,tl,el,N),new kd(b)}function xo(){return(xo=(0,k.Z)(function*(b,D,N,U,Z){if(Z&&Z.global)b("event",N,U);else{const ie=yield D;b("event",N,Object.assign(Object.assign({},U),{send_to:ie}))}})).apply(this,arguments)}function rc(){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,k.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(b){return!1}})).apply(this,arguments)}const Mo="@firebase/analytics";!function Gn(){(0,se._registerComponent)(new de.wA(Ys,(D,{options:N})=>ws(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,se._registerComponent)(new de.wA("analytics-internal",function b(D){try{const N=D.getProvider(Ys).getImmediate();return{logEvent:(U,Z,ie)=>function sc(b,D,N,U){b=(0,re.m9)(b),function An(b,D,N,U,Z){return xo.apply(this,arguments)}(kn,Xi[b.app.options.appId],D,N,U).catch(Z=>In.error(Z))}(N,U,Z,ie)}}catch(N){throw Xe.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,se.registerVersion)(Mo,"0.7.5"),(0,se.registerVersion)(Mo,"0.7.5","esm2017")}();var Wf=F(4408),rm=F(7565);const Li=new class zf extends rm.v{}(class Is extends Wf.o{constructor(D,N){super(D,N),this.scheduler=D,this.work=N}schedule(D,N=0){return N>0?super.schedule(D,N):(this.delay=N,this.state=D,this.scheduler.flush(this),this)}execute(D,N){return N>0||this.closed?super.execute(D,N):this._execute(D,N)}requestAsyncId(D,N,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(D,N,U):D.flush(this)}});var Ld=F(4986),ou=F(8505),ca=F(9468),Vd=F(5363);const Ud=new h.GfV("7.2.1"),da="__angularfire_symbol__analyticsIsSupportedValue",ha="__angularfire_symbol__analyticsIsSupported",Bd="__angularfire_symbol__remoteConfigIsSupportedValue",rl="__angularfire_symbol__remoteConfigIsSupported",rr="__angularfire_symbol__messagingIsSupportedValue",fa="__angularfire_symbol__messagingIsSupported";function jd(b,D,N){if(D){if(1===D.length)return D[0];const ie=D.filter(Oe=>Oe.app===N);if(1===ie.length)return ie[0]}return N.container.getProvider(b).getImmediate({optional:!0})}globalThis[ha]||(globalThis[ha]=rc().then(b=>globalThis[da]=b).catch(()=>globalThis[da]=!1)),globalThis[fa]||(globalThis[fa]=fr().then(b=>globalThis[rr]=b).catch(()=>globalThis[rr]=!1)),globalThis[rl]||(globalThis[rl]=Ed().then(b=>globalThis[Bd]=b).catch(()=>globalThis[Bd]=!1));const Hd=(b,D)=>{const N=D?[D]:(0,Q.C6)(),U=[];return N.forEach(Z=>{Z.container.getProvider(b).instances.forEach(Oe=>{U.includes(Oe)||U.push(Oe)})}),U};function pa(){}class $d{constructor(D,N=Li){this.zone=D,this.delegate=N}now(){return this.delegate.now()}schedule(D,N,U){const Z=this.zone;return this.delegate.schedule(function(Oe){Z.runGuarded(()=>{D.apply(this,[Oe])})},N,U)}}class il{constructor(D){this.zone=D,this.task=null}call(D,N){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",pa,{},pa,pa)),N.pipe((0,ou.b)({next:U,complete:U,error:U})).subscribe(D).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let to=(()=>{class b{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new $d(Zone.current)),this.insideAngular=N.run(()=>new $d(Zone.current,Ld.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(N){return new(N||b)(h.LFG(h.R0b))},b.\u0275prov=h.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function qn(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function ga(b){return qn(),function sl(b){return function(N){return(N=N.lift(new il(b.ngZone))).pipe((0,ca.R)(b.outsideAngular),(0,Vd.Q)(b.insideAngular))}}(qn())(b)}},2090:(ut,be,F)=>{"use strict";F.d(be,{BH:()=>je,LL:()=>ce,ZR:()=>Fe,gQ:()=>Me,zI:()=>pe,hu:()=>Q,g5:()=>k,US:()=>de,tV:()=>le,h$:()=>oe,$s:()=>dt,r3:()=>Jr,Sg:()=>De,ne:()=>vr,p$:()=>H,vZ:()=>en,ZB:()=>$,gK:()=>xr,pd:()=>hs,m9:()=>Ti,z$:()=>Pe,GJ:()=>sn,jU:()=>ne,ru:()=>ge,d:()=>ye,xb:()=>Rn,w1:()=>He,hl:()=>pt,uI:()=>Be,UG:()=>K,Yr:()=>rt,b$:()=>Te,G6:()=>Ye,Mn:()=>Ae,w9:()=>_r,cI:()=>Sr,UI:()=>bi,xO:()=>vo,zd:()=>Xr,DV:()=>Ii,ug:()=>Nt,dS:()=>Wo,Pz:()=>st,Dv:()=>Gs,Wj:()=>yn,lb:()=>gi,eu:()=>J});const Q=function(B,q){if(!B)throw k(q)},k=function(B){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+B)},se=function(B){const q=[];let W=0;for(let we=0;we<B.length;we++){let ee=B.charCodeAt(we);ee<128?q[W++]=ee:ee<2048?(q[W++]=ee>>6|192,q[W++]=63&ee|128):55296==(64512&ee)&&we+1<B.length&&56320==(64512&B.charCodeAt(we+1))?(ee=65536+((1023&ee)<<10)+(1023&B.charCodeAt(++we)),q[W++]=ee>>18|240,q[W++]=ee>>12&63|128,q[W++]=ee>>6&63|128,q[W++]=63&ee|128):(q[W++]=ee>>12|224,q[W++]=ee>>6&63|128,q[W++]=63&ee|128)}return q},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,q){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const W=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,we=[];for(let ee=0;ee<B.length;ee+=3){const qe=B[ee],Ce=ee+1<B.length,_e=Ce?B[ee+1]:0,$e=ee+2<B.length,it=$e?B[ee+2]:0;let on=(15&_e)<<2|it>>6,lr=63&it;$e||(lr=64,Ce||(on=64)),we.push(W[qe>>2],W[(3&qe)<<4|_e>>4],W[on],W[lr])}return we.join("")},encodeString(B,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(B):this.encodeByteArray(se(B),q)},decodeString(B,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(B):function(B){const q=[];let W=0,we=0;for(;W<B.length;){const ee=B[W++];if(ee<128)q[we++]=String.fromCharCode(ee);else if(ee>191&&ee<224){const qe=B[W++];q[we++]=String.fromCharCode((31&ee)<<6|63&qe)}else if(ee>239&&ee<365){const $e=((7&ee)<<18|(63&B[W++])<<12|(63&B[W++])<<6|63&B[W++])-65536;q[we++]=String.fromCharCode(55296+($e>>10)),q[we++]=String.fromCharCode(56320+(1023&$e))}else{const qe=B[W++],Ce=B[W++];q[we++]=String.fromCharCode((15&ee)<<12|(63&qe)<<6|63&Ce)}}return q.join("")}(this.decodeStringToByteArray(B,q))},decodeStringToByteArray(B,q){this.init_();const W=q?this.charToByteMapWebSafe_:this.charToByteMap_,we=[];for(let ee=0;ee<B.length;){const qe=W[B.charAt(ee++)],_e=ee<B.length?W[B.charAt(ee)]:0;++ee;const it=ee<B.length?W[B.charAt(ee)]:64;++ee;const ft=ee<B.length?W[B.charAt(ee)]:64;if(++ee,null==qe||null==_e||null==it||null==ft)throw Error();we.push(qe<<2|_e>>4),64!==it&&(we.push(_e<<4&240|it>>2),64!==ft&&we.push(it<<6&192|ft))}return we},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},oe=function(B){const q=se(B);return de.encodeByteArray(q,!0)},ae=function(B){return oe(B).replace(/\./g,"")},le=function(B){try{return de.decodeString(B,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function H(B){return $(void 0,B)}function $(B,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return q}for(const W in q)!q.hasOwnProperty(W)||!X(W)||(B[W]=$(B[W],q[W]));return B}function X(B){return"__proto__"!==B}class je{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,W)=>{this.resolve=q,this.reject=W})}wrapCallback(q){return(W,we)=>{W?this.reject(W):this.resolve(we),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(W):q(W,we))}}}function De(B,q){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const we=q||"demo-project",ee=B.iat||0,qe=B.sub||B.user_id;if(!qe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ce=Object.assign({iss:`https://securetoken.google.com/${we}`,aud:we,iat:ee,exp:ee+3600,auth_time:ee,sub:qe,user_id:qe,firebase:{sign_in_provider:"custom",identities:{}}},B);return[ae(JSON.stringify({alg:"none",type:"JWT"})),ae(JSON.stringify(Ce)),""].join(".")}function Pe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Be(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function K(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(B){return!1}}function ne(){return"object"==typeof self&&self.self===self}function ge(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function Te(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ye(){return Pe().indexOf("Electron/")>=0}function He(){const B=Pe();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function Ae(){return Pe().indexOf("MSAppHost/")>=0}function rt(){return!1}function Ye(){return!K()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pt(){return"object"==typeof indexedDB}function J(){return new Promise((B,q)=>{try{let W=!0;const we="validate-browser-context-for-indexeddb-analytics-module",ee=self.indexedDB.open(we);ee.onsuccess=()=>{ee.result.close(),W||self.indexedDB.deleteDatabase(we),B(!0)},ee.onupgradeneeded=()=>{W=!1},ee.onerror=()=>{var qe;q((null===(qe=ee.error)||void 0===qe?void 0:qe.message)||"")}}catch(W){q(W)}})}function pe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Fe extends Error{constructor(q,W,we){super(W),this.code=q,this.customData=we,this.name="FirebaseError",Object.setPrototypeOf(this,Fe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ce.prototype.create)}}class ce{constructor(q,W,we){this.service=q,this.serviceName=W,this.errors=we}create(q,...W){const we=W[0]||{},ee=`${this.service}/${q}`,qe=this.errors[q],Ce=qe?function Tt(B,q){return B.replace(jt,(W,we)=>{const ee=q[we];return null!=ee?String(ee):`<${we}?>`})}(qe,we):"Error";return new Fe(ee,`${this.serviceName}: ${Ce} (${ee}).`,we)}}const jt=/\{\$([^}]+)}/g;function Sr(B){return JSON.parse(B)}function st(B){return JSON.stringify(B)}const gt=function(B){let q={},W={},we={},ee="";try{const qe=B.split(".");q=Sr(le(qe[0])||""),W=Sr(le(qe[1])||""),ee=qe[2],we=W.d||{},delete W.d}catch(qe){}return{header:q,claims:W,data:we,signature:ee}},_r=function(B){const W=gt(B).claims;return!!W&&"object"==typeof W&&W.hasOwnProperty("iat")},sn=function(B){const q=gt(B).claims;return"object"==typeof q&&!0===q.admin};function Jr(B,q){return Object.prototype.hasOwnProperty.call(B,q)}function Ii(B,q){if(Object.prototype.hasOwnProperty.call(B,q))return B[q]}function Rn(B){for(const q in B)if(Object.prototype.hasOwnProperty.call(B,q))return!1;return!0}function bi(B,q,W){const we={};for(const ee in B)Object.prototype.hasOwnProperty.call(B,ee)&&(we[ee]=q.call(W,B[ee],ee,B));return we}function en(B,q){if(B===q)return!0;const W=Object.keys(B),we=Object.keys(q);for(const ee of W){if(!we.includes(ee))return!1;const qe=B[ee],Ce=q[ee];if(Wt(qe)&&Wt(Ce)){if(!en(qe,Ce))return!1}else if(qe!==Ce)return!1}for(const ee of we)if(!W.includes(ee))return!1;return!0}function Wt(B){return null!==B&&"object"==typeof B}function vo(B){const q=[];for(const[W,we]of Object.entries(B))Array.isArray(we)?we.forEach(ee=>{q.push(encodeURIComponent(W)+"="+encodeURIComponent(ee))}):q.push(encodeURIComponent(W)+"="+encodeURIComponent(we));return q.length?"&"+q.join("&"):""}function Xr(B){const q={};return B.replace(/^\?/,"").split("&").forEach(we=>{if(we){const[ee,qe]=we.split("=");q[decodeURIComponent(ee)]=decodeURIComponent(qe)}}),q}function hs(B){const q=B.indexOf("?");if(!q)return"";const W=B.indexOf("#",q);return B.substring(q,W>0?W:void 0)}class Me{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let q=1;q<this.blockSize;++q)this.pad_[q]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(q,W){W||(W=0);const we=this.W_;if("string"==typeof q)for(let ft=0;ft<16;ft++)we[ft]=q.charCodeAt(W)<<24|q.charCodeAt(W+1)<<16|q.charCodeAt(W+2)<<8|q.charCodeAt(W+3),W+=4;else for(let ft=0;ft<16;ft++)we[ft]=q[W]<<24|q[W+1]<<16|q[W+2]<<8|q[W+3],W+=4;for(let ft=16;ft<80;ft++){const on=we[ft-3]^we[ft-8]^we[ft-14]^we[ft-16];we[ft]=4294967295&(on<<1|on>>>31)}let it,bt,ee=this.chain_[0],qe=this.chain_[1],Ce=this.chain_[2],_e=this.chain_[3],$e=this.chain_[4];for(let ft=0;ft<80;ft++){ft<40?ft<20?(it=_e^qe&(Ce^_e),bt=1518500249):(it=qe^Ce^_e,bt=1859775393):ft<60?(it=qe&Ce|_e&(qe|Ce),bt=2400959708):(it=qe^Ce^_e,bt=3395469782);const on=(ee<<5|ee>>>27)+it+$e+bt+we[ft]&4294967295;$e=_e,_e=Ce,Ce=4294967295&(qe<<30|qe>>>2),qe=ee,ee=on}this.chain_[0]=this.chain_[0]+ee&4294967295,this.chain_[1]=this.chain_[1]+qe&4294967295,this.chain_[2]=this.chain_[2]+Ce&4294967295,this.chain_[3]=this.chain_[3]+_e&4294967295,this.chain_[4]=this.chain_[4]+$e&4294967295}update(q,W){if(null==q)return;void 0===W&&(W=q.length);const we=W-this.blockSize;let ee=0;const qe=this.buf_;let Ce=this.inbuf_;for(;ee<W;){if(0===Ce)for(;ee<=we;)this.compress_(q,ee),ee+=this.blockSize;if("string"==typeof q){for(;ee<W;)if(qe[Ce]=q.charCodeAt(ee),++Ce,++ee,Ce===this.blockSize){this.compress_(qe),Ce=0;break}}else for(;ee<W;)if(qe[Ce]=q[ee],++Ce,++ee,Ce===this.blockSize){this.compress_(qe),Ce=0;break}}this.inbuf_=Ce,this.total_+=W}digest(){const q=[];let W=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ee=this.blockSize-1;ee>=56;ee--)this.buf_[ee]=255&W,W/=256;this.compress_(this.buf_);let we=0;for(let ee=0;ee<5;ee++)for(let qe=24;qe>=0;qe-=8)q[we]=this.chain_[ee]>>qe&255,++we;return q}}function vr(B,q){const W=new ot(B,q);return W.subscribe.bind(W)}class ot{constructor(q,W){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=W,this.task.then(()=>{q(this)}).catch(we=>{this.error(we)})}next(q){this.forEachObserver(W=>{W.next(q)})}error(q){this.forEachObserver(W=>{W.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,W,we){let ee;if(void 0===q&&void 0===W&&void 0===we)throw new Error("Missing Observer.");ee=function Ft(B,q){if("object"!=typeof B||null===B)return!1;for(const W of q)if(W in B&&"function"==typeof B[W])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:W,complete:we},void 0===ee.next&&(ee.next=Kn),void 0===ee.error&&(ee.error=Kn),void 0===ee.complete&&(ee.complete=Kn);const qe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ee.error(this.finalError):ee.complete()}catch(Ce){}}),this.observers.push(ee),qe}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let W=0;W<this.observers.length;W++)this.sendOne(W,q)}sendOne(q,W){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{W(this.observers[q])}catch(we){"undefined"!=typeof console&&console.error&&console.error(we)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kn(){}const Gs=function(B,q,W,we){let ee;if(we<q?ee="at least "+q:we>W&&(ee=0===W?"none":"no more than "+W),ee)throw new Error(B+" failed: Was called with "+we+(1===we?" argument.":" arguments.")+" Expects "+ee+".")};function xr(B,q){return`${B} failed: ${q} argument `}function yn(B,q,W,we){if((!we||W)&&"function"!=typeof W)throw new Error(xr(B,q)+"must be a valid function.")}function gi(B,q,W,we){if((!we||W)&&("object"!=typeof W||null===W))throw new Error(xr(B,q)+"must be a valid context object.")}const Wo=function(B){const q=[];let W=0;for(let we=0;we<B.length;we++){let ee=B.charCodeAt(we);if(ee>=55296&&ee<=56319){const qe=ee-55296;we++,Q(we<B.length,"Surrogate pair missing trail surrogate."),ee=65536+(qe<<10)+(B.charCodeAt(we)-56320)}ee<128?q[W++]=ee:ee<2048?(q[W++]=ee>>6|192,q[W++]=63&ee|128):ee<65536?(q[W++]=ee>>12|224,q[W++]=ee>>6&63|128,q[W++]=63&ee|128):(q[W++]=ee>>18|240,q[W++]=ee>>12&63|128,q[W++]=ee>>6&63|128,q[W++]=63&ee|128)}return q},Nt=function(B){let q=0;for(let W=0;W<B.length;W++){const we=B.charCodeAt(W);we<128?q++:we<2048?q+=2:we>=55296&&we<=56319?(q+=4,W++):q+=3}return q};function dt(B,q=1e3,W=2){const we=q*Math.pow(W,B),ee=Math.round(.5*we*(Math.random()-.5)*2);return Math.min(144e5,we+ee)}function Ti(B){return B&&B._delegate?B._delegate:B}},3654:(ut,be,F)=>{"use strict";var h=F(5e3);let Q=null;function k(){return Q}const oe=new h.OlP("DocumentToken");let ae=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function le(){return(0,h.LFG)($)}()},providedIn:"platform"}),n})();const H=new h.OlP("Location Initialized");let $=(()=>{class n extends ae{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){X()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){X()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function je(){return new $((0,h.LFG)(oe))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function De(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Pe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Be(n){return n&&"?"!==n[0]?"?"+n:n}let K=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function ne(n){const e=(0,h.LFG)(oe).location;return new Te((0,h.LFG)(ae),e&&e.origin||"")}()},providedIn:"root"}),n})();const ge=new h.OlP("appBaseHref");let Te=(()=>{class n extends K{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return De(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Be(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+Be(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+Be(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ae),h.LFG(ge,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),ye=(()=>{class n extends K{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=De(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+Be(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+Be(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ae),h.LFG(ge,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),He=(()=>{class n{constructor(t,r){this._subject=new h.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Pe(Ye(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Be(r))}normalize(t){return n.stripTrailingSlash(function rt(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ye(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Be,n.joinWithSlash=De,n.stripTrailingSlash=Pe,n.\u0275fac=function(t){return new(t||n)(h.LFG(K),h.LFG(ae))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ae(){return new He((0,h.LFG)(K),(0,h.LFG)(ae))}()},providedIn:"root"}),n})();function Ye(n){return n.replace(/\/index.html$/,"")}var pe=(()=>((pe=pe||{})[pe.Zero=0]="Zero",pe[pe.One=1]="One",pe[pe.Two=2]="Two",pe[pe.Few=3]="Few",pe[pe.Many=4]="Many",pe[pe.Other=5]="Other",pe))();const hs=h.kL8;class Gt{}let On=(()=>{class n extends Gt{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(hs(r||this.locale)(t)){case pe.Zero:return"zero";case pe.One:return"one";case pe.Two:return"two";case pe.Few:return"few";case pe.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.soG))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function bo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}class Zi{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Pn=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Zi(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===a?void 0:a);else if(null!==a){const p=r.get(a);r.move(p,c),Zo(p,i)}});for(let i=0,a=r.length;i<a;i++){const p=r.get(i).context;p.index=i,p.count=a,p.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Zo(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Zo(n,e){n.context.$implicit=e.item}let Bu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[{provide:Gt,useClass:On}]}),n})();function ja(n){return"server"===n}let ql=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new Td((0,h.LFG)(oe),window)}),n})();class Td{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function zs(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Yt(this.window.history)||Yt(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Yt(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class an{}class Qo extends class kf extends class de{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){Q||(Q=n)}(new Qo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function jn(){return Xn=Xn||document.querySelector("base"),Xn?Xn.getAttribute("href"):null}();return null==t?null:function Jo(n){gs=gs||document.createElement("a"),gs.setAttribute("href",n);const e=gs.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Xn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return bo(document.cookie,e)}}let gs,Xn=null;const Qi=new h.OlP("TRANSITION_ID"),er=[{provide:h.ip1,useFactory:function Vr(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Qi,oe,h.zs3],multi:!0}];class Ji{static init(){(0,h.VLi)(new Ji)}addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const p=function(_){c=c||_,a--,0==a&&r(c)};i.forEach(function(_){_.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Wl=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Ur=new h.OlP("EventManagerPlugins");let Zs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const c=i[a];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ur),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Xo{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let mt=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),hr=(()=>{class n extends mt{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const c=this._doc.createElement("style");c.textContent=a,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ha),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ha))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Ha(n){k().remove(n)}const $a={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ea=/%COMP%/g;function dn(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?dn(n,i,t):(i=i.replace(ea,n),t.push(i))}return t}function So(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ri=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new ms(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Wu(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case h.ifc.ShadowDom:return new na(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=dn(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Zs),h.LFG(hr),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class ms{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS($a[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=$a[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=$a[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,So(r)):this.eventManager.addEventListener(e,t,So(r))}}class Wu extends ms{constructor(e,t,r,i){super(e),this.component=r;const a=dn(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function xt(n){return"_ngcontent-%COMP%".replace(ea,n)}(i+"-"+r.id),this.hostAttr=function $u(n){return"_nghost-%COMP%".replace(ea,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class na extends ms{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=dn(i.id,i.styles,[]);for(let c=0;c<a.length;c++){const p=document.createElement("style");p.textContent=a[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ga=(()=>{class n extends Xo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const tr=["alt","control","meta","shift"],zu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ys={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Pi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Sd=(()=>{class n extends Xo{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="";if(tr.forEach(_=>{const C=r.indexOf(_);C>-1&&(r.splice(C,1),c+=_+".")}),c+=a,0!=r.length||0===a.length)return null;const p={};return p.domEventName=i,p.fullKey=c,p}static getEventFullKey(t){let r="",i=function ra(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ys.hasOwnProperty(e)&&(e=ys[e]))}return zu[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),tr.forEach(a=>{a!=i&&Pi[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const za=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function Zu(){Qo.makeCurrent(),Ji.init()},multi:!0},{provide:oe,useFactory:function ia(){return(0,h.RDi)(document),document},deps:[]}]),Za=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function qa(){return new h.qLn},deps:[]},{provide:Ur,useClass:Ga,multi:!0,deps:[oe,h.R0b,h.Lbi]},{provide:Ur,useClass:Sd,multi:!0,deps:[oe]},{provide:ri,useClass:ri,deps:[Zs,hr,h.AFp]},{provide:h.FYo,useExisting:ri},{provide:mt,useExisting:hr},{provide:hr,useClass:hr,deps:[oe]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b]},{provide:Zs,useClass:Zs,deps:[Ur,h.R0b]},{provide:an,useClass:Wl,deps:[]}];let Zl=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Qi,useExisting:h.AFp},er]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:Za,imports:[Bu,h.hGG]}),n})();"undefined"!=typeof window&&window;var Qs=F(7669),_n=F(8996);function Xe(...n){const e=(0,Qs.yG)(n);return(0,_n.D)(n,e)}var Br=F(8306),Er=F(5577),oa=F(576);function aa(n,e){return(0,oa.m)(e)?(0,Er.z)(n,e,1):(0,Er.z)(n,1)}var $n=F(4482),nr=F(5403);function jr(n,e){return(0,$n.e)((t,r)=>{let i=0;t.subscribe(new nr.Q(r,a=>n.call(e,a,i++)&&r.next(a)))})}var _t=F(4004);class ki{}class ua{}class Fi{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(c):this.headers.set(a,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Fi?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Fi;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Fi?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let c=this.headers.get(t);if(!c)return;c=c.filter(p=>-1===a.indexOf(p)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class jf{encodeKey(e){return vs(e)}encodeValue(e){return vs(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const ec=/%(\d[a-f0-9])/gi,tu={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function vs(n){return encodeURIComponent(n).replace(ec,(e,t)=>{var r;return null!==(r=tu[t])&&void 0!==r?r:e})}function nu(n){return`${n}`}class ii{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new jf,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function eu(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[c,p]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],_=t.get(c)||[];_.push(p),t.set(c,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new ii({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(nu(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(nu(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Xi{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Xu(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function el(n){return"undefined"!=typeof Blob&&n instanceof Blob}function la(n){return"undefined"!=typeof FormData&&n instanceof FormData}class kn{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function tc(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new Fi),this.context||(this.context=new Xi),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const p=t.indexOf("?");this.urlWithParams=t+(-1===p?"?":p<t.length-1?"&":"")+c}}else this.params=new ii,this.urlWithParams=t}serializeBody(){return null===this.body?null:Xu(this.body)||el(this.body)||la(this.body)||function tl(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ii?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||la(this.body)?null:el(this.body)?this.body.type||null:Xu(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ii?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,a=e.responseType||this.responseType,c=void 0!==e.body?e.body:this.body,p=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,_=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let C=e.headers||this.headers,A=e.params||this.params;const x=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(C=Object.keys(e.setHeaders).reduce((O,V)=>O.set(V,e.setHeaders[V]),C)),e.setParams&&(A=Object.keys(e.setParams).reduce((O,V)=>O.set(V,e.setParams[V]),A)),new kn(r,i,c,{params:A,headers:C,context:x,reportProgress:_,responseType:a,withCredentials:p})}}var bn=(()=>((bn=bn||{})[bn.Sent=0]="Sent",bn[bn.UploadProgress=1]="UploadProgress",bn[bn.ResponseHeader=2]="ResponseHeader",bn[bn.DownloadProgress=3]="DownloadProgress",bn[bn.Response=4]="Response",bn[bn.User=5]="User",bn))();class nc{constructor(e,t=200,r="OK"){this.headers=e.headers||new Fi,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Js extends nc{constructor(e={}){super(e),this.type=bn.ResponseHeader}clone(e={}){return new Js({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ws extends nc{constructor(e={}){super(e),this.type=bn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new ws({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class An extends nc{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function xo(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let ru=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof kn)a=t;else{let _,C;_=i.headers instanceof Fi?i.headers:new Fi(i.headers),i.params&&(C=i.params instanceof ii?i.params:new ii({fromObject:i.params})),a=new kn(t,r,void 0!==i.body?i.body:null,{headers:_,context:i.context,params:C,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=Xe(a).pipe(aa(_=>this.handler.handle(_)));if(t instanceof kn||"events"===i.observe)return c;const p=c.pipe(jr(_=>_ instanceof ws));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return p.pipe((0,_t.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return p.pipe((0,_t.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return p.pipe((0,_t.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return p.pipe((0,_t.U)(_=>_.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new ii).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,xo(i,r))}post(t,r,i={}){return this.request("POST",t,xo(i,r))}put(t,r,i={}){return this.request("PUT",t,xo(i,r))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ki))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Es{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Cs=new h.OlP("HTTP_INTERCEPTORS");let Xs=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Fd=/^\)\]\}',?\n/;let Gf=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Br.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((V,z)=>i.setRequestHeader(V,z.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const V=t.detectContentTypeHeader();null!==V&&i.setRequestHeader("Content-Type",V)}if(t.responseType){const V=t.responseType.toLowerCase();i.responseType="json"!==V?V:"text"}const a=t.serializeBody();let c=null;const p=()=>{if(null!==c)return c;const V=1223===i.status?204:i.status,z=i.statusText||"OK",Ee=new Fi(i.getAllResponseHeaders()),Ue=function $f(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return c=new Js({headers:Ee,status:V,statusText:z,url:Ue}),c},_=()=>{let{headers:V,status:z,statusText:Ee,url:Ue}=p(),at=null;204!==z&&(at=void 0===i.response?i.responseText:i.response),0===z&&(z=at?200:0);let St=z>=200&&z<300;if("json"===t.responseType&&"string"==typeof at){const Xt=at;at=at.replace(Fd,"");try{at=""!==at?JSON.parse(at):null}catch(Mt){at=Xt,St&&(St=!1,at={error:Mt,text:at})}}St?(r.next(new ws({body:at,headers:V,status:z,statusText:Ee,url:Ue||void 0})),r.complete()):r.error(new An({error:at,headers:V,status:z,statusText:Ee,url:Ue||void 0}))},C=V=>{const{url:z}=p(),Ee=new An({error:V,status:i.status||0,statusText:i.statusText||"Unknown Error",url:z||void 0});r.error(Ee)};let A=!1;const x=V=>{A||(r.next(p()),A=!0);let z={type:bn.DownloadProgress,loaded:V.loaded};V.lengthComputable&&(z.total=V.total),"text"===t.responseType&&!!i.responseText&&(z.partialText=i.responseText),r.next(z)},O=V=>{let z={type:bn.UploadProgress,loaded:V.loaded};V.lengthComputable&&(z.total=V.total),r.next(z)};return i.addEventListener("load",_),i.addEventListener("error",C),i.addEventListener("timeout",C),i.addEventListener("abort",C),t.reportProgress&&(i.addEventListener("progress",x),null!==a&&i.upload&&i.upload.addEventListener("progress",O)),i.send(a),r.next({type:bn.Sent}),()=>{i.removeEventListener("error",C),i.removeEventListener("abort",C),i.removeEventListener("load",_),i.removeEventListener("timeout",C),t.reportProgress&&(i.removeEventListener("progress",x),null!==a&&i.upload&&i.upload.removeEventListener("progress",O)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(an))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ic=new h.OlP("XSRF_COOKIE_NAME"),qf=new h.OlP("XSRF_HEADER_NAME");class sc{}let Mo=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=bo(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oe),h.LFG(h.Lbi),h.LFG(ic))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),oc=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(sc),h.LFG(qf))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Gn=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(Cs,[]);this.chain=r.reduceRight((i,a)=>new Es(i,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ua),h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),rm=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:oc,useClass:Xs}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:ic,useValue:t.cookieName}:[],t.headerName?{provide:qf,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[oc,{provide:Cs,useExisting:oc,multi:!0},{provide:sc,useClass:Mo},{provide:ic,useValue:"XSRF-TOKEN"},{provide:qf,useValue:"X-XSRF-TOKEN"}]}),n})(),zf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[ru,{provide:ki,useClass:Gn},Gf,{provide:ua,useExisting:Gf}],imports:[[rm.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();const{isArray:Ld}=Array,{getPrototypeOf:ou,prototype:ca,keys:Vd}=Object;function Ud(n){if(1===n.length){const e=n[0];if(Ld(e))return{args:e,keys:null};if(function da(n){return n&&"object"==typeof n&&ou(n)===ca}(e)){const t=Vd(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ha=F(8421);const{isArray:Bd}=Array;function rr(n){return(0,_t.U)(e=>function rl(n,e){return Bd(e)?n(...e):n(e)}(n,e))}function fa(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let im=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),Ro=(()=>{class n extends im{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const bs=new h.OlP("NgValueAccessor"),pa={provide:bs,useExisting:(0,h.Gpc)(()=>to),multi:!0},il=new h.OlP("CompositionEventMode");let to=(()=>{class n extends im{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function $d(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(il,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[h._Bn([pa]),h.qOj]}),n})();function qn(n){return null==n||0===n.length}function Zf(n){return null!=n&&"number"==typeof n.length}const tn=new h.OlP("NgValidators"),Ds=new h.OlP("NgAsyncValidators"),au=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ga{static min(e){return function sl(n){return e=>{if(qn(e.value)||qn(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Gd(n){return e=>{if(qn(e.value)||qn(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function ol(n){return qn(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function b(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function D(n){return qn(n.value)||au.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function N(n){return e=>qn(e.value)||!Zf(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function U(n){return e=>Zf(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Z(n){if(!n)return ie;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(qn(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Wn(e)}static composeAsync(e){return no(e)}}function ie(n){return null}function Oe(n){return null!=n}function Ze(n){const e=(0,h.QGY)(n)?(0,_n.D)(n):n;return(0,h.CqO)(e),e}function Ke(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Lt(n,e){return e.map(t=>t(n))}function Hr(n){return n.map(e=>function nn(n){return!n.validate}(e)?e:t=>e.validate(t))}function Wn(n){if(!n)return null;const e=n.filter(Oe);return 0==e.length?null:function(t){return Ke(Lt(t,e))}}function gn(n){return null!=n?Wn(Hr(n)):null}function no(n){if(!n)return null;const e=n.filter(Oe);return 0==e.length?null:function(t){return function eo(...n){const e=(0,Qs.jO)(n),{args:t,keys:r}=Ud(n),i=new Br.y(a=>{const{length:c}=t;if(!c)return void a.complete();const p=new Array(c);let _=c,C=c;for(let A=0;A<c;A++){let x=!1;(0,ha.Xf)(t[A]).subscribe(new nr.Q(a,O=>{x||(x=!0,C--),p[A]=O},()=>_--,void 0,()=>{(!_||!x)&&(C||a.next(r?fa(r,p):p),a.complete())}))}});return e?i.pipe(rr(e)):i}(Lt(t,e).map(Ze)).pipe((0,_t.U)(Ke))}}function mi(n){return null!=n?no(Hr(n)):null}function ma(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function yi(n){return n._rawValidators}function Ts(n){return n._rawAsyncValidators}function No(n){return n?Array.isArray(n)?n:[n]:[]}function uu(n,e){return Array.isArray(n)?n.includes(e):n===e}function qd(n,e){const t=No(e);return No(n).forEach(i=>{uu(t,i)||t.push(i)}),t}function Wd(n,e){return No(e).filter(t=>!uu(n,t))}class lu{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=gn(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=mi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Vi extends lu{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class $r extends lu{get formDirective(){return null}get path(){return null}}class F_{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let Kf=(()=>{class n extends F_{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Vi,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[h.qOj]}),n})(),om=(()=>{class n extends F_{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36($r,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[h.qOj]}),n})();function ul(n,e){return[...e.path,n]}function uc(n,e){Xf(n,e),e.valueAccessor.writeValue(n.value),function j_(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Xd(n,e)})}(n,e),function CE(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function EE(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Xd(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function du(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Jd(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),ep(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function As(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Xf(n,e){const t=yi(n);null!==e.validator?n.setValidators(ma(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Ts(n);null!==e.asyncValidator?n.setAsyncValidators(ma(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();As(e._rawValidators,i),As(e._rawAsyncValidators,i)}function ep(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=yi(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(c=>c!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=Ts(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(c=>c!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return As(e._rawValidators,r),As(e._rawAsyncValidators,r),t}function Xd(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function np(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function ya(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===to?t=a:function bE(n){return Object.getPrototypeOf(n.constructor)===Ro}(a)?r=a:i=a}),i||r||t||null}function lc(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const ll="VALID",cc="INVALID",_a="PENDING",eh="DISABLED";function cm(n){return(rh(n)?n.validators:n)||null}function th(n){return Array.isArray(n)?gn(n):n||null}function fu(n,e){return(rh(e)?e.asyncValidators:n)||null}function nh(n){return Array.isArray(n)?mi(n):n||null}function rh(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const G_=n=>n instanceof va,dc=n=>n instanceof sh;function ih(n){return G_(n)?n.value:n.getRawValue()}function dm(n,e){const t=dc(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[e])throw new h.vHH(1001,"")}function rp(n,e){dc(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new h.vHH(1002,"")})}class hc{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=th(this._rawValidators),this._composedAsyncValidatorFn=nh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ll}get invalid(){return this.status===cc}get pending(){return this.status==_a}get disabled(){return this.status===eh}get enabled(){return this.status!==eh}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=th(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=nh(e)}addValidators(e){this.setValidators(qd(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(qd(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Wd(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Wd(e,this._rawAsyncValidators))}hasValidator(e){return uu(this._rawValidators,e)}hasAsyncValidator(e){return uu(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=_a,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=eh,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ll,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ll||this.status===_a)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?eh:ll}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=_a,this._hasOwnPendingAsyncValidator=!0;const t=Ze(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function DE(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=dc(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof ip)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?eh:this.errors?cc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_a)?_a:this._anyControlsHaveStatus(cc)?cc:ll}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){rh(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class va extends hc{constructor(e=null,t,r){super(cm(t),fu(r,t)),this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){lc(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){lc(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class sh extends hc{constructor(e,t,r){super(cm(t),fu(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){rp(this,e),Object.keys(e).forEach(r=>{dm(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=ih(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class ip extends hc{constructor(e,t,r){super(cm(t),fu(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){rp(this,e),e.forEach((r,i)=>{dm(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>ih(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Z_={provide:Vi,useExisting:(0,h.Gpc)(()=>fc)},K_=(()=>Promise.resolve(null))();let fc=(()=>{class n extends Vi{constructor(t,r,i,a){super(),this.control=new va,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=ya(0,a)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),np(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?ul(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){uc(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){K_.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;K_.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable()})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36($r,9),h.Y36(tn,10),h.Y36(Ds,10),h.Y36(bs,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([Z_]),h.qOj,h.TTD]}),n})(),cl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const si={provide:bs,useExisting:(0,h.Gpc)(()=>pc),multi:!0};let pc=(()=>{class n extends Ro{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},features:[h._Bn([si]),h.qOj]}),n})(),Cr=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const dl=new h.OlP("NgModelWithFormControlWarning"),ch={provide:$r,useExisting:(0,h.Gpc)(()=>gc)};let gc=(()=>{class n extends $r{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ep(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return uc(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Jd(t.control||null,t,!1),lc(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function lm(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Jd(r||null,t),G_(i)&&(uc(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function tp(n,e){Xf(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function H_(n,e){return ep(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Xf(this.form,this),this._oldForm&&ep(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(tn,10),h.Y36(Ds,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([ch]),h.qOj,h.TTD]}),n})();const lp={provide:Vi,useExisting:(0,h.Gpc)(()=>cp)};let cp=(()=>{class n extends Vi{constructor(t,r,i,a,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=ya(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),np(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return ul(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36($r,13),h.Y36(tn,10),h.Y36(Ds,10),h.Y36(bs,10),h.Y36(dl,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([lp]),h.qOj,h.TTD]}),n})(),Po=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[Cr]]}),n})(),io=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Po]}),n})(),yh=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:dl,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Po]}),n})();var wa=F(7579);class Ms extends wa.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var gl=F(4671),rv=F(9672);function g(n,e,t){n?(0,rv.f)(t,n,e):e()}const T=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var M=F(8189);function te(...n){return function j(){return(0,M.J)(1)}()((0,_n.D)(n,(0,Qs.yG)(n)))}function ke(n){return new Br.y(e=>{(0,ha.Xf)(n()).subscribe(e)})}var Re=F(515),Qe=F(727);function nt(){return(0,$n.e)((n,e)=>{let t=null;n._refCount++;const r=new nr.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ot extends Br.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,$n.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Qe.w0;const t=this.getSubject();e.add(this.source.subscribe(new nr.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Qe.w0.EMPTY)}return e}refCount(){return nt()(this)}}function qt(n,e){return(0,$n.e)((t,r)=>{let i=null,a=0,c=!1;const p=()=>c&&!i&&r.complete();t.subscribe(new nr.Q(r,_=>{null==i||i.unsubscribe();let C=0;const A=a++;(0,ha.Xf)(n(_,A)).subscribe(i=new nr.Q(r,x=>r.next(e?e(_,x,A,C++):x),()=>{i=null,p()}))},()=>{c=!0,p()}))})}var Bi=F(5698);function mu(...n){const e=(0,Qs.yG)(n);return(0,$n.e)((t,r)=>{(e?te(n,t,e):te(n,t)).subscribe(r)})}function vh(n,e,t,r,i){return(a,c)=>{let p=t,_=e,C=0;a.subscribe(new nr.Q(c,A=>{const x=C++;_=p?n(_,A,x):(p=!0,A),r&&c.next(_)},i&&(()=>{p&&c.next(_),c.complete()})))}}function ko(n,e){return(0,$n.e)(vh(n,e,arguments.length>=2,!0))}function so(n){return(0,$n.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe(new nr.Q(t,void 0,void 0,c=>{a=(0,ha.Xf)(n(c,so(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function yu(n){return n<=0?()=>Re.E:(0,$n.e)((e,t)=>{let r=[];e.subscribe(new nr.Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function wh(n=vc){return(0,$n.e)((e,t)=>{let r=!1;e.subscribe(new nr.Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function vc(){return new T}function _u(n){return(0,$n.e)((e,t)=>{let r=!1;e.subscribe(new nr.Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Fo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?jr((i,a)=>n(i,a,r)):gl.y,(0,Bi.q)(1),t?_u(e):wh(()=>new T))}var qr=F(8505);class Rs{constructor(e,t){this.id=e,this.url=t}}class iv extends Rs{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Eh extends Rs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class xE extends Rs{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ND extends Rs{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ME extends Rs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sv extends Rs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class RE extends Rs{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class cR extends Rs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class NE extends Rs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class OE{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class ov{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class OD{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class PD{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Lo{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kD{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class av{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Pt="primary";class FD{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ch(n){return new FD(n)}const PE="ngNavigationCancelingError";function Am(n){const e=Error("NavigationCancelingError: "+n);return e[PE]=!0,e}function VD(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],p=n[a];if(c.startsWith(":"))i[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function vt(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!uv(n[i],e[i]))return!1;return!0}function uv(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function lv(n){return Array.prototype.concat.apply([],n)}function cv(n){return n.length>0?n[n.length-1]:null}function En(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Vo(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,_n.D)(Promise.resolve(n)):Xe(n)}const hv={exact:function xm(n,e,t){if(!Ih(n.segments,e.segments)||!wc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!xm(n.children[r],e.children[r],t))return!1;return!0},subset:fv},Ea={exact:function kE(n,e){return vt(n,e)},subset:function dR(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>uv(n[t],e[t]))},ignored:()=>!0};function Sm(n,e,t){return hv[t.paths](n.root,e.root,t.matrixParams)&&Ea[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function fv(n,e,t){return jD(n,e,e.segments,t)}function jD(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ih(i,t)||e.hasChildren()||!wc(i,t,r))}if(n.segments.length===t.length){if(!Ih(n.segments,t)||!wc(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!fv(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Ih(n.segments,i)&&wc(n.segments,i,r)&&n.children[Pt])&&jD(n.children[Pt],e,a,r)}}function wc(n,e,t){return e.every((r,i)=>Ea[t](n[i].parameters,r.parameters))}class Ca{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ch(this.queryParams)),this._queryParamMap}toString(){return $D.serialize(this)}}class kt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,En(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return mp(this)}}class Ec{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ch(this.parameters)),this._parameterMap}toString(){return GD(this)}}function Ih(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class FE{}class LE{parse(e){const t=new vR(e);return new Ca(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Mm(e.root,!0)}`,r=function fR(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${gv(t)}=${gv(i)}`).join("&"):`${gv(t)}=${gv(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function UE(n){return encodeURI(n)}(e.fragment)}`:""}`}}const $D=new LE;function mp(n){return n.segments.map(e=>GD(e)).join("/")}function Mm(n,e){if(!n.hasChildren())return mp(n);if(e){const t=n.children[Pt]?Mm(n.children[Pt],!1):"",r=[];return En(n.children,(i,a)=>{a!==Pt&&r.push(`${a}:${Mm(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function HD(n,e){let t=[];return En(n.children,(r,i)=>{i===Pt&&(t=t.concat(e(r,i)))}),En(n.children,(r,i)=>{i!==Pt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Pt?[Mm(n.children[Pt],!1)]:[`${i}:${Mm(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Pt]?`${mp(n)}/${t[0]}`:`${mp(n)}/(${t.join("//")})`}}function VE(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gv(n){return VE(n).replace(/%3B/gi,";")}function Rm(n){return VE(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Nm(n){return decodeURIComponent(n)}function Om(n){return Nm(n.replace(/\+/g,"%20"))}function GD(n){return`${Rm(n.path)}${function hR(n){return Object.keys(n).map(e=>`;${Rm(e)}=${Rm(n[e])}`).join("")}(n.parameters)}`}const pR=/^[^\/()?;=#]+/;function mv(n){const e=n.match(pR);return e?e[0]:""}const gR=/^[^=?&#]+/,yR=/^[^&#]+/;class vR{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new kt([],{}):new kt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Pt]=new kt(e,t)),r}parseSegment(){const e=mv(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ec(Nm(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=mv(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=mv(this.remaining);i&&(r=i,this.capture(r))}e[Nm(t)]=Nm(r)}parseQueryParam(e){const t=function mR(n){const e=n.match(gR);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function _R(n){const e=n.match(yR);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Om(t),a=Om(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=mv(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Pt);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[Pt]:new kt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class vu{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=yp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=yp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=yv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return yv(e,this._root).map(t=>t.value)}}function yp(n,e){if(n===e.value)return e;for(const t of e.children){const r=yp(n,t);if(r)return r}return null}function yv(n,e){if(n===e.value)return[e];for(const t of e.children){const r=yv(n,t);if(r.length)return r.unshift(e),r}return[]}class Ia{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ml(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class _v extends vu{constructor(e,t){super(e),this.snapshot=t,km(this,e)}toString(){return this.snapshot.toString()}}function Pm(n,e){const t=function qD(n,e){const c=new bh([],{},{},"",{},Pt,e,null,n.root,-1,{});return new BE("",new Ia(c,[]))}(n,e),r=new Ms([new Ec("",{})]),i=new Ms({}),a=new Ms({}),c=new Ms({}),p=new Ms(""),_=new Ns(r,i,c,p,a,Pt,e,t.root);return _.snapshot=t.root,new _v(new Ia(_,[]),t)}class Ns{constructor(e,t,r,i,a,c,p,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=p,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,_t.U)(e=>Ch(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,_t.U)(e=>Ch(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function vv(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function WD(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class bh{constructor(e,t,r,i,a,c,p,_,C,A,x){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=p,this.routeConfig=_,this._urlSegment=C,this._lastPathIndex=A,this._resolve=x}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ch(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ch(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class BE extends vu{constructor(e,t){super(t),this.url=e,km(this,t)}toString(){return jE(this._root)}}function km(n,e){e.value._routerState=n,e.children.forEach(t=>km(n,t))}function jE(n){const e=n.children.length>0?` { ${n.children.map(jE).join(", ")} } `:"";return`${n.value}${e}`}function wv(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,vt(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),vt(e.params,t.params)||n.params.next(t.params),function UD(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!vt(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),vt(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Cc(n,e){const t=vt(n.params,e.params)&&function pv(n,e){return Ih(n,e)&&n.every((t,r)=>vt(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Cc(n.parent,e.parent))}function Ic(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Th(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ic(n,r,i);return Ic(n,r)})}(n,e,t);return new Ia(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(p=>Ic(n,p)),c}}const r=function _p(n){return new Ns(new Ms(n.url),new Ms(n.params),new Ms(n.queryParams),new Ms(n.fragment),new Ms(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Ic(n,a));return new Ia(r,i)}}function Fm(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Sh(n){return"object"==typeof n&&null!=n&&n.outlets}function Lm(n,e,t,r,i){let a={};return r&&En(r,(c,p)=>{a[p]=Array.isArray(c)?c.map(_=>`${_}`):`${c}`}),new Ca(t.root===n?e:Vm(t.root,n,e),a,i)}function Vm(n,e,t){const r={};return En(n.children,(i,a)=>{r[a]=i===e?t:Vm(i,e,t)}),new kt(n.segments,r)}class Um{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Fm(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Sh);if(i&&i!==cv(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class xh{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ev(n,e,t){if(n||(n=new kt([],{})),0===n.segments.length&&n.hasChildren())return vp(n,e,t);const r=function ZD(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],p=t[r];if(Sh(p))break;const _=`${p}`,C=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&C&&"object"==typeof C&&void 0===C.outlets){if(!ts(_,C,c))return a;r+=2}else{if(!ts(_,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new kt(n.segments.slice(0,r.pathIndex),{});return a.children[Pt]=new kt(n.segments.slice(r.pathIndex),n.children),vp(a,0,i)}return r.match&&0===i.length?new kt(n.segments,{}):r.match&&!n.hasChildren()?Bm(n,e,t):r.match?vp(n,0,i):Bm(n,e,t)}function vp(n,e,t){if(0===t.length)return new kt(n.segments,{});{const r=function wR(n){return Sh(n[0])?n[0].outlets:{[Pt]:n}}(t),i={};return En(r,(a,c)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[c]=Ev(n.children[c],e,a))}),En(n.children,(a,c)=>{void 0===r[c]&&(i[c]=a)}),new kt(n.segments,i)}}function Bm(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Sh(a)){const _=KD(a.outlets);return new kt(r,_)}if(0===i&&Fm(t[0])){r.push(new Ec(n.segments[e].path,GE(t[0]))),i++;continue}const c=Sh(a)?a.outlets[Pt]:`${a}`,p=i<t.length-1?t[i+1]:null;c&&p&&Fm(p)?(r.push(new Ec(c,GE(p))),i+=2):(r.push(new Ec(c,{})),i++)}return new kt(r,{})}function KD(n){const e={};return En(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Bm(new kt([],{}),0,t))}),e}function GE(n){const e={};return En(n,(t,r)=>e[r]=`${t}`),e}function ts(n,e,t){return n==t.path&&vt(e,t.parameters)}class QD{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),wv(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ml(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),En(i,(a,c)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ml(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ml(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=ml(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new kD(a.value.snapshot))}),e.children.length&&this.forwardEvent(new PD(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(wv(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),wv(p.route.value),this.activateChildRoutes(e,null,c.children)}else{const p=function ER(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=p?p.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=_,c.outlet&&c.outlet.activateWith(i,_),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class qE{constructor(e,t){this.routes=e,this.module=t}}function wu(n){return"function"==typeof n}function bc(n){return n instanceof Ca}const wp=Symbol("INITIAL_VALUE");function Mh(){return qt(n=>function y(...n){const e=(0,Qs.yG)(n),t=(0,Qs.jO)(n),{args:r,keys:i}=Ud(n);if(0===r.length)return(0,_n.D)([],e);const a=new Br.y(function f(n,e,t=gl.y){return r=>{g(e,()=>{const{length:i}=n,a=new Array(i);let c=i,p=i;for(let _=0;_<i;_++)g(e,()=>{const C=(0,_n.D)(n[_],e);let A=!1;C.subscribe(new nr.Q(r,x=>{a[_]=x,A||(A=!0,p--),p||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>fa(i,c):gl.y));return t?a.pipe(rr(t)):a}(n.map(e=>e.pipe((0,Bi.q)(1),mu(wp)))).pipe(ko((e,t)=>{let r=!1;return t.reduce((i,a,c)=>i!==wp?i:(a===wp&&(r=!0),r||!1!==a&&c!==t.length-1&&!bc(a)?i:a),e)},wp),jr(e=>e!==wp),(0,_t.U)(e=>bc(e)?e:!0===e),(0,Bi.q)(1)))}class eT{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Rh,this.attachRef=null}}class Rh{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new eT,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Iv=(()=>{class n{constructor(t,r,i,a,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=a||Pt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,_=new tT(t,p,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Rh),h.Y36(h.s_b),h.Y36(h._Vd),h.$8M("name"),h.Y36(h.sBO))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class tT{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ns?this.route:e===Rh?this.childContexts:this.parent.get(e,t)}}let bv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},directives:[Iv],encapsulation:2}),n})();function Dv(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];nT(r,ba(e,r))}}function nT(n,e){n.children&&Dv(n.children,e)}function ba(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Ep(n){const e=n.children&&n.children.map(Ep),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Pt&&(t.component=bv),t}function oo(n){return n.outlet||Pt}function zE(n,e){const t=n.filter(r=>oo(r)===e);return t.push(...n.filter(r=>oo(r)!==e)),t}const rT={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Cp(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},rT):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(e.matcher||VD)(t,n,e);if(!a)return Object.assign({},rT);const c={};En(a.posParams,(_,C)=>{c[C]=_.path});const p=a.consumed.length>0?Object.assign(Object.assign({},c),a.consumed[a.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:p,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function jm(n,e,t,r,i="corrected"){if(t.length>0&&function Tv(n,e,t){return t.some(r=>Hm(n,e,r)&&oo(r)!==Pt)}(n,t,r)){const c=new kt(e,function sT(n,e,t,r){const i={};i[Pt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&oo(a)!==Pt){const c=new kt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[oo(a)]=c}return i}(n,e,r,new kt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function oT(n,e,t){return t.some(r=>Hm(n,e,r))}(n,t,r)){const c=new kt(n.segments,function iT(n,e,t,r,i,a){const c={};for(const p of r)if(Hm(n,t,p)&&!i[oo(p)]){const _=new kt([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:e.length,c[oo(p)]=_}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const a=new kt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function Hm(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Ip(n,e,t,r){return!!(oo(n)===r||r!==Pt&&Hm(e,t,n))&&("**"===n.path||Cp(e,n,t).matched)}function $m(n,e,t){return 0===e.length&&!n.children[t]}class bp{constructor(e){this.segmentGroup=e||null}}class Gm{constructor(e){this.urlTree=e}}function Nh(n){return new Br.y(e=>e.error(new bp(n)))}function Av(n){return new Br.y(e=>e.error(new Gm(n)))}function aT(n){return new Br.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class IR{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(h.h0i)}apply(){const e=jm(this.urlTree.root,[],[],this.config).segmentGroup,t=new kt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Pt).pipe((0,_t.U)(a=>this.createUrlTree(qm(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(so(a=>{if(a instanceof Gm)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof bp?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Pt).pipe((0,_t.U)(i=>this.createUrlTree(qm(i),e.queryParams,e.fragment))).pipe(so(i=>{throw i instanceof bp?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new kt([],{[Pt]:e}):e;return new Ca(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,_t.U)(a=>new kt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,_n.D)(i).pipe(aa(a=>{const c=r.children[a],p=zE(t,a);return this.expandSegmentGroup(e,p,c,a).pipe((0,_t.U)(_=>({segment:_,outlet:a})))}),ko((a,c)=>(a[c.outlet]=c.segment,a),{}),function pp(n,e){const t=arguments.length>=2;return r=>r.pipe(n?jr((i,a)=>n(i,a,r)):gl.y,yu(1),t?_u(e):wh(()=>new T))}())}expandSegment(e,t,r,i,a,c){return(0,_n.D)(r).pipe(aa(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,a,c).pipe(so(C=>{if(C instanceof bp)return Xe(null);throw C}))),Fo(p=>!!p),so((p,_)=>{if(p instanceof T||"EmptyError"===p.name){if($m(t,i,a))return Xe(new kt([],{}));throw new bp(t)}throw p}))}expandSegmentAgainstRoute(e,t,r,i,a,c,p){return Ip(i,t,a,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c):Nh(t):Nh(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Av(a):this.lineralizeSegments(r,a).pipe((0,Er.z)(c=>{const p=new kt(c,{});return this.expandSegment(e,p,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:p,consumedSegments:_,lastChild:C,positionalParamSegments:A}=Cp(t,i,a);if(!p)return Nh(t);const x=this.applyRedirectCommands(_,i.redirectTo,A);return i.redirectTo.startsWith("/")?Av(x):this.lineralizeSegments(i,x).pipe((0,Er.z)(O=>this.expandSegment(e,t,r,O.concat(a.slice(C)),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Xe(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,_t.U)(O=>(r._loadedConfig=O,new kt(i,{})))):Xe(new kt(i,{}));const{matched:c,consumedSegments:p,lastChild:_}=Cp(t,r,i);if(!c)return Nh(t);const C=i.slice(_);return this.getChildConfig(e,r,i).pipe((0,Er.z)(x=>{const O=x.module,V=x.routes,{segmentGroup:z,slicedSegments:Ee}=jm(t,p,C,V),Ue=new kt(z.segments,z.children);if(0===Ee.length&&Ue.hasChildren())return this.expandChildren(O,V,Ue).pipe((0,_t.U)(Mt=>new kt(p,Mt)));if(0===V.length&&0===Ee.length)return Xe(new kt(p,{}));const at=oo(r)===a;return this.expandSegment(O,Ue,V,Ee,at?Pt:a,!0).pipe((0,_t.U)(Xt=>new kt(p.concat(Xt.segments),Xt.children)))}))}getChildConfig(e,t,r){return t.children?Xe(new qE(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Xe(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Er.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,_t.U)(a=>(t._loadedConfig=a,a))):function uT(n){return new Br.y(e=>e.error(Am(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):Xe(new qE([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?Xe(i.map(c=>{const p=e.get(c);let _;if(function Cv(n){return n&&wu(n.canLoad)}(p))_=p.canLoad(t,r);else{if(!wu(p))throw new Error("Invalid CanLoad guard");_=p(t,r)}return Vo(_)})).pipe(Mh(),(0,qr.b)(c=>{if(!bc(c))return;const p=Am(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw p.url=c,p}),(0,_t.U)(c=>!0===c)):Xe(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Xe(r);if(i.numberOfChildren>1||!i.children[Pt])return aT(e.redirectTo);i=i.children[Pt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Ca(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return En(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[a]=t[p]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return En(t.children,(p,_)=>{c[_]=this.createSegmentGroup(e,p,r,i)}),new kt(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function qm(n){const e={};for(const r of Object.keys(n.children)){const a=qm(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function lT(n){if(1===n.numberOfChildren&&n.children[Pt]){const e=n.children[Pt];return new kt(n.segments.concat(e.segments),e.children)}return n}(new kt(n.segments,e))}class xv{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Dp{constructor(e,t){this.component=e,this.route=t}}function KE(n,e,t){const r=n._root;return Tp(r,e?e._root:null,t,[r.value])}function Dc(n,e,t){const r=function cT(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Tp(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=ml(e);return n.children.forEach(c=>{(function bR(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const _=function Mv(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ih(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ih(n.url,e.url)||!vt(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Cc(n,e)||!vt(n.queryParams,e.queryParams);default:return!Cc(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new xv(r)):(a.data=c.data,a._resolvedData=c._resolvedData),Tp(n,e,a.component?p?p.children:null:t,r,i),_&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new Dp(p.outlet.component,c))}else c&&Oh(e,p,i),i.canActivateChecks.push(new xv(r)),Tp(n,null,a.component?p?p.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),En(a,(c,p)=>Oh(c,t.getContext(p),i)),i}function Oh(n,e,t){const r=ml(n),i=n.value;En(r,(a,c)=>{Oh(a,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new Dp(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Ov{}function XE(n){return new Br.y(e=>e.error(n))}class eC{constructor(e,t,r,i,a,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=c}recognize(){const e=jm(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Pt);if(null===t)return null;const r=new bh([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Pt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ia(r,t),a=new BE(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=vv(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const c=t.children[a],p=zE(e,a),_=this.processSegmentGroup(p,c,a);if(null===_)return null;r.push(..._)}const i=nC(r);return function Ph(n){n.sort((e,t)=>e.value.outlet===Pt?-1:t.value.outlet===Pt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const c=this.processSegmentAgainstRoute(a,t,r,i);if(null!==c)return c}return $m(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Ip(e,t,r,i))return null;let a,c=[],p=[];if("**"===e.path){const V=r.length>0?cv(r).parameters:{};a=new bh(r,V,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,sC(e),oo(e),e.component,e,rC(t),iC(t)+r.length,oC(e))}else{const V=Cp(t,e,r);if(!V.matched)return null;c=V.consumedSegments,p=r.slice(V.lastChild),a=new bh(c,V.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,sC(e),oo(e),e.component,e,rC(t),iC(t)+c.length,oC(e))}const _=function tC(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:A}=jm(t,c,p,_.filter(V=>void 0===V.redirectTo),this.relativeLinkResolution);if(0===A.length&&C.hasChildren()){const V=this.processChildren(_,C);return null===V?null:[new Ia(a,V)]}if(0===_.length&&0===A.length)return[new Ia(a,[])];const x=oo(e)===i,O=this.processSegment(_,C,A,x?Pt:i);return null===O?null:[new Ia(a,O)]}}function pT(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function nC(n){const e=[],t=new Set;for(const r of n){if(!pT(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=nC(r.children);e.push(new Ia(r.value,i))}return e.filter(r=>!t.has(r))}function rC(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function iC(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function sC(n){return n.data||{}}function oC(n){return n.resolve||{}}function Wm(n){return qt(e=>{const t=n(e);return t?(0,_n.D)(t).pipe((0,_t.U)(()=>e)):Xe(e)})}class yT extends class mT{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const kv=new h.OlP("ROUTES");class Fv{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,_t.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=a.create(e);return new qE(lv(c.injector.get(kv,void 0,h.XFs.Self|h.XFs.Optional)).map(Ep),c)}),so(a=>{throw t._loader$=void 0,a}));return t._loader$=new Ot(i,()=>new wa.x).pipe(nt()),t._loader$}loadModuleFactory(e){return Vo(e()).pipe((0,Er.z)(t=>t instanceof h.YKP?Xe(t):(0,_n.D)(this.compiler.compileModuleAsync(t))))}}class cC{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function _T(n){throw n}function vT(n,e,t){return e.parse("/")}function wT(n,e){return Xe(null)}const TR={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Lv={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Os=(()=>{class n{constructor(t,r,i,a,c,p,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new wa.x,this.errorHandler=_T,this.malformedUriErrorHandler=vT,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:wT,afterPreactivation:wT},this.urlHandlingStrategy=new cC,this.routeReuseStrategy=new yT,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(h.h0i),this.console=c.get(h.c2e);const x=c.get(h.R0b);this.isNgZoneEnabled=x instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function BD(){return new Ca(new kt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Fv(c,p,O=>this.triggerEvent(new OE(O)),O=>this.triggerEvent(new ov(O))),this.routerState=Pm(this.currentUrlTree,this.rootComponentType),this.transitions=new Ms({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(jr(i=>0!==i.id),(0,_t.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),qt(i=>{let a=!1,c=!1;return Xe(i).pipe((0,qr.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),qt(p=>{const _=this.browserUrlTree.toString(),C=!this.navigated||p.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return xp(p.source)&&(this.browserUrlTree=p.extractedUrl),Xe(p).pipe(qt(x=>{const O=this.transitions.getValue();return r.next(new iv(x.id,this.serializeUrl(x.extractedUrl),x.source,x.restoredState)),O!==this.transitions.getValue()?Re.E:Promise.resolve(x)}),function ZE(n,e,t,r){return qt(i=>function Sv(n,e,t,r,i){return new IR(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,_t.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,qr.b)(x=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:x.urlAfterRedirects})}),function ao(n,e,t,r,i){return(0,Er.z)(a=>function fT(n,e,t,r,i="emptyOnly",a="legacy"){try{const c=new eC(n,e,t,r,i,a).recognize();return null===c?XE(new Ov):Xe(c)}catch(c){return XE(c)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,_t.U)(c=>Object.assign(Object.assign({},a),{targetSnapshot:c}))))}(this.rootComponentType,this.config,x=>this.serializeUrl(x),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,qr.b)(x=>{if("eager"===this.urlUpdateStrategy){if(!x.extras.skipLocationChange){const V=this.urlHandlingStrategy.merge(x.urlAfterRedirects,x.rawUrl);this.setBrowserUrl(V,x)}this.browserUrlTree=x.urlAfterRedirects}const O=new ME(x.id,this.serializeUrl(x.extractedUrl),this.serializeUrl(x.urlAfterRedirects),x.targetSnapshot);r.next(O)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:O,extractedUrl:V,source:z,restoredState:Ee,extras:Ue}=p,at=new iv(O,this.serializeUrl(V),z,Ee);r.next(at);const St=Pm(V,this.rootComponentType).snapshot;return Xe(Object.assign(Object.assign({},p),{targetSnapshot:St,urlAfterRedirects:V,extras:Object.assign(Object.assign({},Ue),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),Re.E}),Wm(p=>{const{targetSnapshot:_,id:C,extractedUrl:A,rawUrl:x,extras:{skipLocationChange:O,replaceUrl:V}}=p;return this.hooks.beforePreactivation(_,{navigationId:C,appliedUrlTree:A,rawUrlTree:x,skipLocationChange:!!O,replaceUrl:!!V})}),(0,qr.b)(p=>{const _=new sv(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),(0,_t.U)(p=>Object.assign(Object.assign({},p),{guards:KE(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function Rv(n,e){return(0,Er.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?Xe(Object.assign(Object.assign({},t),{guardsResult:!0})):function Ap(n,e,t,r){return(0,_n.D)(n).pipe((0,Er.z)(i=>function hT(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?Xe(a.map(p=>{const _=Dc(p,e,i);let C;if(function XD(n){return n&&wu(n.canDeactivate)}(_))C=Vo(_.canDeactivate(n,e,t,r));else{if(!wu(_))throw new Error("Invalid CanDeactivate guard");C=Vo(_(n,e,t,r))}return C.pipe(Fo())})).pipe(Mh()):Xe(!0)}(i.component,i.route,t,e,r)),Fo(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Er.z)(p=>p&&function CR(n){return"boolean"==typeof n}(p)?function dT(n,e,t,r){return(0,_n.D)(e).pipe(aa(i=>te(function YE(n,e){return null!==n&&e&&e(new OD(n)),Xe(!0)}(i.route.parent,r),function Nv(n,e){return null!==n&&e&&e(new Lo(n)),Xe(!0)}(i.route,r),function JE(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function Eu(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>ke(()=>Xe(c.guards.map(_=>{const C=Dc(_,c.node,t);let A;if(function JD(n){return n&&wu(n.canActivateChild)}(C))A=Vo(C.canActivateChild(r,n));else{if(!wu(C))throw new Error("Invalid CanActivateChild guard");A=Vo(C(r,n))}return A.pipe(Fo())})).pipe(Mh())));return Xe(a).pipe(Mh())}(n,i.path,t),function QE(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Xe(!0);const i=r.map(a=>ke(()=>{const c=Dc(a,e,t);let p;if(function WE(n){return n&&wu(n.canActivate)}(c))p=Vo(c.canActivate(e,n));else{if(!wu(c))throw new Error("Invalid CanActivate guard");p=Vo(c(e,n))}return p.pipe(Fo())}));return Xe(i).pipe(Mh())}(n,i.route,t))),Fo(i=>!0!==i,!0))}(r,a,n,e):Xe(p)),(0,_t.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,qr.b)(p=>{if(bc(p.guardsResult)){const C=Am(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw C.url=p.guardsResult,C}const _=new RE(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(_)}),jr(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),Wm(p=>{if(p.guards.canActivateChecks.length)return Xe(p).pipe((0,qr.b)(_=>{const C=new cR(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(C)}),qt(_=>{let C=!1;return Xe(_).pipe(function Pv(n,e){return(0,Er.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Xe(t);let a=0;return(0,_n.D)(i).pipe(aa(c=>function aC(n,e,t,r){return function uC(n,e,t,r){const i=Object.keys(n);if(0===i.length)return Xe({});const a={};return(0,_n.D)(i).pipe((0,Er.z)(c=>function lC(n,e,t,r){const i=Dc(n,e,r);return Vo(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,qr.b)(p=>{a[c]=p}))),yu(1),(0,Er.z)(()=>Object.keys(a).length===i.length?Xe(a):Re.E))}(n._resolve,n,e,r).pipe((0,_t.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),vv(n,t).resolve),null)))}(c.route,r,n,e)),(0,qr.b)(()=>a++),yu(1),(0,Er.z)(c=>a===i.length?Xe(t):Re.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,qr.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,qr.b)(_=>{const C=new NE(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(C)}))}),Wm(p=>{const{targetSnapshot:_,id:C,extractedUrl:A,rawUrl:x,extras:{skipLocationChange:O,replaceUrl:V}}=p;return this.hooks.afterPreactivation(_,{navigationId:C,appliedUrlTree:A,rawUrlTree:x,skipLocationChange:!!O,replaceUrl:!!V})}),(0,_t.U)(p=>{const _=function Dh(n,e,t){const r=Ic(n,e._root,t?t._root:void 0);return new _v(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:_})}),(0,qr.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,_t.U)(r=>(new QD(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,qr.b)({next(){a=!0},complete(){a=!0}}),function gp(n){return(0,$n.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var p;a||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===i.id&&(this.currentNavigation=null)}),so(p=>{if(c=!0,function LD(n){return n&&n[PE]}(p)){const _=bc(p.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const C=new xE(i.id,this.serializeUrl(i.extractedUrl),p.message);r.next(C),_?setTimeout(()=>{const A=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),x={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||xp(i.source)};this.scheduleNavigation(A,"imperative",null,x,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new ND(i.id,this.serializeUrl(i.extractedUrl),p);r.next(_);try{i.resolve(this.errorHandler(p))}catch(C){i.reject(C)}}return Re.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const _=Object.assign({},c);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(a.state=_)}const p=this.parseUrl(t.url);this.scheduleNavigation(p,r,c,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Dv(t),this.config=t.map(Ep),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:p,preserveFragment:_}=r,C=i||this.routerState.root,A=_?this.currentUrlTree.fragment:c;let x=null;switch(p){case"merge":x=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":x=this.currentUrlTree.queryParams;break;default:x=a||null}return null!==x&&(x=this.removeEmptyProps(x)),function Ah(n,e,t,r,i){if(0===t.length)return Lm(e.root,e.root,e,r,i);const a=function HE(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Um(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const p={};return En(a.outlets,(_,C)=>{p[C]="string"==typeof _?_.split("/"):_}),[...i,{outlets:p}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((p,_)=>{0==_&&"."===p||(0==_&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,a]},[]);return new Um(t,e,r)}(t);if(a.toRoot())return Lm(e.root,new kt([],{}),e,r,i);const c=function zD(n,e,t){if(n.isAbsolute)return new xh(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new xh(a,a===e.root,0)}const r=Fm(n.commands[0])?0:1;return function $E(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new xh(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),p=c.processChildren?vp(c.segmentGroup,c.index,a.commands):Ev(c.segmentGroup,c.index,a.commands);return Lm(c.segmentGroup,p,e,r,i)}(C,this.currentUrlTree,t,x,null!=A?A:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=bc(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function dC(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},TR):!1===r?Object.assign({},Lv):r,bc(t))return Sm(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Sm(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Eh(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,c){var p,_,C;if(this.disposed)return Promise.resolve(!1);const A=this.transitions.value,x=xp(r)&&A&&!xp(A.source),O=A.rawUrl.toString()===t.toString(),V=A.id===(null===(p=this.currentNavigation)||void 0===p?void 0:p.id);if(x&&O&&V)return Promise.resolve(!0);let Ee,Ue,at;c?(Ee=c.resolve,Ue=c.reject,at=c.promise):at=new Promise((Mt,Zn)=>{Ee=Mt,Ue=Zn});const St=++this.navigationId;let Xt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),Xt=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(_=this.browserPageId)&&void 0!==_?_:0:(null!==(C=this.browserPageId)&&void 0!==C?C:0)+1):Xt=0,this.setTransition({id:St,targetPageId:Xt,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:Ee,reject:Ue,promise:at,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),at.catch(Mt=>Promise.reject(Mt))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new xE(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function xp(n){return"imperative"!==n}let ji=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new wa.x,this.subscription=t.events.subscribe(a=>{a instanceof Eh&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,c){if(0!==t||r||i||a||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const p={skipLocationChange:Mp(this.skipLocationChange),replaceUrl:Mp(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,p),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Mp(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Os),h.Y36(Ns),h.Y36(K))},n.\u0275dir=h.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&h.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&h.uIk("target",r.target)("href",r.href,h.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[h.TTD]}),n})();function Mp(n){return""===n||!!n}class Vv{}class gC{preload(e,t){return Xe(null)}}let ET=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new Fv(i,r,_=>t.triggerEvent(new OE(_)),_=>t.triggerEvent(new ov(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(jr(t=>t instanceof Eh),aa(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(h.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const c=a._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,_n.D)(i).pipe((0,M.J)(),(0,_t.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Xe(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Er.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Os),h.LFG(h.Sil),h.LFG(h.zs3),h.LFG(Vv))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),zm=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof iv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Eh&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof av&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new av(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Tc=new h.OlP("ROUTER_CONFIGURATION"),Zm=new h.OlP("ROUTER_FORROOT_GUARD"),CT=[He,{provide:FE,useClass:LE},{provide:Os,useFactory:function kh(n,e,t,r,i,a,c={},p,_){const C=new Os(null,n,e,t,r,i,lv(a));return p&&(C.urlHandlingStrategy=p),_&&(C.routeReuseStrategy=_),function AT(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,C),c.enableTracing&&C.events.subscribe(A=>{var x,O;null===(x=console.group)||void 0===x||x.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===(O=console.groupEnd)||void 0===O||O.call(console)}),C},deps:[FE,Rh,He,h.zs3,h.Sil,kv,Tc,[class DR{},new h.FiY],[class gT{},new h.FiY]]},Rh,{provide:Ns,useFactory:function Np(n){return n.routerState.root},deps:[Os]},ET,gC,class pC{preload(e,t){return t().pipe(so(()=>Xe(null)))}},{provide:Tc,useValue:{enableTracing:!1}}];function IT(){return new h.PXZ("Router",Os)}let yC=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[CT,Rp(t),{provide:Zm,useFactory:TT,deps:[[Os,new h.FiY,new h.tp0]]},{provide:Tc,useValue:r||{}},{provide:K,useFactory:DT,deps:[ae,[new h.tBr(ge),new h.FiY],Tc]},{provide:zm,useFactory:bT,deps:[Os,ql,Tc]},{provide:Vv,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:gC},{provide:h.PXZ,multi:!0,useFactory:IT},[Uv,{provide:h.ip1,multi:!0,useFactory:ST,deps:[Uv]},{provide:Uo,useFactory:Bv,deps:[Uv]},{provide:h.tb,multi:!0,useExisting:Uo}]]}}static forChild(t){return{ngModule:n,providers:[Rp(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Zm,8),h.LFG(Os,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function bT(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new zm(n,e,t)}function DT(n,e,t={}){return t.useHash?new ye(n,e):new Te(n,e)}function TT(n){return"guarded"}function Rp(n){return[{provide:h.deG,multi:!0,useValue:n},{provide:kv,multi:!0,useValue:n}]}let Uv=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new wa.x}appInitializer(){return this.injector.get(H,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(p=>r=p),a=this.injector.get(Os),c=this.injector.get(Tc);return"disabled"===c.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?Xe(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Tc),i=this.injector.get(ET),a=this.injector.get(zm),c=this.injector.get(Os),p=this.injector.get(h.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),a.init(),c.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function ST(n){return n.appInitializer.bind(n)}function Bv(n){return n.bootstrapListener.bind(n)}const Uo=new h.OlP("Router Initializer");let Ac=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-home"]],decls:30,vars:0,consts:[["lang","en"],["charset","utf-8"],["name","viewport","content","width=device-width, initial-scale=1"],["href","https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css","rel","stylesheet"],[1,"container-fluid","p-4","text-white","text-center",2,"background-color","rgba(22, 20, 107, 0.479)"],[1,"container","mt-5"],[1,"row"],[1,"col-sm-4"],["title","click para abrir proyecto libros","routerLink","/libros"],["src","https://pbs.twimg.com/media/Eclpg9xUEAA-3sG.jpg","alt","Libros",2,"width","300px"],["title","click para abrir proyecto Canciones ","routerLink","/canciones"],["src","https://i.pinimg.com/originals/64/75/6f/64756f4ddd75ae00cf04a38961e9e7b9.jpg","alt","Libros",2,"width","300px"],["title","click para abrir galer\xeda de imagenes","routerLink","/imagenes"],["src","https://www.ikea.com/jp/en/images/products/vaexbo-collage-frame-for-8-photos-white__0811092_pe771568_s5.jpg","alt","Libros",2,"width","300px"]],template:function(t,r){1&t&&(h.TgZ(0,"html",0),h.TgZ(1,"head"),h.TgZ(2,"title"),h._uU(3,"Bootstrap 5 Example"),h.qZA(),h._UZ(4,"meta",1),h._UZ(5,"meta",2),h._UZ(6,"link",3),h.qZA(),h.TgZ(7,"body"),h.TgZ(8,"div",4),h.TgZ(9,"h1"),h._uU(10,"Angular & Firebase"),h.qZA(),h.TgZ(11,"p"),h._uU(12,"Pr\xe1ctica - Segundo Parcial"),h.qZA(),h.qZA(),h.TgZ(13,"div",5),h.TgZ(14,"div",6),h.TgZ(15,"div",7),h.TgZ(16,"h3"),h._uU(17,"Libros"),h.qZA(),h.TgZ(18,"a",8),h._UZ(19,"img",9),h.qZA(),h.qZA(),h.TgZ(20,"div",7),h.TgZ(21,"h3"),h._uU(22,"Canciones"),h.qZA(),h.TgZ(23,"a",10),h._UZ(24,"img",11),h.qZA(),h.qZA(),h.TgZ(25,"div",7),h.TgZ(26,"h3"),h._uU(27,"Im\xe1genes"),h.qZA(),h.TgZ(28,"a",12),h._UZ(29,"img",13),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA())},directives:[ji],styles:[""]}),n})(),Km=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-about"]],decls:9,vars:0,consts:[[1,"container"],[1,"image"],["src","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSszM77ccdPorCumDVmPDvIrG33vYs6q8fyUg&usqp=CAU","alt","Juancho",2,"width","100"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.TgZ(1,"h1"),h._uU(2,"Yuczara Marlen Hern\xe1ndez Morales"),h.qZA(),h.TgZ(3,"h2"),h._uU(4,"Ingenier\xeda en Desarrollo y Gesti\xf3n de Software"),h.qZA(),h.TgZ(5,"div",1),h._UZ(6,"img",2),h.qZA(),h.TgZ(7,"h2"),h._uU(8,"DS02SV-21"),h.qZA(),h.qZA())},styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}html[_ngcontent-%COMP%]{font-size:10px}body[_ngcontent-%COMP%]{background-position:0 1000px;font-family:Roboto,sans-serif}.container[_ngcontent-%COMP%]{max-width:1100px;margin:0 auto;padding:0 3rem;margin-top:4rem;text-align:center}h1[_ngcontent-%COMP%]{color:#398f51;font-size:3rem;font-weight:700;letter-spacing:8px;margin-bottom:1rem}.image[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:1 rem}"]}),n})();var Ps=F(4986),Dn=F(5813);function yl(){return(0,$n.e)((n,e)=>{let t,r=!1;n.subscribe(new nr.Q(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function Sc(n,e=gl.y){return n=null!=n?n:Fh,(0,$n.e)((t,r)=>{let i,a=!0;t.subscribe(new nr.Q(r,c=>{const p=e(c);(a||!n(i,p))&&(a=!1,i=p,r.next(c))}))})}function Fh(n,e){return n===e}var tt,Ir=F(2011),xc=(F(2438),F(3942)),he=F(5861),_i=F(9681),ns=F(4859),uo=F(1877),P=F(2090),_C="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Da={},Ym=Ym||{},It=_C||self;function kp(){}function Qm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Fp(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var jv="closure_uid_"+(1e9*Math.random()>>>0),xT=0;function wC(n,e,t){return n.call.apply(n.bind,arguments)}function MT(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function oi(n,e,t){return(oi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?wC:MT).apply(null,arguments)}function Lp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ai(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[i].apply(r,c)}}function Cu(){this.s=this.s,this.o=this.o}var NT={};Cu.prototype.s=!1,Cu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function vC(n){return Object.prototype.hasOwnProperty.call(n,jv)&&n[jv]||(n[jv]=++xT)}(this);delete NT[n]}},Cu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const OT=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},EC=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function Jm(n){return Array.prototype.concat.apply([],arguments)}function $v(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Gv(n){return/^[\s\xa0]*$/.test(n)}var vi,PT=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function rs(n,e){return-1!=n.indexOf(e)}function qv(n,e){return n<e?-1:n>e?1:0}e:{var kT=It.navigator;if(kT){var CC=kT.userAgent;if(CC){vi=CC;break e}}vi=""}function _l(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function IC(n){const e={};for(const t in n)e[t]=n[t];return e}var Wv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bC(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<Wv.length;a++)t=Wv[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Xm(n){return Xm[" "](n),n}Xm[" "]=kp;var Vp,n,FT=rs(vi,"Opera"),Mc=rs(vi,"Trident")||rs(vi,"MSIE"),DC=rs(vi,"Edge"),zv=DC||Mc,TC=rs(vi,"Gecko")&&!(rs(vi.toLowerCase(),"webkit")&&!rs(vi,"Edge"))&&!(rs(vi,"Trident")||rs(vi,"MSIE"))&&!rs(vi,"Edge"),LT=rs(vi.toLowerCase(),"webkit")&&!rs(vi,"Edge");function AC(){var n=It.document;return n?n.documentMode:void 0}e:{var Zv="",ty=(n=vi,TC?/rv:([^\);]+)(\)|;)/.exec(n):DC?/Edge\/([\d\.]+)/.exec(n):Mc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):LT?/WebKit\/(\S+)/.exec(n):FT?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ty&&(Zv=ty?ty[1]:""),Mc){var ny=AC();if(null!=ny&&ny>parseFloat(Zv)){Vp=String(ny);break e}}Vp=Zv}var Kv={};var xR=It.document&&Mc&&(AC()||parseInt(Vp,10))||void 0,Bp=function(){if(!It.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{It.addEventListener("test",kp,e),It.removeEventListener("test",kp,e)}catch(t){}return n}();function ui(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Rc(n,e){if(ui.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(TC){e:{try{Xm(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Yv[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Rc.Z.h.call(this)}}ui.prototype.h=function(){this.defaultPrevented=!0},ai(Rc,ui);var Yv={2:"touch",3:"pen",4:"mouse"};Rc.prototype.h=function(){Rc.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var jp="closure_listenable_"+(1e6*Math.random()|0),Qv=0;function Jv(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++Qv,this.ca=this.fa=!1}function Hp(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Xv(n){this.src=n,this.g={},this.h=0}function ew(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=OT(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Hp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function ry(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}Xv.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=ry(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new Jv(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var iy="closure_lm_"+(1e6*Math.random()|0),tw={};function nw(n,e,t,r,i){if(r&&r.once)return rw(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)nw(n,e[a],t,r,i);return null}return t=ly(t),n&&n[jp]?n.N(e,t,Fp(r)?!!r.capture:!!r,i):sy(n,e,t,!1,r,i)}function sy(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=Fp(i)?!!i.capture:!!i,p=uy(n);if(p||(n[iy]=p=new Xv(n)),(t=p.add(e,t,r,c,a)).proxy)return t;if(r=function xC(){var e=RC;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Bp||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(MC(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function rw(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)rw(n,e[a],t,r,i);return null}return t=ly(t),n&&n[jp]?n.O(e,t,Fp(r)?!!r.capture:!!r,i):sy(n,e,t,!0,r,i)}function oy(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)oy(n,e[a],t,r,i);else r=Fp(r)?!!r.capture:!!r,t=ly(t),n&&n[jp]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=ry(a=n.g[e],t,r,i))&&(Hp(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=uy(n))&&(e=n.g[e.toString()],n=-1,e&&(n=ry(e,t,r,i)),(t=-1<n?e[n]:null)&&ay(t))}function ay(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[jp])ew(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(MC(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=uy(e))?(ew(t,n),0==t.h&&(t.src=null,e[iy]=null)):Hp(n)}}}function MC(n){return n in tw?tw[n]:tw[n]="on"+n}function RC(n,e){if(n.ca)n=!0;else{e=new Rc(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&ay(n),n=t.call(r,e)}return n}function uy(n){return(n=n[iy])instanceof Xv?n:null}var $p="__closure_events_fn_"+(1e9*Math.random()>>>0);function ly(n){return"function"==typeof n?n:(n[$p]||(n[$p]=function(e){return n.handleEvent(e)}),n[$p])}function Wr(){Cu.call(this),this.i=new Xv(this),this.P=this,this.I=null}function li(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ui(e,n);else if(e instanceof ui)e.target=e.target||n;else{var i=e;bC(e=new ui(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=cy(c,r,!0,e)&&i}if(i=cy(c=e.g=n,r,!0,e)&&i,i=cy(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=cy(c=e.g=t[a],r,!1,e)&&i}function cy(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.ca&&c.capture==t){var p=c.listener,_=c.ia||c.src;c.fa&&ew(n.i,c),i=!1!==p.call(_,r)&&i}}return i&&!r.defaultPrevented}ai(Wr,Cu),Wr.prototype[jp]=!0,Wr.prototype.removeEventListener=function(n,e,t,r){oy(this,n,e,t,r)},Wr.prototype.M=function(){if(Wr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Hp(t[r]);delete n.g[e],n.h--}}this.I=null},Wr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Wr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Gp=It.JSON.stringify;function iw(){var n=VT;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var hy,sw=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new OC,n=>n.reset());class OC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function PC(n){It.setTimeout(()=>{throw n},0)}function dy(n,e){hy||function kC(){var n=It.Promise.resolve(void 0);hy=function(){n.then(UT)}}(),fy||(hy(),fy=!0),VT.add(n,e)}var fy=!1,VT=new class NC{constructor(){this.h=this.g=null}add(e,t){const r=sw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function UT(){for(var n;n=iw();){try{n.h.call(n.g)}catch(t){PC(t)}var e=sw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}fy=!1}function py(n,e){Wr.call(this),this.h=n||1,this.g=e||It,this.j=oi(this.kb,this),this.l=Date.now()}function gy(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function ow(n,e,t){if("function"==typeof n)t&&(n=oi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=oi(n.handleEvent,n)}return 2147483647<Number(e)?-1:It.setTimeout(n,e||0)}function br(n){n.g=ow(()=>{n.g=null,n.i&&(n.i=!1,br(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ai(py,Wr),(tt=py.prototype).da=!1,tt.S=null,tt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),li(this,"tick"),this.da&&(gy(this),this.start()))}},tt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},tt.M=function(){py.Z.M.call(this),gy(this),delete this.g};class FC extends Cu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:br(this)}M(){super.M(),this.g&&(It.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qp(n){Cu.call(this),this.h=n,this.g={}}ai(qp,Cu);var LC=[];function aw(n,e,t,r){Array.isArray(t)||(t&&(LC[0]=t.toString()),t=LC);for(var i=0;i<t.length;i++){var a=nw(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function VC(n){_l(n.g,function(e,t){this.g.hasOwnProperty(t)&&ay(e)},n),n.g={}}function Wp(){this.g=!0}function Vh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function BC(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return Gp(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}qp.prototype.M=function(){qp.Z.M.call(this),VC(this)},qp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wp.prototype.Aa=function(){this.g=!1},Wp.prototype.info=function(){};var Nc={},uw=null;function lw(){return uw=uw||new Wr}function cw(n){ui.call(this,Nc.Ma,n)}function Oc(n){const e=lw();li(e,new cw(e,n))}function Bo(n,e){ui.call(this,Nc.STAT_EVENT,n),this.stat=e}function $i(n){const e=lw();li(e,new Bo(e,n))}function jC(n,e){ui.call(this,Nc.Na,n),this.size=e}function is(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return It.setTimeout(function(){n()},e)}Nc.Ma="serverreachability",ai(cw,ui),Nc.STAT_EVENT="statevent",ai(Bo,ui),Nc.Na="timingevent",ai(jC,ui);var ss={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},lo={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function my(){}function HC(){}my.prototype.h=null;var Zp,zp={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function hw(){ui.call(this,"d")}function fw(){ui.call(this,"c")}function vl(){}function Kp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new qp(this),this.P=jT,this.W=new py(n=zv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new pw}function pw(){this.i=null,this.g="",this.h=!1}ai(hw,ui),ai(fw,ui),ai(vl,my),vl.prototype.g=function(){return new XMLHttpRequest},vl.prototype.i=function(){return{}},Zp=new vl;var jT=45e3,yy={},Yp={};function Uh(n,e,t){n.K=1,n.v=Iy(Iu(e)),n.s=t,n.U=!0,$C(n,null)}function $C(n,e){n.F=Date.now(),Pc(n),n.A=Iu(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Cw(t.h,"t",r),n.C=0,t=n.l.H,n.h=new pw,n.g=gI(n.l,t?e:null,!n.s),0<n.O&&(n.L=new FC(oi(n.Ia,n,n.g),n.O)),aw(n.V,n.g,"readystatechange",n.gb),e=n.H?IC(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Oc(1),function UC(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",p=a.split("&"),_=0;_<p.length;_++){var C=p[_].split("=");if(1<C.length){var A=C[0];C=C[1];var x=A.split("_");c=2<=x.length&&"type"==x[1]?c+(A+"=")+C+"&":c+(A+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function gw(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function mw(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=yw(n,t),i==Yp){4==e&&(n.o=4,$i(14),r=!1),Vh(n.j,n.m,null,"[Incomplete Response]");break}if(i==yy){n.o=4,$i(15),Vh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Vh(n.j,n.m,i,null),_y(n,i)}gw(n)&&i!=Yp&&i!=yy&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,$i(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Mw(e),e.L=!0,$i(11))):(Vh(n.j,n.m,t,"[Invalid Chunked Response]"),wl(n),Bh(n))}function yw(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Yp:(t=Number(e.substring(t,r)),isNaN(t)?yy:(r+=1)+t>e.length?Yp:(e=e.substr(r,t),n.C=r+t,e))}function Pc(n){n.Y=Date.now()+n.P,_w(n,n.P)}function _w(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=is(oi(n.eb,n),e)}function Qp(n){n.B&&(It.clearTimeout(n.B),n.B=null)}function Bh(n){0==n.l.G||n.I||QT(n.l,n)}function wl(n){Qp(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,gy(n.W),VC(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function _y(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||eg(t.i,n)))if(t.I=n.N,!n.J&&eg(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=is(oi(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Rw(t),Il(t)}My(t),$i(18)}if(1>=zT(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else Wh(t,11)}else if((n.J||t.g==n)&&Rw(t),!Gv(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let C=i[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const A=C[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const x=C[4];null!=x&&(t.za=x,t.h.info("SVER="+t.za));const O=C[5];null!=O&&"number"==typeof O&&0<O&&(t.K=r=1.5*O,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const V=n.g;if(V){const z=V.g?V.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(z){var a=r.i;!a.g&&(rs(z,"spdy")||rs(z,"quic")||rs(z,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(eI(a,a.h),a.h=null))}if(r.D){const Ee=V.g?V.g.getResponseHeader("X-HTTP-Session-Id"):null;Ee&&(r.sa=Ee,Fn(r.F,r.D,Ee))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=ng(r,r.H?r.la:null,r.W),c.J){Iw(r.i,c);var p=c,_=r.K;_&&p.setTimeout(_),p.B&&(Qp(p),Pc(p)),r.g=c}else fI(r);0<t.l.length&&xy(t)}else"stop"!=C[0]&&"close"!=C[0]||Wh(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Wh(t,7):Tw(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}Oc(4)}catch(C){}}function vy(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Qm(n)||"string"==typeof n)EC(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Qm(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function GC(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Qm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function kc(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof kc)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function vw(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Fc(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Fc(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Fc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(tt=Kp.prototype).setTimeout=function(n){this.P=n},tt.gb=function(n){n=n.target;const e=this.L;e&&3==Du(n)?e.l():this.Ia(n)},tt.Ia=function(n){try{if(n==this.g)e:{const A=Du(this.g);var e=this.g.Da();const x=this.g.ba();if(!(3>A)&&(3!=A||zv||this.g&&(this.h.h||this.g.ga()||hI(this.g)))){this.I||4!=A||7==e||Oc(8==e||0>=x?3:2),Qp(this);var t=this.g.ba();this.N=t;t:if(gw(this)){var r=hI(this.g);n="";var i=r.length,a=4==Du(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){wl(this),Bh(this);var c="";break t}this.h.i=new It.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function Lh(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,_=this.g;if((p=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Gv(p)){var C=p;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,$i(12),wl(this),Bh(this);break e}Vh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,_y(this,t)}this.U?(mw(this,A,c),zv&&this.i&&3==A&&(aw(this.V,this.W,"tick",this.fb),this.W.start())):(Vh(this.j,this.m,c,null),_y(this,c)),4==A&&wl(this),this.i&&!this.I&&(4==A?QT(this.l,this):(this.i=!1,Pc(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,$i(12)):(this.o=0,$i(13)),wl(this),Bh(this)}}}catch(A){}},tt.fb=function(){if(this.g){var n=Du(this.g),e=this.g.ga();this.C<e.length&&(Qp(this),mw(this,n,e),this.i&&4!=n&&Pc(this))}},tt.cancel=function(){this.I=!0,wl(this)},tt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function BT(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Oc(3),$i(17)),wl(this),this.o=2,Bh(this)):_w(this,this.Y-n)},(tt=kc.prototype).R=function(){vw(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},tt.T=function(){return vw(this),this.g.concat()},tt.get=function(n,e){return Fc(this.h,n)?this.h[n]:e},tt.set=function(n,e){Fc(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},tt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var qC=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Lc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Lc){this.g=void 0!==e?e:n.g,wy(this,n.j),this.s=n.s,Ey(this,n.i),Cy(this,n.m),this.l=n.l,e=n.h;var t=new jh;t.i=e.i,e.g&&(t.g=new kc(e.g),t.h=e.h),WC(this,t),this.o=n.o}else n&&(t=String(n).match(qC))?(this.g=!!e,wy(this,t[1]||"",!0),this.s=Jp(t[2]||""),Ey(this,t[3]||"",!0),Cy(this,t[4]),this.l=Jp(t[5]||"",!0),WC(this,t[6]||"",!0),this.o=Jp(t[7]||"")):(this.g=!!e,this.h=new jh(null,this.g))}function Iu(n){return new Lc(n)}function wy(n,e,t){n.j=t?Jp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ey(n,e,t){n.i=t?Jp(e,!0):e}function Cy(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function WC(n,e,t){e instanceof jh?(n.h=e,function JC(n,e){e&&!n.j&&(bu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(ww(this,r),Cw(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Xp(e,YC)),n.h=new jh(e,n.g))}function Fn(n,e,t){n.h.set(e,t)}function Iy(n){return Fn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Jp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Xp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,qT),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function qT(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Lc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Xp(e,zC,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Xp(e,zC,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Xp(t,"/"==t.charAt(0)?KC:ZC,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Xp(t,QC)),n.join("")};var zC=/[#\/\?@]/g,ZC=/[#\?:]/g,KC=/[#\?]/g,YC=/[#\?@]/g,QC=/#/g;function jh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function bu(n){n.g||(n.g=new kc,n.h=0,n.i&&function HT(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ww(n,e){bu(n),e=Vc(n,e),Fc(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Fc((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&vw(n)))}function Ew(n,e){return bu(n),e=Vc(n,e),Fc(n.g.h,e)}function Cw(n,e,t){ww(n,e),0<t.length&&(n.i=null,n.g.set(Vc(n,e),$v(t)),n.h+=t.length)}function Vc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function XC(n){this.l=n||WT,n=It.PerformanceNavigationTiming?0<(n=It.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(It.g&&It.g.Ea&&It.g.Ea()&&It.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(tt=jh.prototype).add=function(n,e){bu(this),this.i=null,n=Vc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},tt.forEach=function(n,e){bu(this),this.g.forEach(function(t,r){EC(t,function(i){n.call(e,i,r,this)},this)},this)},tt.T=function(){bu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},tt.R=function(n){bu(this);var e=[];if("string"==typeof n)Ew(this,n)&&(e=Jm(e,this.g.get(Vc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Jm(e,n[t])}return e},tt.set=function(n,e){return bu(this),this.i=null,Ew(this,n=Vc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},tt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var c=i;""!==r[a]&&(c+="="+encodeURIComponent(String(r[a]))),n.push(c)}}return this.i=n.join("&")};var WT=10;function Bc(n){return!!n.h||!!n.g&&n.g.size>=n.j}function zT(n){return n.h?1:n.g?n.g.size:0}function eg(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function eI(n,e){n.g?n.g.add(e):n.h=e}function Iw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function bw(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return $v(n.i)}function tI(){}function wt(){this.g=new tI}function ZT(n,e,t){const r=t||"";try{vy(n,function(i,a){let c=i;Fp(i)&&(c=Gp(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function by(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function El(n){this.l=n.$b||null,this.j=n.ib||!1}function Dy(n,e){Wr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Hh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}XC.prototype.cancel=function(){if(this.i=bw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},tI.prototype.stringify=function(n){return It.JSON.stringify(n,void 0)},tI.prototype.parse=function(n){return It.JSON.parse(n,void 0)},ai(El,my),El.prototype.g=function(){return new Dy(this.l,this.j)},El.prototype.i=function(n){return function(){return n}}({}),ai(Dy,Wr);var Hh=0;function tg(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Tn(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ty(n)}function Ty(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(tt=Dy.prototype).open=function(n,e){if(this.readyState!=Hh)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ty(this)},tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||It).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Tn(this)),this.readyState=Hh},tt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ty(this)),this.g&&(this.readyState=3,Ty(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==It.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tg(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},tt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Tn(this):Ty(this),3==this.readyState&&tg(this)}},tt.Ua=function(n){this.g&&(this.response=this.responseText=n,Tn(this))},tt.Ta=function(n){this.g&&(this.response=n,Tn(this))},tt.ha=function(){this.g&&Tn(this)},tt.setRequestHeader=function(n,e){this.v.append(n,e)},tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Dy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var nI=It.JSON.parse;function Dr(n){Wr.call(this),this.headers=new kc,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=rI,this.K=this.L=!1}ai(Dr,Wr);var rI="",iI=/^https?$/i,sI=["POST","PUT"];function aI(n){return"content-type"==n.toLowerCase()}function uI(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,lI(n),Cl(n)}function lI(n){n.D||(n.D=!0,li(n,"complete"),li(n,"error"))}function cI(n){if(n.h&&void 0!==Ym&&(!n.C[1]||4!=Du(n)||2!=n.ba()))if(n.v&&4==Du(n))ow(n.Fa,0,n);else if(li(n,"readystatechange"),4==Du(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(qC)[1]||null;if(!i&&It.self&&It.self.location){var a=It.self.location.protocol;i=a.substr(0,a.length-1)}r=!iI.test(i?i.toLowerCase():"")}t=r}if(t)li(n,"complete"),li(n,"success");else{n.m=6;try{var c=2<Du(n)?n.g.statusText:""}catch(_){c=""}n.j=c+" ["+n.ba()+"]",lI(n)}}finally{Cl(n)}}}function Cl(n,e){if(n.g){dI(n);const t=n.g,r=n.C[0]?kp:null;n.g=null,n.C=null,e||li(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function dI(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(It.clearTimeout(n.A),n.A=null)}function Du(n){return n.g?n.g.readyState:0}function hI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case rI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Sy(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function Ay(n){let e="";return _l(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Fn(n,e,t))}function $h(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Dw(n){this.za=0,this.l=[],this.h=new Wp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=$h("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=$h("baseRetryDelayMs",5e3,n),this.$a=$h("retryDelaySeedMs",1e4,n),this.Ya=$h("forwardChannelMaxRetries",2,n),this.ra=$h("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new XC(n&&n.concurrentRequestLimit),this.Ca=new wt,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Tw(n){if(Gh(n),3==n.G){var e=n.V++,t=Iu(n.F);Fn(t,"SID",n.J),Fn(t,"RID",e),Fn(t,"TYPE","terminate"),qh(n,t),(e=new Kp(n,n.h,e,void 0)).K=2,e.v=Iy(Iu(t)),t=!1,It.navigator&&It.navigator.sendBeacon&&(t=It.navigator.sendBeacon(e.v.toString(),"")),!t&&It.Image&&((new Image).src=e.v,t=!0),t||(e.g=gI(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Pc(e)}Nw(n)}function Il(n){n.g&&(Mw(n),n.g.cancel(),n.g=null)}function Gh(n){Il(n),n.u&&(It.clearTimeout(n.u),n.u=null),Rw(n),n.i.cancel(),n.m&&("number"==typeof n.m&&It.clearTimeout(n.m),n.m=null)}function Aw(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&xy(n)}function xy(n){Bc(n.i)||n.m||(n.m=!0,dy(n.Ha,n),n.C=0)}function Sw(n,e){var t;t=e?e.m:n.V++;const r=Iu(n.F);Fn(r,"SID",n.J),Fn(r,"RID",t),Fn(r,"AID",n.U),qh(n,r),n.o&&n.s&&Sy(r,n.o,n.s),t=new Kp(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=xw(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),eI(n.i,t),Uh(t,r,e)}function qh(n,e){n.j&&vy({},function(t,r){Fn(e,r,t)})}function xw(n,e,t){t=Math.min(n.l.length,t);var r=n.j?oi(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].h,c.push("ofs="+a)):a=0:c.push("ofs="+a);let p=!0;for(let _=0;_<t;_++){let C=i[_].h;const A=i[_].g;if(C-=a,0>C)a=Math.max(0,i[_].h-100),p=!1;else try{ZT(A,c,"req"+C+"_")}catch(x){r&&r(A)}}if(p){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function fI(n){n.g||n.u||(n.Y=1,dy(n.Ga,n),n.A=0)}function My(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=is(oi(n.Ga,n),JT(n,n.A)),n.A++,0))}function Mw(n){null!=n.B&&(It.clearTimeout(n.B),n.B=null)}function pI(n){n.g=new Kp(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Iu(n.oa);Fn(e,"RID","rpc"),Fn(e,"SID",n.J),Fn(e,"CI",n.N?"0":"1"),Fn(e,"AID",n.U),qh(n,e),Fn(e,"TYPE","xmlhttp"),n.o&&n.s&&Sy(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Iy(Iu(e)),t.s=null,t.U=!0,$C(t,n)}function Rw(n){null!=n.v&&(It.clearTimeout(n.v),n.v=null)}function QT(n,e){var t=null;if(n.g==e){Rw(n),Mw(n),n.g=null;var r=2}else{if(!eg(n.i,e))return;t=e.D,Iw(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;li(r=lw(),new jC(r,t,e,i)),xy(n)}else fI(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function YT(n,e){return!(zT(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=is(oi(n.Ha,n,e),JT(n,n.C)),n.C++,0)))}(n,e)||2==r&&My(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Wh(n,5);break;case 4:Wh(n,10);break;case 3:Wh(n,6);break;default:Wh(n,2)}}function JT(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Wh(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=oi(n.jb,n);t||(t=new Lc("//www.google.com/images/cleardot.gif"),It.location&&"http"==It.location.protocol||wy(t,"https"),Iy(t)),function KT(n,e){const t=new Wp;if(It.Image){const r=new Image;r.onload=Lp(by,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Lp(by,t,r,"TestLoadImage: error",!1,e),r.onabort=Lp(by,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Lp(by,t,r,"TestLoadImage: timeout",!1,e),It.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else $i(2);n.G=0,n.j&&n.j.va(e),Nw(n),Gh(n)}function Nw(n){n.G=0,n.I=-1,n.j&&((0!=bw(n.i).length||0!=n.l.length)&&(n.i.i.length=0,$v(n.l),n.l.length=0),n.j.ua())}function ng(n,e,t){let r=function $T(n){return n instanceof Lc?Iu(n):new Lc(n,void 0)}(t);if(""!=r.i)e&&Ey(r,e+"."+r.i),Cy(r,r.m);else{const i=It.location;r=function GT(n,e,t,r){var i=new Lc(null,void 0);return n&&wy(i,n),e&&Ey(i,e),t&&Cy(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&_l(n.aa,function(i,a){Fn(r,a,i)}),t=n.sa,(e=n.D)&&t&&Fn(r,e,t),Fn(r,"VER",n.ma),qh(n,r),r}function gI(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Dr(t&&n.Ba&&!n.qa?new El({ib:!0}):n.qa)).L=n.H,e}function mI(){}function rg(){if(Mc&&!(10<=Number(xR)))throw Error("Environmental error: no available transport.")}function ci(n,e){Wr.call(this),this.g=new Dw(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Gv(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Gv(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new zh(this)}function yI(n){hw.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function _I(){fw.call(this),this.status=1}function zh(n){this.g=n}(tt=Dr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Zp.g(),this.C=function dw(n){return n.h||(n.h=n.i())}(this.u?this.u:Zp),this.g.onreadystatechange=oi(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void uI(this,a)}n=t||"";const i=new kc(this.headers);r&&vy(r,function(a,c){i.set(c,a)}),r=function Hv(n){e:{var e=aI;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=It.FormData&&n instanceof It.FormData,!(0<=OT(sI,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,c){this.g.setRequestHeader(c,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{dI(this),0<this.B&&((this.K=function oI(n){return Mc&&function SR(){return function ey(n){var e=Kv;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=PT(String(Vp)).split("."),t=PT("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",a=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=qv(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||qv(0==i[2].length,0==a[2].length)||qv(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=oi(this.pa,this)):this.A=ow(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){uI(this,a)}},tt.pa=function(){void 0!==Ym&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,li(this,"timeout"),this.abort(8))},tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,li(this,"complete"),li(this,"abort"),Cl(this))},tt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Cl(this,!0)),Dr.Z.M.call(this)},tt.Fa=function(){this.s||(this.F||this.v||this.l?cI(this):this.cb())},tt.cb=function(){cI(this)},tt.ba=function(){try{return 2<Du(this)?this.g.status:-1}catch(n){return-1}},tt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},tt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),nI(e)}},tt.Da=function(){return this.m},tt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(tt=Dw.prototype).ma=8,tt.G=1,tt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},tt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Kp(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=IC(a),bC(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=xw(this,i,e),Fn(t=Iu(this.F),"RID",n),Fn(t,"CVER",22),this.D&&Fn(t,"X-HTTP-Session-Id",this.D),qh(this,t),this.o&&a&&Sy(t,this.o,a),eI(this.i,i),this.Ra&&Fn(t,"TYPE","init"),this.ja?(Fn(t,"$req",e),Fn(t,"SID","null"),i.$=!0,Uh(i,t,null)):Uh(i,t,e),this.G=2}}else 3==this.G&&(n?Sw(this,n):0==this.l.length||Bc(this.i)||Sw(this))},tt.Ga=function(){if(this.u=null,pI(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=is(oi(this.bb,this),n)}},tt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,$i(10),Il(this),pI(this))},tt.ab=function(){null!=this.v&&(this.v=null,Il(this),My(this),$i(19))},tt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),$i(2)):(this.h.info("Failed to ping google.com"),$i(1))},(tt=mI.prototype).xa=function(){},tt.wa=function(){},tt.va=function(){},tt.ua=function(){},tt.Oa=function(){},rg.prototype.g=function(n,e){return new ci(n,e)},ai(ci,Wr),ci.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),dy(oi(n.hb,n,e))),$i(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=ng(n,null,n.W),xy(n)},ci.prototype.close=function(){Tw(this.g)},ci.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Aw(this.g,e)}else this.v?((e={}).__data__=Gp(n),Aw(this.g,e)):Aw(this.g,n)},ci.prototype.M=function(){this.g.j=null,delete this.j,Tw(this.g),delete this.g,ci.Z.M.call(this)},ai(yI,hw),ai(_I,fw),ai(zh,mI),zh.prototype.xa=function(){li(this.g,"a")},zh.prototype.wa=function(n){li(this.g,new yI(n))},zh.prototype.va=function(n){li(this.g,new _I(n))},zh.prototype.ua=function(){li(this.g,"b")},rg.prototype.createWebChannel=rg.prototype.g,ci.prototype.send=ci.prototype.u,ci.prototype.open=ci.prototype.m,ci.prototype.close=ci.prototype.close,ss.NO_ERROR=0,ss.TIMEOUT=8,ss.HTTP_ERROR=6,lo.COMPLETE="complete",HC.EventType=zp,zp.OPEN="a",zp.CLOSE="b",zp.ERROR="c",zp.MESSAGE="d",Wr.prototype.listen=Wr.prototype.N,Dr.prototype.listenOnce=Dr.prototype.O,Dr.prototype.getLastError=Dr.prototype.La,Dr.prototype.getLastErrorCode=Dr.prototype.Da,Dr.prototype.getStatus=Dr.prototype.ba,Dr.prototype.getResponseJson=Dr.prototype.Qa,Dr.prototype.getResponseText=Dr.prototype.ga,Dr.prototype.send=Dr.prototype.ea;var XT=Da.createWebChannelTransport=function(){return new rg},eA=Da.getStatEventTarget=function(){return lw()},Ry=Da.ErrorCode=ss,tA=Da.EventType=lo,nA=Da.Event=Nc,jc=Da.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},rA=Da.FetchXmlHttpFactory=El,ig=Da.WebChannel=HC,iA=Da.XhrIo=Dr;const Ow="@firebase/firestore";class di{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}di.UNAUTHENTICATED=new di(null),di.GOOGLE_CREDENTIALS=new di("google-credentials-uid"),di.FIRST_PARTY=new di("first-party-uid"),di.MOCK_USER=new di("mock-user");let Hc="9.6.7";const bl=new uo.Yd("@firebase/firestore");function sg(){return bl.logLevel}function Ve(n,...e){if(bl.logLevel<=uo.in.DEBUG){const t=e.map(Pw);bl.debug(`Firestore (${Hc}): ${n}`,...t)}}function pr(n,...e){if(bl.logLevel<=uo.in.ERROR){const t=e.map(Pw);bl.error(`Firestore (${Hc}): ${n}`,...t)}}function og(n,...e){if(bl.logLevel<=uo.in.WARN){const t=e.map(Pw);bl.warn(`Firestore (${Hc}): ${n}`,...t)}}function Pw(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ct(n="Unexpected state"){const e=`FIRESTORE (${Hc}) INTERNAL ASSERTION FAILED: `+n;throw pr(e),new Error(e)}function Ct(n,e){n||ct()}function We(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends P.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class zr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class vI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(di.UNAUTHENTICATED))}shutdown(){}}class uA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class lA{constructor(e){this.t=e,this.currentUser=di.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=C=>this.i!==i?(i=this.i,t(C)):Promise.resolve();let c=new zr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new zr,e.enqueueRetryable(()=>a(this.currentUser))};const p=()=>{const C=c;e.enqueueRetryable((0,he.Z)(function*(){yield C.promise,yield a(r.currentUser)}))},_=C=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(C=>_(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?_(C):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new zr)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct("string"==typeof r.accessToken),new vI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new di(e)}}class cA{constructor(e,t,r){this.type="FirstParty",this.user=di.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class wI{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new cA(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(di.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dA{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.p;return this.p=a.token,Ve("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.p=t.token,new kw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class os{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function hA(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}os.A=-1;class EI{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=hA(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Ht(n,e){return n<e?-1:n>e?1:0}function Dl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Ny(n){return n+"\0"}class Or{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Or.fromMillis(Date.now())}static fromDate(e){return Or.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Or(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new Or(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function CI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function $c(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Oy(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ag{constructor(e,t,r){void 0===t?t=0:t>e.length&&ct(),void 0===r?r=e.length-t:r>e.length-t&&ct(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ag.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ag?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qt extends ag{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const fA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pr extends ag{construct(e,t,r){return new Pr(e,t,r)}static isValidIdentifier(e){return fA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Pr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ne(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new Ne(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Ne(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===p?(c=!c,i++):"."!==p||c?(r+=p,i++):(a(),i++)}if(a(),c)throw new Ne(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pr(t)}static emptyPath(){return new Pr([])}}class Zh{constructor(e){this.fields=e,e.sort(Pr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Dl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Zr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Zr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Zr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zr.EMPTY_BYTE_STRING=new Zr("");const pA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function co(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=pA.exec(n);if(Ct(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ir(n.seconds),nanos:ir(n.nanos)}}function ir(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ho(n){return"string"==typeof n?Zr.fromBase64String(n):Zr.fromUint8Array(n)}function Gc(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function bI(n){const e=n.mapValue.fields.__previous_value__;return Gc(e)?bI(e):e}function Py(n){const e=co(n.mapValue.fields.__local_write_time__.timestampValue);return new Or(e.seconds,e.nanos)}class DI{constructor(e,t,r,i,a,c,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=_}}class qc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new qc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof qc&&e.projectId===this.projectId&&e.database===this.database}}function Wc(n){return null==n}function ug(n){return 0===n&&1/n==-1/0}function TI(n){return"number"==typeof n&&Number.isInteger(n)&&!ug(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Je{constructor(e){this.path=e}static fromPath(e){return new Je(Qt.fromString(e))}static fromName(e){return new Je(Qt.fromString(e).popFirst(5))}static empty(){return new Je(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Je(new Qt(e.slice()))}}const AI={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function Tu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Gc(n)?4:10:ct()}function as(n,e){if(n===e)return!0;const t=Tu(n);if(t!==Tu(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Py(n).isEqual(Py(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=co(r.timestampValue),c=co(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,ho(n.bytesValue).isEqual(ho(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return ir(r.geoPointValue.latitude)===ir(i.geoPointValue.latitude)&&ir(r.geoPointValue.longitude)===ir(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return ir(r.integerValue)===ir(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=ir(r.doubleValue),c=ir(i.doubleValue);return a===c?ug(a)===ug(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return Dl(n.arrayValue.values||[],e.arrayValue.values||[],as);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(CI(a)!==CI(c))return!1;for(const p in a)if(a.hasOwnProperty(p)&&(void 0===c[p]||!as(a[p],c[p])))return!1;return!0}(n,e);default:return ct()}var i}function Au(n,e){return void 0!==(n.values||[]).find(t=>as(t,e))}function Kh(n,e){if(n===e)return 0;const t=Tu(n),r=Tu(e);if(t!==r)return Ht(t,r);switch(t){case 0:return 0;case 1:return Ht(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=ir(i.integerValue||i.doubleValue),p=ir(a.integerValue||a.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return Fw(n.timestampValue,e.timestampValue);case 4:return Fw(Py(n),Py(e));case 5:return Ht(n.stringValue,e.stringValue);case 6:return function(i,a){const c=ho(i),p=ho(a);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),p=a.split("/");for(let _=0;_<c.length&&_<p.length;_++){const C=Ht(c[_],p[_]);if(0!==C)return C}return Ht(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=Ht(ir(i.latitude),ir(a.latitude));return 0!==c?c:Ht(ir(i.longitude),ir(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],p=a.values||[];for(let _=0;_<c.length&&_<p.length;++_){const C=Kh(c[_],p[_]);if(C)return C}return Ht(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){const c=i.fields||{},p=Object.keys(c),_=a.fields||{},C=Object.keys(_);p.sort(),C.sort();for(let A=0;A<p.length&&A<C.length;++A){const x=Ht(p[A],C[A]);if(0!==x)return x;const O=Kh(c[p[A]],_[C[A]]);if(0!==O)return O}return Ht(p.length,C.length)}(n.mapValue,e.mapValue);default:throw ct()}}function Fw(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ht(n,e);const t=co(n),r=co(e),i=Ht(t.seconds,r.seconds);return 0!==i?i:Ht(t.nanos,r.nanos)}function zc(n){return Lw(n)}function Lw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=co(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ho(n.bytesValue).toBase64():"referenceValue"in n?Je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=Lw(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const p of i)c?c=!1:a+=",",a+=`${p}:${Lw(r.fields[p])}`;return a+"}"}(n.mapValue):ct();var e}function ky(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Vw(n){return!!n&&"integerValue"in n}function Yh(n){return!!n&&"arrayValue"in n}function SI(n){return!!n&&"nullValue"in n}function gA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Fy(n){return!!n&&"mapValue"in n}function lg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return $c(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=lg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lg(n.arrayValue.values[t]);return e}return Object.assign({},n)}class gr{constructor(e){this.value=e}static empty(){return new gr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Fy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lg(t)}setAll(e){let t=Pr.emptyPath(),r={},i=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=p.popLast()}c?r[p.lastSegment()]=lg(c):i.push(p.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Fy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return as(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Fy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){$c(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new gr(lg(this.value))}}function Uw(n){const e=[];return $c(n.fields,(t,r)=>{const i=new Pr([t]);if(Fy(r)){const a=Uw(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new Zh(e)}class vn{constructor(e,t,r,i,a,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new vn(e,0,Et.min(),Et.min(),gr.empty(),0)}static newFoundDocument(e,t,r){return new vn(e,1,t,Et.min(),r,0)}static newNoDocument(e,t){return new vn(e,2,t,Et.min(),gr.empty(),0)}static newUnknownDocument(e,t){return new vn(e,3,t,Et.min(),gr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}let xI=(()=>{class n{constructor(t,r,i,a){this.indexId=t,this.collectionGroup=r,this.fields=i,this.indexState=a}}return n.UNKNOWN_ID=-1,n})();class cg{constructor(e,t){this.fieldPath=e,this.kind=t}}class dg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new dg(0,Bw.min())}}class Bw{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Bw(Et.min(),Je.empty(),-1)}}class MI{constructor(e,t=null,r=[],i=[],a=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=p,this.P=null}}function mA(n,e=null,t=[],r=[],i=null,a=null,c=null){return new MI(n,e,t,r,i,a,c)}function Qh(n){const e=We(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+zc(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Wc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>zc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>zc(r)).join(",")),e.P=t}return e.P}function Ly(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!NI(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!as(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$w(n.startAt,e.startAt)&&$w(n.endAt,e.endAt)}function Vy(n){return Je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Gi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.v(e,t,r):new yA(e,t,r):"array-contains"===t?new wA(e,r):"in"===t?new EA(e,r):"not-in"===t?new CA(e,r):"array-contains-any"===t?new hg(e,r):new Gi(e,t,r)}static v(e,t,r){return"in"===t?new _A(e,r):new vA(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.V(Kh(t,this.value)):null!==t&&Tu(this.value)===Tu(t)&&this.V(Kh(t,this.value))}V(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ct()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class yA extends Gi{constructor(e,t,r){super(e,t,r),this.key=Je.fromName(r.referenceValue)}matches(e){const t=Je.comparator(e.key,this.key);return this.V(t)}}class _A extends Gi{constructor(e,t){super(e,"in",t),this.keys=RI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class vA extends Gi{constructor(e,t){super(e,"not-in",t),this.keys=RI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function RI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Je.fromName(r.referenceValue))}class wA extends Gi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yh(t)&&Au(t.arrayValue,this.value)}}class EA extends Gi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Au(this.value.arrayValue,t)}}class CA extends Gi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Au(this.value.arrayValue,t)}}class hg extends Gi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Au(this.value.arrayValue,r))}}class Zc{constructor(e,t){this.position=e,this.inclusive=t}}class Kc{constructor(e,t="asc"){this.field=e,this.dir=t}}function NI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Hw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?Je.comparator(Je.fromName(c.referenceValue),t.key):Kh(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function $w(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!as(n.position[t],e.position[t]))return!1;return!0}class Su{constructor(e,t=null,r=[],i=[],a=null,c="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=p,this.endAt=_,this.D=null,this.C=null}}function OI(n,e,t,r,i,a,c,p){return new Su(n,e,t,r,i,a,c,p)}function Jh(n){return new Su(n)}function Uy(n){return!Wc(n.limit)&&"F"===n.limitType}function By(n){return!Wc(n.limit)&&"L"===n.limitType}function Gw(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function qw(n){for(const e of n.filters)if(e.S())return e.field;return null}function Yc(n){return null!==n.collectionGroup}function Xh(n){const e=We(n);if(null===e.D){e.D=[];const t=qw(e),r=Gw(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Kc(t)),e.D.push(new Kc(Pr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Kc(Pr.keyField(),a))}}}return e.D}function us(n){const e=We(n);if(!e.C)if("F"===e.limitType)e.C=mA(e.path,e.collectionGroup,Xh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Xh(e))t.push(new Kc(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Zc(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new Zc(e.startAt.position,!e.startAt.inclusive):null;e.C=mA(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function jo(n,e,t){return new Su(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function fg(n,e){return Ly(us(n),us(e))&&n.limitType===e.limitType}function jy(n){return`${Qh(us(n))}|lt:${n.limitType}`}function Qc(n){return`Query(target=${function jw(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${zc(r.value)}`;var r}).join(", ")}]`),Wc(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>zc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>zc(t)).join(",")),`Target(${e})`}(us(n))}; limitType=${n.limitType})`}function Ww(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Je.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const p=Hw(i,a,c);return i.inclusive?p<=0:p<0}(t.startAt,Xh(t),r)||t.endAt&&!function(i,a,c){const p=Hw(i,a,c);return i.inclusive?p>=0:p>0}(t.endAt,Xh(t),r)));var t,r}function PI(n){return(e,t)=>{let r=!1;for(const i of Xh(n)){const a=IA(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function IA(n,e,t){const r=n.field.isKeyField()?Je.comparator(e.key,t.key):function(i,a,c){const p=a.data.field(i),_=c.data.field(i);return null!==p&&null!==_?Kh(p,_):ct()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ct()}}function pg(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ug(e)?"-0":e}}function gg(n){return{integerValue:""+n}}function kI(n,e){return TI(e)?gg(e):pg(n,e)}class Hy{constructor(){this._=void 0}}function FI(n,e,t){return n instanceof Jc?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Xc?VI(n,e):n instanceof ef?Gy(n,e):function(r,i){const a=$y(r,i),c=zw(a)+zw(r.k);return Vw(a)&&Vw(r.k)?gg(c):pg(r.O,c)}(n,e)}function LI(n,e,t){return n instanceof Xc?VI(n,e):n instanceof ef?Gy(n,e):t}function $y(n,e){return n instanceof Tl?Vw(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Jc extends Hy{}class Xc extends Hy{constructor(e){super(),this.elements=e}}function VI(n,e){const t=qy(e);for(const r of n.elements)t.some(i=>as(i,r))||t.push(r);return{arrayValue:{values:t}}}class ef extends Hy{constructor(e){super(),this.elements=e}}function Gy(n,e){let t=qy(e);for(const r of n.elements)t=t.filter(i=>!as(i,r));return{arrayValue:{values:t}}}class Tl extends Hy{constructor(e,t){super(),this.O=e,this.k=t}}function zw(n){return ir(n.integerValue||n.doubleValue)}function qy(n){return Yh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class ed{constructor(e,t){this.field=e,this.transform=t}}class DA{constructor(e,t){this.version=e,this.transformResults=t}}class Tr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Tr}static exists(e){return new Tr(void 0,e)}static updateTime(e){return new Tr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wy(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class mg{}function Zw(n,e,t){n instanceof yg?function(r,i,a){const c=r.value.clone(),p=UI(r.fieldTransforms,i,a.transformResults);c.setAll(p),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Al?function(r,i,a){if(!Wy(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=UI(r.fieldTransforms,i,a.transformResults),p=i.data;p.setAll(Qw(r)),p.setAll(c),i.convertToFoundDocument(a.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function zy(n,e,t){var i;n instanceof yg?function(r,i,a){if(!Wy(r.precondition,i))return;const c=r.value.clone(),p=Jw(r.fieldTransforms,a,i);c.setAll(p),i.convertToFoundDocument(Yw(i),c).setHasLocalMutations()}(n,e,t):n instanceof Al?function(r,i,a){if(!Wy(r.precondition,i))return;const c=Jw(r.fieldTransforms,a,i),p=i.data;p.setAll(Qw(r)),p.setAll(c),i.convertToFoundDocument(Yw(i),p).setHasLocalMutations()}(n,e,t):Wy(n.precondition,i=e)&&i.convertToNoDocument(Et.min())}function TA(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=$y(r.transform,i||null);null!=a&&(null==t&&(t=gr.empty()),t.set(r.field,a))}return t||null}function Kw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Dl(t,r,(i,a)=>function bA(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Xc&&r instanceof Xc||t instanceof ef&&r instanceof ef?Dl(t.elements,r.elements,as):t instanceof Tl&&r instanceof Tl?as(t.k,r.k):t instanceof Jc&&r instanceof Jc);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Yw(n){return n.isFoundDocument()?n.version:Et.min()}class yg extends mg{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Al extends mg{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function Qw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function UI(n,e,t){const r=new Map;Ct(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,p=e.data.field(a.field);r.set(a.field,LI(c,p,t[i]))}return r}function Jw(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,FI(a,c,e))}return r}class _g extends mg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class hi extends mg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class tf{constructor(e){this.count=e}}var Ar,Zt;function AA(n){switch(n){default:return ct();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function nf(n){if(void 0===n)return pr("GRPC error has no .code"),ue.UNKNOWN;switch(n){case Ar.OK:return ue.OK;case Ar.CANCELLED:return ue.CANCELLED;case Ar.UNKNOWN:return ue.UNKNOWN;case Ar.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Ar.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Ar.INTERNAL:return ue.INTERNAL;case Ar.UNAVAILABLE:return ue.UNAVAILABLE;case Ar.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Ar.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Ar.NOT_FOUND:return ue.NOT_FOUND;case Ar.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Ar.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Ar.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Ar.ABORTED:return ue.ABORTED;case Ar.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Ar.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Ar.DATA_LOSS:return ue.DATA_LOSS;default:return ct()}}(Zt=Ar||(Ar={}))[Zt.OK=0]="OK",Zt[Zt.CANCELLED=1]="CANCELLED",Zt[Zt.UNKNOWN=2]="UNKNOWN",Zt[Zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zt[Zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zt[Zt.NOT_FOUND=5]="NOT_FOUND",Zt[Zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zt[Zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zt[Zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zt[Zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zt[Zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zt[Zt.ABORTED=10]="ABORTED",Zt[Zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zt[Zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zt[Zt.INTERNAL=13]="INTERNAL",Zt[Zt.UNAVAILABLE=14]="UNAVAILABLE",Zt[Zt.DATA_LOSS=15]="DATA_LOSS";class mr{constructor(e,t){this.comparator=e,this.root=t||fi.EMPTY}insert(e,t){return new mr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fi.BLACK,null,null))}remove(e){return new mr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rf(this.root,e,this.comparator,!1)}getReverseIterator(){return new rf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rf(this.root,e,this.comparator,!0)}}class rf{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:fi.RED,this.left=null!=i?i:fi.EMPTY,this.right=null!=a?a:fi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new fi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return fi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return fi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ct();const e=this.left.check();if(e!==this.right.check())throw ct();return e+(this.isRed()?0:1)}}fi.EMPTY=null,fi.RED=!0,fi.BLACK=!1,fi.EMPTY=new class{constructor(){this.size=0}get key(){throw ct()}get value(){throw ct()}get color(){throw ct()}get left(){throw ct()}get right(){throw ct()}copy(n,e,t,r,i){return this}insert(n,e,t){return new fi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Sn{constructor(e){this.comparator=e,this.data=new mr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new BI(this.data.getIterator())}getIteratorFrom(e){return new BI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Sn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Sn(this.comparator);return t.data=e,t}}class BI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function sf(n){return n.hasNext()?n.getNext():void 0}const Xw=new mr(Je.comparator);function ks(){return Xw}const jI=new mr(Je.comparator);function of(){return jI}const e0=new mr(Je.comparator),RR=new Sn(Je.comparator);function un(...n){let e=RR;for(const t of n)e=e.add(t);return e}const SA=new Sn(Ht);function vg(){return SA}class Sl{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,af.createSynthesizedTargetChangeForCurrentChange(e,t)),new Sl(Et.min(),r,vg(),ks(),un())}}class af{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new af(Zr.EMPTY_BYTE_STRING,t,un(),un(),un())}}class Zy{constructor(e,t,r,i){this.M=e,this.removedTargetIds=t,this.key=r,this.$=i}}class Ky{constructor(e,t){this.targetId=e,this.F=t}}class Yy{constructor(e,t,r=Zr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class xA{constructor(){this.B=0,this.L=t0(),this.U=Zr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=un(),t=un(),r=un();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ct()}}),new af(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=t0()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class MA{constructor(e){this.nt=e,this.st=new Map,this.it=ks(),this.rt=HI(),this.ot=new Sn(Ht)}ct(e){for(const t of e.M)e.$&&e.$.isFoundDocument()?this.ut(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:ct()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.F.count,i=this.wt(t);if(i){const a=i.target;if(Vy(a))if(0===r){const c=new Je(a.path);this.at(t,c,vn.newNoDocument(c,Et.min()))}else Ct(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,c)=>{const p=this.wt(c);if(p){if(a.current&&Vy(p.target)){const _=new Je(p.target.path);null!==this.it.get(_)||this.It(c,_)||this.at(c,_,vn.newNoDocument(_,e))}a.j&&(t.set(c,a.H()),a.J())}});let r=un();this.rt.forEach((a,c)=>{let p=!0;c.forEachWhile(_=>{const C=this.wt(_);return!C||2===C.purpose||(p=!1,!1)}),p&&(r=r.add(a))}),this.it.forEach((a,c)=>c.setReadTime(e));const i=new Sl(e,t,this.ot,this.it,r);return this.it=ks(),this.rt=HI(),this.ot=new Sn(Ht),i}ut(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Et(t.key).add(e))}at(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Et(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new xA,this.st.set(e,t)),t}Et(e){let t=this.rt.get(e);return t||(t=new Sn(Ht),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Tt(e)}dt(e){this.st.set(e,new xA),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function HI(){return new mr(Je.comparator)}function t0(){return new mr(Je.comparator)}const $I={asc:"ASCENDING",desc:"DESCENDING"},RA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class GI{constructor(e,t){this.databaseId=e,this.N=t}}function uf(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qI(n,e){return n.N?e.toBase64():e.toUint8Array()}function NA(n,e){return uf(n,e.toTimestamp())}function kr(n){return Ct(!!n),Et.fromTimestamp(function(e){const t=co(e);return new Or(t.seconds,t.nanos)}(n))}function n0(n,e){return(t=n,new Qt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function r0(n){const e=Qt.fromString(n);return Ct(a0(e)),e}function lf(n,e){return n0(n.databaseId,e.path)}function Ho(n,e){const t=r0(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Je(OA(t))}function Qy(n,e){return n0(n.databaseId,e)}function WI(n){const e=r0(n);return 4===e.length?Qt.emptyPath():OA(e)}function wg(n){return new Qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function OA(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function s0(n,e,t){return{name:lf(n,e),fields:t.value.mapValue.fields}}function PA(n,e,t){const r=Ho(n,e.name),i=kr(e.updateTime),a=new gr({mapValue:{fields:e.fields}}),c=vn.newFoundDocument(r,i,a);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Jy(n,e){let t;if(e instanceof yg)t={update:s0(n,e.key,e.value)};else if(e instanceof _g)t={delete:lf(n,e.key)};else if(e instanceof Al)t={update:s0(n,e.key,e.data),updateMask:YI(e.fieldMask)};else{if(!(e instanceof hi))return ct();t={verify:lf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof Jc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Xc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ef)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Tl)return{fieldPath:a.field.canonicalString(),increment:c.k};throw ct()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:NA(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ct()),t;var i}function zI(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Tr.updateTime(kr(i.updateTime)):void 0!==i.exists?Tr.exists(i.exists):Tr.none():Tr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let p=null;"setToServerValue"in c?(Ct("REQUEST_TIME"===c.setToServerValue),p=new Jc):"appendMissingElements"in c?p=new Xc(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new ef(c.removeAllFromArray.values||[]):"increment"in c?p=new Tl(a,c.increment):ct();const _=Pr.fromServerFormat(c.fieldPath);return new ed(_,p)}(n,i)):[];var i;if(e.update){const i=Ho(n,e.update.name),a=new gr({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Zh((e.updateMask.fieldPaths||[]).map(C=>Pr.fromServerFormat(C)));return new Al(i,a,c,t,r)}return new yg(i,a,t,r)}if(e.delete){const i=Ho(n,e.delete);return new _g(i,t)}if(e.verify){const i=Ho(n,e.verify);return new hi(i,t)}return ct()}function kA(n,e){return{documents:[Qy(n,e.path)]}}function FA(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Qy(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Qy(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const C=_.map(A=>function(x){if("=="===x.op){if(gA(x.value))return{unaryFilter:{field:df(x.field),op:"IS_NAN"}};if(SI(x.value))return{unaryFilter:{field:df(x.field),op:"IS_NULL"}}}else if("!="===x.op){if(gA(x.value))return{unaryFilter:{field:df(x.field),op:"IS_NOT_NAN"}};if(SI(x.value))return{unaryFilter:{field:df(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:df(x.field),op:ZI(x.op),value:x.value}}}(A));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(C=>{return{field:df((A=C).field),direction:cf(A.dir)};var A})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=(C=e.limit,n.N||Wc(C)?C:{value:C});var C,p,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function Eg(n){let e=WI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ct(1===r);const A=t.from[0];A.allDescendants?i=A.collectionId:e=e.child(A.collectionId)}let a=[];t.where&&(a=Xy(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(A=>{return new Kc(hf((x=A).field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction));var x}));let p=null;t.limit&&(p=function(A){let x;return x="object"==typeof A?A.value:A,Wc(x)?null:x}(t.limit));let _=null;var A;t.startAt&&(_=new Zc((A=t.startAt).values||[],!!A.before));let C=null;return t.endAt&&(C=function(A){return new Zc(A.values||[],!A.before)}(t.endAt)),OI(e,i,c,a,p,"F",_,C)}function Xy(n){return n?void 0!==n.unaryFilter?[KI(n)]:void 0!==n.fieldFilter?[o0(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Xy(e)).reduce((e,t)=>e.concat(t)):ct():[]}function cf(n){return $I[n]}function ZI(n){return RA[n]}function df(n){return{fieldPath:n.canonicalString()}}function hf(n){return Pr.fromServerFormat(n.fieldPath)}function o0(n){return Gi.create(hf(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ct()}}(n.fieldFilter.op),n.fieldFilter.value)}function KI(n){switch(n.unaryFilter.op){case"IS_NAN":const e=hf(n.unaryFilter.field);return Gi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=hf(n.unaryFilter.field);return Gi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=hf(n.unaryFilter.field);return Gi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=hf(n.unaryFilter.field);return Gi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ct()}}function YI(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function a0(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function pi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Cg(e)),e=QI(n.get(t),e);return Cg(e)}function QI(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function Cg(n){return n+"\x01\x01"}function $o(n){const e=n.length;if(Ct(e>=2),2===e)return Ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Qt.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&ct(),n.charAt(c+1)){case"\x01":const p=n.substring(a,c);let _;0===i.length?_=p:(i+=p,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:ct()}a=c+2}return new Qt(r)}class FR{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class fo{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}fo.store="owner",fo.key="owner";class td{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}td.store="mutationQueues",td.keyPath="userId";class xn{constructor(e,t,r,i,a){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}}xn.store="mutations",xn.keyPath="batchId",xn.userMutationsIndex="userMutationsIndex",xn.userMutationsKeyPath=["userId","batchId"];class Kr{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,pi(t)]}static key(e,t,r){return[e,pi(t),r]}}Kr.store="documentMutations",Kr.PLACEHOLDER=new Kr;class LA{constructor(e,t){this.path=e,this.readTime=t}}class LR{constructor(e,t){this.path=e,this.version=t}}class sr{constructor(e,t,r,i,a,c){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=c}}sr.store="remoteDocuments",sr.readTimeIndex="readTimeIndex",sr.readTimeIndexPath="readTime",sr.collectionReadTimeIndex="collectionReadTimeIndex",sr.collectionReadTimeIndexPath=["parentPath","readTime"];class po{constructor(e){this.byteSize=e}}po.store="remoteDocumentGlobal",po.key="remoteDocumentGlobalKey";class ls{constructor(e,t,r,i,a,c,p){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=c,this.query=p}}ls.store="targets",ls.keyPath="targetId",ls.queryTargetsIndexName="queryTargetsIndex",ls.queryTargetsKeyPath=["canonicalId","targetId"];class mn{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}mn.store="targetDocuments",mn.keyPath=["targetId","path"],mn.documentTargetsIndex="documentTargetsIndex",mn.documentTargetsKeyPath=["path","targetId"];class Fs{constructor(e,t,r,i){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=i}}Fs.key="targetGlobalKey",Fs.store="targetGlobal";class xu{constructor(e,t){this.collectionId=e,this.parent=t}}xu.store="collectionParents",xu.keyPath=["collectionId","parent"];class Mu{constructor(e,t,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=i}}Mu.store="clientMetadata",Mu.keyPath="clientId";class ff{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}ff.store="bundles",ff.keyPath="bundleId";class xl{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}xl.store="namedQueries",xl.keyPath="name";class cs{constructor(e,t,r){this.indexId=e,this.collectionGroup=t,this.fields=r}}cs.store="indexConfiguration",cs.keyPath="indexId",cs.collectionGroupIndex="collectionGroupIndex",cs.collectionGroupIndexPath="collectionGroup";class Ls{constructor(e,t,r,i,a,c){this.indexId=e,this.uid=t,this.sequenceNumber=r,this.readTime=i,this.documentKey=a,this.largestBatchId=c}}Ls.store="indexState",Ls.keyPath=["indexId","uid"],Ls.sequenceNumberIndex="sequenceNumberIndex",Ls.sequenceNumberIndexPath=["uid","sequenceNumber"];class go{constructor(e,t,r,i,a){this.indexId=e,this.uid=t,this.arrayValue=r,this.directionalValue=i,this.documentKey=a}}go.store="indexEntries",go.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],go.documentKeyIndex="documentKeyIndex",go.documentKeyIndexPath=["indexId","uid","documentKey"];class Fr{constructor(e,t,r,i,a,c){this.userId=e,this.collectionPath=t,this.documentId=r,this.collectionGroup=i,this.largestBatchId=a,this.overlayMutation=c}}Fr.store="documentOverlays",Fr.keyPath=["userId","collectionPath","documentId"],Fr.collectionPathOverlayIndex="collectionPathOverlayIndex",Fr.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],Fr.collectionGroupOverlayIndex="collectionGroupOverlayIndex",Fr.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];const u0=[td.store,xn.store,Kr.store,sr.store,ls.store,fo.store,Fs.store,mn.store,Mu.store,po.store,xu.store,ff.store,xl.store],JI=[...u0,Fr.store],VA=[...JI,cs.store,Ls.store,go.store],e_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mo{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.reject(t)}static resolve(e){return new fe((t,r)=>{t(e)})}static reject(e){return new fe((t,r)=>{r(e)})}static waitFor(e){return new fe((t,r)=>{let i=0,a=0,c=!1;e.forEach(p=>{++i,p.next(()=>{++a,c&&a===i&&t()},_=>r(_))}),c=!0,a===i&&t()})}static or(e){let t=fe.resolve(!1);for(const r of e)t=t.next(i=>i?fe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class l0{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new zr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Ig(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=t_(r.target.error);this.At.reject(new Ig(e,i))}}static open(e,t,r,i){try{return new l0(t,e.transaction(i,r))}catch(a){throw new Ig(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new eb(t)}}class Go{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===Go.vt((0,P.z$)())&&pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),rd(window.indexedDB.deleteDatabase(e)).toPromise()}static Vt(){if(!(0,P.hl)())return!1;if(Go.St())return!0;const e=(0,P.z$)(),t=Go.vt(e),r=0<t&&t<10,i=Go.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static Nt(e,t){return e.store(t)}static vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}xt(e){var t=this;return(0,he.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new Ig(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const p=c.target.error;i("VersionError"===p.name?new Ne(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Ne(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new Ig(e,p))},a.onupgradeneeded=c=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.bt.kt(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Ot&&(t.db.onversionchange=r=>t.Ot(r)),t.db})()}Mt(e){this.Ot=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,he.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{a.db=yield a.xt(e);const _=l0.open(a.db,e,c?"readonly":"readwrite",r),C=i(_).next(A=>(_.Pt(),A)).catch(A=>(_.abort(A),fe.reject(A))).toPromise();return C.catch(()=>{}),yield _.Rt,C}catch(_){const C="FirebaseError"!==_.name&&p<3;if(Ve("SimpleDb","Transaction failed with error:",_.message,"Retrying:",C),a.close(),!C)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class XI{constructor(e){this.$t=e,this.Ft=!1,this.Bt=null}get isDone(){return this.Ft}get Lt(){return this.Bt}set cursor(e){this.$t=e}done(){this.Ft=!0}Ut(e){this.Bt=e}delete(){return rd(this.$t.delete())}}class Ig extends Ne{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function nd(n){return"IndexedDbTransactionError"===n.name}class eb{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),rd(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),rd(this.store.add(e))}get(e){return rd(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),rd(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),rd(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Kt(i,(c,p)=>{a.push(p)}).next(()=>a)}{const i=this.store.getAll(r.range);return new fe((a,c)=>{i.onerror=p=>{c(p.target.error)},i.onsuccess=p=>{a(p.target.result)}})}}Gt(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(a,c,p)=>p.delete())}Qt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}Wt(e){const t=this.cursor({});return new fe((r,i)=>{t.onerror=a=>{const c=t_(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new fe((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void i();const _=new XI(p),C=t(p.primaryKey,p.value,_);if(C instanceof fe){const A=C.catch(x=>(_.done(),fe.reject(x)));r.push(A)}_.isDone?i():null===_.Lt?p.continue():p.continue(_.Lt)}}).next(()=>fe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function rd(n){return new fe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=t_(r.target.error);t(i)}})}let UA=!1;function t_(n){const e=Go.vt((0,P.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return UA||(UA=!0,setTimeout(()=>{throw r},0)),r}}return n}class c0 extends mo{constructor(e,t){super(),this.zt=e,this.currentSequenceNumber=t}}function Yr(n,e){const t=We(n);return Go.Nt(t.zt,e)}class d0{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Zw(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&zy(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&zy(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Et.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),un())}isEqual(e){return this.batchId===e.batchId&&Dl(this.mutations,e.mutations,(t,r)=>Kw(t,r))&&Dl(this.baseMutations,e.baseMutations,(t,r)=>Kw(t,r))}}class n_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ct(e.mutations.length===r.length);let i=e0;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new n_(e,t,r,i)}}class id{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ta{constructor(e,t,r,i,a=Et.min(),c=Et.min(),p=Zr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new Ta(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ta(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ta(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class h0{constructor(e){this.Ht=e}}function tb(n,e){let t;if(e.document)t=PA(n.Ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Je.fromSegments(e.noDocument.path),i=pf(e.noDocument.readTime);t=vn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ct();{const r=Je.fromSegments(e.unknownDocument.path),i=pf(e.unknownDocument.version);t=vn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(p0(e.readTime)),t}function f0(n,e){const t=r_(e.readTime),r=e.key.path.popLast().toArray();if(e.isFoundDocument()){const i={name:lf(c=n.Ht,(p=e).key),fields:p.data.value.mapValue.fields,updateTime:uf(c,p.version.toTimestamp())};return new sr(null,null,i,e.hasCommittedMutations,t,r)}var c,p;if(e.isNoDocument()){const i=e.key.path.toArray(),a=sd(e.version),c=e.hasCommittedMutations;return new sr(null,new LA(i,a),null,c,t,r)}if(e.isUnknownDocument()){const i=e.key.path.toArray(),a=sd(e.version);return new sr(new LR(i,a),null,null,!0,t,r)}return ct()}function r_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function p0(n){const e=new Or(n[0],n[1]);return Et.fromTimestamp(e)}function sd(n){const e=n.toTimestamp();return new FR(e.seconds,e.nanoseconds)}function pf(n){const e=new Or(n.seconds,n.nanoseconds);return Et.fromTimestamp(e)}function bg(n,e){const t=(e.baseMutations||[]).map(a=>zI(n.Ht,a));for(let a=0;a<e.mutations.length-1;++a){const c=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(c.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>zI(n.Ht,a)),i=Or.fromMillis(e.localWriteTimeMs);return new d0(e.batchId,i,t,r)}function gf(n){const e=pf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?pf(n.lastLimboFreeSnapshotVersion):Et.min();let r;var i;return void 0!==n.query.documents?(Ct(1===(i=n.query).documents.length),r=us(Jh(WI(i.documents[0])))):r=us(Eg(n.query)),new Ta(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Zr.fromBase64String(n.resumeToken))}function nb(n,e){const t=sd(e.snapshotVersion),r=sd(e.lastLimboFreeSnapshotVersion);let i;i=Vy(e.target)?kA(n.Ht,e.target):FA(n.Ht,e.target);const a=e.resumeToken.toBase64();return new ls(e.targetId,Qh(e.target),t,a,e.sequenceNumber,r,i)}function g0(n){const e=Eg({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?jo(e,e.limit,"L"):e}function m0(n,e){return new id(e.largestBatchId,zI(n.Ht,e.overlayMutation))}function BA(n,e){const t=e.path.lastSegment();return[n,pi(e.path.popLast()),t]}class VR{getBundleMetadata(e,t){return jA(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:pf(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return jA(e).put({bundleId:(r=t).id,createTime:sd(kr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return HA(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:g0(i.bundledQuery),readTime:pf(i.readTime)};var i})}saveNamedQuery(e,t){return HA(e).put({name:(r=t).name,readTime:sd(kr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function jA(n){return Yr(n,ff.store)}function HA(n){return Yr(n,xl.store)}class rb{constructor(e,t){this.O=e,this.userId=t}static Jt(e,t){return new rb(e,t.uid||"")}getOverlay(e,t){return Dg(e).get(BA(this.userId,t)).next(r=>r?m0(this.O,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach(a=>{const c=new id(t,a);i.push(this.Yt(e,c))}),fe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(pi(c.getCollectionPath())));const a=[];return i.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(Dg(e).Gt(Fr.collectionPathOverlayIndex,p))}),fe.waitFor(a)}getOverlaysForCollection(e,t,r){const i=new Map,a=pi(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Dg(e).qt(Fr.collectionPathOverlayIndex,c).next(p=>{for(const _ of p){const C=m0(this.O,_);i.set(C.getKey(),C)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=new Map;let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Dg(e).Qt({index:Fr.collectionGroupOverlayIndex,range:p},(_,C,A)=>{const x=m0(this.O,C);a.size<i||x.largestBatchId===c?(a.set(x.getKey(),x),c=x.largestBatchId):A.done()}).next(()=>a)}Yt(e,t){return Dg(e).put(function(r,i,a){const[c,p,_]=BA(i,a.mutation.key);return new Fr(i,p,_,a.mutation.key.getCollectionGroup(),a.largestBatchId,Jy(r.Ht,a.mutation))}(this.O,this.userId,t))}}function Dg(n){return Yr(n,Fr.store)}class od{constructor(){}Xt(e,t){this.Zt(e,t),t.te()}Zt(e,t){if("nullValue"in e)this.ee(t,5);else if("booleanValue"in e)this.ee(t,10),t.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(t,15),t.ne(ir(e.integerValue));else if("doubleValue"in e){const r=ir(e.doubleValue);isNaN(r)?this.ee(t,13):(this.ee(t,15),ug(r)?t.ne(0):t.ne(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ee(t,20),"string"==typeof r?t.se(r):(t.se(`${r.seconds||""}`),t.ne(r.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,t),this.re(t);else if("bytesValue"in e)this.ee(t,30),t.oe(ho(e.bytesValue)),this.re(t);else if("referenceValue"in e)this.ce(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ee(t,45),t.ne(r.latitude||0),t.ne(r.longitude||0)}else"mapValue"in e?as(e,AI)?this.ee(t,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,t),this.re(t)):"arrayValue"in e?(this.ae(e.arrayValue,t),this.re(t)):ct()}ie(e,t){this.ee(t,25),this.he(e,t)}he(e,t){t.se(e)}ue(e,t){const r=e.fields||{};this.ee(t,55);for(const i of Object.keys(r))this.ie(i,t),this.Zt(r[i],t)}ae(e,t){const r=e.values||[];this.ee(t,50);for(const i of r)this.Zt(i,t)}ce(e,t){this.ee(t,37),Je.fromName(e).path.forEach(r=>{this.ee(t,60),this.he(r,t)})}ee(e,t){e.ne(t)}re(e){e.ne(2)}}function $A(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function ib(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=$A(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}od.le=new od;class sb{constructor(){this.buffer=new Uint8Array(1024),this.position=0}fe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.de(r.value),r=t.next();this._e()}we(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.me(r.value),r=t.next();this.ge()}ye(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.de(r);else if(r<2048)this.de(960|r>>>6),this.de(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.de(480|r>>>12),this.de(128|63&r>>>6),this.de(128|63&r);else{const i=t.codePointAt(0);this.de(240|i>>>18),this.de(128|63&i>>>12),this.de(128|63&i>>>6),this.de(128|63&i)}}this._e()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.me(r);else if(r<2048)this.me(960|r>>>6),this.me(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.me(480|r>>>12),this.me(128|63&r>>>6),this.me(128|63&r);else{const i=t.codePointAt(0);this.me(240|i>>>18),this.me(128|63&i>>>12),this.me(128|63&i>>>6),this.me(128|63&i)}}this.ge()}Ie(e){const t=this.Ee(e),r=ib(t);this.Te(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ae(e){const t=this.Ee(e),r=ib(t);this.Te(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Re(){this.Pe(255),this.Pe(255)}be(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Te(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ve(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}de(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}me(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}_e(){this.Pe(0),this.Pe(1)}ge(){this.ve(0),this.ve(1)}Pe(e){this.Te(1),this.buffer[this.position++]=e}ve(e){this.Te(1),this.buffer[this.position++]=~e}Te(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class ad{constructor(e){this.Se=e}oe(e){this.Se.fe(e)}se(e){this.Se.ye(e)}ne(e){this.Se.Ie(e)}te(){this.Se.Re()}}class ob{constructor(e){this.Se=e}oe(e){this.Se.we(e)}se(e){this.Se.pe(e)}ne(e){this.Se.Ae(e)}te(){this.Se.be()}}class i_{constructor(){this.Se=new sb,this.De=new ad(this.Se),this.Ce=new ob(this.Se)}seed(e){this.Se.seed(e)}Ne(e){return 0===e?this.De:this.Ce}Ve(){return this.Se.Ve()}reset(){this.Se.reset()}}class Tg{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}}function y0(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Je.comparator(n.documentKey,e.documentKey),0!==t?t:(t=s_(n.arrayValue,e.arrayValue),0!==t?t:s_(n.directionalValue,e.directionalValue)))}function s_(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class _0{constructor(){this.xe=new o_}addToCollectionParentIndex(e,t){return this.xe.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.xe.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t,r){return fe.resolve(un())}getFieldIndex(e,t){return fe.resolve(null)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}updateCollectionGroup(e,t,r){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class o_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Sn(Qt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Sn(Qt.comparator)).toArray()}}class ab{constructor(e){this.user=e,this.ke=new o_,this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.ke.add(t)});const a={collectionId:r,parent:pi(i)};return GA(e).put(a)}return fe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Ny(t),""],!1,!0);return GA(e).qt(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push($o(c.parent))}return r})}addFieldIndex(e,t){const r=w0(e),i=new cs((a=t).indexId,a.collectionGroup,a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind]));var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=w0(e),i=E0(e),a=v0(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t,r){return fe.resolve(un())}getFieldIndex(e,t){return fe.resolve(null)}Oe(e,t){const r=new i_;for(const i of e.fields.filter(c=>2!==c.kind)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.Ne(i.kind);od.le.Xt(a,c)}return r.Ve()}Me(e){const t=new i_;return od.le.Xt(e,t.Ne(0)),t.Ve()}getFieldIndexes(e,t){const r=w0(e),i=E0(e);return(t?r.qt(cs.collectionGroupIndex,IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const c=[];return fe.forEach(a,p=>i.get([p.indexId,this.uid]).next(_=>{c.push(function(C,A){const x=A?new dg(A.sequenceNumber,new Bw(pf(A.readTime),new Je($o(A.documentKey)),A.largestBatchId)):dg.empty(),O=C.fields.map(([V,z])=>new cg(Pr.fromServerFormat(V),z));return new xI(C.indexId,C.collectionGroup,O,x)}(p,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>r.indexState.sequenceNumber-i.indexState.sequenceNumber),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=w0(e),a=E0(e);return this.$e(e).next(c=>i.qt(cs.collectionGroupIndex,IDBKeyRange.bound(t,t)).next(p=>fe.forEach(p,_=>{return a.put(new Ls(_.indexId,this.user.uid||"",c,sd((O=r).readTime),pi(O.documentKey.path),O.largestBatchId));var O})))}updateIndexEntries(e,t){const r=new Map;return fe.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?fe.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),fe.forEach(p,_=>this.Fe(e,i,_).next(C=>{const A=this.Be(a,_);return C.isEqual(A)?fe.resolve():this.Le(e,a,C,A)}))))})}Ue(e,t,r){return v0(e).put(new go(r.indexId,this.uid,r.arrayValue,r.directionalValue,pi(t.key.path)))}qe(e,t,r){return v0(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,pi(t.key.path)])}Fe(e,t,r){const i=v0(e);let a=new Sn(y0);return i.Qt({index:go.documentKeyIndex,range:IDBKeyRange.only([r.indexId,this.uid,pi(t.path)])},(c,p)=>{a=a.add(new Tg(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>a)}Be(e,t){let r=new Sn(y0);const i=this.Oe(t,e);if(null==i)return r;const a=t.fields.find(p=>2===p.kind);if(null!=a){const c=e.data.field(a.fieldPath);if(Yh(c))for(const p of c.arrayValue.values||[])r=r.add(new Tg(t.indexId,e.key,this.Me(p),i))}else r=r.add(new Tg(t.indexId,e.key,new Uint8Array,i));return r}Le(e,t,r,i){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(c,p,_,C,A){const x=c.getIterator(),O=p.getIterator();let V=sf(x),z=sf(O);for(;V||z;){let Ee=!1,Ue=!1;if(V&&z){const at=_(V,z);at<0?Ue=!0:at>0&&(Ee=!0)}else null!=V?Ue=!0:Ee=!0;Ee?(C(z),z=sf(O)):Ue?(A(V),V=sf(x)):(V=sf(x),z=sf(O))}}(r,i,y0,c=>{a.push(this.Ue(e,t,c))},c=>{a.push(this.qe(e,t,c))}),fe.waitFor(a)}$e(e){let t=1;return E0(e).Qt({index:Ls.sequenceNumberIndex,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}}function GA(n){return Yr(n,xu.store)}function v0(n){return Yr(n,go.store)}function w0(n){return Yr(n,cs.store)}function E0(n){return Yr(n,Ls.store)}const qA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Vs(e,Vs.DEFAULT_COLLECTION_PERCENTILE,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function WA(n,e,t){const r=n.store(xn.store),i=n.store(Kr.store),a=[],c=IDBKeyRange.only(t.batchId);let p=0;const _=r.Qt({range:c},(A,x,O)=>(p++,O.delete()));a.push(_.next(()=>{Ct(1===p)}));const C=[];for(const A of t.mutations){const x=Kr.key(e,A.key.path,t.batchId);a.push(i.delete(x)),C.push(A.key)}return fe.waitFor(a).next(()=>C)}function Ag(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ct();e=n.noDocument}return JSON.stringify(e).length}Vs.DEFAULT_COLLECTION_PERCENTILE=10,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vs.DEFAULT=new Vs(41943040,Vs.DEFAULT_COLLECTION_PERCENTILE,Vs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vs.DISABLED=new Vs(-1,0,0);class C0{constructor(e,t,r,i){this.userId=e,this.O=t,this.indexManager=r,this.referenceDelegate=i,this.Ke={}}static Jt(e,t,r,i){Ct(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new C0(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ml(e).Qt({index:xn.userMutationsIndex,range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=mf(e),c=Ml(e);return c.add({}).next(p=>{Ct("number"==typeof p);const _=new d0(p,t,r,i),C=function(O,V,z){const Ee=z.baseMutations.map(at=>Jy(O.Ht,at)),Ue=z.mutations.map(at=>Jy(O.Ht,at));return new xn(V,z.batchId,z.localWriteTime.toMillis(),Ee,Ue)}(this.O,this.userId,_),A=[];let x=new Sn((O,V)=>Ht(O.canonicalString(),V.canonicalString()));for(const O of i){const V=Kr.key(this.userId,O.key.path,p);x=x.add(O.key.path.popLast()),A.push(c.put(C)),A.push(a.put(V,Kr.PLACEHOLDER))}return x.forEach(O=>{A.push(this.indexManager.addToCollectionParentIndex(e,O))}),e.addOnCommittedListener(()=>{this.Ke[p]=_.keys()}),fe.waitFor(A).next(()=>_)})}lookupMutationBatch(e,t){return Ml(e).get(t).next(r=>r?(Ct(r.userId===this.userId),bg(this.O,r)):null)}Ge(e,t){return this.Ke[t]?fe.resolve(this.Ke[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Ke[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Ml(e).Qt({index:xn.userMutationsIndex,range:i},(c,p,_)=>{p.userId===this.userId&&(Ct(p.batchId>=r),a=bg(this.O,p)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ml(e).Qt({index:xn.userMutationsIndex,range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ml(e).qt(xn.userMutationsIndex,t).next(r=>r.map(i=>bg(this.O,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Kr.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return mf(e).Qt({range:i},(c,p,_)=>{const[C,A,x]=c,O=$o(A);if(C===this.userId&&t.path.isEqual(O))return Ml(e).get(x).next(V=>{if(!V)throw ct();Ct(V.userId===this.userId),a.push(bg(this.O,V))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Sn(Ht);const i=[];return t.forEach(a=>{const c=Kr.prefixForPath(this.userId,a.path),p=IDBKeyRange.lowerBound(c),_=mf(e).Qt({range:p},(C,A,x)=>{const[O,V,z]=C,Ee=$o(V);O===this.userId&&a.path.isEqual(Ee)?r=r.add(z):x.done()});i.push(_)}),fe.waitFor(i).next(()=>this.je(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Kr.prefixForPath(this.userId,r),c=IDBKeyRange.lowerBound(a);let p=new Sn(Ht);return mf(e).Qt({range:c},(_,C,A)=>{const[x,O,V]=_,z=$o(O);x===this.userId&&r.isPrefixOf(z)?z.length===i&&(p=p.add(V)):A.done()}).next(()=>this.je(e,p))}je(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Ml(e).get(a).next(c=>{if(null===c)throw ct();Ct(c.userId===this.userId),r.push(bg(this.O,c))}))}),fe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return WA(e.zt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Qe(t.batchId)}),fe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Qe(e){delete this.Ke[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return fe.resolve();const r=IDBKeyRange.lowerBound(Kr.prefixForUser(this.userId)),i=[];return mf(e).Qt({range:r},(a,c,p)=>{if(a[0]===this.userId){const _=$o(a[1]);i.push(_)}else p.done()}).next(()=>{Ct(0===i.length)})})}containsKey(e,t){return ub(e,this.userId,t)}We(e){return I0(e).get(this.userId).next(t=>t||new td(this.userId,-1,""))}}function ub(n,e,t){const r=Kr.prefixForPath(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return mf(n).Qt({range:a,jt:!0},(p,_,C)=>{const[A,x,O]=p;A===e&&x===i&&(c=!0),C.done()}).next(()=>c)}function Ml(n){return Yr(n,xn.store)}function mf(n){return Yr(n,Kr.store)}function I0(n){return Yr(n,td.store)}class Rl{constructor(e){this.ze=e}next(){return this.ze+=2,this.ze}static He(){return new Rl(0)}static Je(){return new Rl(-1)}}class lb{constructor(e,t){this.referenceDelegate=e,this.O=t}allocateTargetId(e){return this.Ye(e).next(t=>{const r=new Rl(t.highestTargetId);return t.highestTargetId=r.next(),this.Xe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ye(e).next(t=>Et.fromTimestamp(new Or(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ye(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Ye(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Xe(e,i)))}addTargetData(e,t){return this.Ze(e,t).next(()=>this.Ye(e).next(r=>(r.targetCount+=1,this.tn(t,r),this.Xe(e,r))))}updateTargetData(e,t){return this.Ze(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>yf(e).delete(t.targetId)).next(()=>this.Ye(e)).next(r=>(Ct(r.targetCount>0),r.targetCount-=1,this.Xe(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return yf(e).Qt((c,p)=>{const _=gf(p);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>fe.waitFor(a)).next(()=>i)}forEachTarget(e,t){return yf(e).Qt((r,i)=>{const a=gf(i);t(a)})}Ye(e){return cb(e).get(Fs.key).next(t=>(Ct(null!==t),t))}Xe(e,t){return cb(e).put(Fs.key,t)}Ze(e,t){return yf(e).put(nb(this.O,t))}tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ye(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Qh(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return yf(e).Qt({range:i,index:ls.queryTargetsIndexName},(c,p,_)=>{const C=gf(p);Ly(t,C.target)&&(a=C,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Ru(e);return t.forEach(c=>{const p=pi(c.path);i.push(a.put(new mn(r,p))),i.push(this.referenceDelegate.addReference(e,r,c))}),fe.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ru(e);return fe.forEach(t,a=>{const c=pi(a.path);return fe.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Ru(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ru(e);let a=un();return i.Qt({range:r,jt:!0},(c,p,_)=>{const C=$o(c[1]),A=new Je(C);a=a.add(A)}).next(()=>a)}containsKey(e,t){const r=pi(t.path),i=IDBKeyRange.bound([r],[Ny(r)],!1,!0);let a=0;return Ru(e).Qt({index:mn.documentTargetsIndex,jt:!0,range:i},([c,p],_,C)=>{0!==c&&(a++,C.done())}).next(()=>a>0)}Tt(e,t){return yf(e).get(t).next(r=>r?gf(r):null)}}function yf(n){return Yr(n,ls.store)}function cb(n){return Yr(n,Fs.store)}function Ru(n){return Yr(n,mn.store)}function Aa(n){return db.apply(this,arguments)}function db(){return db=(0,he.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==e_)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),db.apply(this,arguments)}function b0([n,e],[t,r]){const i=Ht(n,t);return 0===i?Ht(e,r):i}class a_{constructor(e){this.en=e,this.buffer=new Sn(b0),this.nn=0}sn(){return++this.nn}rn(e){const t=[e,this.sn()];if(this.buffer.size<this.en)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();b0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class zA{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.on=!1,this.cn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.un(e)}stop(){this.cn&&(this.cn.cancel(),this.cn=null)}get started(){return null!==this.cn}un(e){var t=this;const r=this.on?3e5:6e4;Ve("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.cn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,he.Z)(function*(){t.cn=null,t.on=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){nd(i)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Aa(i)}yield t.un(e)}))}}class ZA{constructor(e,t){this.an=e,this.params=t}calculateTargetCount(e,t){return this.an.hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return fe.resolve(os.A);const r=new a_(t);return this.an.forEachTarget(e,i=>r.rn(i.sequenceNumber)).next(()=>this.an.ln(e,i=>r.rn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.an.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.an.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(qA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qA):this.fn(e,t))}getCacheSize(e){return this.an.getCacheSize(e)}fn(e,t){let r,i,a,c,p,_,C;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),i=this.params.maximumSequenceNumbersToCollect):i=x,c=Date.now(),this.nthSequenceNumber(e,i))).next(x=>(r=x,p=Date.now(),this.removeTargets(e,r,t))).next(x=>(a=x,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(C=Date.now(),sg()<=uo.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-A}ms\n\tDetermined least recently used ${i} in `+(p-c)+`ms\n\tRemoved ${a} targets in `+(_-p)+`ms\n\tRemoved ${x} documents in `+(C-_)+`ms\nTotal Duration: ${C-A}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:x})))}}class KA{constructor(e,t){this.db=e,this.garbageCollector=new ZA(this,t)}hn(e){const t=this.dn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}dn(e){let t=0;return this.ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ln(e,t){return this._n(e,(r,i)=>t(i))}addReference(e,t,r){return u_(e,r)}removeReference(e,t,r){return u_(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return u_(e,t)}wn(e,t){return function(r,i){let a=!1;return I0(r).Wt(c=>ub(r,c,i).next(p=>(p&&(a=!0),fe.resolve(!p)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this._n(e,(c,p)=>{if(p<=t){const _=this.wn(e,c).next(C=>{if(!C)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Et.min()),Ru(e).delete([0,pi(c.path)])))});i.push(_)}}).next(()=>fe.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return u_(e,t)}_n(e,t){const r=Ru(e);let i,a=os.A;return r.Qt({index:mn.documentTargetsIndex},([c,p],{path:_,sequenceNumber:C})=>{0===c?(a!==os.A&&t(new Je($o(i)),a),a=C,i=_):a=os.A}).next(()=>{a!==os.A&&t(new Je($o(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function u_(n,e){return Ru(n).put((r=n.currentSequenceNumber,new mn(0,pi(e.path),r)));var r}class Sg{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0!==i){for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),!0;return!1}forEach(e){$c(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return Oy(this.inner)}}class hb{constructor(){this.changes=new Sg(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class YA{constructor(e){this.O=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Nl(e).put(l_(t),r)}removeEntry(e,t){const r=Nl(e),i=l_(t);return r.delete(i)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.mn(e,r)))}getEntry(e,t){return Nl(e).get(l_(t)).next(r=>this.gn(t,r))}yn(e,t){return Nl(e).get(l_(t)).next(r=>({document:this.gn(t,r),size:Ag(r)}))}getEntries(e,t){let r=ks();return this.pn(e,t,(i,a)=>{const c=this.gn(i,a);r=r.insert(i,c)}).next(()=>r)}In(e,t){let r=ks(),i=new mr(Je.comparator);return this.pn(e,t,(a,c)=>{const p=this.gn(a,c);r=r.insert(a,p),i=i.insert(a,Ag(c))}).next(()=>({documents:r,En:i}))}pn(e,t,r){if(t.isEmpty())return fe.resolve();const i=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),a=t.getIterator();let c=a.getNext();return Nl(e).Qt({range:i},(p,_,C)=>{const A=Je.fromSegments(p);for(;c&&Je.comparator(c,A)<0;)r(c,null),c=a.getNext();c&&c.isEqual(A)&&(r(c,_),c=a.hasNext()?a.getNext():null),c?C.Ut(c.path.toArray()):C.done()}).next(()=>{for(;c;)r(c,null),c=a.hasNext()?a.getNext():null})}getAll(e,t,r){let i=ks();const a=t.length+1,c={};if(r.isEqual(Et.min())){const p=t.toArray();c.range=IDBKeyRange.lowerBound(p)}else{const p=t.toArray(),_=r_(r);c.range=IDBKeyRange.lowerBound([p,_],!0),c.index=sr.collectionReadTimeIndex}return Nl(e).Qt(c,(p,_,C)=>{if(p.length!==a)return;const A=this.gn(Je.fromSegments(p),_);t.isPrefixOf(A.key.path)?i=i.insert(A.key,A):C.done()}).next(()=>i)}newChangeBuffer(e){return new QA(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return fb(e).get(po.key).next(t=>(Ct(!!t),t))}mn(e,t){return fb(e).put(po.key,t)}gn(e,t){if(t){const r=tb(this.O,t);if(!r.isNoDocument()||!r.version.isEqual(Et.min()))return r}return vn.newInvalidDocument(e)}}class QA extends hb{constructor(e,t){super(),this.Tn=e,this.trackRemovals=t,this.An=new Sg(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Sn((a,c)=>Ht(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const p=this.An.get(a);if(c.isValidDocument()){const _=f0(this.Tn.O,c);i=i.add(a.path.popLast()),r+=Ag(_)-p,t.push(this.Tn.addEntry(e,a,_))}else if(r-=p,this.trackRemovals){const _=f0(this.Tn.O,c.convertToNoDocument(Et.min()));t.push(this.Tn.addEntry(e,a,_))}else t.push(this.Tn.removeEntry(e,a))}),i.forEach(a=>{t.push(this.Tn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Tn.updateMetadata(e,r)),fe.waitFor(t)}getFromCache(e,t){return this.Tn.yn(e,t).next(r=>(this.An.set(t,r.size),r.document))}getAllFromCache(e,t){return this.Tn.In(e,t).next(({documents:r,En:i})=>(i.forEach((a,c)=>{this.An.set(a,c)}),r))}}function fb(n){return Yr(n,po.store)}function Nl(n){return Yr(n,sr.store)}function l_(n){return n.path.toArray()}class JA{constructor(e){this.O=e}kt(e,t,r,i){const a=new l0("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore(fo.store),(p=e).createObjectStore(td.store,{keyPath:td.keyPath}),p.createObjectStore(xn.store,{keyPath:xn.keyPath,autoIncrement:!0}).createIndex(xn.userMutationsIndex,xn.userMutationsKeyPath,{unique:!0}),p.createObjectStore(Kr.store),pb(e),function(p){p.createObjectStore(sr.store)}(e));let c=fe.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore(mn.store),p.deleteObjectStore(ls.store),p.deleteObjectStore(Fs.store)}(e),pb(e)),c=c.next(()=>function(p){const _=p.store(Fs.store),C=new Fs(0,0,Et.min().toTimestamp(),0);return _.put(Fs.key,C)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(p,_){return _.store(xn.store).qt().next(C=>{p.deleteObjectStore(xn.store),p.createObjectStore(xn.store,{keyPath:xn.keyPath,autoIncrement:!0}).createIndex(xn.userMutationsIndex,xn.userMutationsKeyPath,{unique:!0});const A=_.store(xn.store),x=C.map(O=>A.put(O));return fe.waitFor(x)})}(e,a))),c=c.next(()=>{!function(p){p.createObjectStore(Mu.store,{keyPath:Mu.keyPath})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Rn(a))),r<6&&i>=6&&(c=c.next(()=>(function(p){p.createObjectStore(po.store)}(e),this.Pn(a)))),r<7&&i>=7&&(c=c.next(()=>this.bn(a))),r<8&&i>=8&&(c=c.next(()=>this.vn(e,a))),r<9&&i>=9&&(c=c.next(()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e),function(p){const _=p.objectStore(sr.store);_.createIndex(sr.readTimeIndex,sr.readTimeIndexPath,{unique:!1}),_.createIndex(sr.collectionReadTimeIndex,sr.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&i>=10&&(c=c.next(()=>this.Vn(a))),r<11&&i>=11&&(c=c.next(()=>{(function(p){p.createObjectStore(ff.store,{keyPath:ff.keyPath})})(e),function(p){p.createObjectStore(xl.store,{keyPath:xl.keyPath})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(p){const _=p.createObjectStore(Fr.store,{keyPath:Fr.keyPath});_.createIndex(Fr.collectionPathOverlayIndex,Fr.collectionPathOverlayIndexPath,{unique:!1}),_.createIndex(Fr.collectionGroupOverlayIndex,Fr.collectionGroupOverlayIndexPath,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>{!function(p){p.createObjectStore(cs.store,{keyPath:cs.keyPath,autoIncrement:!0}).createIndex(cs.collectionGroupIndex,cs.collectionGroupIndexPath,{unique:!1}),p.createObjectStore(Ls.store,{keyPath:Ls.keyPath}).createIndex(Ls.sequenceNumberIndex,Ls.sequenceNumberIndexPath,{unique:!1}),p.createObjectStore(go.store,{keyPath:go.keyPath}).createIndex(go.documentKeyIndex,go.documentKeyIndexPath,{unique:!1})}(e)})),c}Pn(e){let t=0;return e.store(sr.store).Qt((r,i)=>{t+=Ag(i)}).next(()=>{const r=new po(t);return e.store(po.store).put(po.key,r)})}Rn(e){const t=e.store(td.store),r=e.store(xn.store);return t.qt().next(i=>fe.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt(xn.userMutationsIndex,c).next(p=>fe.forEach(p,_=>{Ct(_.userId===a.userId);const C=bg(this.O,_);return WA(e,a.userId,C).next(()=>{})}))}))}bn(e){const t=e.store(mn.store),r=e.store(sr.store);return e.store(Fs.store).get(Fs.key).next(i=>{const a=[];return r.Qt((c,p)=>{const _=new Qt(c),C=[0,pi(_)];a.push(t.get(C).next(A=>A?fe.resolve():t.put(new mn(0,pi(_),i.highestListenSequenceNumber))))}).next(()=>fe.waitFor(a))})}vn(e,t){e.createObjectStore(xu.store,{keyPath:xu.keyPath});const r=t.store(xu.store),i=new o_,a=c=>{if(i.add(c)){const p=c.lastSegment(),_=c.popLast();return r.put({collectionId:p,parent:pi(_)})}};return t.store(sr.store).Qt({jt:!0},(c,p)=>{const _=new Qt(c);return a(_.popLast())}).next(()=>t.store(Kr.store).Qt({jt:!0},([c,p,_],C)=>{const A=$o(p);return a(A.popLast())}))}Vn(e){const t=e.store(ls.store);return t.Qt((r,i)=>{const a=gf(i),c=nb(this.O,a);return t.put(c)})}}function pb(n){n.createObjectStore(mn.store,{keyPath:mn.keyPath}).createIndex(mn.documentTargetsIndex,mn.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(ls.store,{keyPath:ls.keyPath}).createIndex(ls.queryTargetsIndexName,ls.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(Fs.store)}const gb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class mb{constructor(e,t,r,i,a,c,p,_,C,A,x=12){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Sn=a,this.window=c,this.document=p,this.Dn=C,this.Cn=A,this.schemaVersion=x,this.Nn=null,this.xn=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kn=null,this.inForeground=!1,this.On=null,this.Mn=null,this.$n=Number.NEGATIVE_INFINITY,this.Fn=O=>Promise.resolve(),!mb.Vt())throw new Ne(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new KA(this,i),this.Bn=t+"main",this.O=new h0(_),this.Ln=new Go(this.Bn,this.schemaVersion,new JA(this.O)),this.Un=new lb(this.referenceDelegate,this.O),this.qn=new YA(this.O),this.Kn=new VR,this.window&&this.window.localStorage?this.Gn=this.window.localStorage:(this.Gn=null,!1===A&&pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.jn().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(ue.FAILED_PRECONDITION,gb);return this.Qn(),this.Wn(),this.zn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Un.getHighestSequenceNumber(e))}).then(e=>{this.Nn=new os(e,this.Dn)}).then(()=>{this.xn=!0}).catch(e=>(this.Ln&&this.Ln.close(),Promise.reject(e)))}Hn(e){var t=this;return this.Fn=function(){var r=(0,he.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ln.Mt(function(){var t=(0,he.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Sn.enqueueAndForget((0,he.Z)(function*(){t.started&&(yield t.jn())})))}jn(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>D0(e).put(new Mu(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.Jn(e).next(t=>{t||(this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)))})}).next(()=>this.Yn(e)).next(t=>this.isPrimary&&!t?this.Xn(e).next(()=>!1):!!t&&this.Zn(e).next(()=>!0))).catch(e=>{if(nd(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Sn.enqueueRetryable(()=>this.Fn(e)),this.isPrimary=e})}Jn(e){return c_(e).get(fo.key).next(t=>fe.resolve(this.ts(t)))}es(e){return D0(e).delete(this.clientId)}ns(){var e=this;return(0,he.Z)(function*(){if(e.isPrimary&&!e.ss(e.$n,18e5)){e.$n=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Yr(r,Mu.store);return i.qt().next(a=>{const c=e.rs(a,18e5),p=a.filter(_=>-1===c.indexOf(_));return fe.forEach(p,_=>i.delete(_.clientId)).next(()=>p)})}).catch(()=>[]);if(e.Gn)for(const r of t)e.Gn.removeItem(e.os(r.clientId))}})()}zn(){this.Mn=this.Sn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.jn().then(()=>this.ns()).then(()=>this.zn()))}ts(e){return!!e&&e.ownerId===this.clientId}Yn(e){return this.Cn?fe.resolve(!0):c_(e).get(fo.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new Ne(ue.FAILED_PRECONDITION,gb);return!1}}return!(!this.networkEnabled||!this.inForeground)||D0(e).qt().next(r=>void 0===this.rs(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,he.Z)(function*(){e.xn=!1,e.us(),e.Mn&&(e.Mn.cancel(),e.Mn=null),e.hs(),e.ls(),yield e.Ln.runTransaction("shutdown","readwrite",[fo.store,Mu.store],t=>{const r=new c0(t,os.A);return e.Xn(r).next(()=>e.es(r))}),e.Ln.close(),e.fs()})()}rs(e,t){return e.filter(r=>this.ss(r.updateTimeMs,t)&&!this.cs(r.clientId))}ds(){return this.runTransaction("getActiveClients","readonly",e=>D0(e).qt().next(t=>this.rs(t,18e5).map(r=>r.clientId)))}get started(){return this.xn}getMutationQueue(e,t){return C0.Jt(e,this.O,t,this.referenceDelegate)}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getIndexManager(e){return new ab(e)}getDocumentOverlayCache(e){return rb.Jt(this.O,e)}getBundleCache(){return this.Kn}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=13===(c=this.schemaVersion)?VA:12===c?JI:11===c?u0:void ct();var c;let p;return this.Ln.runTransaction(e,i,a,_=>(p=new c0(_,this.Nn?this.Nn.next():os.A),"readwrite-primary"===t?this.Jn(p).next(C=>!!C||this.Yn(p)).next(C=>{if(!C)throw pr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)),new Ne(ue.FAILED_PRECONDITION,e_);return r(p)}).next(C=>this.Zn(p).next(()=>C)):this._s(p).next(()=>r(p)))).then(_=>(p.raiseOnCommittedEvent(),_))}_s(e){return c_(e).get(fo.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Cn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(ue.FAILED_PRECONDITION,gb)})}Zn(e){const t=new fo(this.clientId,this.allowTabSynchronization,Date.now());return c_(e).put(fo.key,t)}static Vt(){return Go.Vt()}Xn(e){const t=c_(e);return t.get(fo.key).next(r=>this.ts(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete(fo.key)):fe.resolve())}ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(pr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Qn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.On=()=>{this.Sn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.jn()))},this.document.addEventListener("visibilitychange",this.On),this.inForeground="visible"===this.document.visibilityState)}hs(){this.On&&(this.document.removeEventListener("visibilitychange",this.On),this.On=null)}Wn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.kn=()=>{this.us(),(0,P.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Sn.enterRestrictedMode(!0),this.Sn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.kn))}ls(){this.kn&&(this.window.removeEventListener("pagehide",this.kn),this.kn=null)}cs(e){var t;try{const r=null!==(null===(t=this.Gn)||void 0===t?void 0:t.getItem(this.os(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return pr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}us(){if(this.Gn)try{this.Gn.setItem(this.os(this.clientId),String(Date.now()))}catch(e){pr("Failed to set zombie client id.",e)}}fs(){if(this.Gn)try{this.Gn.removeItem(this.os(this.clientId))}catch(e){}}os(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function c_(n){return Yr(n,fo.store)}function D0(n){return Yr(n,Mu.store)}function yb(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class XA{constructor(e,t){this.progress=e,this.ws=t}}class UR{constructor(e,t,r){this.qn=e,this.gs=t,this.indexManager=r}ys(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.ps(e,t,r))}ps(e,t,r){return this.qn.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}Is(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}Es(e,t){return this.qn.getEntries(e,t).next(r=>this.Ts(e,r).next(()=>r))}Ts(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Is(t,r))}As(e,t,r){return Je.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Rs(e,t.path):Yc(t)?this.Ps(e,t,r):this.bs(e,t,r);var i}Rs(e,t){return this.ys(e,new Je(t)).next(r=>{let i=of();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ps(e,t,r){const i=t.collectionGroup;let a=of();return this.indexManager.getCollectionParents(e,i).next(c=>fe.forEach(c,p=>{const _=(C=t,A=p.child(i),new Su(A,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,A;return this.bs(e,_,r).next(C=>{C.forEach((A,x)=>{a=a.insert(A,x)})})}).next(()=>a))}bs(e,t,r){let i;return this.qn.getAll(e,t.path,r).next(a=>(i=a,this.gs.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const c of a)for(const p of c.mutations){const _=p.key;let C=i.get(_);null==C&&(C=vn.newInvalidDocument(_),i=i.insert(_,C)),zy(p,C,c.localWriteTime),C.isFoundDocument()||(i=i.remove(_))}}).next(()=>(i.forEach((a,c)=>{Ww(t,c)||(i=i.remove(a))}),i))}}class _b{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.vs=r,this.Vs=i}static Ss(e,t){let r=un(),i=un();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new _b(e,t.fromCache,r,i)}}class eS{Ds(e){this.Cs=e}As(e,t,r,i){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(Et.min())?this.Ns(e,t):this.Cs.Es(e,i).next(a=>{const c=this.xs(t,a);return(Uy(t)||By(t))&&this.ks(t.limitType,c,i,r)?this.Ns(e,t):(sg()<=uo.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Qc(t)),this.Cs.As(e,t,r).next(p=>(c.forEach(_=>{p=p.insert(_.key,_)}),p)))});var a}xs(e,t){let r=new Sn(PI(e));return t.forEach((i,a)=>{Ww(e,a)&&(r=r.add(a))}),r}ks(e,t,r,i){if(r.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ns(e,t){return sg()<=uo.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",Qc(t)),this.Cs.As(e,t,Et.min())}}class BR{constructor(e,t,r,i){this.persistence=e,this.Os=t,this.O=i,this.Ms=new mr(Ht),this.$s=new Sg(a=>Qh(a),Ly),this.Fs=Et.min(),this.Bs=e.getRemoteDocumentCache(),this.Un=e.getTargetCache(),this.Kn=e.getBundleCache(),this.Ls(r)}Ls(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new UR(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function s(n,e,t,r){return new BR(n,e,t,r)}function o(n,e){return u.apply(this,arguments)}function u(){return u=(0,he.Z)(function*(n,e){const t=We(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.gs.getAllMutationBatches(r).next(a=>(i=a,t.Ls(e),t.gs.getAllMutationBatches(r))).next(a=>{const c=[],p=[];let _=un();for(const C of i){c.push(C.batchId);for(const A of C.mutations)_=_.add(A.key)}for(const C of a){p.push(C.batchId);for(const A of C.mutations)_=_.add(A.key)}return t.Us.Es(r,_).next(C=>({qs:C,removedBatchIds:c,addedBatchIds:p}))})})}),u.apply(this,arguments)}function l(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Bs.newChangeBuffer({trackRemovals:!0});return function(c,p,_,C){const A=_.batch,x=A.keys();let O=fe.resolve();return x.forEach(V=>{O=O.next(()=>C.getEntry(p,V)).next(z=>{const Ee=_.docVersions.get(V);Ct(null!==Ee),z.version.compareTo(Ee)<0&&(A.applyToRemoteDocument(z,_),z.isValidDocument()&&(z.setReadTime(_.commitVersion),C.addEntry(z)))})}),O.next(()=>c.gs.removeMutationBatch(p,A))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.gs.performConsistencyCheck(r)).next(()=>t.Us.Es(r,i))})}function d(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Un.getLastRemoteSnapshotVersion(t))}function m(n,e){const t=We(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.Ms;const p=[];e.targetChanges.forEach((C,A)=>{const x=i.get(A);if(!x)return;p.push(t.Un.removeMatchingKeys(a,C.removedDocuments,A).next(()=>t.Un.addMatchingKeys(a,C.addedDocuments,A)));let O=x.withSequenceNumber(a.currentSequenceNumber);var V,z,Ee;e.targetMismatches.has(A)?O=O.withResumeToken(Zr.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):C.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(C.resumeToken,r)),i=i.insert(A,O),z=O,Ee=C,(0===(V=x).resumeToken.approximateByteSize()||z.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=3e8||Ee.addedDocuments.size+Ee.modifiedDocuments.size+Ee.removedDocuments.size>0)&&p.push(t.Un.updateTargetData(a,O))});let _=ks();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(a,C))}),p.push(v(a,c,e.documentUpdates).next(C=>{_=C})),!r.isEqual(Et.min())){const C=t.Un.getLastRemoteSnapshotVersion(a).next(A=>t.Un.setTargetsMetadata(a,a.currentSequenceNumber,r));p.push(C)}return fe.waitFor(p).next(()=>c.apply(a)).next(()=>t.Us.Ts(a,_)).next(()=>_)}).then(a=>(t.Ms=i,a))}function v(n,e,t){let r=un();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=ks();return t.forEach((c,p)=>{const _=i.get(c);p.isNoDocument()&&p.version.isEqual(Et.min())?(e.removeEntry(c,p.readTime),a=a.insert(c,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(p),a=a.insert(c,p)):Ve("LocalStore","Ignoring outdated watch update for ",c,". Current version:",_.version," Watch version:",p.version)}),a})}function E(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.gs.getNextMutationBatchAfterBatchId(r,e)))}function I(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Un.getTargetData(r,e).next(a=>a?(i=a,fe.resolve(i)):t.Un.allocateTargetId(r).next(c=>(i=new Ta(e,c,0,r.currentSequenceNumber),t.Un.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ms.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.$s.set(e,r.targetId)),r})}function S(n,e,t){return R.apply(this,arguments)}function R(){return R=(0,he.Z)(function*(n,e,t){const r=We(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!nd(c))throw c;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.$s.delete(i.target)}),R.apply(this,arguments)}function L(n,e,t){const r=We(n);let i=Et.min(),a=un();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,_,C){const A=We(p),x=A.$s.get(C);return void 0!==x?fe.resolve(A.Ms.get(x)):A.Un.getTargetData(_,C)}(r,c,us(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.Un.getMatchingKeysForTargetId(c,p.targetId).next(_=>{a=_})}).next(()=>r.Os.As(c,e,t?i:Et.min(),t?a:un())).next(p=>({documents:p,Ks:a})))}function G(n,e){const t=We(n),r=We(t.Un),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Tt(a,e).next(c=>c?c.target:null))}function Y(n){const e=We(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,i,a){const c=We(r);let p=ks(),_=r_(a);const C=Nl(i),A=IDBKeyRange.lowerBound(_,!0);return C.Qt({index:sr.readTimeIndex,range:A},(x,O)=>{const V=tb(c.O,O);p=p.insert(V.key,V),_=O.readTime}).next(()=>({ws:p,readTime:p0(_)}))}(e.Bs,t,e.Fs)).then(({ws:t,readTime:r})=>(e.Fs=r,t))}function Le(){return Le=(0,he.Z)(function*(n){const e=We(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const i=Nl(r);let a=Et.min();return i.Qt({index:sr.readTimeIndex,reverse:!0},(c,p,_)=>{p.readTime&&(a=p0(p.readTime)),_.done()}).next(()=>a)}(t)).then(t=>{e.Fs=t})}),Le.apply(this,arguments)}function et(){return et=(0,he.Z)(function*(n,e,t,r){const i=We(n);let a=un(),c=ks();for(const C of t){const A=e.Gs(C.metadata.name);C.document&&(a=a.add(A));const x=e.js(C);x.setReadTime(e.Qs(C.metadata.readTime)),c=c.insert(A,x)}const p=i.Bs.newChangeBuffer({trackRemovals:!0}),_=yield I(i,(C=r,us(Jh(Qt.fromString(`__bundle__/docs/${C}`)))));var C;return i.persistence.runTransaction("Apply bundle documents","readwrite",C=>v(C,p,c).next(A=>(p.apply(C),A)).next(A=>i.Un.removeMatchingKeysForTargetId(C,_.targetId).next(()=>i.Un.addMatchingKeys(C,a,_.targetId)).next(()=>i.Us.Ts(C,A)).next(()=>A)))}),et.apply(this,arguments)}function Se(n,e){return ht.apply(this,arguments)}function ht(){return ht=(0,he.Z)(function*(n,e,t=un()){const r=yield I(n,us(g0(e.bundledQuery))),i=We(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=kr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Kn.saveNamedQuery(a,e);const p=r.withResumeToken(Zr.EMPTY_BYTE_STRING,c);return i.Ms=i.Ms.insert(p.targetId,p),i.Un.updateTargetData(a,p).next(()=>i.Un.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Un.addMatchingKeys(a,t,r.targetId)).next(()=>i.Kn.saveNamedQuery(a,e))})}),ht.apply(this,arguments)}class Vt{constructor(e){this.O=e,this.Ws=new Map,this.zs=new Map}getBundleMetadata(e,t){return fe.resolve(this.Ws.get(t))}saveBundleMetadata(e,t){var r;return this.Ws.set(t.id,{id:(r=t).id,version:r.version,createTime:kr(r.createTime)}),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.zs.get(t))}saveNamedQuery(e,t){return this.zs.set(t.name,{name:(r=t).name,query:g0(r.bundledQuery),readTime:kr(r.readTime)}),fe.resolve();var r}}class hn{constructor(){this.overlays=new mr(Je.comparator),this.Hs=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach(i=>{this.Yt(e,t,i)}),fe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Hs.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Hs.delete(r)),fe.resolve()}getOverlaysForCollection(e,t,r){const i=new Map,a=t.length+1,c=new Je(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const _=p.getNext().value,C=_.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return fe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new mr((C,A)=>C-A);const c=this.overlays.getIterator();for(;c.hasNext();){const C=c.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let A=a.get(C.largestBatchId);null===A&&(A=new Map,a=a.insert(C.largestBatchId,A)),A.set(C.getKey(),C)}}const p=new Map,_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((C,A)=>p.set(A,C)),!(p.size>=i)););return fe.resolve(p)}Yt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);null!==i&&this.Hs.get(i.largestBatchId).delete(r.key),this.overlays=this.overlays.insert(r.key,new id(t,r));let a=this.Hs.get(t);void 0===a&&(a=new Set,this.Hs.set(t,a)),a.add(r.key)}}class qi{constructor(){this.Js=new Sn(Ln.Ys),this.Xs=new Sn(Ln.Zs)}isEmpty(){return this.Js.isEmpty()}addReference(e,t){const r=new Ln(e,t);this.Js=this.Js.add(r),this.Xs=this.Xs.add(r)}ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ei(new Ln(e,t))}ni(e,t){e.forEach(r=>this.removeReference(r,t))}si(e){const t=new Je(new Qt([])),r=new Ln(t,e),i=new Ln(t,e+1),a=[];return this.Xs.forEachInRange([r,i],c=>{this.ei(c),a.push(c.key)}),a}ii(){this.Js.forEach(e=>this.ei(e))}ei(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}ri(e){const t=new Je(new Qt([])),r=new Ln(t,e),i=new Ln(t,e+1);let a=un();return this.Xs.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Ln(e,0),r=this.Js.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ln{constructor(e,t){this.key=e,this.oi=t}static Ys(e,t){return Je.comparator(e.key,t.key)||Ht(e.oi,t.oi)}static Zs(e,t){return Ht(e.oi,t.oi)||Je.comparator(e.key,t.key)}}class T0{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.gs=[],this.ci=1,this.ui=new Sn(Ln.Ys)}checkEmpty(e){return fe.resolve(0===this.gs.length)}addMutationBatch(e,t,r,i){const a=this.ci;this.ci++;const c=new d0(a,t,r,i);this.gs.push(c);for(const p of i)this.ui=this.ui.add(new Ln(p.key,a)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return fe.resolve(c)}lookupMutationBatch(e,t){return fe.resolve(this.ai(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.hi(t+1),a=i<0?0:i;return fe.resolve(this.gs.length>a?this.gs[a]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(0===this.gs.length?-1:this.ci-1)}getAllMutationBatches(e){return fe.resolve(this.gs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ln(t,0),i=new Ln(t,Number.POSITIVE_INFINITY),a=[];return this.ui.forEachInRange([r,i],c=>{const p=this.ai(c.oi);a.push(p)}),fe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Sn(Ht);return t.forEach(i=>{const a=new Ln(i,0),c=new Ln(i,Number.POSITIVE_INFINITY);this.ui.forEachInRange([a,c],p=>{r=r.add(p.oi)})}),fe.resolve(this.li(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Je.isDocumentKey(a)||(a=a.child(""));const c=new Ln(new Je(a),0);let p=new Sn(Ht);return this.ui.forEachWhile(_=>{const C=_.key.path;return!!r.isPrefixOf(C)&&(C.length===i&&(p=p.add(_.oi)),!0)},c),fe.resolve(this.li(p))}li(e){const t=[];return e.forEach(r=>{const i=this.ai(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ct(0===this.fi(t.batchId,"removed")),this.gs.shift();let r=this.ui;return fe.forEach(t.mutations,i=>{const a=new Ln(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ui=r})}Qe(e){}containsKey(e,t){const r=new Ln(t,0),i=this.ui.firstAfterOrEqual(r);return fe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return fe.resolve()}fi(e,t){return this.hi(e)}hi(e){return 0===this.gs.length?0:e-this.gs[0].batchId}ai(e){const t=this.hi(e);return t<0||t>=this.gs.length?null:this.gs[t]}}class A0{constructor(e){this.di=e,this.docs=new mr(Je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.di(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return fe.resolve(r?r.document.mutableCopy():vn.newInvalidDocument(t))}getEntries(e,t){let r=ks();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():vn.newInvalidDocument(i))}),fe.resolve(r)}getAll(e,t,r){let i=ks();const a=new Je(t.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:p,value:{document:_}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||_.readTime.compareTo(r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return fe.resolve(i)}_i(e,t){return fe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new S0(this)}getSize(e){return fe.resolve(this.size)}}class S0 extends hb{constructor(e){super(),this.Tn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Tn.addEntry(e,i)):this.Tn.removeEntry(r)}),fe.waitFor(t)}getFromCache(e,t){return this.Tn.getEntry(e,t)}getAllFromCache(e,t){return this.Tn.getEntries(e,t)}}class x0{constructor(e){this.persistence=e,this.wi=new Sg(t=>Qh(t),Ly),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.mi=0,this.gi=new qi,this.targetCount=0,this.yi=Rl.He()}forEachTarget(e,t){return this.wi.forEach((r,i)=>t(i)),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.mi)}allocateTargetId(e){return this.highestTargetId=this.yi.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.mi&&(this.mi=t),fe.resolve()}Ze(e){this.wi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.yi=new Rl(t),this.highestTargetId=t),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}addTargetData(e,t){return this.Ze(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.Ze(t),fe.resolve()}removeTargetData(e,t){return this.wi.delete(t.target),this.gi.si(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.wi.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.wi.delete(c),a.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),fe.waitFor(a).next(()=>i)}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.wi.get(t)||null;return fe.resolve(r)}addMatchingKeys(e,t,r){return this.gi.ti(t,r),fe.resolve()}removeMatchingKeys(e,t,r){this.gi.ni(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),fe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.gi.si(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.gi.ri(t);return fe.resolve(r)}containsKey(e,t){return fe.resolve(this.gi.containsKey(t))}}class M0{constructor(e,t){this.pi={},this.overlays={},this.Nn=new os(0),this.xn=!1,this.xn=!0,this.referenceDelegate=e(this),this.Un=new x0(this),this.indexManager=new _0,this.qn=new A0(r=>this.referenceDelegate.Ii(r)),this.O=new h0(t),this.Kn=new Vt(this.O)}start(){return Promise.resolve()}shutdown(){return this.xn=!1,Promise.resolve()}get started(){return this.xn}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hn,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.pi[e.toKey()];return r||(r=new T0(t,this.referenceDelegate),this.pi[e.toKey()]=r),r}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getBundleCache(){return this.Kn}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const i=new R0(this.Nn.next());return this.referenceDelegate.Ei(),r(i).next(a=>this.referenceDelegate.Ti(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ai(e,t){return fe.or(Object.values(this.pi).map(r=>()=>r.containsKey(e,t)))}}class R0 extends mo{constructor(e){super(),this.currentSequenceNumber=e}}class xg{constructor(e){this.persistence=e,this.Ri=new qi,this.Pi=null}static bi(e){return new xg(e)}get vi(){if(this.Pi)return this.Pi;throw ct()}addReference(e,t,r){return this.Ri.addReference(r,t),this.vi.delete(r.toString()),fe.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.vi.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.vi.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Ri.si(t.targetId).forEach(i=>this.vi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.vi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Pi=new Set}Ti(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.vi,r=>{const i=Je.fromPath(r);return this.Vi(e,i).next(a=>{a||t.removeEntry(i,Et.min())})}).next(()=>(this.Pi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Vi(e,t).next(r=>{r?this.vi.delete(t.toString()):this.vi.add(t.toString())})}Ii(e){return 0}Vi(e,t){return fe.or([()=>fe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}function d_(n,e){return`firestore_clients_${n}_${e}`}function h_(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function tS(n,e){return`firestore_targets_${n}_${e}`}class vb{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Si(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new Ne(i.error.code,i.error.message))),c?new vb(e,t,i.state,a):(pr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class N0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Si(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ne(r.error.code,r.error.message))),a?new N0(e,r.state,i):(pr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Si(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=vg();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=TI(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new wb(e,a):(pr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class nS{constructor(e,t){this.clientId=e,this.onlineState=t}static Si(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new nS(t.clientId,t.onlineState):(pr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class rS{constructor(){this.activeTargetIds=vg()}Ci(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ni(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Di(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iS{constructor(e,t,r,i,a){this.window=e,this.Sn=t,this.persistenceKey=r,this.xi=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ki=this.Oi.bind(this),this.Mi=new mr(Ht),this.started=!1,this.$i=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Fi=d_(this.persistenceKey,this.xi),this.Bi=`firestore_sequence_number_${this.persistenceKey}`,this.Mi=this.Mi.insert(this.xi,new rS),this.Li=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Ui=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.qi=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.Ki=`firestore_online_state_${this.persistenceKey}`,this.Gi=function(p){return`firestore_bundle_loaded_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.ki)}static Vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,he.Z)(function*(){const t=yield e.syncEngine.ds();for(const i of t){if(i===e.xi)continue;const a=e.getItem(d_(e.persistenceKey,i));if(a){const c=wb.Si(i,a);c&&(e.Mi=e.Mi.insert(c.clientId,c))}}e.ji();const r=e.storage.getItem(e.Ki);if(r){const i=e.Qi(r);i&&e.Wi(i)}for(const i of e.$i)e.Oi(i);e.$i=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Bi,JSON.stringify(e))}getAllActiveQueryTargets(){return this.zi(this.Mi)}isActiveQueryTarget(e){let t=!1;return this.Mi.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Hi(e,"pending")}updateMutationState(e,t,r){this.Hi(e,t,r),this.Ji(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(tS(this.persistenceKey,e));if(r){const i=N0.Si(e,r);i&&(t=i.state)}}return this.Yi.Ci(e),this.ji(),t}removeLocalQueryTarget(e){this.Yi.Ni(e),this.ji()}isLocalQueryTarget(e){return this.Yi.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(tS(this.persistenceKey,e))}updateQueryState(e,t,r){this.Xi(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ji(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Zi(e)}notifyBundleLoaded(){this.tr()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ki),this.removeItem(this.Fi),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Oi(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Fi)return void pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Sn.enqueueRetryable((0,he.Z)(function*(){if(t.started){if(null!==r.key)if(t.Li.test(r.key)){if(null==r.newValue){const i=t.er(r.key);return t.nr(i,null)}{const i=t.sr(r.key,r.newValue);if(i)return t.nr(i.clientId,i)}}else if(t.Ui.test(r.key)){if(null!==r.newValue){const i=t.ir(r.key,r.newValue);if(i)return t.rr(i)}}else if(t.qi.test(r.key)){if(null!==r.newValue){const i=t.cr(r.key,r.newValue);if(i)return t.ur(i)}}else if(r.key===t.Ki){if(null!==r.newValue){const i=t.Qi(r.newValue);if(i)return t.Wi(i)}}else if(r.key===t.Bi){const i=function(a){let c=os.A;if(null!=a)try{const p=JSON.parse(a);Ct("number"==typeof p),c=p}catch(p){pr("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);i!==os.A&&t.sequenceNumberHandler(i)}else if(r.key===t.Gi)return t.syncEngine.ar()}else t.$i.push(r)}))}}get Yi(){return this.Mi.get(this.xi)}ji(){this.setItem(this.Fi,this.Yi.Di())}Hi(e,t,r){const i=new vb(this.currentUser,e,t,r),a=h_(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Di())}Ji(e){const t=h_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Zi(e){this.storage.setItem(this.Ki,JSON.stringify({clientId:this.xi,onlineState:e}))}Xi(e,t,r){const i=tS(this.persistenceKey,e),a=new N0(e,t,r);this.setItem(i,a.Di())}tr(){this.setItem(this.Gi,"value-not-used")}er(e){const t=this.Li.exec(e);return t?t[1]:null}sr(e,t){const r=this.er(e);return wb.Si(r,t)}ir(e,t){const r=this.Ui.exec(e),i=Number(r[1]);return vb.Si(new di(void 0!==r[2]?r[2]:null),i,t)}cr(e,t){const r=this.qi.exec(e),i=Number(r[1]);return N0.Si(i,t)}Qi(e){return nS.Si(e)}rr(e){var t=this;return(0,he.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.hr(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}ur(e){return this.syncEngine.lr(e.targetId,e.state,e.error)}nr(e,t){const r=t?this.Mi.insert(e,t):this.Mi.remove(e),i=this.zi(this.Mi),a=this.zi(r),c=[],p=[];return a.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{a.has(_)||p.push(_)}),this.syncEngine.dr(c,p).then(()=>{this.Mi=r})}Wi(e){this.Mi.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}zi(e){let t=vg();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class jR{constructor(){this._r=new rS,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this._r.Ci(e),this.wr[e]||"not-current"}updateQueryState(e,t,r){this.wr[e]=t}removeLocalQueryTarget(e){this._r.Ni(e)}isLocalQueryTarget(e){return this._r.activeTargetIds.has(e)}clearQueryState(e){delete this.wr[e]}getAllActiveQueryTargets(){return this._r.activeTargetIds}isActiveQueryTarget(e){return this._r.activeTargetIds.has(e)}start(){return this._r=new rS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class n1{mr(e){}shutdown(){}}class HR{constructor(){this.gr=()=>this.yr(),this.pr=()=>this.Ir(),this.Er=[],this.Tr()}mr(e){this.Er.push(e)}shutdown(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}Tr(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}yr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Er)e(0)}Ir(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Er)e(1)}static Vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const r1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class i1{constructor(e){this.Ar=e.Ar,this.Rr=e.Rr}Pr(e){this.br=e}vr(e){this.Vr=e}onMessage(e){this.Sr=e}close(){this.Rr()}send(e){this.Ar(e)}Dr(){this.br()}Cr(e){this.Vr(e)}Nr(e){this.Sr(e)}}class s1 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.kr=(e.ssl?"https":"http")+"://"+e.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Mr(e,t,r,i,a){const c=this.$r(e,t);Ve("RestConnection","Sending: ",c,r);const p={};return this.Fr(p,i,a),this.Br(e,c,p,r).then(_=>(Ve("RestConnection","Received: ",_),_),_=>{throw og("RestConnection",`${e} failed with error: `,_,"url: ",c,"request:",r),_})}Lr(e,t,r,i,a){return this.Mr(e,t,r,i,a)}Fr(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Hc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}$r(e,t){return`${this.kr}/v1/${t}:${r1[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Br(e,t,r,i){return new Promise((a,c)=>{const p=new iA;p.listenOnce(tA.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Ry.NO_ERROR:const C=p.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(C)),a(C);break;case Ry.TIMEOUT:Ve("Connection",'RPC "'+e+'" timed out'),c(new Ne(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Ry.HTTP_ERROR:const A=p.getStatus();if(Ve("Connection",'RPC "'+e+'" failed with status:',A,"response text:",p.getResponseText()),A>0){const x=p.getResponseJson().error;if(x&&x.status&&x.message){const O=function(V){const z=V.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(z)>=0?z:ue.UNKNOWN}(x.status);c(new Ne(O,x.message))}else c(new Ne(ue.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new Ne(ue.UNAVAILABLE,"Connection failed."));break;default:ct()}}finally{Ve("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);p.send(t,"POST",_,r,15)})}Ur(e,t,r){const i=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=XT(),c=eA(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new rA({})),this.Fr(p.initMessageHeaders,t,r),(0,P.uI)()||(0,P.b$)()||(0,P.d)()||(0,P.w1)()||(0,P.Mn)()||(0,P.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");Ve("Connection","Creating WebChannel: "+_,p);const C=a.createWebChannel(_,p);let A=!1,x=!1;const O=new i1({Ar:z=>{x?Ve("Connection","Not sending because WebChannel is closed:",z):(A||(Ve("Connection","Opening WebChannel transport."),C.open(),A=!0),Ve("Connection","WebChannel sending:",z),C.send(z))},Rr:()=>C.close()}),V=(z,Ee,Ue)=>{z.listen(Ee,at=>{try{Ue(at)}catch(St){setTimeout(()=>{throw St},0)}})};return V(C,ig.EventType.OPEN,()=>{x||Ve("Connection","WebChannel transport opened.")}),V(C,ig.EventType.CLOSE,()=>{x||(x=!0,Ve("Connection","WebChannel transport closed"),O.Cr())}),V(C,ig.EventType.ERROR,z=>{x||(x=!0,og("Connection","WebChannel transport errored:",z),O.Cr(new Ne(ue.UNAVAILABLE,"The operation could not be completed")))}),V(C,ig.EventType.MESSAGE,z=>{var Ee;if(!x){const Ue=z.data[0];Ct(!!Ue);const at=Ue,St=at.error||(null===(Ee=at[0])||void 0===Ee?void 0:Ee.error);if(St){Ve("Connection","WebChannel received error:",St);const Xt=St.status;let Mt=function(Lu){const RD=Ar[Lu];if(void 0!==RD)return nf(RD)}(Xt),Zn=St.message;void 0===Mt&&(Mt=ue.INTERNAL,Zn="Unknown error status: "+Xt+" with message "+St.message),x=!0,O.Cr(new Ne(Mt,Zn)),C.close()}else Ve("Connection","WebChannel received:",Ue),O.Nr(Ue)}}),V(c,nA.STAT_EVENT,z=>{z.stat===jc.PROXY?Ve("Connection","Detected buffering proxy"):z.stat===jc.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{O.Dr()},0),O}}function $R(){return"undefined"!=typeof window?window:null}function Eb(){return"undefined"!=typeof document?document:null}function O0(n){return new GI(n,!0)}class sS{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Sn=e,this.timerId=t,this.qr=r,this.Kr=i,this.Gr=a,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}reset(){this.jr=0}zr(){this.jr=this.Gr}Hr(e){this.cancel();const t=Math.floor(this.jr+this.Jr()),r=Math.max(0,Date.now()-this.Wr),i=Math.max(0,t-r);i>0&&Ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.jr} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,i,()=>(this.Wr=Date.now(),e())),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}Yr(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}cancel(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}Jr(){return(Math.random()-.5)*this.jr}}class GR{constructor(e,t,r,i,a,c,p,_){this.Sn=e,this.Xr=r,this.Zr=i,this.eo=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new sS(e,t)}oo(){return 1===this.state||5===this.state||this.co()}co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.uo()}stop(){var e=this;return(0,he.Z)(function*(){e.oo()&&(yield e.close(0))})()}ao(){this.state=0,this.ro.reset()}ho(){this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,()=>this.lo()))}fo(e){this._o(),this.stream.send(e)}lo(){var e=this;return(0,he.Z)(function*(){if(e.co())return e.close(0)})()}_o(){this.so&&(this.so.cancel(),this.so=null)}wo(){this.io&&(this.io.cancel(),this.io=null)}close(e,t){var r=this;return(0,he.Z)(function*(){r._o(),r.wo(),r.ro.cancel(),r.no++,4!==e?r.ro.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(pr(t.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),r.ro.zr()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.mo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.vr(t)})()}mo(){}auth(){this.state=1;const e=this.yo(this.no),t=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.no===t&&this.po(r,i)},r=>{e(()=>{const i=new Ne(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Io(i)})})}po(e,t){const r=this.yo(this.no);this.stream=this.Eo(e,t),this.stream.Pr(()=>{r(()=>(this.state=2,this.io=this.Sn.enqueueAfterDelay(this.Zr,1e4,()=>(this.co()&&(this.state=3),Promise.resolve())),this.listener.Pr()))}),this.stream.vr(i=>{r(()=>this.Io(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}uo(){var e=this;this.state=5,this.ro.Hr((0,he.Z)(function*(){e.state=0,e.start()}))}Io(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}yo(e){return t=>{this.Sn.enqueueAndForget(()=>this.no===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class o1 extends GR{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.O=a}Eo(e,t){return this.eo.Ur("Listen",e,t)}onMessage(e){this.ro.reset();const t=function OR(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:ct(),i=e.targetChange.targetIds||[],a=function(_,C){return _.N?(Ct(void 0===C||"string"==typeof C),Zr.fromBase64String(C||"")):(Ct(void 0===C||C instanceof Uint8Array),Zr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(_){const C=void 0===_.code?ue.UNKNOWN:nf(_.code);return new Ne(C,_.message||"")}(c);t=new Yy(r,i,a,p||null)}else if("documentChange"in e){const r=e.documentChange,i=Ho(n,r.document.name),a=kr(r.document.updateTime),c=new gr({mapValue:{fields:r.document.fields}}),p=vn.newFoundDocument(i,a,c);t=new Zy(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=Ho(n,r.document),a=r.readTime?kr(r.readTime):Et.min(),c=vn.newNoDocument(i,a);t=new Zy([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Ho(n,r.document);t=new Zy([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ct();{const r=e.filter,a=new tf(r.count||0);t=new Ky(r.targetId,a)}}var _;return t}(this.O,e),r=function(i){if(!("targetChange"in i))return Et.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Et.min():a.readTime?kr(a.readTime):Et.min()}(e);return this.listener.To(t,r)}Ao(e){const t={};t.database=wg(this.O),t.addTarget=function(i,a){let c;const p=a.target;return c=Vy(p)?{documents:kA(i,p)}:{query:FA(i,p)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?c.resumeToken=qI(i,a.resumeToken):a.snapshotVersion.compareTo(Et.min())>0&&(c.readTime=uf(i,a.snapshotVersion.toTimestamp())),c}(this.O,e);const r=function kR(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ct()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.fo(t)}Ro(e){const t={};t.database=wg(this.O),t.removeTarget=e,this.fo(t)}}class a1 extends GR{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.O=a,this.Po=!1}get bo(){return this.Po}start(){this.Po=!1,this.lastStreamToken=void 0,super.start()}mo(){this.Po&&this.vo([])}Eo(e,t){return this.eo.Ur("Write",e,t)}onMessage(e){if(Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();const t=function PR(n,e){return n&&n.length>0?(Ct(void 0!==e),n.map(t=>function(r,i){let a=kr(r.updateTime?r.updateTime:i);return a.isEqual(Et.min())&&(a=kr(i)),new DA(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=kr(e.commitTime);return this.listener.Vo(r,t)}return Ct(!e.writeResults||0===e.writeResults.length),this.Po=!0,this.listener.So()}Do(){const e={};e.database=wg(this.O),this.fo(e)}vo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Jy(this.O,r))};this.fo(t)}}class u1 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.eo=r,this.O=i,this.Co=!1}No(){if(this.Co)throw new Ne(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Mr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.eo.Mr(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(ue.UNKNOWN,i.toString())})}Lr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.eo.Lr(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(ue.UNKNOWN,i.toString())})}terminate(){this.Co=!0}}class l1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}Mo(){0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ko=null,this.Fo("Backend didn't respond within 10 seconds."),this.$o("Offline"),Promise.resolve())))}Bo(e){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.$o("Offline")))}set(e){this.Lo(),this.xo=0,"Online"===e&&(this.Oo=!1),this.$o(e)}$o(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Fo(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Oo?(pr(t),this.Oo=!1):Ve("OnlineStateTracker",t)}Lo(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}class c1{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=a,this.jo.mr(p=>{r.enqueueAndForget((0,he.Z)(function*(){var _;_f(c)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,he.Z)(function*(C){const A=We(C);A.Ko.add(4),yield f_(A),A.Qo.set("Unknown"),A.Ko.delete(4),yield P0(A)}),function(C){return _.apply(this,arguments)})(c))}))}),this.Qo=new l1(r,i)}}function P0(n){return oS.apply(this,arguments)}function oS(){return oS=(0,he.Z)(function*(n){if(_f(n))for(const e of n.Go)yield e(!0)}),oS.apply(this,arguments)}function f_(n){return aS.apply(this,arguments)}function aS(){return aS=(0,he.Z)(function*(n){for(const e of n.Go)yield e(!1)}),aS.apply(this,arguments)}function Cb(n,e){const t=We(n);t.qo.has(e.targetId)||(t.qo.set(e.targetId,e),cS(t)?lS(t):g_(t).co()&&uS(t,e))}function k0(n,e){const t=We(n),r=g_(t);t.qo.delete(e),r.co()&&qR(t,e),0===t.qo.size&&(r.co()?r.ho():_f(t)&&t.Qo.set("Unknown"))}function uS(n,e){n.Wo.Z(e.targetId),g_(n).Ao(e)}function qR(n,e){n.Wo.Z(e),g_(n).Ro(e)}function lS(n){n.Wo=new MA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.qo.get(e)||null}),g_(n).start(),n.Qo.Mo()}function cS(n){return _f(n)&&!g_(n).oo()&&n.qo.size>0}function _f(n){return 0===We(n).Ko.size}function WR(n){n.Wo=void 0}function d1(n){return dS.apply(this,arguments)}function dS(){return dS=(0,he.Z)(function*(n){n.qo.forEach((e,t)=>{uS(n,e)})}),dS.apply(this,arguments)}function h1(n,e){return hS.apply(this,arguments)}function hS(){return hS=(0,he.Z)(function*(n,e){WR(n),cS(n)?(n.Qo.Bo(e),lS(n)):n.Qo.set("Unknown")}),hS.apply(this,arguments)}function f1(n,e,t){return fS.apply(this,arguments)}function fS(){return fS=(0,he.Z)(function*(n,e,t){if(n.Qo.set("Online"),e instanceof Yy&&2===e.state&&e.cause)try{yield(r=(0,he.Z)(function*(i,a){const c=a.cause;for(const p of a.targetIds)i.qo.has(p)&&(yield i.remoteSyncer.rejectListen(p,c),i.qo.delete(p),i.Wo.removeTarget(p))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ib(n,r)}else if(e instanceof Zy?n.Wo.ct(e):e instanceof Ky?n.Wo._t(e):n.Wo.ht(e),!t.isEqual(Et.min()))try{const r=yield d(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.Wo.yt(a);return c.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const C=i.qo.get(_);C&&i.qo.set(_,C.withResumeToken(p.resumeToken,a))}}),c.targetMismatches.forEach(p=>{const _=i.qo.get(p);if(!_)return;i.qo.set(p,_.withResumeToken(Zr.EMPTY_BYTE_STRING,_.snapshotVersion)),qR(i,p);const C=new Ta(_.target,p,1,_.sequenceNumber);uS(i,C)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield Ib(n,r)}var r}),fS.apply(this,arguments)}function Ib(n,e,t){return pS.apply(this,arguments)}function pS(){return pS=(0,he.Z)(function*(n,e,t){if(!nd(e))throw e;n.Ko.add(1),yield f_(n),n.Qo.set("Offline"),t||(t=()=>d(n.localStore)),n.asyncQueue.enqueueRetryable((0,he.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.Ko.delete(1),yield P0(n)}))}),pS.apply(this,arguments)}function zR(n,e){return e().catch(t=>Ib(n,t,e))}function p_(n){return gS.apply(this,arguments)}function gS(){return gS=(0,he.Z)(function*(n){const e=We(n),t=vf(e);let r=e.Uo.length>0?e.Uo[e.Uo.length-1].batchId:-1;for(;p1(e);)try{const i=yield E(e.localStore,r);if(null===i){0===e.Uo.length&&t.ho();break}r=i.batchId,g1(e,i)}catch(i){yield Ib(e,i)}ZR(e)&&KR(e)}),gS.apply(this,arguments)}function p1(n){return _f(n)&&n.Uo.length<10}function g1(n,e){n.Uo.push(e);const t=vf(n);t.co()&&t.bo&&t.vo(e.mutations)}function ZR(n){return _f(n)&&!vf(n).oo()&&n.Uo.length>0}function KR(n){vf(n).start()}function m1(n){return mS.apply(this,arguments)}function mS(){return mS=(0,he.Z)(function*(n){vf(n).Do()}),mS.apply(this,arguments)}function y1(n){return yS.apply(this,arguments)}function yS(){return yS=(0,he.Z)(function*(n){const e=vf(n);for(const t of n.Uo)e.vo(t.mutations)}),yS.apply(this,arguments)}function _1(n,e,t){return _S.apply(this,arguments)}function _S(){return _S=(0,he.Z)(function*(n,e,t){const r=n.Uo.shift(),i=n_.from(r,e,t);yield zR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield p_(n)}),_S.apply(this,arguments)}function v1(n,e){return vS.apply(this,arguments)}function vS(){return vS=(0,he.Z)(function*(n,e){var t;e&&vf(n).bo&&(yield(t=(0,he.Z)(function*(r,i){if(AA(a=i.code)&&a!==ue.ABORTED){const c=r.Uo.shift();vf(r).ao(),yield zR(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield p_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),ZR(n)&&KR(n)}),vS.apply(this,arguments)}function YR(n,e){return wS.apply(this,arguments)}function wS(){return wS=(0,he.Z)(function*(n,e){const t=We(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=_f(t);t.Ko.add(3),yield f_(t),r&&t.Qo.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ko.delete(3),yield P0(t)}),wS.apply(this,arguments)}function ES(n,e){return CS.apply(this,arguments)}function CS(){return CS=(0,he.Z)(function*(n,e){const t=We(n);e?(t.Ko.delete(2),yield P0(t)):e||(t.Ko.add(2),yield f_(t),t.Qo.set("Unknown"))}),CS.apply(this,arguments)}function g_(n){return n.zo||(n.zo=function(e,t,r){const i=We(e);return i.No(),new o1(t,i.eo,i.authCredentials,i.appCheckCredentials,i.O,r)}(n.datastore,n.asyncQueue,{Pr:d1.bind(null,n),vr:h1.bind(null,n),To:f1.bind(null,n)}),n.Go.push(function(){var e=(0,he.Z)(function*(t){t?(n.zo.ao(),cS(n)?lS(n):n.Qo.set("Unknown")):(yield n.zo.stop(),WR(n))});return function(t){return e.apply(this,arguments)}}())),n.zo}function vf(n){return n.Ho||(n.Ho=function(e,t,r){const i=We(e);return i.No(),new a1(t,i.eo,i.authCredentials,i.appCheckCredentials,i.O,r)}(n.datastore,n.asyncQueue,{Pr:m1.bind(null,n),vr:v1.bind(null,n),So:y1.bind(null,n),Vo:_1.bind(null,n)}),n.Go.push(function(){var e=(0,he.Z)(function*(t){t?(n.Ho.ao(),yield p_(n)):(yield n.Ho.stop(),n.Uo.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.Uo.length} pending writes`),n.Uo=[]))});return function(t){return e.apply(this,arguments)}}())),n.Ho}class IS{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,p=new IS(e,t,c,i,a);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function m_(n,e){if(pr("AsyncQueue",`${e}: ${n}`),nd(n))return new Ne(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class y_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Je.comparator(t.key,r.key):(t,r)=>Je.comparator(t.key,r.key),this.keyedMap=of(),this.sortedSet=new mr(this.comparator)}static emptySet(e){return new y_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof y_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new y_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class QR{constructor(){this.Jo=new mr(Je.comparator)}track(e){const t=e.doc.key,r=this.Jo.get(t);r?0!==e.type&&3===r.type?this.Jo=this.Jo.insert(t,e):3===e.type&&1!==r.type?this.Jo=this.Jo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Jo=this.Jo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Jo=this.Jo.remove(t):1===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):ct():this.Jo=this.Jo.insert(t,e)}Yo(){const e=[];return this.Jo.inorderTraversal((t,r)=>{e.push(r)}),e}}class __{constructor(e,t,r,i,a,c,p,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(c=>{a.push({type:0,doc:c})}),new __(e,t,y_.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class w1{constructor(){this.Xo=void 0,this.listeners=[]}}class E1{constructor(){this.queries=new Sg(e=>jy(e),fg),this.onlineState="Unknown",this.Zo=new Set}}function bS(n,e){return DS.apply(this,arguments)}function DS(){return DS=(0,he.Z)(function*(n,e){const t=We(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new w1),i)try{a.Xo=yield t.onListen(r)}catch(c){const p=m_(c,`Initialization of query '${Qc(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,a),a.listeners.push(e),e.tc(t.onlineState),a.Xo&&e.ec(a.Xo)&&SS(t)}),DS.apply(this,arguments)}function TS(n,e){return AS.apply(this,arguments)}function AS(){return AS=(0,he.Z)(function*(n,e){const t=We(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),AS.apply(this,arguments)}function C1(n,e){const t=We(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const p of c.listeners)p.ec(i)&&(r=!0);c.Xo=i}}r&&SS(t)}function I1(n,e,t){const r=We(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function SS(n){n.Zo.forEach(e=>{e.next()})}class xS{constructor(e,t,r){this.query=e,this.nc=t,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=r||{}}ec(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new __(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.sc?this.rc(e)&&(this.nc.next(e),t=!0):this.oc(e,this.onlineState)&&(this.cc(e),t=!0),this.ic=e,t}onError(e){this.nc.error(e)}tc(e){this.onlineState=e;let t=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),t=!0),t}oc(e,t){return!e.fromCache||!(this.options.uc&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}rc(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}cc(e){e=__.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}class b1{constructor(e,t){this.payload=e,this.byteLength=t}ac(){return"metadata"in this.payload}}class JR{constructor(e){this.O=e}Gs(e){return Ho(this.O,e)}js(e){return e.metadata.exists?PA(this.O,e.document,!1):vn.newNoDocument(this.Gs(e.metadata.name),this.Qs(e.metadata.readTime))}Qs(e){return kr(e)}}class D1{constructor(e,t,r){this.hc=e,this.localStore=t,this.O=r,this.queries=[],this.documents=[],this.progress=XR(e)}lc(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}fc(e){const t=new Map,r=new JR(this.O);for(const i of e)if(i.metadata.queries){const a=r.Gs(i.metadata.name);for(const c of i.metadata.queries){const p=(t.get(c)||un()).add(a);t.set(c,p)}}return t}complete(){var e=this;return(0,he.Z)(function*(){const t=yield function Ge(n,e,t,r){return et.apply(this,arguments)}(e.localStore,new JR(e.O),e.documents,e.hc.id),r=e.fc(e.documents);for(const i of e.queries)yield Se(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",new XA(Object.assign({},e.progress),t)})()}}function XR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class eN{constructor(e){this.key=e}}class tN{constructor(e){this.key=e}}class nN{constructor(e,t){this.query=e,this.dc=t,this._c=null,this.current=!1,this.wc=un(),this.mutatedKeys=un(),this.mc=PI(e),this.gc=new y_(this.mc)}get yc(){return this.dc}Ic(e,t){const r=t?t.Ec:new QR,i=t?t.gc:this.gc;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,p=!1;const _=Uy(this.query)&&i.size===this.query.limit?i.last():null,C=By(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((A,x)=>{const O=i.get(A),V=Ww(this.query,x)?x:null,z=!!O&&this.mutatedKeys.has(O.key),Ee=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let Ue=!1;O&&V?O.data.isEqual(V.data)?z!==Ee&&(r.track({type:3,doc:V}),Ue=!0):this.Tc(O,V)||(r.track({type:2,doc:V}),Ue=!0,(_&&this.mc(V,_)>0||C&&this.mc(V,C)<0)&&(p=!0)):!O&&V?(r.track({type:0,doc:V}),Ue=!0):O&&!V&&(r.track({type:1,doc:O}),Ue=!0,(_||C)&&(p=!0)),Ue&&(V?(c=c.add(V),a=Ee?a.add(A):a.delete(A)):(c=c.delete(A),a=a.delete(A)))}),Uy(this.query)||By(this.query))for(;c.size>this.query.limit;){const A=Uy(this.query)?c.last():c.first();c=c.delete(A.key),a=a.delete(A.key),r.track({type:1,doc:A})}return{gc:c,Ec:r,ks:p,mutatedKeys:a}}Tc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;const a=e.Ec.Yo();a.sort((C,A)=>function(x,O){const V=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct()}};return V(x)-V(O)}(C.type,A.type)||this.mc(C.doc,A.doc)),this.Ac(r);const c=t?this.Rc():[],p=0===this.wc.size&&this.current?1:0,_=p!==this._c;return this._c=p,0!==a.length||_?{snapshot:new __(this.query,e.gc,i,a,e.mutatedKeys,0===p,_,!1),Pc:c}:{Pc:c}}tc(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new QR,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}bc(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}Ac(e){e&&(e.addedDocuments.forEach(t=>this.dc=this.dc.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.dc=this.dc.delete(t)),this.current=e.current)}Rc(){if(!this.current)return[];const e=this.wc;this.wc=un(),this.gc.forEach(r=>{this.bc(r.key)&&(this.wc=this.wc.add(r.key))});const t=[];return e.forEach(r=>{this.wc.has(r)||t.push(new tN(r))}),this.wc.forEach(r=>{e.has(r)||t.push(new eN(r))}),t}vc(e){this.dc=e.Ks,this.wc=un();const t=this.Ic(e.documents);return this.applyChanges(t,!0)}Vc(){return __.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}class T1{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class A1{constructor(e){this.key=e,this.Sc=!1}}class S1{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.Dc={},this.Cc=new Sg(p=>jy(p),fg),this.Nc=new Map,this.xc=new Set,this.kc=new mr(Je.comparator),this.Oc=new Map,this.Mc=new qi,this.$c={},this.Fc=new Map,this.Bc=Rl.Je(),this.onlineState="Unknown",this.Lc=void 0}get isPrimaryClient(){return!0===this.Lc}}function x1(n,e){return MS.apply(this,arguments)}function MS(){return MS=(0,he.Z)(function*(n,e){const t=XS(n);let r,i;const a=t.Cc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Vc();else{const c=yield I(t.localStore,us(e));t.isPrimaryClient&&Cb(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield RS(t,e,r,"current"===p)}return i}),MS.apply(this,arguments)}function RS(n,e,t,r){return NS.apply(this,arguments)}function NS(){return NS=(0,he.Z)(function*(n,e,t,r){n.Uc=(A,x,O)=>{return(V=(0,he.Z)(function*(z,Ee,Ue,at){let St=Ee.view.Ic(Ue);St.ks&&(St=yield L(z.localStore,Ee.query,!1).then(({documents:Zn})=>Ee.view.Ic(Zn,St)));const Xt=at&&at.targetChanges.get(Ee.targetId),Mt=Ee.view.applyChanges(St,z.isPrimaryClient,Xt);return HS(z,Ee.targetId,Mt.Pc),Mt.snapshot}),function(z,Ee,Ue,at){return V.apply(this,arguments)})(n,A,x,O);var V};const i=yield L(n.localStore,e,!0),a=new nN(e,i.Ks),c=a.Ic(i.documents),p=af.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=a.applyChanges(c,n.isPrimaryClient,p);HS(n,t,_.Pc);const C=new T1(e,t,a);return n.Cc.set(e,C),n.Nc.has(t)?n.Nc.get(t).push(e):n.Nc.set(t,[e]),_.snapshot}),NS.apply(this,arguments)}function M1(n,e){return OS.apply(this,arguments)}function OS(){return OS=(0,he.Z)(function*(n,e){const t=We(n),r=t.Cc.get(e),i=t.Nc.get(r.targetId);if(i.length>1)return t.Nc.set(r.targetId,i.filter(a=>!fg(a,e))),void t.Cc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield S(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),k0(t.remoteStore,r.targetId),v_(t,r.targetId)}).catch(Aa))):(v_(t,r.targetId),yield S(t.localStore,r.targetId,!0))}),OS.apply(this,arguments)}function PS(){return PS=(0,he.Z)(function*(n,e,t){const r=ex(n);try{const i=yield function(a,c){const p=We(a),_=Or.now(),C=c.reduce((x,O)=>x.add(O.key),un());let A;return p.persistence.runTransaction("Locally write mutations","readwrite",x=>p.Us.Es(x,C).next(O=>{A=O;const V=[];for(const z of c){const Ee=TA(z,A.get(z.key));null!=Ee&&V.push(new Al(z.key,Ee,Uw(Ee.value.mapValue),Tr.exists(!0)))}return p.gs.addMutationBatch(x,_,V,c)})).then(x=>(x.applyToLocalDocumentSet(A),{batchId:x.batchId,changes:A}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,p){let _=a.$c[a.currentUser.toKey()];_||(_=new mr(Ht)),_=_.insert(c,p),a.$c[a.currentUser.toKey()]=_}(r,i.batchId,t),yield ud(r,i.changes),yield p_(r.remoteStore)}catch(i){const a=m_(i,"Failed to persist write");t.reject(a)}}),PS.apply(this,arguments)}function rN(n,e){return kS.apply(this,arguments)}function kS(){return kS=(0,he.Z)(function*(n,e){const t=We(n);try{const r=yield m(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.Oc.get(a);c&&(Ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.Sc=!0:i.modifiedDocuments.size>0?Ct(c.Sc):i.removedDocuments.size>0&&(Ct(c.Sc),c.Sc=!1))}),yield ud(t,r,e)}catch(r){yield Aa(r)}}),kS.apply(this,arguments)}function iN(n,e,t){const r=We(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Cc.forEach((a,c)=>{const p=c.view.tc(e);p.snapshot&&i.push(p.snapshot)}),function(a,c){const p=We(a);p.onlineState=c;let _=!1;p.queries.forEach((C,A)=>{for(const x of A.listeners)x.tc(c)&&(_=!0)}),_&&SS(p)}(r.eventManager,e),i.length&&r.Dc.To(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function N1(n,e,t){return FS.apply(this,arguments)}function FS(){return FS=(0,he.Z)(function*(n,e,t){const r=We(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Oc.get(e),a=i&&i.key;if(a){let c=new mr(Je.comparator);c=c.insert(a,vn.newNoDocument(a,Et.min()));const p=un().add(a),_=new Sl(Et.min(),new Map,new Sn(Ht),c,p);yield rN(r,_),r.kc=r.kc.remove(a),r.Oc.delete(e),$S(r)}else yield S(r.localStore,e,!1).then(()=>v_(r,e,t)).catch(Aa)}),FS.apply(this,arguments)}function O1(n,e){return LS.apply(this,arguments)}function LS(){return LS=(0,he.Z)(function*(n,e){const t=We(n),r=e.batch.batchId;try{const i=yield l(t.localStore,e);jS(t,r,null),BS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ud(t,i)}catch(i){yield Aa(i)}}),LS.apply(this,arguments)}function P1(n,e,t){return VS.apply(this,arguments)}function VS(){return VS=(0,he.Z)(function*(n,e,t){const r=We(n);try{const i=yield function(a,c){const p=We(a);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let C;return p.gs.lookupMutationBatch(_,c).next(A=>(Ct(null!==A),C=A.keys(),p.gs.removeMutationBatch(_,A))).next(()=>p.gs.performConsistencyCheck(_)).next(()=>p.Us.Es(_,C))})}(r.localStore,e);jS(r,e,t),BS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ud(r,i)}catch(i){yield Aa(i)}}),VS.apply(this,arguments)}function US(){return US=(0,he.Z)(function*(n,e){const t=We(n);_f(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=We(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.gs.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Fc.get(r)||[];i.push(e),t.Fc.set(r,i)}catch(r){const i=m_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),US.apply(this,arguments)}function BS(n,e){(n.Fc.get(e)||[]).forEach(t=>{t.resolve()}),n.Fc.delete(e)}function jS(n,e,t){const r=We(n);let i=r.$c[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.$c[r.currentUser.toKey()]=i}}function v_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Nc.get(e))n.Cc.delete(r),t&&n.Dc.qc(r,t);n.Nc.delete(e),n.isPrimaryClient&&n.Mc.si(e).forEach(r=>{n.Mc.containsKey(r)||sN(n,r)})}function sN(n,e){n.xc.delete(e.path.canonicalString());const t=n.kc.get(e);null!==t&&(k0(n.remoteStore,t),n.kc=n.kc.remove(e),n.Oc.delete(t),$S(n))}function HS(n,e,t){for(const r of t)r instanceof eN?(n.Mc.addReference(r.key,e),F1(n,r)):r instanceof tN?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.Mc.removeReference(r.key,e),n.Mc.containsKey(r.key)||sN(n,r.key)):ct()}function F1(n,e){const t=e.key,r=t.path.canonicalString();n.kc.get(t)||n.xc.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.xc.add(r),$S(n))}function $S(n){for(;n.xc.size>0&&n.kc.size<n.maxConcurrentLimboResolutions;){const e=n.xc.values().next().value;n.xc.delete(e);const t=new Je(Qt.fromString(e)),r=n.Bc.next();n.Oc.set(r,new A1(t)),n.kc=n.kc.insert(t,r),Cb(n.remoteStore,new Ta(us(Jh(t.path)),r,2,os.A))}}function ud(n,e,t){return GS.apply(this,arguments)}function GS(){return GS=(0,he.Z)(function*(n,e,t){const r=We(n),i=[],a=[],c=[];var p;r.Cc.isEmpty()||(r.Cc.forEach((p,_)=>{c.push(r.Uc(_,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,C.fromCache?"not-current":"current"),i.push(C);const A=_b.Ss(_.targetId,C);a.push(A)}}))}),yield Promise.all(c),r.Dc.To(i),yield(p=(0,he.Z)(function*(_,C){const A=We(_);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>fe.forEach(C,O=>fe.forEach(O.vs,V=>A.persistence.referenceDelegate.addReference(x,O.targetId,V)).next(()=>fe.forEach(O.Vs,V=>A.persistence.referenceDelegate.removeReference(x,O.targetId,V)))))}catch(x){if(!nd(x))throw x;Ve("LocalStore","Failed to update sequence numbers: "+x)}for(const x of C){const O=x.targetId;if(!x.fromCache){const V=A.Ms.get(O),Ee=V.withLastLimboFreeSnapshotVersion(V.snapshotVersion);A.Ms=A.Ms.insert(O,Ee)}}}),function(_,C){return p.apply(this,arguments)})(r.localStore,a))}),GS.apply(this,arguments)}function L1(n,e){return qS.apply(this,arguments)}function qS(){return qS=(0,he.Z)(function*(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield o(t.localStore,e);t.currentUser=e,(i=t).Fc.forEach(c=>{c.forEach(p=>{p.reject(new Ne(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Fc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ud(t,r.qs)}var i}),qS.apply(this,arguments)}function V1(n,e){const t=We(n),r=t.Oc.get(e);if(r&&r.Sc)return un().add(r.key);{let i=un();const a=t.Nc.get(e);if(!a)return i;for(const c of a){const p=t.Cc.get(c);i=i.unionWith(p.view.yc)}return i}}function U1(n,e){return WS.apply(this,arguments)}function WS(){return WS=(0,he.Z)(function*(n,e){const t=We(n),r=yield L(t.localStore,e.query,!0),i=e.view.vc(r);return t.isPrimaryClient&&HS(t,e.targetId,i.Pc),i}),WS.apply(this,arguments)}function B1(n){return zS.apply(this,arguments)}function zS(){return zS=(0,he.Z)(function*(n){const e=We(n);return Y(e.localStore).then(t=>ud(e,t))}),zS.apply(this,arguments)}function j1(n,e,t,r){return ZS.apply(this,arguments)}function ZS(){return ZS=(0,he.Z)(function*(n,e,t,r){const i=We(n),a=yield function(c,p){const _=We(c),C=We(_.gs);return _.persistence.runTransaction("Lookup mutation documents","readonly",A=>C.Ge(A,p).next(x=>x?_.Us.Es(A,x):fe.resolve(null)))}(i.localStore,e);var p;null!==a?("pending"===t?yield p_(i.remoteStore):"acknowledged"===t||"rejected"===t?(jS(i,e,r||null),BS(i,e),p=e,We(We(i.localStore).gs).Qe(p)):ct(),yield ud(i,a)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),ZS.apply(this,arguments)}function KS(){return KS=(0,he.Z)(function*(n,e){const t=We(n);if(XS(t),ex(t),!0===e&&!0!==t.Lc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield oN(t,r.toArray());t.Lc=!0,yield ES(t.remoteStore,!0);for(const a of i)Cb(t.remoteStore,a)}else if(!1===e&&!1!==t.Lc){const r=[];let i=Promise.resolve();t.Nc.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(v_(t,c),S(t.localStore,c,!0))),k0(t.remoteStore,c)}),yield i,yield oN(t,r),function(a){const c=We(a);c.Oc.forEach((p,_)=>{k0(c.remoteStore,_)}),c.Mc.ii(),c.Oc=new Map,c.kc=new mr(Je.comparator)}(t),t.Lc=!1,yield ES(t.remoteStore,!1)}}),KS.apply(this,arguments)}function oN(n,e,t){return YS.apply(this,arguments)}function YS(){return YS=(0,he.Z)(function*(n,e,t){const r=We(n),i=[],a=[];for(const c of e){let p;const _=r.Nc.get(c);if(_&&0!==_.length){p=yield I(r.localStore,us(_[0]));for(const C of _){const A=r.Cc.get(C),x=yield U1(r,A);x.snapshot&&a.push(x.snapshot)}}else{const C=yield G(r.localStore,c);p=yield I(r.localStore,C),yield RS(r,aN(C),c,!1)}i.push(p)}return r.Dc.To(a),i}),YS.apply(this,arguments)}function aN(n){return OI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function $1(n){const e=We(n);return We(We(e.localStore).persistence).ds()}function G1(n,e,t,r){return QS.apply(this,arguments)}function QS(){return QS=(0,he.Z)(function*(n,e,t,r){const i=We(n);if(i.Lc)Ve("SyncEngine","Ignoring unexpected query state notification.");else if(i.Nc.has(e))switch(t){case"current":case"not-current":{const a=yield Y(i.localStore),c=Sl.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield ud(i,a,c);break}case"rejected":yield S(i.localStore,e,!0),v_(i,e,r);break;default:ct()}}),QS.apply(this,arguments)}function q1(n,e,t){return JS.apply(this,arguments)}function JS(){return JS=(0,he.Z)(function*(n,e,t){const r=XS(n);if(r.Lc){for(const i of e){if(r.Nc.has(i)){Ve("SyncEngine","Adding an already active target "+i);continue}const a=yield G(r.localStore,i),c=yield I(r.localStore,a);yield RS(r,aN(a),c.targetId,!1),Cb(r.remoteStore,c)}for(const i of t)r.Nc.has(i)&&(yield S(r.localStore,i,!1).then(()=>{k0(r.remoteStore,i),v_(r,i)}).catch(Aa))}}),JS.apply(this,arguments)}function XS(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=V1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=N1.bind(null,e),e.Dc.To=C1.bind(null,e.eventManager),e.Dc.qc=I1.bind(null,e.eventManager),e}function ex(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=O1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=P1.bind(null,e),e}class uN{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,he.Z)(function*(){t.O=O0(e.databaseInfo.databaseId),t.sharedClientState=t.Gc(e),t.persistence=t.jc(e),yield t.persistence.start(),t.gcScheduler=t.Qc(e),t.localStore=t.Wc(e)})()}Qc(e){return null}Wc(e){return s(this.persistence,new eS,e.initialUser,this.O)}jc(e){return new M0(xg.bi,this.O)}Gc(e){return new jR}terminate(){var e=this;return(0,he.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class lN extends uN{constructor(e,t,r){super(),this.zc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,he.Z)(function*(){yield t().call(r,e),yield function me(n){return Le.apply(this,arguments)}(r.localStore),yield r.zc.initialize(r,e),yield ex(r.zc.syncEngine),yield p_(r.zc.remoteStore),yield r.persistence.Hn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Wc(e){return s(this.persistence,new eS,e.initialUser,this.O)}Qc(e){return new zA(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}jc(e){const t=yb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Vs.withCacheSize(this.cacheSizeBytes):Vs.DEFAULT;return new mb(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,$R(),Eb(),this.O,this.sharedClientState,!!this.forceOwnership)}Gc(e){return new jR}}class z1 extends lN{constructor(e,t){super(e,t,!1),this.zc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,he.Z)(function*(){yield t().call(r,e);const i=r.zc.syncEngine;r.sharedClientState instanceof iS&&(r.sharedClientState.syncEngine={hr:j1.bind(null,i),lr:G1.bind(null,i),dr:q1.bind(null,i),ds:$1.bind(null,i),ar:B1.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Hn(function(){var a=(0,he.Z)(function*(c){yield function H1(n,e){return KS.apply(this,arguments)}(r.zc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}Gc(e){const t=$R();if(!iS.Vt(t))throw new Ne(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=yb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new iS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class tx{initialize(e,t){var r=this;return(0,he.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>iN(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=L1.bind(null,r.syncEngine),yield ES(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new E1}createDatastore(e){const t=O0(e.databaseInfo.databaseId),r=new s1(e.databaseInfo);return new u1(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=p=>iN(this.syncEngine,p,0),c=HR.Vt()?new HR:new n1,new c1(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,p,_,C){const A=new S1(r,i,a,c,p,_);return C&&(A.Lc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,he.Z)(function*(t){const r=We(t);Ve("RemoteStore","RemoteStore shutting down."),r.Ko.add(5),yield f_(r),r.jo.shutdown(),r.Qo.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function cN(n,e=10240){let t=0;return{read:()=>(0,he.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,he.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class bb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Hc(this.observer.next,e)}error(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Jc(){this.muted=!0}Hc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Z1{constructor(e,t){this.Yc=e,this.O=t,this.metadata=new zr,this.buffer=new Uint8Array,this.Xc=new TextDecoder("utf-8"),this.Zc().then(r=>{r&&r.ac()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Yc.cancel()}getMetadata(){var e=this;return(0,he.Z)(function*(){return e.metadata.promise})()}Kc(){var e=this;return(0,he.Z)(function*(){return yield e.getMetadata(),e.Zc()})()}Zc(){var e=this;return(0,he.Z)(function*(){const t=yield e.tu();if(null===t)return null;const r=e.Xc.decode(t),i=Number(r);isNaN(i)&&e.eu(`length string (${r}) is not valid number`);const a=yield e.nu(i);return new b1(JSON.parse(a),t.length+i)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}tu(){var e=this;return(0,he.Z)(function*(){for(;e.su()<0&&!(yield e.iu()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.eu("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}nu(e){var t=this;return(0,he.Z)(function*(){for(;t.buffer.length<e;)(yield t.iu())&&t.eu("Reached the end of bundle when more is expected.");const r=t.Xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}eu(e){throw this.Yc.cancel(),new Error(`Invalid bundle format: ${e}`)}iu(){var e=this;return(0,he.Z)(function*(){const t=yield e.Yc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class K1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,he.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,he.Z)(function*(a,c){const p=We(a),_=wg(p.O)+"/documents",C={documents:c.map(V=>lf(p.O,V))},A=yield p.Lr("BatchGetDocuments",_,C),x=new Map;A.forEach(V=>{const z=function NR(n,e){return"found"in e?function(t,r){Ct(!!r.found);const i=Ho(t,r.found.name),a=kr(r.found.updateTime),c=new gr({mapValue:{fields:r.found.fields}});return vn.newFoundDocument(i,a,c)}(n,e):"missing"in e?function(t,r){Ct(!!r.missing),Ct(!!r.readTime);const i=Ho(t,r.missing),a=kr(r.readTime);return vn.newNoDocument(i,a)}(n,e):ct()}(p.O,V);x.set(z.key.toString(),z)});const O=[];return c.forEach(V=>{const z=x.get(V.toString());Ct(!!z),O.push(z)}),O}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new _g(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,he.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Je.fromPath(i);e.mutations.push(new hi(a,e.precondition(a)))}),yield(r=(0,he.Z)(function*(i,a){const c=We(i),p=wg(c.O)+"/documents",_={writes:a.map(C=>Jy(c.O,C))};yield c.Mr("Commit",p,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ct();t=Et.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Tr.updateTime(t):Tr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Et.min()))throw new Ne(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Tr.updateTime(t)}return Tr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Y1{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.ru=5,this.ro=new sS(this.asyncQueue,"transaction_retry")}run(){this.ru-=1,this.ou()}ou(){var e=this;this.ro.Hr((0,he.Z)(function*(){const t=new K1(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.uu(a)}))}).catch(i=>{e.uu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!Wc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}uu(e){this.ru>0&&this.au(e)?(this.ru-=1,this.asyncQueue.enqueueAndForget(()=>(this.ou(),Promise.resolve()))):this.deferred.reject(e)}au(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!AA(t)}return!1}}class Q1{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=di.UNAUTHENTICATED,this.clientId=EI.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,he.Z)(function*(p){Ve("FirestoreClient","Received user=",p.uid),yield a.authCredentialListener(p),a.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Ve("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,he.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=m_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function dN(n,e){return nx.apply(this,arguments)}function nx(){return nx=(0,he.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,he.Z)(function*(a){r.isEqual(a)||(yield o(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),nx.apply(this,arguments)}function hN(n,e){return rx.apply(this,arguments)}function rx(){return rx=(0,he.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield ix(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>YR(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>YR(e.remoteStore,a)),n.onlineComponents=e}),rx.apply(this,arguments)}function ix(n){return sx.apply(this,arguments)}function sx(){return sx=(0,he.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield dN(n,new uN)),n.offlineComponents}),sx.apply(this,arguments)}function Db(n){return ox.apply(this,arguments)}function ox(){return ox=(0,he.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield hN(n,new tx)),n.onlineComponents}),ox.apply(this,arguments)}function fN(n){return ix(n).then(e=>e.persistence)}function ax(n){return ix(n).then(e=>e.localStore)}function pN(n){return Db(n).then(e=>e.remoteStore)}function ux(n){return Db(n).then(e=>e.syncEngine)}function w_(n){return lx.apply(this,arguments)}function lx(){return lx=(0,he.Z)(function*(n){const e=yield Db(n),t=e.eventManager;return t.onListen=x1.bind(null,e.syncEngine),t.onUnlisten=M1.bind(null,e.syncEngine),t}),lx.apply(this,arguments)}function gN(n,e,t={}){const r=new zr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(i,a,c,p,_){const C=new bb({next:x=>{a.enqueueAndForget(()=>TS(i,A));const O=x.docs.has(c);!O&&x.fromCache?_.reject(new Ne(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&x.fromCache&&p&&"server"===p.source?_.reject(new Ne(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(x)},error:x=>_.reject(x)}),A=new xS(Jh(c.path),C,{includeMetadataChanges:!0,uc:!0});return bS(i,A)}(yield w_(n),n.asyncQueue,e,t,r)})),r.promise}function mN(n,e,t={}){const r=new zr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function(i,a,c,p,_){const C=new bb({next:x=>{a.enqueueAndForget(()=>TS(i,A)),x.fromCache&&"server"===p.source?_.reject(new Ne(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(x)},error:x=>_.reject(x)}),A=new xS(c,C,{includeMetadataChanges:!0,uc:!0});return bS(i,A)}(yield w_(n),n.asyncQueue,e,t,r)})),r.promise}const yN=new Map;function cx(n,e,t){if(!t)throw new Ne(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _N(n,e,t,r){if(!0===e&&!0===r)throw new Ne(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vN(n){if(!Je.isDocumentKey(n))throw new Ne(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function wN(n){if(Je.isDocumentKey(n))throw new Ne(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Tb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ct()}function Jt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Tb(n);throw new Ne(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function EN(n,e){if(e<=0)throw new Ne(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class CN{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,_N("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class F0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CN({}),this._settingsFrozen=!1,e instanceof qc?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ne(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qc(i.options.projectId)}(e))}get app(){if(!this._app)throw new Ne(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CN(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new aA;switch(t.type){case"gapi":const r=t.client;return Ct(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new wI(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ne(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=yN.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),yN.delete(e),t.terminate())}(this),Promise.resolve()}}class zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ol(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zn(this.firestore,e,this._key)}}class ds{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ds(this.firestore,e,this._query)}}class Ol extends ds{constructor(e,t,r){super(e,t,Jh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zn(this.firestore,null,new Je(e))}withConverter(e){return new Ol(this.firestore,e,this._path)}}function IN(n,e,...t){if(n=(0,P.m9)(n),cx("collection","path",e),n instanceof F0){const r=Qt.fromString(e,...t);return wN(r),new Ol(n,null,r)}{if(!(n instanceof zn||n instanceof Ol))throw new Ne(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return wN(r),new Ol(n.firestore,null,r)}}function Ab(n,e,...t){if(n=(0,P.m9)(n),1===arguments.length&&(e=EI.R()),cx("doc","path",e),n instanceof F0){const r=Qt.fromString(e,...t);return vN(r),new zn(n,null,new Je(r))}{if(!(n instanceof zn||n instanceof Ol))throw new Ne(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return vN(r),new zn(n.firestore,n instanceof Ol?n.converter:null,new Je(r))}}function bN(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),(n instanceof zn||n instanceof Ol)&&(e instanceof zn||e instanceof Ol)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function DN(n,e){return n=(0,P.m9)(n),e=(0,P.m9)(e),n instanceof ds&&e instanceof ds&&n.firestore===e.firestore&&fg(n._query,e._query)&&n.converter===e.converter}class uF{constructor(){this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new sS(this,"async_queue_retry"),this.yu=()=>{const t=Eb();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ro.Yr()};const e=Eb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.yu)}get isShuttingDown(){return this.fu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.fu){this.fu=!0,this.mu=e||!1;const t=Eb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.yu)}}enqueue(e){if(this.pu(),this.fu)return new Promise(()=>{});const t=new zr;return this.Iu(()=>this.fu&&this.mu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.lu.push(e),this.Eu()))}Eu(){var e=this;return(0,he.Z)(function*(){if(0!==e.lu.length){try{yield e.lu[0](),e.lu.shift(),e.ro.reset()}catch(t){if(!nd(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.lu.length>0&&e.ro.Hr(()=>e.Eu())}})()}Iu(e){const t=this.hu.then(()=>(this.wu=!0,e().catch(r=>{throw this._u=r,this.wu=!1,pr("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.wu=!1,r))));return this.hu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.gu.indexOf(e)>-1&&(t=0);const i=IS.createAndSchedule(this,e,t,r,a=>this.Tu(a));return this.du.push(i),i}pu(){this._u&&ct()}verifyOperationInProgress(){}Au(){var e=this;return(0,he.Z)(function*(){let t;do{t=e.hu,yield t}while(t!==e.hu)})()}Ru(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}Pu(e){return this.Au().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Au()})}bu(e){this.gu.push(e)}Tu(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function dx(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class lF{constructor(){this._progressObserver={},this._taskCompletionResolver=new zr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class or extends F0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new uF,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||TN(this),this._firestoreClient.terminate()}}function Qr(n){return n._firestoreClient||TN(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function TN(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new DI(n._databaseId,a,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var a,p;n._firestoreClient=new Q1(n._authCredentials,n._appCheckCredentials,n._queue,r)}function AN(n,e,t){const r=new zr;return n.asyncQueue.enqueue((0,he.Z)(function*(){try{yield dN(n,t),yield hN(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===ue.FAILED_PRECONDITION||a.code===ue.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function SN(n){if(n._initialized||n._terminated)throw new Ne(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ld{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Pl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pl(Zr.fromBase64String(e))}catch(t){throw new Ne(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pl(Zr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Mg{constructor(e){this._methodName=e}}class Sb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}}const vF=/^__.*__$/;class wF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Al(e,this.data,this.fieldMask,t,this.fieldTransforms):new yg(e,this.data,t,this.fieldTransforms)}}class xN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Al(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function MN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct()}}class xb{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.O=r,this.ignoreUndefinedProperties=i,void 0===a&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}Su(e){return new xb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Du(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:r,Cu:!1});return i.Nu(e),i}xu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:r,Cu:!1});return i.vu(),i}ku(e){return this.Su({path:void 0,Cu:!0})}Ou(e){return Nb(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}Nu(e){if(0===e.length)throw this.Ou("Document fields must not be empty");if(MN(this.Vu)&&vF.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}class EF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.O=r||O0(e)}Fu(e,t,r,i=!1){return new xb({Vu:e,methodName:t,$u:r,path:Pr.emptyPath(),Cu:!1,Mu:i},this.databaseId,this.O,this.ignoreUndefinedProperties)}}function Rg(n){const e=n._freezeSettings(),t=O0(n._databaseId);return new EF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Mb(n,e,t,r,i,a={}){const c=n.Fu(a.merge||a.mergeFields?2:0,e,t,i);gx("Data must be an object, but it was:",c,r);const p=ON(r,c);let _,C;if(a.merge)_=new Zh(c.fieldMask),C=c.fieldTransforms;else if(a.mergeFields){const A=[];for(const x of a.mergeFields){const O=mx(e,x,t);if(!c.contains(O))throw new Ne(ue.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);kN(A,O)||A.push(O)}_=new Zh(A),C=c.fieldTransforms.filter(x=>_.covers(x.field))}else _=null,C=c.fieldTransforms;return new wF(new gr(p),_,C)}class L0 extends Mg{_toFieldTransform(e){if(2!==e.Vu)throw e.Ou(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof L0}}function RN(n,e,t){return new xb({Vu:3,$u:e.settings.$u,methodName:n._methodName,Cu:t},e.databaseId,e.O,e.ignoreUndefinedProperties)}class hx extends Mg{_toFieldTransform(e){return new ed(e.path,new Jc)}isEqual(e){return e instanceof hx}}class CF extends Mg{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=RN(this,e,!0),r=this.Bu.map(a=>Ng(a,t)),i=new Xc(r);return new ed(e.path,i)}isEqual(e){return this===e}}class IF extends Mg{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=RN(this,e,!0),r=this.Bu.map(a=>Ng(a,t)),i=new ef(r);return new ed(e.path,i)}isEqual(e){return this===e}}class bF extends Mg{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=new Tl(e.O,kI(e.O,this.Lu));return new ed(e.path,t)}isEqual(e){return this===e}}function fx(n,e,t,r){const i=n.Fu(1,e,t);gx("Data must be an object, but it was:",i,r);const a=[],c=gr.empty();$c(r,(_,C)=>{const A=Rb(e,_,t);C=(0,P.m9)(C);const x=i.xu(A);if(C instanceof L0)a.push(A);else{const O=Ng(C,x);null!=O&&(a.push(A),c.set(A,O))}});const p=new Zh(a);return new xN(c,p,i.fieldTransforms)}function px(n,e,t,r,i,a){const c=n.Fu(1,e,t),p=[mx(e,r,t)],_=[i];if(a.length%2!=0)throw new Ne(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let O=0;O<a.length;O+=2)p.push(mx(e,a[O])),_.push(a[O+1]);const C=[],A=gr.empty();for(let O=p.length-1;O>=0;--O)if(!kN(C,p[O])){const V=p[O];let z=_[O];z=(0,P.m9)(z);const Ee=c.xu(V);if(z instanceof L0)C.push(V);else{const Ue=Ng(z,Ee);null!=Ue&&(C.push(V),A.set(V,Ue))}}const x=new Zh(C);return new xN(A,x,c.fieldTransforms)}function NN(n,e,t,r=!1){return Ng(t,n.Fu(r?4:3,e))}function Ng(n,e){if(PN(n=(0,P.m9)(n)))return gx("Unsupported field value:",e,n),ON(n,e);if(n instanceof Mg)return function(t,r){if(!MN(r.Vu))throw r.Ou(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Ou(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Cu&&4!==e.Vu)throw e.Ou("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let p=Ng(c,r.ku(a));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,P.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return kI(r.O,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Or.fromDate(t);return{timestampValue:uf(r.O,i)}}if(t instanceof Or){const i=new Or(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:uf(r.O,i)}}if(t instanceof Sb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Pl)return{bytesValue:qI(r.O,t._byteString)};if(t instanceof zn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.Ou(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:n0(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Ou(`Unsupported field value: ${Tb(t)}`)}(n,e)}function ON(n,e){const t={};return Oy(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$c(n,(r,i)=>{const a=Ng(i,e.Du(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function PN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Or||n instanceof Sb||n instanceof Pl||n instanceof zn||n instanceof Mg)}function gx(n,e,t){if(!PN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Tb(t);throw e.Ou("an object"===r?n+" a custom object":n+" "+r)}var r}function mx(n,e,t){if((e=(0,P.m9)(e))instanceof ld)return e._internalPath;if("string"==typeof e)return Rb(n,e);throw Nb("Field path arguments must be of type string or ",n,!1,void 0,t)}const DF=new RegExp("[~\\*/\\[\\]]");function Rb(n,e,t){if(e.search(DF)>=0)throw Nb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ld(...e.split("."))._internalPath}catch(r){throw Nb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Nb(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(a||c)&&(_+=" (found",a&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new Ne(ue.INVALID_ARGUMENT,p+n+_)}function kN(n,e){return n.some(t=>t.isEqual(e))}class V0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new zn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new TF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ob("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class TF extends V0{data(){return super.data()}}function Ob(n,e){return"string"==typeof e?Rb(n,e):e instanceof ld?e._internalPath:e._delegate._internalPath}class Og{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cd extends V0{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new U0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ob("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class U0 extends cd{data(e={}){return super.data(e)}}class wf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Og(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new U0(this._firestore,this._userDataWriter,r.key,r,new Og(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new U0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Og(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const p=new U0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Og(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,C=-1;return 0!==c.type&&(_=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),C=a.indexOf(c.doc.key)),{type:AF(c.type),doc:p,oldIndex:_,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function AF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct()}}function FN(n,e){return n instanceof cd&&e instanceof cd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof wf&&e instanceof wf&&n._firestore===e._firestore&&DN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function LN(n){if(By(n)&&0===n.explicitOrderBy.length)throw new Ne(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class B0{}function Ef(n,...e){for(const t of e)n=t._apply(n);return n}class SF extends B0{constructor(e,t,r){super(),this.Uu=e,this.qu=t,this.Ku=r,this.type="where"}_apply(e){const t=Rg(e.firestore),r=function(i,a,c,p,_,C,A){let x;if(_.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Ne(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){$N(A,C);const V=[];for(const z of A)V.push(HN(p,i,z));x={arrayValue:{values:V}}}else x=HN(p,i,A)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||$N(A,C),x=NN(c,"where",A,"in"===C||"not-in"===C);const O=Gi.create(_,C,x);return function(V,z){if(z.S()){const Ue=qw(V);if(null!==Ue&&!Ue.isEqual(z.field))throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ue.toString()}' and '${z.field.toString()}'`);const at=Gw(V);null!==at&&GN(0,z.field,at)}const Ee=function(Ue,at){for(const St of Ue.filters)if(at.indexOf(St.op)>=0)return St.op;return null}(V,function(Ue){switch(Ue){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(z.op));if(null!==Ee)throw new Ne(ue.INVALID_ARGUMENT,Ee===z.op?`Invalid query. You cannot use more than one '${z.op.toString()}' filter.`:`Invalid query. You cannot use '${z.op.toString()}' filters with '${Ee.toString()}' filters.`)}(i,O),O}(e._query,0,t,e.firestore._databaseId,this.Uu,this.qu,this.Ku);return new ds(e.firestore,e.converter,function(i,a){const c=i.filters.concat([a]);return new Su(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class MF extends B0{constructor(e,t){super(),this.Uu=e,this.Gu=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ne(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Kc(i,a);return function(p,_){if(null===Gw(p)){const C=qw(p);null!==C&&GN(0,C,_.field)}}(r,c),c}(e._query,this.Uu,this.Gu);return new ds(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Su(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class VN extends B0{constructor(e,t,r){super(),this.type=e,this.ju=t,this.Qu=r}_apply(e){return new ds(e.firestore,e.converter,jo(e._query,this.ju,this.Qu))}}class UN extends B0{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=jN(e,this.type,this.Wu,this.zu);return new ds(e.firestore,e.converter,(i=t,new Su((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class BN extends B0{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=jN(e,this.type,this.Wu,this.zu);return new ds(e.firestore,e.converter,(i=t,new Su((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function jN(n,e,t,r){if(t[0]=(0,P.m9)(t[0]),t[0]instanceof V0)return function(i,a,c,p,_){if(!p)throw new Ne(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const C=[];for(const A of Xh(i))if(A.field.isKeyField())C.push(ky(a,p.key));else{const x=p.data.field(A.field);if(Gc(x))throw new Ne(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===x){const O=A.field.canonicalString();throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${O}' (used as the orderBy) does not exist.`)}C.push(x)}return new Zc(C,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Rg(n.firestore);return function(a,c,p,_,C,A){const x=a.explicitOrderBy;if(C.length>x.length)throw new Ne(ue.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const O=[];for(let V=0;V<C.length;V++){const z=C[V];if(x[V].field.isKeyField()){if("string"!=typeof z)throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof z}`);if(!Yc(a)&&-1!==z.indexOf("/"))throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${z}' contains a slash.`);const Ee=a.path.child(Qt.fromString(z));if(!Je.isDocumentKey(Ee))throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${Ee}' is not because it contains an odd number of segments.`);const Ue=new Je(Ee);O.push(ky(c,Ue))}else{const Ee=NN(p,_,z);O.push(Ee)}}return new Zc(O,A)}(n._query,n.firestore._databaseId,i,e,t,r)}}function HN(n,e,t){if("string"==typeof(t=(0,P.m9)(t))){if(""===t)throw new Ne(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yc(e)&&-1!==t.indexOf("/"))throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Qt.fromString(t));if(!Je.isDocumentKey(r))throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ky(n,new Je(r))}if(t instanceof zn)return ky(n,t._key);throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tb(t)}.`)}function $N(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ne(ue.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function GN(n,e,t){if(!t.isEqual(e))throw new Ne(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class yx{convertValue(e,t="none"){switch(Tu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ir(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ho(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ct()}}convertObject(e,t){const r={};return $c(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new Sb(ir(e.latitude),ir(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=bI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Py(e));default:return null}}convertTimestamp(e){const t=co(e);return new Or(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);Ct(a0(r));const i=new qc(r.get(1),r.get(3)),a=new Je(r.popFirst(5));return i.isEqual(t)||pr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function Pb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class VF extends yx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}class qN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Rg(e)}set(e,t,r){this._verifyNotCommitted();const i=Cf(e,this._firestore),a=Pb(i.converter,t,r),c=Mb(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Tr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Cf(e,this._firestore);let c;return c="string"==typeof(t=(0,P.m9)(t))||t instanceof ld?px(this._dataReader,"WriteBatch.update",a._key,t,r,i):fx(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,Tr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Cf(e,this._firestore);return this._mutations=this._mutations.concat(new _g(t._key,Tr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Cf(n,e){if((n=(0,P.m9)(n)).firestore!==e)throw new Ne(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Pg extends yx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}function WN(n,e,t){n=Jt(n,zn);const r=Jt(n.firestore,or),i=Pb(n.converter,e,t);return E_(r,[Mb(Rg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Tr.none())])}function zN(n,e,t,...r){n=Jt(n,zn);const i=Jt(n.firestore,or),a=Rg(i);let c;return c="string"==typeof(e=(0,P.m9)(e))||e instanceof ld?px(a,"updateDoc",n._key,e,t,r):fx(a,"updateDoc",n._key,e),E_(i,[c.toMutation(n._key,Tr.exists(!0))])}function ZN(n,...e){var t,r,i;n=(0,P.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||dx(e[c])||(a=e[c],c++);const p={includeMetadataChanges:a.includeMetadataChanges};if(dx(e[c])){const x=e[c];e[c]=null===(t=x.next)||void 0===t?void 0:t.bind(x),e[c+1]=null===(r=x.error)||void 0===r?void 0:r.bind(x),e[c+2]=null===(i=x.complete)||void 0===i?void 0:i.bind(x)}let _,C,A;if(n instanceof zn)C=Jt(n.firestore,or),A=Jh(n._key.path),_={next:x=>{e[c]&&e[c](_x(C,n,x))},error:e[c+1],complete:e[c+2]};else{const x=Jt(n,ds);C=Jt(x.firestore,or),A=x._query;const O=new Pg(C);_={next:V=>{e[c]&&e[c](new wf(C,O,x,V))},error:e[c+1],complete:e[c+2]},LN(n._query)}return function(x,O,V,z){const Ee=new bb(z),Ue=new xS(O,Ee,V);return x.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return bS(yield w_(x),Ue)})),()=>{Ee.Jc(),x.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return TS(yield w_(x),Ue)}))}}(Qr(C),A,p,_)}function E_(n,e){return function(t,r){const i=new zr;return t.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function R1(n,e,t){return PS.apply(this,arguments)}(yield ux(t),r,i)})),i.promise}(Qr(n),e)}function _x(n,e,t){const r=t.docs.get(e._key),i=new Pg(n);return new cd(n,i,e._key,r,new Og(t.hasPendingWrites,t.fromCache),e.converter)}class ZF extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Rg(e)}get(e){const t=Cf(e,this._firestore),r=new VF(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ct();const a=i[0];if(a.isFoundDocument())return new V0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new V0(this._firestore,r,t._key,null,t.converter);throw ct()})}set(e,t,r){const i=Cf(e,this._firestore),a=Pb(i.converter,t,r),c=Mb(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=Cf(e,this._firestore);let c;return c="string"==typeof(t=(0,P.m9)(t))||t instanceof ld?px(this._dataReader,"Transaction.update",a._key,t,r,i):fx(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=Cf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Cf(e,this._firestore),r=new Pg(this._firestore);return super.get(e).then(i=>new cd(this._firestore,r,t._key,i._document,new Og(!1,!1),t.converter))}}function vx(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function YN(){if("undefined"==typeof Uint8Array)throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function QN(){if(!function II(){return"undefined"!=typeof atob}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Hc=_i.SDK_VERSION,(0,_i._registerComponent)(new ns.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new or(i,new lA(t.getProvider("auth-internal")),new dA(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,_i.registerVersion)(Ow,"3.4.5",n),(0,_i.registerVersion)(Ow,"3.4.5","esm2017")}();class j0{constructor(e){this._delegate=e}static fromBase64String(e){return QN(),new j0(Pl.fromBase64String(e))}static fromUint8Array(e){return YN(),new j0(Pl.fromUint8Array(e))}toBase64(){return QN(),this._delegate.toBase64()}toUint8Array(){return YN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function wx(n){return function rL(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class iL{enableIndexedDbPersistence(e,t){return function dF(n,e){SN(n=Jt(n,or));const t=Qr(n),r=n._freezeSettings(),i=new tx;return AN(t,i,new lN(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function hF(n){SN(n=Jt(n,or));const e=Qr(n),t=n._freezeSettings(),r=new tx;return AN(e,r,new z1(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function fF(n){if(n._initialized&&!n._terminated)throw new Ne(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new zr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,he.Z)(function*(){try{yield(t=(0,he.Z)(function*(r){if(!Go.Vt())return Promise.resolve();const i=r+"main";yield Go.delete(i)}),function(r){return t.apply(this,arguments)})(yb(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class JN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof qc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&og("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function oF(n,e,t,r={}){var i;const a=(n=Jt(n,F0))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&og("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=di.MOCK_USER;else{c=(0,P.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Ne(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new di(_)}n._authCredentials=new uA(new vI(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function gF(n){return function J1(n){return n.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield fN(n),t=yield pN(n);return e.setNetworkEnabled(!0),function(r){const i=We(r);return i.Ko.delete(0),P0(i)}(t)}))}(Qr(n=Jt(n,or)))}(this._delegate)}disableNetwork(){return function mF(n){return function X1(n){return n.asyncQueue.enqueue((0,he.Z)(function*(){const e=yield fN(n),t=yield pN(n);return e.setNetworkEnabled(!1),(r=(0,he.Z)(function*(i){const a=We(i);a.Ko.add(0),yield f_(a),a.Qo.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Qr(n=Jt(n,or)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,_N("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function pF(n){return function(e){const t=new zr;return e.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return function k1(n,e){return US.apply(this,arguments)}(yield ux(e),t)})),t.promise}(Qr(n=Jt(n,or)))}(this._delegate)}onSnapshotsInSync(e){return function zF(n,e){return function nF(n,e){const t=new bb(e);return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return r=yield w_(n),i=t,We(r).Zo.add(i),void i.next();var r,i})),()=>{t.Jc(),n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return r=yield w_(n),i=t,void We(r).Zo.delete(i);var r,i}))}}(Qr(n=Jt(n,or)),dx(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new C_(this,IN(this._delegate,e))}catch(t){throw Us(t,"collection()","Firestore.collection()")}}doc(e){try{return new Sa(this,Ab(this._delegate,e))}catch(t){throw Us(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Bs(this,function aF(n,e){if(n=Jt(n,F0),cx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ds(n,null,(t=e,new Su(Qt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Us(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function KF(n,e){return function rF(n,e){const t=new zr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){const r=yield(i=n,Db(i).then(a=>a.datastore));var i;new Y1(n.asyncQueue,r,e,t).run()})),t.promise}(Qr(n=Jt(n,or)),t=>e(new ZF(n,t)))}(this._delegate,t=>e(new XN(this,t)))}batch(){return Qr(this._delegate),new eO(new qN(this._delegate,e=>E_(this._delegate,e)))}loadBundle(e){return function yF(n,e){const t=Qr(n=Jt(n,or)),r=new lF;return function iF(n,e,t,r){const i=function(a,c){let p;return p="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,C){if(_ instanceof Uint8Array)return cN(_,C);if(_ instanceof ArrayBuffer)return cN(new Uint8Array(_),C);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new Z1(_,c);var _}(t,O0(e));n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){!function W1(n,e,t){const r=We(n);var i;(i=(0,he.Z)(function*(a,c,p){try{const _=yield c.getMetadata();if(yield function(O,V){const z=We(O),Ee=kr(V.createTime);return z.persistence.runTransaction("hasNewerBundle","readonly",Ue=>z.Kn.getBundleMetadata(Ue,V.id)).then(Ue=>!!Ue&&Ue.createTime.compareTo(Ee)>=0)}(a.localStore,_))return yield c.close(),void p._completeWith((O=_,{taskState:"Success",documentsLoaded:O.totalDocuments,bytesLoaded:O.totalBytes,totalDocuments:O.totalDocuments,totalBytes:O.totalBytes}));p._updateProgress(XR(_));const C=new D1(_,a.localStore,c.O);let A=yield c.Kc();for(;A;){const O=yield C.lc(A);O&&p._updateProgress(O),A=yield c.Kc()}const x=yield C.complete();yield ud(a,x.ws,void 0),yield function(O,V){const z=We(O);return z.persistence.runTransaction("Save bundle","readwrite",Ee=>z.Kn.saveBundleMetadata(Ee,V))}(a.localStore,_),p._completeWith(x.progress)}catch(_){og("SyncEngine",`Loading bundle failed with ${_}`),p._failWith(_)}var O}),function(a,c,p){return i.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield ux(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function _F(n,e){return function sF(n,e){return n.asyncQueue.enqueue((0,he.Z)(function*(){return function(t,r){const i=We(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Kn.getNamedQuery(a,r))}(yield ax(n),e)}))}(Qr(n=Jt(n,or)),e).then(t=>t?new ds(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Bs(this,t):null)}}class kb extends yx{constructor(e){super(),this.firestore=e}convertBytes(e){return new j0(new Pl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Sa.forKey(t,this.firestore,null)}}class XN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new kb(e)}get(e){const t=Fg(e);return this._delegate.get(t).then(r=>new H0(this._firestore,new cd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Fg(e);return r?(vx("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Fg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Fg(e);return this._delegate.delete(t),this}}class eO{constructor(e){this._delegate=e}set(e,t,r){const i=Fg(e);return r?(vx("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Fg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Fg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class kg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new U0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=kg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new kg(e,new kb(e),t),i.set(t,a)),a}}kg.INSTANCES=new WeakMap;class Sa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Sa(t,new zn(t._delegate,r,new Je(e)))}static forKey(e,t,r){return new Sa(t,new zn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new C_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new C_(this.firestore,IN(this._delegate,e))}catch(t){throw Us(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,P.m9)(e))instanceof zn&&bN(this._delegate,e)}set(e,t){t=vx("DocumentReference.set",t);try{return t?WN(this._delegate,e,t):WN(this._delegate,e)}catch(r){throw Us(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?zN(this._delegate,e):zN(this._delegate,e,t,...r)}catch(i){throw Us(i,"updateDoc()","DocumentReference.update()")}}delete(){return function qF(n){return E_(Jt(n.firestore,or),[new _g(n._key,Tr.none())])}(this._delegate)}onSnapshot(...e){const t=tO(e),r=nO(e,i=>new H0(this.firestore,new cd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return ZN(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function BF(n){n=Jt(n,zn);const e=Jt(n.firestore,or),t=Qr(e),r=new Pg(e);return function eF(n,e){const t=new zr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(r=(0,he.Z)(function*(i,a,c){try{const p=yield function(_,C){const A=We(_);return A.persistence.runTransaction("read document","readonly",x=>A.Us.ys(x,C))}(i,a);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new Ne(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const _=m_(p,`Failed to get document '${a} from cache`);c.reject(_)}}),function(i,a,c){return r.apply(this,arguments)})(yield ax(n),e,t);var r})),t.promise}(t,n._key).then(i=>new cd(e,r,n._key,i,new Og(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function jF(n){n=Jt(n,zn);const e=Jt(n.firestore,or);return gN(Qr(e),n._key,{source:"server"}).then(t=>_x(e,n,t))}(this._delegate):function UF(n){n=Jt(n,zn);const e=Jt(n.firestore,or);return gN(Qr(e),n._key).then(t=>_x(e,n,t))}(this._delegate),t.then(r=>new H0(this.firestore,new cd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Sa(this.firestore,this._delegate.withConverter(e?kg.getInstance(this.firestore,e):null))}}function Us(n,e,t){return n.message=n.message.replace(e,t),n}function tO(n){for(const e of n)if("object"==typeof e&&!wx(e))return e;return{}}function nO(n,e){var t,r;let i;return i=wx(n[0])?n[0]:wx(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class H0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Sa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return FN(this._delegate,e._delegate)}}class $0 extends H0{data(e){const t=this._delegate.data(e);return function oA(n,e){n||ct()}(void 0!==t),t}}class Bs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new kb(e)}where(e,t,r){try{return new Bs(this.firestore,Ef(this._delegate,function xF(n,e,t){const r=e,i=Ob("where",n);return new SF(i,r,t)}(e,t,r)))}catch(i){throw Us(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Bs(this.firestore,Ef(this._delegate,function RF(n,e="asc"){const t=e,r=Ob("orderBy",n);return new MF(r,t)}(e,t)))}catch(r){throw Us(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Bs(this.firestore,Ef(this._delegate,function NF(n){return EN("limit",n),new VN("limit",n,"F")}(e)))}catch(t){throw Us(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Bs(this.firestore,Ef(this._delegate,function OF(n){return EN("limitToLast",n),new VN("limitToLast",n,"L")}(e)))}catch(t){throw Us(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Bs(this.firestore,Ef(this._delegate,function PF(...n){return new UN("startAt",n,!0)}(...e)))}catch(t){throw Us(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Bs(this.firestore,Ef(this._delegate,function kF(...n){return new UN("startAfter",n,!1)}(...e)))}catch(t){throw Us(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Bs(this.firestore,Ef(this._delegate,function FF(...n){return new BN("endBefore",n,!1)}(...e)))}catch(t){throw Us(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Bs(this.firestore,Ef(this._delegate,function LF(...n){return new BN("endAt",n,!0)}(...e)))}catch(t){throw Us(t,"endAt()","Query.endAt()")}}isEqual(e){return DN(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function $F(n){n=Jt(n,ds);const e=Jt(n.firestore,or),t=Qr(e),r=new Pg(e);return function tF(n,e){const t=new zr;return n.asyncQueue.enqueueAndForget((0,he.Z)(function*(){return(r=(0,he.Z)(function*(i,a,c){try{const p=yield L(i,a,!0),_=new nN(a,p.Ks),C=_.Ic(p.documents),A=_.applyChanges(C,!1);c.resolve(A.snapshot)}catch(p){const _=m_(p,`Failed to execute query '${a} against cache`);c.reject(_)}}),function(i,a,c){return r.apply(this,arguments)})(yield ax(n),e,t);var r})),t.promise}(t,n._query).then(i=>new wf(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function GF(n){n=Jt(n,ds);const e=Jt(n.firestore,or),t=Qr(e),r=new Pg(e);return mN(t,n._query,{source:"server"}).then(i=>new wf(e,r,n,i))}(this._delegate):function HF(n){n=Jt(n,ds);const e=Jt(n.firestore,or),t=Qr(e),r=new Pg(e);return LN(n._query),mN(t,n._query).then(i=>new wf(e,r,n,i))}(this._delegate),t.then(r=>new Ex(this.firestore,new wf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=tO(e),r=nO(e,i=>new Ex(this.firestore,new wf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return ZN(this._delegate,t,r)}withConverter(e){return new Bs(this.firestore,this._delegate.withConverter(e?kg.getInstance(this.firestore,e):null))}}class oL{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new $0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ex{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Bs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new $0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new oL(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new $0(this._firestore,r))})}isEqual(e){return FN(this._delegate,e._delegate)}}class C_ extends Bs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Sa(this.firestore,e):null}doc(e){try{return new Sa(this.firestore,void 0===e?Ab(this._delegate):Ab(this._delegate,e))}catch(t){throw Us(t,"doc()","CollectionReference.doc()")}}add(e){return function WF(n,e){const t=Jt(n.firestore,or),r=Ab(n),i=Pb(n.converter,e);return E_(t,[Mb(Rg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Tr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Sa(this.firestore,t))}isEqual(e){return bN(this._delegate,e._delegate)}withConverter(e){return new C_(this.firestore,this._delegate.withConverter(e?kg.getInstance(this.firestore,e):null))}}function Fg(n){return Jt(n,zn)}class Cx{constructor(...e){this._delegate=new ld(...e)}static documentId(){return new Cx(Pr.keyField().canonicalString())}isEqual(e){return(e=(0,P.m9)(e))instanceof ld&&this._delegate._internalPath.isEqual(e._internalPath)}}class Lg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function QF(){return new hx("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Lg(e)}static delete(){const e=function YF(){return new L0("deleteField")}();return e._methodName="FieldValue.delete",new Lg(e)}static arrayUnion(...e){const t=function JF(...n){return new CF("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Lg(t)}static arrayRemove(...e){const t=function XF(...n){return new IF("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Lg(t)}static increment(e){const t=function eL(n){return new bF("increment",n)}(e);return t._methodName="FieldValue.increment",new Lg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const aL={Firestore:JN,GeoPoint:Sb,Timestamp:Or,Blob:j0,Transaction:XN,WriteBatch:eO,DocumentReference:Sa,DocumentSnapshot:H0,Query:Bs,QueryDocumentSnapshot:$0,QuerySnapshot:Ex,CollectionReference:C_,FieldPath:Cx,FieldValue:Lg,setLogLevel:function sL(n){!function sA(n){bl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function lL(n){(function uL(n,e){n.INTERNAL.registerComponent(new ns.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},aL)))})(n,(e,t)=>new JN(e,t,new iL)),n.registerVersion("@firebase/firestore-compat","0.1.14")}(xc.Z);var Ix=F(6451),Fb=F(5363),cL=F(6063);class dL extends wa.x{constructor(e=1/0,t=1/0,r=cL.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let p=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)p=_;p&&r.splice(0,p+1)}}}var rO=F(3099);function iO(n,e,t){var r,i;let a,c=!1;return n&&"object"==typeof n?(a=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,c=!!n.refCount,t=n.scheduler):a=null!=n?n:1/0,(0,rO.B)({connector:()=>new dL(a,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:c})}function sO(n,e){return(0,oa.m)(e)?qt(()=>n,e):qt(()=>n)}var bx=F(9468);F(5867);const aO=new Map,mL={activated:!1,tokenObservers:[]},yL={initialized:!1,enabled:!1};function wi(n){return aO.get(n)||mL}function Nu(n,e){aO.set(n,e)}function Vb(){return yL}class CL{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,he.Z)(function*(){t.stop();try{t.pending=new P.BH,yield function IL(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new P.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const js=new P.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function lO(n){if(!wi(n).activated)throw js.create("use-before-activation",{appName:n.name})}function Sx(n,e){return xx.apply(this,arguments)}function xx(){return xx=(0,he.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});i&&(r["X-Firebase-Client"]=i.getPlatformInfoString());const a={method:"POST",body:JSON.stringify(e),headers:r};let c,p;try{c=yield fetch(n,a)}catch(x){throw js.create("fetch-network-error",{originalErrorMessage:x.message})}if(200!==c.status)throw js.create("fetch-status-error",{httpStatus:c.status});try{p=yield c.json()}catch(x){throw js.create("fetch-parse-error",{originalErrorMessage:x.message})}const _=p.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw js.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const C=1e3*Number(_[1]),A=Date.now();return{token:p.attestationToken,expireTimeMillis:A+C,issuedAtTimeMillis:A}}),xx.apply(this,arguments)}function SL(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const G0="firebase-app-check-store";let jb=null;function dO(){return jb||(jb=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(js.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(G0,{keyPath:"compositeKey"})}}catch(t){e(js.create("storage-open",{originalErrorMessage:t.message}))}}),jb)}function Mx(){return Mx=(0,he.Z)(function*(n,e){const r=(yield dO()).transaction(G0,"readwrite"),a=r.objectStore(G0).put({compositeKey:n,value:e});return new Promise((c,p)=>{a.onsuccess=_=>{c()},r.onerror=_=>{var C;p(js.create("storage-set",{originalErrorMessage:null===(C=_.target.error)||void 0===C?void 0:C.message}))}})}),Mx.apply(this,arguments)}const q0=new uo.Yd("@firebase/app-check");function gO(n,e){return(0,P.hl)()?function NL(n,e){return function hO(n,e){return Mx.apply(this,arguments)}(function pO(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{q0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function mO(){return Vb().enabled}function yO(){return Px.apply(this,arguments)}function Px(){return Px=(0,he.Z)(function*(){const n=Vb();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Px.apply(this,arguments)}const VL={error:"UNKNOWN_ERROR"};function UL(n){return P.US.encodeString(JSON.stringify(n),!1)}function Hb(n){return kx.apply(this,arguments)}function kx(){return kx=(0,he.Z)(function*(n,e=!1){const t=n.app;lO(t);const r=wi(t);let a,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&$b(_)&&(i=_)}if(!e&&i&&$b(i))return{token:i.token};let p,c=!1;if(mO()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Sx(SL(t,yield yO()),n.platformLoggerProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),c=!0);const _=yield r.exchangeTokenPromise;return yield gO(t,_),Nu(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),c=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?q0.warn(_.message):q0.error(_),a=_}return i?(p={token:i.token},Nu(t,Object.assign(Object.assign({},r),{token:i})),yield gO(t,i)):p=jL(a),c&&vO(t,p),p}),kx.apply(this,arguments)}function Lx(n,e){const t=wi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Nu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function _O(n){const{app:e}=n,t=wi(e);let r=t.tokenRefresher;r||(r=function BL(n){const{app:e}=n;return new CL((0,he.Z)(function*(){let r;if(r=wi(e).token?yield Hb(n,!0):yield Hb(n),r.error)throw r.error}),()=>!0,()=>{const t=wi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Nu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function vO(n,e){const t=wi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function $b(n){return n.expireTimeMillis-Date.now()>0}function jL(n){return{token:UL(VL),error:n}}class HL{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=wi(this.app);for(const t of e)Lx(this.app,t.next);return Promise.resolve()}}const AO="app-check-internal";!function nV(){(0,_i._registerComponent)(new ns.wA("app-check",n=>function $L(n,e){return new HL(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(AO).initialize()})),(0,_i._registerComponent)(new ns.wA(AO,n=>function GL(n){return{getToken:e=>Hb(n,e),addTokenListener:e=>function Fx(n,e,t,r){const{app:i}=n,a=wi(i),c={next:t,error:r,type:e};if(Nu(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,c]})),a.token&&$b(a.token)){const p=a.token;Promise.resolve().then(()=>{t({token:p.token}),_O(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>_O(n))}(n,"INTERNAL",e),removeTokenListener:e=>Lx(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,_i.registerVersion)("@firebase/app-check","0.5.3")}();class qb{constructor(){return(0,Dn.vb)("app-check")}}"undefined"!=typeof window&&window;var aV=F(127);const Hx=new h.OlP("angularfire2.auth.use-emulator"),$x=new h.OlP("angularfire2.auth.settings"),Gx=new h.OlP("angularfire2.auth.tenant-id"),qx=new h.OlP("angularfire2.auth.langugage-code"),Wx=new h.OlP("angularfire2.auth.use-device-language"),zx=new h.OlP("angularfire.auth.persistence"),Zx=(n,e,t,r,i,a,c,p)=>(0,Ir.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),c)for(const[C,A]of Object.entries(c))_.settings[C]=A;return p&&_.setPersistence(p),_},[t,r,i,a,c,p]);let Kx=(()=>{class n{constructor(t,r,i,a,c,p,_,C,A,x,O,V){const z=new wa.x,Ee=Xe(void 0).pipe((0,Fb.Q)(c.outsideAngular),qt(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,2438)))),(0,_t.U)(()=>(0,Ir.on)(t,a,r)),(0,_t.U)(Ue=>Zx(Ue,a,p,C,A,x,_,O)),iO({bufferSize:1,refCount:!1}));if(ja(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Xe(null);else{Ee.pipe(Fo()).subscribe();const at=Ee.pipe(qt(Mt=>Mt.getRedirectResult().then(Zn=>Zn,()=>null)),Dn.iC,iO({bufferSize:1,refCount:!1})),St=Ee.pipe(qt(Mt=>new Br.y(Zn=>({unsubscribe:a.runOutsideAngular(()=>Mt.onAuthStateChanged(Lu=>Zn.next(Lu),Lu=>Zn.error(Lu),()=>Zn.complete()))})))),Xt=Ee.pipe(qt(Mt=>new Br.y(Zn=>({unsubscribe:a.runOutsideAngular(()=>Mt.onIdTokenChanged(Lu=>Zn.next(Lu),Lu=>Zn.error(Lu),()=>Zn.complete()))}))));this.authState=at.pipe(sO(St),(0,bx.R)(c.outsideAngular),(0,Fb.Q)(c.insideAngular)),this.user=at.pipe(sO(Xt),(0,bx.R)(c.outsideAngular),(0,Fb.Q)(c.insideAngular)),this.idToken=this.user.pipe(qt(Mt=>Mt?(0,_n.D)(Mt.getIdToken()):Xe(null))),this.idTokenResult=this.user.pipe(qt(Mt=>Mt?(0,_n.D)(Mt.getIdTokenResult()):Xe(null))),this.credential=(0,Ix.T)(at,z,this.authState.pipe(jr(Mt=>!Mt))).pipe((0,_t.U)(Mt=>(null==Mt?void 0:Mt.user)?Mt:null),(0,bx.R)(c.outsideAngular),(0,Fb.Q)(c.insideAngular))}return(0,Ir.pX)(this,Ee,a,{spy:{apply:(Ue,at,St)=>{(Ue.startsWith("signIn")||Ue.startsWith("createUser"))&&St.then(Xt=>z.next(Xt))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ir.Dh),h.LFG(Ir.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Dn.HU),h.LFG(Hx,8),h.LFG($x,8),h.LFG(Gx,8),h.LFG(qx,8),h.LFG(Wx,8),h.LFG(zx,8),h.LFG(qb,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function xO(n,e){return function lV(n,e=Ps.z){return new Br.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function Yx(n,e){return xO(n,e).pipe((0,_t.U)(t=>({payload:t,type:"query"})))}function Wb(n,e){return Yx(n,e).pipe(mu(void 0),yl(),(0,_t.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const _=i.find(A=>A.doc.ref.isEqual(c.ref)),C=null==t?void 0:t.payload.docs.find(A=>A.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&C&&JSON.stringify(C.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),a}))}function MO(n,e,t){return Wb(n,t).pipe(ko((r,i)=>function dV(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function hV(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Qx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Qx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Qx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Sc(),(0,_t.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Qx(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function RO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class NO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Wb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,_t.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(mu(void 0),yl(),jr(([r,i])=>i.length>0||!r),(0,_t.U)(([r,i])=>i),Dn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ko((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=RO(e);return MO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(e={}){return Yx(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Dn.iC)}get(e){return(0,_n.D)(this.query.get(e)).pipe(Dn.iC)}add(e){return this.ref.add(e)}doc(e){return new OO(this.ref.doc(e),this.afs)}}class OO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=PO(r,t);return new NO(i,a,this.afs)}snapshotChanges(){return function cV(n,e){return xO(n,e).pipe(mu(void 0),yl(),(0,_t.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,_t.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,_n.D)(this.ref.get(e)).pipe(Dn.iC)}}class fV{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Wb(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),jr(t=>t.length>0),Dn.iC):Wb(this.query,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ko((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=RO(e);return MO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Dn.iC)}valueChanges(e={}){return Yx(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Dn.iC)}get(e){return(0,_n.D)(this.query.get(e)).pipe(Dn.iC)}}const pV=new h.OlP("angularfire2.enableFirestorePersistence"),gV=new h.OlP("angularfire2.firestore.persistenceSettings"),mV=new h.OlP("angularfire2.firestore.settings"),yV=new h.OlP("angularfire2.firestore.use-emulator");function PO(n,e=(t=>t)){return{query:e(n),ref:n}}let Jx=(()=>{class n{constructor(t,r,i,a,c,p,_,C,A,x,O,V,z,Ee,Ue,at,St){this.schedulers=_;const Xt=(0,Ir.on)(t,p,r),Mt=A;x&&Zx(Xt,p,O,z,Ee,Ue,V,at),[this.firestore,this.persistenceEnabled$]=(0,Ir.cc)(`${Xt.name}.firestore`,"AngularFirestore",Xt.name,()=>{const Zn=p.runOutsideAngular(()=>Xt.firestore());if(a&&Zn.settings(a),Mt&&Zn.useEmulator(...Mt),i&&!ja(c)){const Lu=()=>{try{return(0,_n.D)(Zn.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(RD){return"undefined"!=typeof console&&console.warn(RD),Xe(!1)}};return[Zn,p.runOutsideAngular(Lu)]}return[Zn,Xe(!1)]},[a,Mt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=PO(i,r),p=this.schedulers.ngZone.run(()=>a);return new NO(p,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new fV(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new OO(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ir.Dh),h.LFG(Ir.xv,8),h.LFG(pV,8),h.LFG(mV,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Dn.HU),h.LFG(gV,8),h.LFG(yV,8),h.LFG(Kx,8),h.LFG(Hx,8),h.LFG($x,8),h.LFG(Gx,8),h.LFG(qx,8),h.LFG(Wx,8),h.LFG(zx,8),h.LFG(qb,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),kO=(()=>{class n{constructor(t){this.firestore=t}createImagen(t){return this.firestore.collection("imagenes").add(t)}getImagenes(){return this.firestore.collection("imagenes").snapshotChanges()}getImagen(t){return this.firestore.collection("imagenes").doc(t).snapshotChanges()}updateImagen(t,r){return this.firestore.collection("imagenes").doc(t).set(r)}deleteImagen(t){return this.firestore.collection("imagenes").doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Jx))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function _V(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",13),h.TgZ(1,"div",14),h._UZ(2,"img",15),h.TgZ(3,"div",16),h.TgZ(4,"h5",17),h._uU(5),h.qZA(),h.TgZ(6,"div",18),h.TgZ(7,"div",13),h.TgZ(8,"button",19),h.NdJ("click",function(){const a=h.CHM(t).$implicit;return h.oxw().editarImagen(a.id)}),h._uU(9,"Editar"),h.qZA(),h.qZA(),h.TgZ(10,"div",13),h.TgZ(11,"button",20),h.NdJ("click",function(){const a=h.CHM(t).$implicit;return h.oxw().deleteImagen(a.id)}),h._uU(12,"Eliminar"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&n){const t=e.$implicit;h.xp6(2),h.s9C("src",t.data.url,h.LSH),h.xp6(3),h.Oqu(t.data.descripcion)}}let vV=(()=>{class n{constructor(t){this.imagenesService=t,this.imagenes=[],this.documentId="",this.currentStatus=1,this.imgForm=new sh({descripcion:new va("",ga.required),url:new va("",ga.required),id:new va("")}),this.imgForm.setValue({id:"",descripcion:"",url:""})}ngOnInit(){this.imagenesService.getImagenes().subscribe(t=>{this.imagenes=[],t.forEach(r=>{this.imagenes.push({id:r.payload.doc.id,data:r.payload.doc.data()})})})}saveImagen(t,r=this.documentId){1==this.currentStatus?this.imagenesService.createImagen({descripcion:t.descripcion,url:t.url}).then(()=>{this.imgForm.setValue({descipcion:"",url:"",id:""})},a=>{console.log(a)}):this.imagenesService.updateImagen(r,{descripcion:t.descripcion,url:t.url}).then(()=>{this.currentStatus=1,this.imgForm.setValue({decripcion:"",url:"",id:""})},a=>{console.log(a)})}editarImagen(t){let r=this.imagenesService.getImagen(t).subscribe(i=>{this.currentStatus=2,this.documentId=t,this.imgForm.setValue({id:t,descripcion:i.payload.data().descripcion,url:i.payload.data().url}),r.unsubscribe()})}deleteImagen(t){this.imagenesService.deleteImagen(t).then(()=>{console.log("documento eliminado")},r=>{console.log(r)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(kO))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-imagenes"]],decls:21,vars:3,consts:[[1,"container-fluid","p-2","text-white","text-center",2,"background-color","rgba(22, 20, 107, 0.479)"],[1,"container","mt-3"],[1,"row"],[1,"col-sm-4","rounded-3"],[3,"formGroup","ngSubmit"],["type","hidden","formControlName","id"],["for","descripcion"],["type","text","formControlName","descripcion",1,"form-control"],["for","url"],["type","url","formControlName","url",1,"form-control"],["type","submit","value","Guardar",1,"btn","btn-primary",3,"disabled"],[1,"col","rounded-3",2,"padding-left","3rem"],["class","col-sm",4,"ngFor","ngForOf"],[1,"col-sm"],[1,"card","mb-2",2,"width","12rem"],[1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-text",2,"text-align","center"],[1,"row",2,"align-items","center","text-align","center","display","flex"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.TgZ(1,"h2"),h._uU(2,"Cat\xe1logo de imagenes"),h.qZA(),h.qZA(),h.TgZ(3,"div",1),h.TgZ(4,"div",2),h.TgZ(5,"h2"),h._uU(6,"Nueva Imagen"),h.qZA(),h.TgZ(7,"div",3),h.TgZ(8,"form",4),h.NdJ("ngSubmit",function(){return r.saveImagen(r.imgForm.value)}),h._UZ(9,"input",5),h.TgZ(10,"label",6),h._uU(11,"Descripci\xf3n"),h.qZA(),h._UZ(12,"input",7),h.TgZ(13,"label",8),h._uU(14,"URL de la imagen"),h.qZA(),h._UZ(15,"input",9),h._UZ(16,"p"),h._UZ(17,"input",10),h.qZA(),h.qZA(),h.TgZ(18,"div",11),h.TgZ(19,"div",2),h.YNc(20,_V,13,2,"div",12),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&t&&(h.xp6(8),h.Q6J("formGroup",r.imgForm),h.xp6(9),h.Q6J("disabled",!r.imgForm.valid),h.xp6(3),h.Q6J("ngForOf",r.imagenes))},directives:[cl,om,gc,to,Kf,cp,Pn],styles:[""]}),n})();class zb{}let FO=(()=>{class n{constructor(t){this.firestore=t}getLibros(){return this.firestore.collection("libros").snapshotChanges()}createLibro(t){return this.firestore.collection("libros").add(Object.assign({},t))}updateLibro(t){this.firestore.doc("libros/"+t.id).update(t)}deleteLibro(t){this.firestore.doc("libros/"+t).delete()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Jx))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function wV(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"tr"),h.TgZ(1,"td"),h._uU(2),h.qZA(),h.TgZ(3,"td"),h._uU(4),h.qZA(),h.TgZ(5,"td"),h._uU(6),h.qZA(),h.TgZ(7,"td"),h._uU(8),h.qZA(),h.TgZ(9,"td"),h.TgZ(10,"button",15),h.NdJ("click",function(){const a=h.CHM(t).$implicit;return h.oxw().selectLibro(a)}),h._uU(11," Seleccionar "),h.qZA(),h.qZA(),h.qZA()}if(2&n){const t=e.$implicit;h.xp6(2),h.Oqu(t.titulo),h.xp6(2),h.Oqu(t.autor),h.xp6(2),h.Oqu(t.editorial),h.xp6(2),h.Oqu(t.anioPublicacion)}}let EV=(()=>{class n{constructor(t){this.libroService=t,this.libros=[],this.libro=new zb}ngOnInit(){this.libroService.getLibros().subscribe(t=>{this.libros=t.map(r=>Object.assign(Object.assign({},r.payload.doc.data()),{id:r.payload.doc.id}))})}insertarLibro(){this.libroService.createLibro(this.libro),this.libro=new zb}selectLibro(t){this.libro=t}update(){this.libroService.updateLibro(this.libro),this.libro=new zb}delete(t){this.libroService.deleteLibro(t),this.libro=new zb}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(FO))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-libros"]],decls:49,vars:5,consts:[[1,"container-fluid","p-2","text-white","text-center",2,"background-color","rgba(22, 20, 107, 0.479)"],[1,"container","mt-3"],[1,"row"],[1,"col-sm-4","rounded-3",2,"background-color","rgba(185, 238, 135, 0.918)"],[2,"text-align","center"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["type","number",1,"form-control",3,"ngModel","ngModelChange"],[1,"row",2,"align-items","center","text-align","center","display","flex"],[1,"col-sm"],["type","button",1,"btn","btn-primary","mb-3",3,"click"],["type","button",1,"btn","btn-success","mb-3",3,"click"],["type","button",1,"btn","btn-danger","mb-3",3,"click"],[1,"col","rounded-3",2,"padding-left","3rem"],[1,"table"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.TgZ(1,"h2"),h._uU(2,"Biblioteca"),h.qZA(),h.qZA(),h.TgZ(3,"div",1),h.TgZ(4,"div",2),h.TgZ(5,"div",3),h.TgZ(6,"h2",4),h._uU(7,"Alta de libros"),h.qZA(),h.TgZ(8,"p"),h.TgZ(9,"label"),h._uU(10,"Titulo:"),h.qZA(),h.TgZ(11,"input",5),h.NdJ("ngModelChange",function(a){return r.libro.titulo=a}),h.qZA(),h.qZA(),h.TgZ(12,"p"),h.TgZ(13,"label"),h._uU(14,"Autor:"),h.qZA(),h.TgZ(15,"input",5),h.NdJ("ngModelChange",function(a){return r.libro.autor=a}),h.qZA(),h.qZA(),h.TgZ(16,"p"),h.TgZ(17,"label"),h._uU(18,"Editorial:"),h.qZA(),h.TgZ(19,"input",5),h.NdJ("ngModelChange",function(a){return r.libro.editorial=a}),h.qZA(),h.qZA(),h.TgZ(20,"p"),h.TgZ(21,"label"),h._uU(22,"A\xf1o de Publicaci\xf3n:"),h.qZA(),h.TgZ(23,"input",6),h.NdJ("ngModelChange",function(a){return r.libro.anioPublicacion=a}),h.qZA(),h.qZA(),h.TgZ(24,"div",7),h.TgZ(25,"div",8),h.TgZ(26,"button",9),h.NdJ("click",function(){return r.insertarLibro()}),h._uU(27,"Insertar"),h.qZA(),h.qZA(),h.TgZ(28,"div",8),h.TgZ(29,"button",10),h.NdJ("click",function(){return r.update()}),h._uU(30,"Actualizar"),h.qZA(),h.qZA(),h.TgZ(31,"div",8),h.TgZ(32,"button",11),h.NdJ("click",function(){return r.delete(r.libro.id)}),h._uU(33,"Eliminar"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(34,"div",12),h.TgZ(35,"table",13),h.TgZ(36,"thead"),h.TgZ(37,"th"),h._uU(38,"Titulo"),h.qZA(),h.TgZ(39,"th"),h._uU(40,"Autor"),h.qZA(),h.TgZ(41,"th"),h._uU(42,"Editorial"),h.qZA(),h.TgZ(43,"th"),h._uU(44,"A\xf1o de Publicaci\xf3n"),h.qZA(),h.TgZ(45,"th"),h._uU(46,"Seleccionar"),h.qZA(),h.qZA(),h.TgZ(47,"tbody"),h.YNc(48,wV,12,4,"tr",14),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&t&&(h.xp6(11),h.Q6J("ngModel",r.libro.titulo),h.xp6(4),h.Q6J("ngModel",r.libro.autor),h.xp6(4),h.Q6J("ngModel",r.libro.editorial),h.xp6(4),h.Q6J("ngModel",r.libro.anioPublicacion),h.xp6(25),h.Q6J("ngForOf",r.libros))},directives:[to,Kf,fc,pc,Pn],styles:[""]}),n})();class Zb{}let LO=(()=>{class n{constructor(t){this.firestore=t}getCanciones(){return this.firestore.collection("canciones").snapshotChanges()}createCancion(t){return this.firestore.collection("canciones").add(Object.assign({},t))}updateCancion(t){this.firestore.doc("canciones/"+t.id).update(t)}deleteCancion(t){this.firestore.doc("canciones/"+t).delete()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Jx))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function CV(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"tr"),h.TgZ(1,"td"),h._uU(2),h.qZA(),h.TgZ(3,"td"),h._uU(4),h.qZA(),h.TgZ(5,"td"),h._uU(6),h.qZA(),h.TgZ(7,"td"),h._uU(8),h.qZA(),h.TgZ(9,"td"),h.TgZ(10,"button",14),h.NdJ("click",function(){const a=h.CHM(t).$implicit;return h.oxw().selectCancion(a)}),h._uU(11," Seleccionar "),h.qZA(),h.qZA(),h.qZA()}if(2&n){const t=e.$implicit;h.xp6(2),h.Oqu(t.nombre),h.xp6(2),h.Oqu(t.artista),h.xp6(2),h.Oqu(t.album),h.xp6(2),h.Oqu(t.genero)}}const IV=[{path:"home",component:Ac},{path:"libros",component:EV},{path:"imagenes",component:vV},{path:"canciones",component:(()=>{class n{constructor(t){this.cancionService=t,this.canciones=[],this.cancion=new Zb}ngOnInit(){this.cancionService.getCanciones().subscribe(t=>{this.canciones=t.map(r=>Object.assign(Object.assign({},r.payload.doc.data()),{id:r.payload.doc.id}))})}insertarCancion(){this.cancionService.createCancion(this.cancion),this.cancion=new Zb}selectCancion(t){this.cancion=t}update(){this.cancionService.updateCancion(this.cancion),this.cancion=new Zb}delete(t){this.cancionService.deleteCancion(t),this.cancion=new Zb}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(LO))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-canciones"]],decls:49,vars:5,consts:[[1,"container-fluid","p-2","text-white","text-center",2,"background-color","rgba(22, 20, 107, 0.479)"],[1,"container-sm","mt-3"],[1,"row"],[1,"col-sm-4","rounded-3","border","border-2"],[1,"mt-2",2,"text-align","center"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"row",2,"align-items","center","text-align","center","display","flex"],[1,"col-sm"],["type","button",1,"btn","btn-success","mb-2","mx-2",3,"click"],["type","button",1,"btn","btn-secondary","mb-2","mx-2",3,"click"],["type","button",1,"btn","btn-danger","mb-2","mx-2",3,"click"],[1,"col","rounded-3",2,"padding-left","3rem"],[1,"table"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.TgZ(1,"h2"),h._uU(2,"\u266a\u266b Canciones \u266a\u266b"),h.qZA(),h.qZA(),h.TgZ(3,"div",1),h.TgZ(4,"div",2),h.TgZ(5,"div",3),h.TgZ(6,"h5",4),h._uU(7,"Nueva Canci\xf3n"),h.qZA(),h.TgZ(8,"p"),h.TgZ(9,"label"),h._uU(10,"Nombre:"),h.qZA(),h.TgZ(11,"input",5),h.NdJ("ngModelChange",function(a){return r.cancion.nombre=a}),h.qZA(),h.qZA(),h.TgZ(12,"p"),h.TgZ(13,"label"),h._uU(14,"Artista:"),h.qZA(),h.TgZ(15,"input",5),h.NdJ("ngModelChange",function(a){return r.cancion.artista=a}),h.qZA(),h.qZA(),h.TgZ(16,"p"),h.TgZ(17,"label"),h._uU(18,"album:"),h.qZA(),h.TgZ(19,"input",5),h.NdJ("ngModelChange",function(a){return r.cancion.album=a}),h.qZA(),h.qZA(),h.TgZ(20,"p"),h.TgZ(21,"label"),h._uU(22,"genero:"),h.qZA(),h.TgZ(23,"input",5),h.NdJ("ngModelChange",function(a){return r.cancion.genero=a}),h.qZA(),h.qZA(),h.TgZ(24,"div",6),h.TgZ(25,"div",7),h.TgZ(26,"button",8),h.NdJ("click",function(){return r.insertarCancion()}),h._uU(27,"Insertar"),h.qZA(),h.qZA(),h.TgZ(28,"div",7),h.TgZ(29,"button",9),h.NdJ("click",function(){return r.update()}),h._uU(30,"Actualizar"),h.qZA(),h.qZA(),h.TgZ(31,"div",7),h.TgZ(32,"button",10),h.NdJ("click",function(){return r.delete(r.cancion.id)}),h._uU(33,"Eliminar"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(34,"div",11),h.TgZ(35,"table",12),h.TgZ(36,"thead"),h.TgZ(37,"th"),h._uU(38,"Nombre"),h.qZA(),h.TgZ(39,"th"),h._uU(40,"Artista"),h.qZA(),h.TgZ(41,"th"),h._uU(42,"Album"),h.qZA(),h.TgZ(43,"th"),h._uU(44,"genero"),h.qZA(),h.TgZ(45,"th"),h._uU(46,"Seleccionar"),h.qZA(),h.qZA(),h.TgZ(47,"tbody"),h.YNc(48,CV,12,4,"tr",13),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&t&&(h.xp6(11),h.Q6J("ngModel",r.cancion.nombre),h.xp6(4),h.Q6J("ngModel",r.cancion.artista),h.xp6(4),h.Q6J("ngModel",r.cancion.album),h.xp6(4),h.Q6J("ngModel",r.cancion.genero),h.xp6(25),h.Q6J("ngForOf",r.canciones))},directives:[to,Kf,fc,Pn],styles:[""]}),n})()},{path:"about",component:Km},{path:"**",redirectTo:"home"}];let bV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[yC.forRoot(IV)],yC]}),n})();const VO_firebaseConfig={apiKey:"AIzaSyDpY1tD5qt120fqVtNG_nBQBP7v-pEWOUY",authDomain:"evaluacion-6092c.firebaseapp.com",projectId:"evaluacion-6092c",storageBucket:"evaluacion-6092c.appspot.com",messagingSenderId:"69609853550",appId:"1:69609853550:web:57c9874ca073ec51190c7f"};var DV=F(5032);const UO="@firebase/database";let Xx="";function jO(n){Xx=n}class SV{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,P.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,P.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class xV{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,P.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const HO=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new SV(e)}}catch(e){}return new xV},Vg=HO("localStorage"),eM=HO("sessionStorage"),I_=new uo.Yd("@firebase/database"),$O=function(){let n=1;return function(){return n++}}(),GO=function(n){const e=(0,P.dS)(n),t=new P.gQ;t.update(e);const r=t.digest();return P.US.encodeByteArray(r)},W0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=W0.apply(null,r):e+="object"==typeof r?(0,P.Pz)(r):r,e+=" "}return e};let Ug=null,qO=!0;const WO=function(n,e){(0,P.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(I_.logLevel=uo.in.VERBOSE,Ug=I_.log.bind(I_),e&&eM.set("logging_enabled",!0)):"function"==typeof n?Ug=n:(Ug=null,eM.remove("logging_enabled"))},Ei=function(...n){if(!0===qO&&(qO=!1,null===Ug&&!0===eM.get("logging_enabled")&&WO(!0)),Ug){const e=W0.apply(null,n);Ug(e)}},z0=function(n){return function(...e){Ei(n,...e)}},tM=function(...n){const e="FIREBASE INTERNAL ERROR: "+W0(...n);I_.error(e)},kl=function(...n){const e=`FIREBASE FATAL ERROR: ${W0(...n)}`;throw I_.error(e),new Error(e)},Hs=function(...n){const e="FIREBASE WARNING: "+W0(...n);I_.warn(e)},Kb=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},dd="[MIN_NAME]",Fl="[MAX_NAME]",Bg=function(n,e){if(n===e)return 0;if(n===dd||e===Fl)return-1;if(e===dd||n===Fl)return 1;{const t=Yb(n),r=Yb(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},NV=function(n,e){return n===e?0:n<e?-1:1},Z0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,P.Pz)(e))},nM=function(n){if("object"!=typeof n||null===n)return(0,P.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,P.Pz)(e[r]),t+=":",t+=nM(n[e[r]]);return t+="}",t},zO=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Ci(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const ZO=function(n){(0,P.hu)(!Kb(n),"Invalid JSON number");const r=1023;let i,a,c,p,_;0===n?(a=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(p=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=p+r,c=Math.round(n*Math.pow(2,52-p)-Math.pow(2,52))):(a=0,c=Math.round(n/Math.pow(2,-1074))));const C=[];for(_=52;_;_-=1)C.push(c%2?1:0),c=Math.floor(c/2);for(_=11;_;_-=1)C.push(a%2?1:0),a=Math.floor(a/2);C.push(i?1:0),C.reverse();const A=C.join("");let x="";for(_=0;_<64;_+=8){let O=parseInt(A.substr(_,8),2).toString(16);1===O.length&&(O="0"+O),x+=O}return x.toLowerCase()},FV=new RegExp("^-?(0*)\\d{1,10}$"),KO=-2147483648,rM=2147483647,Yb=function(n){if(FV.test(n)){const e=Number(n);if(e>=KO&&e<=rM)return e}return null},b_=function(n){try{n()}catch(e){setTimeout(()=>{throw Hs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},K0=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class VV{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Hs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class UV{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ei("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Hs(e)}}let Y0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const eP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,nP="websocket",rP="long_polling";class sM{constructor(e,t,r,i,a=!1,c="",p=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=c,this.includeNamespaceInQueryParams=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Vg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Vg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function iP(n,e,t){let r;if((0,P.hu)("string"==typeof e,"typeof type must == string"),(0,P.hu)("object"==typeof t,"typeof params must == object"),e===nP)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==rP)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function jV(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Ci(t,(a,c)=>{i.push(a+"="+c)}),r+i.join("&")}class HV{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,P.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,P.p$)(this.counters_)}}const oM={},aM={};function uM(n){const e=n.toString();return oM[e]||(oM[e]=new HV),oM[e]}class GV{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&b_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class D_{constructor(e,t,r,i,a,c,p){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=c,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=z0(e),this.stats_=uM(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),iP(t,rP,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new GV(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,P.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new lM((...a)=>{const[c,p,_,C,A]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=p,this.password=_;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[c,p]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(c,p)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&eP.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){D_.forceAllow_=!0}static forceDisallow(){D_.forceDisallow_=!0}static isAvailable(){return!((0,P.Yr)()||!D_.forceAllow_&&(D_.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,P.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,P.h$)(t),i=zO(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,P.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,P.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class lM{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,P.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=$O(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=lM.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(p){Ei("frame writing exception"),p.stack&&Ei(p.stack),Ei(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ei("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,P.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ei("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Q0=null;"undefined"!=typeof MozWebSocket?Q0=MozWebSocket:"undefined"!=typeof WebSocket&&(Q0=WebSocket);let J0=(()=>{class n{constructor(t,r,i,a,c,p,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=z0(this.connId),this.stats_=uM(r),this.connURL=n.connectionURL_(r,p,_,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a){const c={v:"5"};return!(0,P.Yr)()&&"undefined"!=typeof location&&location.hostname&&eP.test(location.hostname)&&(c.r="f"),r&&(c.s=r),i&&(c.ls=i),a&&(c.ac=a),iP(t,nP,c)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Vg.set("previous_websocket_failure",!0);try{if((0,P.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${Xx}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,p=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;p&&(a.proxy={origin:p}),this.mySock=new Q0(this.connURL,[],a)}else this.mySock=new Q0(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Q0&&!n.forceDisallow_}static previouslyFailed(){return Vg.isInMemoryStorage||!0===Vg.get("previous_websocket_failure")}markConnectionHealthy(){Vg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,P.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,P.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,P.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=zO(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class cM{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[D_,J0]}initTransports_(e){const t=J0&&J0.isAvailable();let r=t&&!J0.previouslyFailed();if(e.webSocketOnly&&(t||Hs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[J0];else{const i=this.transports_=[];for(const a of cM.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class yP{constructor(e,t,r,i,a,c,p,_,C,A){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=c,this.onReady_=p,this.onDisconnect_=_,this.onKill_=C,this.lastSessionId=A,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=z0("c:"+this.id+":"),this.transportManager_=new cM(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=K0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Z0("t",e),r=Z0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Z0("t",e),r=Z0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Z0("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?tM("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):tM("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Hs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),K0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):K0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Vg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class _P{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class vP{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,P.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,P.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Jb extends vP{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,P.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Jb}getInitialEvent(e){return(0,P.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class wn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function fn(){return new wn("")}function Ut(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function If(n){return n.pieces_.length-n.pieceNum_}function Mn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new wn(n.pieces_,e)}function hM(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function X0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function CP(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new wn(e,0)}function ar(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof wn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new wn(t,0)}function Bt(n){return n.pieceNum_>=n.pieces_.length}function $s(n,e){const t=Ut(n),r=Ut(e);if(null===t)return e;if(t===r)return $s(Mn(n),Mn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function hU(n,e){const t=X0(n,0),r=X0(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Bg(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function fM(n,e){if(If(n)!==If(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function xa(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(If(n)>If(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class fU{constructor(e,t){this.errorPrefix_=t,this.parts_=X0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,P.ug)(this.parts_[r]);IP(this)}}function IP(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+jg(n))}function jg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class pM extends vP{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new pM}getInitialEvent(e){return(0,P.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const eE=1e3;let eD,Hg=(()=>{class n extends _P{constructor(t,r,i,a,c,p,_,C){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=c,this.authTokenProvider_=p,this.appCheckTokenProvider_=_,this.authOverride_=C,this.id=n.nextPersistentConnectionId_++,this.log_=z0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=eE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,C&&!(0,P.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");pM.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Jb.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,c={r:a,a:t,b:r};this.log_((0,P.Pz)(c)),(0,P.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new P.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:p=>{const _=p.d;"ok"===p.s?(this.onDataUpdate_(i.p,_,!1,null),r.resolve(_)):r.reject(_)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const p=this.outstandingGets_[c];void 0===p||a!==p||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),r.promise}listen(t,r,i,a){this.initConnection_();const c=t._queryIdentifier,p=t._path.toString();this.log_("Listen called for "+p+" "+c),this.listens.has(p)||this.listens.set(p,new Map),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,P.hu)(!this.listens.get(p).has(c),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(p).set(c,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,_=>{const C=_.d,A=_.s;n.warnOnListenWarnings_(C,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==A&&this.removeListen_(i,a),t.onComplete&&t.onComplete(A,C))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,P.r3)(t,"w")){const i=(0,P.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();Hs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,P.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,P.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const c=a.s,p=a.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,p))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,P.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const c={p:t};a&&(c.q=i,c.t=a),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,p=>{a&&setTimeout(()=>{a(p.s,p.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,c){this.initConnection_();const p={p:r,d:i};void 0!==c&&(p.h=c),this.outstandingPuts_.push({action:t,request:p,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,P.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):tM("Unrecognized action received from server: "+(0,P.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,P.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=eE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=eE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=eE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,he.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,p=t.lastSessionId;let _=!1,C=null;const A=function(){C?C.close():(_=!0,a())};t.realtime_={close:A,sendRequest:function(V){(0,P.hu)(C,"sendRequest call when we're not connected not allowed."),C.sendRequest(V)}};const O=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[V,z]=yield Promise.all([t.authTokenProvider_.getToken(O),t.appCheckTokenProvider_.getToken(O)]);_?Ei("getToken() completed but was canceled"):(Ei("getToken() completed. Creating connection."),t.authToken_=V&&V.accessToken,t.appCheckToken_=z&&z.token,C=new yP(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,Ee=>{Hs(Ee+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},p))}catch(V){t.log_("Failed to get token: "+V),_||(t.repoInfo_.nodeAdmin&&Hs(V),A())}}})()}interrupt(t){Ei("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ei("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,P.xb)(this.interruptReasons_)&&(this.reconnectDelay_=eE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>nM(c)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new wn(t).toString();let a;if(this.listens.has(i)){const c=this.listens.get(i);a=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Ei("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ei("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,P.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Xx.replace(/\./g,"-")]=1,(0,P.uI)()?t["framework.cordova"]=1:(0,P.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Jb.getInstance().currentlyOnline();return(0,P.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class $t{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new $t(e,t)}}class Xb{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new $t(dd,e),i=new $t(dd,t);return 0!==this.compare(r,i)}minPost(){return $t.MIN}}class TP extends Xb{static get __EMPTY_NODE(){return eD}static set __EMPTY_NODE(e){eD=e}compare(e,t){return Bg(e.name,t.name)}isDefinedOn(e){throw(0,P.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return $t.MIN}maxPost(){return new $t(Fl,eD)}makePost(e,t){return(0,P.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new $t(e,eD)}toString(){return".key"}}const Ll=new TP;class tD{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let mM,Ou=(()=>{class n{constructor(t,r,i,a,c){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:yo.EMPTY_NODE,this.right=null!=c?c:yo.EMPTY_NODE}copy(t,r,i,a,c){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const c=i(t,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===c?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return yo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return yo.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class yo{constructor(e,t=yo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new yo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ou.BLACK,null,null))}remove(e){return new yo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ou.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new tD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new tD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new tD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new tD(this.root_,null,this.comparator_,!0,e)}}function CU(n,e){return Bg(n.name,e.name)}function gM(n,e){return Bg(n,e)}yo.EMPTY_NODE=new class EU{copy(e,t,r,i,a){return this}insert(e,t,r){return new Ou(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const AP=function(n){return"number"==typeof n?"number:"+ZO(n):"string:"+n},SP=function(n){if(n.isLeafNode()){const e=n.val();(0,P.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,P.r3)(e,".sv"),"Priority must be a string or number.")}else(0,P.hu)(n===mM||n.isEmpty(),"priority of unexpected type.");(0,P.hu)(n===mM||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let xP,MP,RP,T_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,P.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),SP(this.priorityNode_)}static set __childrenNodeConstructor(t){xP=t}static get __childrenNodeConstructor(){return xP}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Bt(t)?this:".priority"===Ut(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Ut(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,P.hu)(".priority"!==i||1===If(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Mn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+AP(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?ZO(this.value_):this.value_,this.lazyHash_=GO(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,P.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,P.hu)(a>=0,"Unknown leaf type: "+r),(0,P.hu)(c>=0,"Unknown leaf type: "+i),a===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Vn=new class TU extends Xb{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Bg(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return $t.MIN}maxPost(){return new $t(Fl,new T_("[PRIORITY-POST]",RP))}makePost(e,t){const r=MP(e);return new $t(t,new T_("[PRIORITY-POST]",r))}toString(){return".priority"}},AU=Math.log(2);class SU{constructor(e){this.count=parseInt(Math.log(e+1)/AU,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const nD=function(n,e,t,r){n.sort(e);const i=function(_,C){const A=C-_;let x,O;if(0===A)return null;if(1===A)return x=n[_],O=t?t(x):x,new Ou(O,x.node,Ou.BLACK,null,null);{const V=parseInt(A/2,10)+_,z=i(_,V),Ee=i(V+1,C);return x=n[V],O=t?t(x):x,new Ou(O,x.node,Ou.BLACK,z,Ee)}},p=function(_){let C=null,A=null,x=n.length;const O=function(z,Ee){const Ue=x-z,at=x;x-=z;const St=i(Ue+1,at),Xt=n[Ue],Mt=t?t(Xt):Xt;V(new Ou(Mt,Xt.node,Ee,null,St))},V=function(z){C?(C.left=z,C=z):(A=z,C=z)};for(let z=0;z<_.count;++z){const Ee=_.nextBitIsOne(),Ue=Math.pow(2,_.count-(z+1));Ee?O(Ue,Ou.BLACK):(O(Ue,Ou.BLACK),O(Ue,Ou.RED))}return A}(new SU(n.length));return new yo(r||e,p)};let yM;const A_={};class hd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,P.hu)(A_&&Vn,"ChildrenNode.ts has not been loaded"),yM=yM||new hd({".priority":A_},{".priority":Vn}),yM}get(e){const t=(0,P.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof yo?t:null}hasIndex(e){return(0,P.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,P.hu)(e!==Ll,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator($t.Wrap);let p,c=a.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=a.getNext();p=i?nD(r,e.getCompare()):A_;const _=e.toString(),C=Object.assign({},this.indexSet_);C[_]=e;const A=Object.assign({},this.indexes_);return A[_]=p,new hd(A,C)}addToIndexes(e,t){const r=(0,P.UI)(this.indexes_,(i,a)=>{const c=(0,P.DV)(this.indexSet_,a);if((0,P.hu)(c,"Missing index implementation for "+a),i===A_){if(c.isDefinedOn(e.node)){const p=[],_=t.getIterator($t.Wrap);let C=_.getNext();for(;C;)C.name!==e.name&&p.push(C),C=_.getNext();return p.push(e),nD(p,c.getCompare())}return A_}{const p=t.get(e.name);let _=i;return p&&(_=_.remove(new $t(e.name,p))),_.insert(e,e.node)}});return new hd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,P.UI)(this.indexes_,i=>{if(i===A_)return i;{const a=t.get(e.name);return a?i.remove(new $t(e.name,a)):i}});return new hd(r,this.indexSet_)}}let tE,Rt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&SP(this.priorityNode_),this.children_.isEmpty()&&(0,P.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return tE||(tE=new n(new yo(gM),null,hd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||tE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?tE:r}}getChild(t){const r=Ut(t);return null===r?this:this.getImmediateChild(r).getChild(Mn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,P.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new $t(t,r);let a,c;r.isEmpty()?(a=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const p=a.isEmpty()?tE:this.priorityNode_;return new n(a,p,c)}}updateChild(t,r){const i=Ut(t);if(null===i)return r;{(0,P.hu)(".priority"!==Ut(t)||1===If(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Mn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,c=!0;if(this.forEachChild(Vn,(p,_)=>{r[p]=_.val(t),i++,c&&n.INTEGER_REGEXP_.test(p)?a=Math.max(a,Number(p)):c=!1}),!t&&c&&a<2*i){const p=[];for(const _ in r)p[_]=r[_];return p}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+AP(this.getPriority().val())+":"),this.forEachChild(Vn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":GO(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const c=a.getPredecessorKey(new $t(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new $t(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new $t(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,$t.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)<0;)a.getNext(),c=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,$t.Wrap);let c=a.peek();for(;null!=c&&r.compare(c,t)>0;)a.getNext(),c=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===nE?-1:0}withIndex(t){if(t===Ll||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ll||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Vn),a=r.getIterator(Vn);let c=i.getNext(),p=a.getNext();for(;c&&p;){if(c.name!==p.name||!c.node.equals(p.node))return!1;c=i.getNext(),p=a.getNext()}return null===c&&null===p}return!1}return!1}}resolveIndex_(t){return t===Ll?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const nE=new class xU extends Rt{constructor(){super(new yo(gM),Rt.EMPTY_NODE,hd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Rt.EMPTY_NODE}isEmpty(){return!1}};function yr(n,e=null){if(null===n)return Rt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,P.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new T_(n,yr(e));if(n instanceof Array){let t=Rt.EMPTY_NODE;return Ci(n,(r,i)=>{if((0,P.r3)(n,r)&&"."!==r.substring(0,1)){const a=yr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(yr(e))}{const t=[];let r=!1;if(Ci(n,(c,p)=>{if("."!==c.substring(0,1)){const _=yr(p);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new $t(c,_)))}}),0===t.length)return Rt.EMPTY_NODE;const a=nD(t,CU,c=>c.name,gM);if(r){const c=nD(t,Vn.getCompare());return new Rt(a,yr(e),new hd({".priority":c},{".priority":Vn}))}return new Rt(a,yr(e),hd.Default)}}Object.defineProperties($t,{MIN:{value:new $t(dd,Rt.EMPTY_NODE)},MAX:{value:new $t(Fl,nE)}}),TP.__EMPTY_NODE=Rt.EMPTY_NODE,T_.__childrenNodeConstructor=Rt,function IU(n){mM=n}(nE),function DU(n){RP=n}(nE),function bU(n){MP=n}(yr);class _M extends Xb{constructor(e){super(),this.indexPath_=e,(0,P.hu)(!Bt(e)&&".priority"!==Ut(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Bg(e.name,t.name):a}makePost(e,t){const r=yr(e),i=Rt.EMPTY_NODE.updateChild(this.indexPath_,r);return new $t(t,i)}maxPost(){const e=Rt.EMPTY_NODE.updateChild(this.indexPath_,nE);return new $t(Fl,e)}toString(){return X0(this.indexPath_,0).join("/")}}const vM=new class RU extends Xb{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Bg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return $t.MIN}maxPost(){return $t.MAX}makePost(e,t){const r=yr(e);return new $t(t,r)}toString(){return".value"}},S_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",NU=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=S_.charAt(t%64),t=Math.floor(t/64);(0,P.hu)(0===t,"Cannot push at time == 0");let c=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=S_.charAt(e[i]);return(0,P.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),PP=function(n){if(n===""+rM)return"-";const e=Yb(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Fl;const a=S_.charAt(S_.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},kP=function(n){if(n===""+KO)return dd;const e=Yb(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+rM:(delete t[t.length-1],t.join("")):(t[t.length-1]=S_.charAt(S_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function FP(n){return{type:"value",snapshotNode:n}}function x_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function rE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function iE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class EM{constructor(e){this.index_=e}updateChild(e,t,r,i,a,c){(0,P.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(t);return p.getChild(i).equals(r.getChild(i))&&p.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(rE(t,p)):(0,P.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?c.trackChildChange(x_(t,r)):c.trackChildChange(iE(t,r,p))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Vn,(i,a)=>{t.hasChild(i)||r.trackChildChange(rE(i,a))}),t.isLeafNode()||t.forEachChild(Vn,(i,a)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(a)||r.trackChildChange(iE(i,a,c))}else r.trackChildChange(x_(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Rt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class sE{constructor(e){this.indexedFilter_=new EM(e.getIndex()),this.index_=e.getIndex(),this.startPost_=sE.getStartPost_(e),this.endPost_=sE.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,c){return this.matches(new $t(t,r))||(r=Rt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Rt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Rt.EMPTY_NODE);const a=this;return t.forEachChild(Vn,(c,p)=>{a.matches(new $t(c,p))||(i=i.updateImmediateChild(c,Rt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class PU{constructor(e){this.rangedFilter_=new sE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,c){return this.rangedFilter_.matches(new $t(t,r))||(r=Rt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,c):this.fullLimitUpdateChild_(e,t,r,a,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Rt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Rt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;a.hasNext()&&c<this.limit_;){const p=a.getNext();let _;if(_=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),p)<=0:this.index_.compare(p,this.rangedFilter_.getEndPost())<=0,!_)break;i=i.updateImmediateChild(p.name,p.node),c++}}else{let a,c,p,_;if(i=t.withIndex(this.index_),i=i.updatePriority(Rt.EMPTY_NODE),this.reverse_){_=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const x=this.index_.getCompare();p=(O,V)=>x(V,O)}else _=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),p=this.index_.getCompare();let C=0,A=!1;for(;_.hasNext();){const x=_.getNext();!A&&p(a,x)<=0&&(A=!0),A&&C<this.limit_&&p(x,c)<=0?C++:i=i.updateImmediateChild(x.name,Rt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let c;if(this.reverse_){const x=this.index_.getCompare();c=(O,V)=>x(V,O)}else c=this.index_.getCompare();const p=e;(0,P.hu)(p.numChildren()===this.limit_,"");const _=new $t(t,r),C=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),A=this.rangedFilter_.matches(_);if(p.hasChild(t)){const x=p.getImmediateChild(t);let O=i.getChildAfterChild(this.index_,C,this.reverse_);for(;null!=O&&(O.name===t||p.hasChild(O.name));)O=i.getChildAfterChild(this.index_,O,this.reverse_);const V=null==O?1:c(O,_);if(A&&!r.isEmpty()&&V>=0)return null!=a&&a.trackChildChange(iE(t,r,x)),p.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(rE(t,x));const Ee=p.updateImmediateChild(t,Rt.EMPTY_NODE);return null!=O&&this.rangedFilter_.matches(O)?(null!=a&&a.trackChildChange(x_(O.name,O.node)),Ee.updateImmediateChild(O.name,O.node)):Ee}}return r.isEmpty()?e:A&&c(C,_)>=0?(null!=a&&(a.trackChildChange(rE(C.name,C.node)),a.trackChildChange(x_(t,r))),p.updateImmediateChild(t,r).updateImmediateChild(C.name,Rt.EMPTY_NODE)):e}}class rD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Vn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,P.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:dd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,P.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Fl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,P.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Vn}copy(){const e=new rD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function CM(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function IM(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function iD(n,e){const t=n.copy();return t.index_=e,t}function LP(n){const e={};if(n.isDefault())return e;let t;return n.index_===Vn?t="$priority":n.index_===vM?t="$value":n.index_===Ll?t="$key":((0,P.hu)(n.index_ instanceof _M,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,P.Pz)(t),n.startSet_&&(e.startAt=(0,P.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,P.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,P.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,P.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function VP(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Vn&&(e.i=n.index_.toString()),e}class sD extends _P{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=z0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,P.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const c=sD.getListenId_(e,r),p={};this.listens_[c]=p;const _=LP(e._queryParams);this.restRequest_(a+".json",_,(C,A)=>{let x=A;if(404===C&&(x=null,C=null),null===C&&this.onDataUpdate_(a,x,!1,r),(0,P.DV)(this.listens_,c)===p){let O;O=C?401===C?"permission_denied":"rest_error:"+C:"ok",i(O,null)}})}unlisten(e,t){const r=sD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=LP(e._queryParams),r=e._path.toString(),i=new P.BH;return this.restRequest_(r+".json",t,(a,c)=>{let p=c;404===a&&(p=null,a=null),null===a?(this.onDataUpdate_(r,p,!1,null),i.resolve(p)):i.reject(new Error(p))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,P.xO)(t);this.log_("Sending REST request for "+c);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(r&&4===p.readyState){this.log_("REST Response for "+c+" received. status:",p.status,"response:",p.responseText);let _=null;if(p.status>=200&&p.status<300){try{_=(0,P.cI)(p.responseText)}catch(C){Hs("Failed to parse JSON response for "+c+": "+p.responseText)}r(null,_)}else 401!==p.status&&404!==p.status&&Hs("Got unsuccessful REST response for "+c+" Status: "+p.status),r(p.status);r=null}},p.open("GET",c,!0),p.send()})}}class BU{constructor(){this.rootNode_=Rt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function oD(){return{value:null,children:new Map}}function M_(n,e,t){if(Bt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Ut(e);n.children.has(r)||n.children.set(r,oD()),M_(n.children.get(r),e=Mn(e),t)}}function bM(n,e){if(Bt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Vn,(r,i)=>{M_(n,new wn(r),i)}),bM(n,e)}}if(n.children.size>0){const t=Ut(e);return e=Mn(e),n.children.has(t)&&bM(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function DM(n,e,t){null!==n.value?t(e,n.value):function jU(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{DM(i,new wn(e.toString()+"/"+r),t)})}class HU{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ci(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class qU{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new HU(e);const r=1e4+2e4*Math.random();K0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ci(e,(i,a)=>{a>0&&(0,P.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),K0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ma=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ma||(Ma={})),Ma))();function SM(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class aD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ma.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Bt(this.path)){if(null!=this.affectedTree.value)return(0,P.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new wn(e));return new aD(fn(),t,this.revert)}}return(0,P.hu)(Ut(this.path)===e,"operationForChild called for unrelated child."),new aD(Mn(this.path),this.affectedTree,this.revert)}}class oE{constructor(e,t){this.source=e,this.path=t,this.type=Ma.LISTEN_COMPLETE}operationForChild(e){return Bt(this.path)?new oE(this.source,fn()):new oE(this.source,Mn(this.path))}}class $g{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ma.OVERWRITE}operationForChild(e){return Bt(this.path)?new $g(this.source,fn(),this.snap.getImmediateChild(e)):new $g(this.source,Mn(this.path),this.snap)}}class R_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ma.MERGE}operationForChild(e){if(Bt(this.path)){const t=this.children.subtree(new wn(e));return t.isEmpty()?null:t.value?new $g(this.source,fn(),t.value):new R_(this.source,fn(),t)}return(0,P.hu)(Ut(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new R_(this.source,Mn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class bf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Bt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ut(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class WU{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function aE(n,e,t,r,i,a){const c=r.filter(p=>p.type===t);c.sort((p,_)=>function KU(n,e,t){if(null==e.childName||null==t.childName)throw(0,P.g5)("Should only compare child_ events.");const r=new $t(e.childName,e.snapshotNode),i=new $t(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,p,_)),c.forEach(p=>{const _=function ZU(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,p,a);i.forEach(C=>{C.respondsTo(p.type)&&e.push(C.createEvent(_,n.query_))})})}function uD(n,e){return{eventCache:n,serverCache:e}}function uE(n,e,t,r){return uD(new bf(e,t,r),n.serverCache)}function BP(n,e,t,r){return uD(n.eventCache,new bf(e,t,r))}function lD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Gg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let xM;class Un{constructor(e,t=(()=>(xM||(xM=new yo(NV)),xM))()){this.value=e,this.children=t}static fromObject(e){let t=new Un(null);return Ci(e,(r,i)=>{t=t.set(new wn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:fn(),value:this.value};if(Bt(e))return null;{const r=Ut(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Mn(e),t);return null!=a?{path:ar(new wn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Bt(e))return this;{const t=Ut(e),r=this.children.get(t);return null!==r?r.subtree(Mn(e)):new Un(null)}}set(e,t){if(Bt(e))return new Un(t,this.children);{const r=Ut(e),a=(this.children.get(r)||new Un(null)).set(Mn(e),t),c=this.children.insert(r,a);return new Un(this.value,c)}}remove(e){if(Bt(e))return this.children.isEmpty()?new Un(null):new Un(null,this.children);{const t=Ut(e),r=this.children.get(t);if(r){const i=r.remove(Mn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Un(null):new Un(this.value,a)}return this}}get(e){if(Bt(e))return this.value;{const t=Ut(e),r=this.children.get(t);return r?r.get(Mn(e)):null}}setTree(e,t){if(Bt(e))return t;{const r=Ut(e),a=(this.children.get(r)||new Un(null)).setTree(Mn(e),t);let c;return c=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Un(this.value,c)}}fold(e){return this.fold_(fn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(ar(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,fn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Bt(e))return null;{const a=Ut(e),c=this.children.get(a);return c?c.findOnPath_(Mn(e),ar(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,fn(),t)}foreachOnPath_(e,t,r){if(Bt(e))return this;{this.value&&r(t,this.value);const i=Ut(e),a=this.children.get(i);return a?a.foreachOnPath_(Mn(e),ar(t,i),r):new Un(null)}}foreach(e){this.foreach_(fn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(ar(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Pu{constructor(e){this.writeTree_=e}static empty(){return new Pu(new Un(null))}}function lE(n,e,t){if(Bt(e))return new Pu(new Un(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const c=$s(i,e);return a=a.updateChild(c,t),new Pu(n.writeTree_.set(i,a))}{const i=new Un(t),a=n.writeTree_.setTree(e,i);return new Pu(a)}}}function MM(n,e,t){let r=n;return Ci(t,(i,a)=>{r=lE(r,ar(e,i),a)}),r}function jP(n,e){if(Bt(e))return Pu.empty();{const t=n.writeTree_.setTree(e,new Un(null));return new Pu(t)}}function RM(n,e){return null!=qg(n,e)}function qg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild($s(t.path,e)):null}function HP(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Vn,(r,i)=>{e.push(new $t(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new $t(r,i.value))}),e}function Df(n,e){if(Bt(e))return n;{const t=qg(n,e);return new Pu(null!=t?new Un(t):n.writeTree_.subtree(e))}}function NM(n){return n.writeTree_.isEmpty()}function N_(n,e){return $P(fn(),n.writeTree_,e)}function $P(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,P.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=$P(ar(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(ar(n,".priority"),r)),t}}function cD(n,e){return ZP(e,n)}function t2(n,e){if(n.snap)return xa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&xa(ar(n.path,t),e))return!0;return!1}function r2(n){return n.visible}function GP(n,e,t){let r=Pu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const c=a.path;let p;if(a.snap)xa(t,c)?(p=$s(t,c),r=lE(r,p,a.snap)):xa(c,t)&&(p=$s(c,t),r=lE(r,fn(),a.snap.getChild(p)));else{if(!a.children)throw(0,P.g5)("WriteRecord should have .snap or .children");if(xa(t,c))p=$s(t,c),r=MM(r,p,a.children);else if(xa(c,t))if(p=$s(c,t),Bt(p))r=MM(r,fn(),a.children);else{const _=(0,P.DV)(a.children,Ut(p));if(_){const C=_.getChild(Mn(p));r=lE(r,fn(),C)}}}}}return r}function qP(n,e,t,r,i){if(r||i){const a=Df(n.visibleWrites,e);return!i&&NM(a)?t:i||null!=t||RM(a,fn())?N_(GP(n.allWrites,function(C){return(C.visible||i)&&(!r||!~r.indexOf(C.writeId))&&(xa(C.path,e)||xa(e,C.path))},e),t||Rt.EMPTY_NODE):null}{const a=qg(n.visibleWrites,e);if(null!=a)return a;{const c=Df(n.visibleWrites,e);return NM(c)?t:null!=t||RM(c,fn())?N_(c,t||Rt.EMPTY_NODE):null}}}function dD(n,e,t,r){return qP(n.writeTree,n.treePath,e,t,r)}function OM(n,e){return function i2(n,e,t){let r=Rt.EMPTY_NODE;const i=qg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Vn,(a,c)=>{r=r.updateImmediateChild(a,c)}),r;if(t){const a=Df(n.visibleWrites,e);return t.forEachChild(Vn,(c,p)=>{const _=N_(Df(a,new wn(c)),p);r=r.updateImmediateChild(c,_)}),HP(a).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return HP(Df(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function WP(n,e,t,r){return function s2(n,e,t,r,i){(0,P.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=ar(e,t);if(RM(n.visibleWrites,a))return null;{const c=Df(n.visibleWrites,a);return NM(c)?i.getChild(t):N_(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function hD(n,e){return function a2(n,e){return qg(n.visibleWrites,e)}(n.writeTree,ar(n.treePath,e))}function PM(n,e,t){return function o2(n,e,t,r){const i=ar(e,t),a=qg(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?N_(Df(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function zP(n,e){return ZP(ar(n.treePath,e),n.writeTree)}function ZP(n,e){return{treePath:n,writeTree:e}}class d2{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,P.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,P.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,iE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,rE(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,x_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,P.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,iE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const KP=new class h2{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class kM{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new bf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return PM(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Gg(this.viewCache_),a=function c2(n,e,t,r,i,a){return function u2(n,e,t,r,i,a,c){let p;const _=Df(n.visibleWrites,e),C=qg(_,fn());if(null!=C)p=C;else{if(null==t)return[];p=N_(_,t)}if(p=p.withIndex(c),p.isEmpty()||p.isLeafNode())return[];{const A=[],x=c.getCompare(),O=a?p.getReverseIteratorFrom(r,c):p.getIteratorFrom(r,c);let V=O.getNext();for(;V&&A.length<i;)0!==x(V,r)&&A.push(V),V=O.getNext();return A}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function YP(n,e,t,r,i,a){const c=e.eventCache;if(null!=hD(r,t))return e;{let p,_;if(Bt(t))if((0,P.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const C=Gg(e),x=OM(r,C instanceof Rt?C:Rt.EMPTY_NODE);p=n.filter.updateFullNode(e.eventCache.getNode(),x,a)}else{const C=dD(r,Gg(e));p=n.filter.updateFullNode(e.eventCache.getNode(),C,a)}else{const C=Ut(t);if(".priority"===C){(0,P.hu)(1===If(t),"Can't have a priority with additional path components");const A=c.getNode();_=e.serverCache.getNode();const x=WP(r,t,A,_);p=null!=x?n.filter.updatePriority(A,x):c.getNode()}else{const A=Mn(t);let x;if(c.isCompleteForChild(C)){_=e.serverCache.getNode();const O=WP(r,t,c.getNode(),_);x=null!=O?c.getNode().getImmediateChild(C).updateChild(A,O):c.getNode().getImmediateChild(C)}else x=PM(r,C,e.serverCache);p=null!=x?n.filter.updateChild(c.getNode(),C,x,A,i,a):c.getNode()}}return uE(e,p,c.isFullyInitialized()||Bt(t),n.filter.filtersNodes())}}function fD(n,e,t,r,i,a,c,p){const _=e.serverCache;let C;const A=c?n.filter:n.filter.getIndexedFilter();if(Bt(t))C=A.updateFullNode(_.getNode(),r,null);else if(A.filtersNodes()&&!_.isFiltered()){const V=_.getNode().updateChild(t,r);C=A.updateFullNode(_.getNode(),V,null)}else{const V=Ut(t);if(!_.isCompleteForPath(t)&&If(t)>1)return e;const z=Mn(t),Ue=_.getNode().getImmediateChild(V).updateChild(z,r);C=".priority"===V?A.updatePriority(_.getNode(),Ue):A.updateChild(_.getNode(),V,Ue,z,KP,null)}const x=BP(e,C,_.isFullyInitialized()||Bt(t),A.filtersNodes());return YP(n,x,t,i,new kM(i,x,a),p)}function FM(n,e,t,r,i,a,c){const p=e.eventCache;let _,C;const A=new kM(i,e,a);if(Bt(t))C=n.filter.updateFullNode(e.eventCache.getNode(),r,c),_=uE(e,C,!0,n.filter.filtersNodes());else{const x=Ut(t);if(".priority"===x)C=n.filter.updatePriority(e.eventCache.getNode(),r),_=uE(e,C,p.isFullyInitialized(),p.isFiltered());else{const O=Mn(t),V=p.getNode().getImmediateChild(x);let z;if(Bt(O))z=r;else{const Ee=A.getCompleteChild(x);z=null!=Ee?".priority"===hM(O)&&Ee.getChild(CP(O)).isEmpty()?Ee:Ee.updateChild(O,r):Rt.EMPTY_NODE}_=V.equals(z)?e:uE(e,n.filter.updateChild(p.getNode(),x,z,O,A,c),p.isFullyInitialized(),n.filter.filtersNodes())}}return _}function QP(n,e){return n.eventCache.isCompleteForChild(e)}function JP(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function LM(n,e,t,r,i,a,c,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let C,_=e;C=Bt(t)?r:new Un(null).setTree(t,r);const A=e.serverCache.getNode();return C.children.inorderTraversal((x,O)=>{if(A.hasChild(x)){const z=JP(0,e.serverCache.getNode().getImmediateChild(x),O);_=fD(n,_,new wn(x),z,i,a,c,p)}}),C.children.inorderTraversal((x,O)=>{const V=!e.serverCache.isCompleteForChild(x)&&void 0===O.value;if(!A.hasChild(x)&&!V){const Ee=JP(0,e.serverCache.getNode().getImmediateChild(x),O);_=fD(n,_,new wn(x),Ee,i,a,c,p)}}),_}class E2{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new EM(r.getIndex()),a=function kU(n){return n.loadsAllData()?new EM(n.getIndex()):n.hasLimit()?new PU(n):new sE(n)}(r);this.processor_=function f2(n){return{filter:n}}(a);const c=t.serverCache,p=t.eventCache,_=i.updateFullNode(Rt.EMPTY_NODE,c.getNode(),null),C=a.updateFullNode(Rt.EMPTY_NODE,p.getNode(),null),A=new bf(_,c.isFullyInitialized(),i.filtersNodes()),x=new bf(C,p.isFullyInitialized(),a.filtersNodes());this.viewCache_=uD(x,A),this.eventGenerator_=new WU(this.query_)}get query(){return this.query_}}function b2(n,e){const t=Gg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Bt(e)&&!t.getImmediateChild(Ut(e)).isEmpty())?t.getChild(e):null}function XP(n){return 0===n.eventRegistrations_.length}function ek(n,e,t){const r=[];if(t){(0,P.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const c=a.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const c=n.eventRegistrations_[a];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function tk(n,e,t,r){e.type===Ma.MERGE&&null!==e.source.queryId&&((0,P.hu)(Gg(n.viewCache_),"We should always have a full cache before handling merges"),(0,P.hu)(lD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function g2(n,e,t,r,i){const a=new d2;let c,p;if(t.type===Ma.OVERWRITE){const C=t;C.source.fromUser?c=FM(n,e,C.path,C.snap,r,i,a):((0,P.hu)(C.source.fromServer,"Unknown source."),p=C.source.tagged||e.serverCache.isFiltered()&&!Bt(C.path),c=fD(n,e,C.path,C.snap,r,i,p,a))}else if(t.type===Ma.MERGE){const C=t;C.source.fromUser?c=function y2(n,e,t,r,i,a,c){let p=e;return r.foreach((_,C)=>{const A=ar(t,_);QP(e,Ut(A))&&(p=FM(n,p,A,C,i,a,c))}),r.foreach((_,C)=>{const A=ar(t,_);QP(e,Ut(A))||(p=FM(n,p,A,C,i,a,c))}),p}(n,e,C.path,C.children,r,i,a):((0,P.hu)(C.source.fromServer,"Unknown source."),p=C.source.tagged||e.serverCache.isFiltered(),c=LM(n,e,C.path,C.children,r,i,p,a))}else if(t.type===Ma.ACK_USER_WRITE){const C=t;c=C.revert?function w2(n,e,t,r,i,a){let c;if(null!=hD(r,t))return e;{const p=new kM(r,e,i),_=e.eventCache.getNode();let C;if(Bt(t)||".priority"===Ut(t)){let A;if(e.serverCache.isFullyInitialized())A=dD(r,Gg(e));else{const x=e.serverCache.getNode();(0,P.hu)(x instanceof Rt,"serverChildren would be complete if leaf node"),A=OM(r,x)}A=A,C=n.filter.updateFullNode(_,A,a)}else{const A=Ut(t);let x=PM(r,A,e.serverCache);null==x&&e.serverCache.isCompleteForChild(A)&&(x=_.getImmediateChild(A)),C=null!=x?n.filter.updateChild(_,A,x,Mn(t),p,a):e.eventCache.getNode().hasChild(A)?n.filter.updateChild(_,A,Rt.EMPTY_NODE,Mn(t),p,a):_,C.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=dD(r,Gg(e)),c.isLeafNode()&&(C=n.filter.updateFullNode(C,c,a)))}return c=e.serverCache.isFullyInitialized()||null!=hD(r,fn()),uE(e,C,c,n.filter.filtersNodes())}}(n,e,C.path,r,i,a):function _2(n,e,t,r,i,a,c){if(null!=hD(i,t))return e;const p=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(Bt(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return fD(n,e,t,_.getNode().getChild(t),i,a,p,c);if(Bt(t)){let C=new Un(null);return _.getNode().forEachChild(Ll,(A,x)=>{C=C.set(new wn(A),x)}),LM(n,e,t,C,i,a,p,c)}return e}{let C=new Un(null);return r.foreach((A,x)=>{const O=ar(t,A);_.isCompleteForPath(O)&&(C=C.set(A,_.getNode().getChild(O)))}),LM(n,e,t,C,i,a,p,c)}}(n,e,C.path,C.affectedTree,r,i,a)}else{if(t.type!==Ma.LISTEN_COMPLETE)throw(0,P.g5)("Unknown operation type: "+t.type);c=function v2(n,e,t,r,i){const a=e.serverCache;return YP(n,BP(e,a.getNode(),a.isFullyInitialized()||Bt(t),a.isFiltered()),t,r,KP,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function m2(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=lD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(FP(lD(e)))}}(e,c,_),{viewCache:c,changes:_}}(n.processor_,i,e,t,r);return function p2(n,e){(0,P.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,P.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,P.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,nk(n,a.changes,a.viewCache.eventCache.getNode(),null)}function nk(n,e,t,r){return function zU(n,e,t,r){const i=[],a=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(function OU(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),aE(n,i,"child_removed",e,r,t),aE(n,i,"child_added",e,r,t),aE(n,i,"child_moved",a,r,t),aE(n,i,"child_changed",e,r,t),aE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let pD,mD;class rk{constructor(){this.views=new Map}}function VM(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,P.hu)(null!=a,"SyncTree gave us an op for an invalid query."),tk(a,e,t,r)}{let a=[];for(const c of n.views.values())a=a.concat(tk(c,e,t,r));return a}}function ik(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let p=dD(t,i?r:null),_=!1;p?_=!0:r instanceof Rt?(p=OM(t,r),_=!1):(p=Rt.EMPTY_NODE,_=!1);const C=uD(new bf(p,_,!1),new bf(r,i,!1));return new E2(e,C)}return c}function sk(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Tf(n,e){let t=null;for(const r of n.views.values())t=t||b2(r,e);return t}function ok(n,e){return e._queryParams.loadsAllData()?gD(n):n.views.get(e._queryIdentifier)}function ak(n,e){return null!=ok(n,e)}function Af(n){return null!=gD(n)}function gD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let P2=1;class uk{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Un(null),this.pendingWriteTree_=function l2(){return{visibleWrites:Pu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function UM(n,e,t,r,i){return function QU(n,e,t,r,i){(0,P.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=lE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?O_(n,new $g({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Sf(n,e,t=!1){const r=function XU(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function e2(n,e){const t=n.allWrites.findIndex(p=>p.writeId===e);(0,P.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const p=n.allWrites[c];p.visible&&(c>=t&&t2(p,r.path)?i=!1:xa(r.path,p.path)&&(a=!0)),c--}return!!i&&(a?(function n2(n){n.visibleWrites=GP(n.allWrites,r2,fn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=jP(n.visibleWrites,r.path):Ci(r.children,_=>{n.visibleWrites=jP(n.visibleWrites,ar(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new Un(null);return null!=r.snap?a=a.set(fn(),!0):Ci(r.children,c=>{a=a.set(new wn(c),!0)}),O_(n,new aD(r.path,a,t))}return[]}function cE(n,e,t){return O_(n,new $g({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function BM(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let c=[];if(a&&("default"===e._queryIdentifier||ak(a,e))){const p=function R2(n,e,t,r){const i=e._queryIdentifier,a=[];let c=[];const p=Af(n);if("default"===i)for(const[_,C]of n.views.entries())c=c.concat(ek(C,t,r)),XP(C)&&(n.views.delete(_),C.query._queryParams.loadsAllData()||a.push(C.query));else{const _=n.views.get(i);_&&(c=c.concat(ek(_,t,r)),XP(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return p&&!Af(n)&&a.push(new(function S2(){return(0,P.hu)(pD,"Reference.ts has not been loaded"),pD}())(e._repo,e._path)),{removed:a,events:c}}(a,e,t,r);(function x2(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const _=p.removed;c=p.events;const C=-1!==_.findIndex(x=>x._queryParams.loadsAllData()),A=n.syncPointTree_.findOnPath(i,(x,O)=>Af(O));if(C&&!A){const x=n.syncPointTree_.subtree(i);if(!x.isEmpty()){const O=function H2(n){return n.fold((e,t,r)=>{if(t&&Af(t))return[gD(t)];{let i=[];return t&&(i=sk(t)),Ci(r,(a,c)=>{i=i.concat(c)}),i}})}(x);for(let V=0;V<O.length;++V){const z=O[V],Ee=z.query,Ue=hk(n,z);n.listenProvider_.startListening(dE(Ee),_D(n,Ee),Ue.hashFn,Ue.onComplete)}}}if(!A&&_.length>0&&!r)if(C){const x=null;n.listenProvider_.stopListening(dE(e),x)}else _.forEach(x=>{const O=n.queryToTagMap.get(vD(x));n.listenProvider_.stopListening(dE(x),O)});!function $2(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=vD(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,_)}return c}function lk(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(x,O)=>{const V=$s(x,r);i=i||Tf(O,V),a=a||Af(O)});let p,c=n.syncPointTree_.get(r);c?(a=a||Af(c),i=i||Tf(c,fn())):(c=new rk,n.syncPointTree_=n.syncPointTree_.set(r,c)),null!=i?p=!0:(p=!1,i=Rt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((O,V)=>{const z=Tf(V,fn());z&&(i=i.updateImmediateChild(O,z))}));const _=ak(c,e);if(!_&&!e._queryParams.loadsAllData()){const x=vD(e);(0,P.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const O=function G2(){return P2++}();n.queryToTagMap.set(x,O),n.tagToQueryMap.set(O,x)}let A=function M2(n,e,t,r,i,a){const c=ik(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function D2(n,e){n.eventRegistrations_.push(e)}(c,t),function T2(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Vn,(a,c)=>{r.push(x_(a,c))}),t.isFullyInitialized()&&r.push(FP(t.getNode())),nk(n,r,t.getNode(),e)}(c,t)}(c,e,t,cD(n.pendingWriteTree_,r),i,p);if(!_&&!a){const x=ok(c,e);A=A.concat(function q2(n,e,t){const r=e._path,i=_D(n,e),a=hk(n,t),c=n.listenProvider_.startListening(dE(e),i,a.hashFn,a.onComplete),p=n.syncPointTree_.subtree(r);if(i)(0,P.hu)(!Af(p.value),"If we're adding a query, it shouldn't be shadowed");else{const _=p.fold((C,A,x)=>{if(!Bt(C)&&A&&Af(A))return[gD(A).query];{let O=[];return A&&(O=O.concat(sk(A).map(V=>V.query))),Ci(x,(V,z)=>{O=O.concat(z)}),O}});for(let C=0;C<_.length;++C){const A=_[C];n.listenProvider_.stopListening(dE(A),_D(n,A))}}return c}(n,e,x))}return A}function yD(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(c,p)=>{const C=Tf(p,$s(c,e));if(C)return C});return qP(i,e,a,t,!0)}function O_(n,e){return ck(e,n.syncPointTree_,null,cD(n.pendingWriteTree_,fn()))}function ck(n,e,t,r){if(Bt(n.path))return dk(n,e,t,r);{const i=e.get(fn());null==t&&null!=i&&(t=Tf(i,fn()));let a=[];const c=Ut(n.path),p=n.operationForChild(c),_=e.children.get(c);if(_&&p){const C=t?t.getImmediateChild(c):null,A=zP(r,c);a=a.concat(ck(p,_,C,A))}return i&&(a=a.concat(VM(i,n,r,t))),a}}function dk(n,e,t,r){const i=e.get(fn());null==t&&null!=i&&(t=Tf(i,fn()));let a=[];return e.children.inorderTraversal((c,p)=>{const _=t?t.getImmediateChild(c):null,C=zP(r,c),A=n.operationForChild(c);A&&(a=a.concat(dk(A,p,_,C)))}),i&&(a=a.concat(VM(i,n,r,t))),a}function hk(n,e){const t=e.query,r=_D(n,t);return{hashFn:()=>(function C2(n){return n.viewCache_.serverCache.getNode()}(e)||Rt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function V2(n,e,t){const r=jM(n,t);if(r){const i=HM(r),a=i.path,c=i.queryId,p=$s(a,e);return $M(n,a,new oE(SM(c),p))}return[]}(n,t._path,r):function L2(n,e){return O_(n,new oE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function kV(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return BM(n,t,null,a)}}}}function _D(n,e){const t=vD(e);return n.queryToTagMap.get(t)}function vD(n){return n._path.toString()+"$"+n._queryIdentifier}function jM(n,e){return n.tagToQueryMap.get(e)}function HM(n){const e=n.indexOf("$");return(0,P.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new wn(n.substr(0,e))}}function $M(n,e,t){const r=n.syncPointTree_.get(e);return(0,P.hu)(r,"Missing sync point for query tag that we're tracking"),VM(r,t,cD(n.pendingWriteTree_,e),null)}function dE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function O2(){return(0,P.hu)(mD,"Reference.ts has not been loaded"),mD}())(n._repo,n._path):n}class GM{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new GM(t)}node(){return this.node_}}class qM{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ar(this.path_,e);return new qM(this.syncTree_,t)}node(){return yD(this.syncTree_,this.path_)}}const fk=function(n,e,t){return n&&"object"==typeof n?((0,P.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?z2(n[".sv"],e,t):"object"==typeof n[".sv"]?Z2(n[".sv"],e):void(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},z2=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,P.hu)(!1,"Unexpected server value: "+n)},Z2=function(n,e,t){n.hasOwnProperty("increment")||(0,P.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,P.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,P.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},pk=function(n,e,t,r){return zM(e,new qM(t,n),r)},WM=function(n,e,t){return zM(n,new GM(e),t)};function zM(n,e,t){const r=n.getPriority().val(),i=fk(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const c=n,p=fk(c.getValue(),e,t);return p!==c.getValue()||i!==c.getPriority().val()?new T_(p,yr(i)):n}{const c=n;return a=c,i!==c.getPriority().val()&&(a=a.updatePriority(new T_(i))),c.forEachChild(Vn,(p,_)=>{const C=zM(_,e.getImmediateChild(p),t);C!==_&&(a=a.updateImmediateChild(p,C))}),a}}class ZM{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function wD(n,e){let t=e instanceof wn?e:new wn(e),r=n,i=Ut(t);for(;null!==i;){const a=(0,P.DV)(r.node.children,i)||{children:{},childCount:0};r=new ZM(i,r,a),t=Mn(t),i=Ut(t)}return r}function Wg(n){return n.node.value}function KM(n,e){n.node.value=e,YM(n)}function gk(n){return n.node.childCount>0}function ED(n,e){Ci(n.node.children,(t,r)=>{e(new ZM(t,n,r))})}function mk(n,e,t,r){t&&!r&&e(n),ED(n,i=>{mk(i,e,!0,r)}),t&&r&&e(n)}function hE(n){return new wn(null===n.parent?n.name:hE(n.parent)+"/"+n.name)}function YM(n){null!==n.parent&&function Q2(n,e,t){const r=function K2(n){return void 0===Wg(n)&&!gk(n)}(t),i=(0,P.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,YM(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,YM(n))}(n.parent,n.name,n)}const J2=/[\[\].#$\/\u0000-\u001F\u007F]/,X2=/[\[\].#$\u0000-\u001F\u007F]/,QM=10485760,CD=function(n){return"string"==typeof n&&0!==n.length&&!J2.test(n)},yk=function(n){return"string"==typeof n&&0!==n.length&&!X2.test(n)},fE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Kb(n)||n&&"object"==typeof n&&(0,P.r3)(n,".sv")},Vl=function(n,e,t,r){r&&void 0===e||pE((0,P.gK)(n,"value"),e,t)},pE=function(n,e,t){const r=t instanceof wn?new fU(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+jg(r));if("function"==typeof e)throw new Error(n+"contains a function "+jg(r)+" with contents = "+e.toString());if(Kb(e))throw new Error(n+"contains "+e.toString()+" "+jg(r));if("string"==typeof e&&e.length>QM/3&&(0,P.ug)(e)>QM)throw new Error(n+"contains a string greater than "+QM+" utf8 bytes "+jg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Ci(e,(c,p)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(a=!0,!CD(c)))throw new Error(n+" contains an invalid key ("+c+") "+jg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function pU(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,P.ug)(e),IP(n)})(r,c),pE(n,p,r),function gU(n){const e=n.parts_.pop();n.byteLength_-=(0,P.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+jg(r)+" in addition to actual children.")}},_k=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,P.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Ci(e,(c,p)=>{const _=new wn(c);if(pE(i,p,ar(t,_)),".priority"===hM(_)&&!fE(p))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=X0(r);for(let c=0;c<a.length;c++)if((".priority"!==a[c]||c!==a.length-1)&&!CD(a[c]))throw new Error(n+"contains an invalid key ("+a[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(hU);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&xa(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},JM=function(n,e,t){if(!t||void 0!==e){if(Kb(e))throw new Error((0,P.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!fE(e))throw new Error((0,P.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},gE=function(n,e,t,r){if(!(r&&void 0===t||CD(t)))throw new Error((0,P.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},mE=function(n,e,t,r){if(!(r&&void 0===t||yk(t)))throw new Error((0,P.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ra=function(n,e){if(".info"===Ut(e))throw new Error(n+" failed = Can't modify data under /.info/")},vk=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!CD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),yk(n)}(t))throw new Error((0,P.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class rB{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ID(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!fM(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function XM(n,e,t){ID(n,t),wk(n,r=>fM(r,e))}function Na(n,e,t){ID(n,t),wk(n,r=>xa(r,e)||xa(e,r))}function wk(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(iB(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function iB(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Ug&&Ei("event: "+t.toString()),b_(r)}}}const Ek="repo_interrupt";class oB{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rB,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=oD(),this.transactionQueueTree_=new ZM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Ck(n){const t=n.infoData_.getNode(new wn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function yE(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:Ck(n)})}function Ik(n,e,t,r,i){n.dataUpdateCount++;const a=new wn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const _=(0,P.UI)(t,C=>yr(C));c=function B2(n,e,t,r){const i=jM(n,r);if(i){const a=HM(i),c=a.path,p=a.queryId,_=$s(c,e),C=Un.fromObject(t);return $M(n,c,new R_(SM(p),_,C))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=yr(t);c=function U2(n,e,t,r){const i=jM(n,r);if(null!=i){const a=HM(i),c=a.path,p=a.queryId,_=$s(c,e);return $M(n,c,new $g(SM(p),_,t))}return[]}(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,P.UI)(t,C=>yr(C));c=function F2(n,e,t){const r=Un.fromObject(t);return O_(n,new R_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=yr(t);c=cE(n.serverSyncTree_,a,_)}let p=a;c.length>0&&(p=k_(n,a)),Na(n.eventQueue_,p,c)}function bk(n,e){eR(n,"connected",e),!1===e&&function dB(n){P_(n,"onDisconnectEvents");const e=yE(n),t=oD();DM(n.onDisconnect_,fn(),(i,a)=>{const c=pk(i,a,n.serverSyncTree_,e);M_(t,i,c)});let r=[];DM(t,fn(),(i,a)=>{r=r.concat(cE(n.serverSyncTree_,i,a));const c=iR(n,i);k_(n,c)}),n.onDisconnect_=oD(),Na(n.eventQueue_,fn(),r)}(n)}function eR(n,e,t){const r=new wn("/.info/"+e),i=yr(t);n.infoData_.updateSnapshot(r,i);const a=cE(n.infoSyncTree_,r,i);Na(n.eventQueue_,r,a)}function bD(n){return n.nextWriteId_++}function tR(n,e,t,r,i){P_(n,"set",{path:e.toString(),value:t,priority:r});const a=yE(n),c=yr(t,r),p=yD(n.serverSyncTree_,e),_=WM(c,p,a),C=bD(n),A=UM(n.serverSyncTree_,e,_,C,!0);ID(n.eventQueue_,A),n.server_.put(e.toString(),c.val(!0),(O,V)=>{const z="ok"===O;z||Hs("set at "+e+" failed: "+O);const Ee=Sf(n.serverSyncTree_,C,!z);Na(n.eventQueue_,e,Ee),xf(0,i,O,V)});const x=iR(n,e);k_(n,x),Na(n.eventQueue_,x,[])}function hB(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&bM(n.onDisconnect_,e),xf(0,t,r,i)})}function Dk(n,e,t,r){const i=yr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,c)=>{"ok"===a&&M_(n.onDisconnect_,e,i),xf(0,r,a,c)})}function nR(n,e,t){let r;r=".info"===Ut(e._path)?BM(n.infoSyncTree_,e,t):BM(n.serverSyncTree_,e,t),XM(n.eventQueue_,e._path,r)}function Tk(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Ek)}function P_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ei(t,...e)}function xf(n,e,t,r){e&&b_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const c=new Error(a);c.code=i,e(c)}})}function rR(n,e,t){return yD(n.serverSyncTree_,e,t)||Rt.EMPTY_NODE}function DD(n,e=n.transactionQueueTree_){if(e||TD(n,e),Wg(e)){const t=Sk(n,e);(0,P.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function _B(n,e,t){const r=t.map(C=>C.currentWriteId),i=rR(n,e,r);let a=i;const c=i.hash();for(let C=0;C<t.length;C++){const A=t[C];(0,P.hu)(0===A.status,"tryToSendTransactionQueue_: items in queue should all be run."),A.status=1,A.retryCount++;const x=$s(e,A.path);a=a.updateChild(x,A.currentOutputSnapshotRaw)}const p=a.val(!0),_=e;n.server_.put(_.toString(),p,C=>{P_(n,"transaction put response",{path:_.toString(),status:C});let A=[];if("ok"===C){const x=[];for(let O=0;O<t.length;O++)t[O].status=2,A=A.concat(Sf(n.serverSyncTree_,t[O].currentWriteId)),t[O].onComplete&&x.push(()=>t[O].onComplete(null,!0,t[O].currentOutputSnapshotResolved)),t[O].unwatcher();TD(n,wD(n.transactionQueueTree_,e)),DD(n,n.transactionQueueTree_),Na(n.eventQueue_,e,A);for(let O=0;O<x.length;O++)b_(x[O])}else{if("datastale"===C)for(let x=0;x<t.length;x++)t[x].status=3===t[x].status?4:0;else{Hs("transaction at "+_.toString()+" failed: "+C);for(let x=0;x<t.length;x++)t[x].status=4,t[x].abortReason=C}k_(n,e)}},c)}(n,hE(e),t)}else gk(e)&&ED(e,t=>{DD(n,t)})}function k_(n,e){const t=Ak(n,e),r=hE(t);return function vB(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(p=>0===p.status).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const _=e[p],C=$s(t,_.path);let x,A=!1;if((0,P.hu)(null!==C,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)A=!0,x=_.abortReason,i=i.concat(Sf(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)A=!0,x="maxretry",i=i.concat(Sf(n.serverSyncTree_,_.currentWriteId,!0));else{const O=rR(n,_.path,c);_.currentInputSnapshot=O;const V=e[p].update(O.val());if(void 0!==V){pE("transaction failed: Data returned ",V,_.path);let z=yr(V);"object"==typeof V&&null!=V&&(0,P.r3)(V,".priority")||(z=z.updatePriority(O.getPriority()));const Ue=_.currentWriteId,at=yE(n),St=WM(z,O,at);_.currentOutputSnapshotRaw=z,_.currentOutputSnapshotResolved=St,_.currentWriteId=bD(n),c.splice(c.indexOf(Ue),1),i=i.concat(UM(n.serverSyncTree_,_.path,St,_.currentWriteId,_.applyLocally)),i=i.concat(Sf(n.serverSyncTree_,Ue,!0))}else A=!0,x="nodata",i=i.concat(Sf(n.serverSyncTree_,_.currentWriteId,!0))}Na(n.eventQueue_,t,i),i=[],A&&(e[p].status=2,setTimeout(e[p].unwatcher,Math.floor(0)),e[p].onComplete&&r.push("nodata"===x?()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot):()=>e[p].onComplete(new Error(x),!1,null)))}TD(n,n.transactionQueueTree_);for(let p=0;p<r.length;p++)b_(r[p]);DD(n,n.transactionQueueTree_)}(n,Sk(n,t),r),r}function Ak(n,e){let t,r=n.transactionQueueTree_;for(t=Ut(e);null!==t&&void 0===Wg(r);)r=wD(r,t),t=Ut(e=Mn(e));return r}function Sk(n,e){const t=[];return xk(n,e,t),t.sort((r,i)=>r.order-i.order),t}function xk(n,e,t){const r=Wg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);ED(e,i=>{xk(n,i,t)})}function TD(n,e){const t=Wg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,KM(e,t.length>0?t:void 0)}ED(e,r=>{TD(n,r)})}function iR(n,e){const t=hE(Ak(n,e)),r=wD(n.transactionQueueTree_,e);return function Y2(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{sR(n,i)}),sR(n,r),mk(r,i=>{sR(n,i)}),t}function sR(n,e){const t=Wg(e);if(t){const r=[];let i=[],a=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,P.hu)(a===c-1,"All SENT items should be at beginning of queue."),a=c,t[c].status=3,t[c].abortReason="set"):((0,P.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(Sf(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===a?KM(e,void 0):t.length=a+1,Na(n.eventQueue_,hE(e),i);for(let c=0;c<r.length;c++)b_(r[c])}}const oR=function(n,e){const t=CB(n),r=t.namespace;return"firebase.com"===t.domain&&kl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&kl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Hs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new sM(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new wn(t.pathString)}},CB=function(n){let e="",t="",r="",i="",a="",c=!0,p="https",_=443;if("string"==typeof n){let C=n.indexOf("//");C>=0&&(p=n.substring(0,C-1),n=n.substring(C+2));let A=n.indexOf("/");-1===A&&(A=n.length);let x=n.indexOf("?");-1===x&&(x=n.length),e=n.substring(0,Math.min(A,x)),A<x&&(i=function wB(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(A,x)));const O=function EB(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Hs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,x)));C=e.indexOf(":"),C>=0?(c="https"===p||"wss"===p,_=parseInt(e.substring(C+1),10)):C=e.length;const V=e.slice(0,C);if("localhost"===V.toLowerCase())t="localhost";else if(V.split(".").length<=2)t=V;else{const z=e.indexOf(".");r=e.substring(0,z).toLowerCase(),t=e.substring(z+1),a=r}"ns"in O&&(a=O.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:c,scheme:p,pathString:i,namespace:a}};class Mk{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,P.Pz)(this.snapshot.exportVal())}}class Rk{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Nk{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,P.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Ok{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new P.BH;return hB(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ra("OnDisconnect.remove",this._path);const e=new P.BH;return Dk(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ra("OnDisconnect.set",this._path),Vl("OnDisconnect.set",e,this._path,!1);const t=new P.BH;return Dk(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ra("OnDisconnect.setWithPriority",this._path),Vl("OnDisconnect.setWithPriority",e,this._path,!1),JM("OnDisconnect.setWithPriority",t,!1);const r=new P.BH;return function fB(n,e,t,r,i){const a=yr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(c,p)=>{"ok"===c&&M_(n.onDisconnect_,e,a),xf(0,i,c,p)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ra("OnDisconnect.update",this._path),_k("OnDisconnect.update",e,this._path,!1);const t=new P.BH;return function pB(n,e,t,r){if((0,P.xb)(t))return Ei("onDisconnect().update() called with empty data.  Don't do anything."),void xf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Ci(t,(c,p)=>{const _=yr(p);M_(n.onDisconnect_,ar(e,c),_)}),xf(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class _o{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Bt(this._path)?null:hM(this._path)}get ref(){return new Oa(this._repo,this._path)}get _queryIdentifier(){const e=VP(this._queryParams),t=nM(e);return"{}"===t?"default":t}get _queryObject(){return VP(this._queryParams)}isEqual(e){if(!((e=(0,P.m9)(e))instanceof _o))return!1;const t=this._repo===e._repo,r=fM(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function dU(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function AD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Mf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ll){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==dd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Fl)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Vn){if(null!=e&&!fE(e)||null!=t&&!fE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,P.hu)(n.getIndex()instanceof _M||n.getIndex()===vM,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function SD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Oa extends _o{constructor(e,t){super(e,t,new rD,!1)}get parent(){const e=CP(this._path);return null===e?null:new Oa(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class zg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new wn(e),r=Zg(this.ref,e);return new zg(this._node.getChild(t),r,Vn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new zg(i,Zg(this.ref,r),Vn)))}hasChild(e){const t=new wn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Pk(n,e){return(n=(0,P.m9)(n))._checkNotDeleted("ref"),void 0!==e?Zg(n._root,e):n._root}function kk(n,e){(n=(0,P.m9)(n))._checkNotDeleted("refFromURL");const t=oR(e,n._repo.repoInfo_.nodeAdmin);vk("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&kl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Pk(n,t.path.toString())}function Zg(n,e){return null===Ut((n=(0,P.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),mE("child","path",t,!1)):mE("child","path",e,!1),new Oa(n._repo,ar(n._path,e));var t}function aR(n,e){n=(0,P.m9)(n),Ra("set",n._path),Vl("set",e,n._path,!1);const t=new P.BH;return tR(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function AB(n,e){_k("update",e,n._path,!1);const t=new P.BH;return function cB(n,e,t,r){P_(n,"update",{path:e.toString(),value:t});let i=!0;const a=yE(n),c={};if(Ci(t,(p,_)=>{i=!1,c[p]=pk(ar(e,p),yr(_),n.serverSyncTree_,a)}),i)Ei("update() called with empty data.  Don't do anything."),xf(0,r,"ok",void 0);else{const p=bD(n),_=function k2(n,e,t,r){!function JU(n,e,t,r){(0,P.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=MM(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Un.fromObject(t);return O_(n,new R_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,p);ID(n.eventQueue_,_),n.server_.merge(e.toString(),t,(C,A)=>{const x="ok"===C;x||Hs("update at "+e+" failed: "+C);const O=Sf(n.serverSyncTree_,p,!x),V=O.length>0?k_(n,e):e;Na(n.eventQueue_,V,O),xf(0,r,C,A)}),Ci(t,C=>{const A=iR(n,ar(e,C));k_(n,A)}),Na(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function SB(n){return function lB(n,e){const t=function j2(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(C,A)=>{const x=$s(C,t);r=r||Tf(A,x)});let i=n.syncPointTree_.get(t);i?r=r||Tf(i,fn()):(i=new rk,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,c=a?new bf(r,!0,!1):null;return function I2(n){return lD(n.viewCache_)}(ik(i,e,cD(n.pendingWriteTree_,e._path),a?c.getNode():Rt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=yr(r).withIndex(e._queryParams.getIndex()),a=cE(n.serverSyncTree_,e._path,i);return XM(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(P_(n,"get for query "+(0,P.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,P.m9)(n))._repo,n).then(e=>new zg(e,new Oa(n._repo,n._path),n._queryParams.getIndex()))}class xD{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new Mk("value",this,new zg(e.snapshotNode,new Oa(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Rk(this,e,t):null}matches(e){return e instanceof xD&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class MD{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Rk(this,e,t):null}createEvent(e,t){(0,P.hu)(null!=e.childName,"Child events should have a childName.");const r=Zg(new Oa(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Mk(e.type,this,new zg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof MD&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function _E(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,C=(A,x)=>{nR(n._repo,n,p),_(A,x)};C.userCallback=t.userCallback,C.context=t.context,t=C}const c=new Nk(t,a||void 0),p="value"===e?new xD(c):new MD(e,c);return function gB(n,e,t){let r;r=".info"===Ut(e._path)?lk(n.infoSyncTree_,e,t):lk(n.serverSyncTree_,e,t),XM(n.eventQueue_,e._path,r)}(n._repo,n,p),()=>nR(n._repo,n,p)}function uR(n,e,t,r){return _E(n,"value",e,t,r)}function Fk(n,e,t,r){return _E(n,"child_added",e,t,r)}function Lk(n,e,t,r){return _E(n,"child_changed",e,t,r)}function Vk(n,e,t,r){return _E(n,"child_moved",e,t,r)}function Uk(n,e,t,r){return _E(n,"child_removed",e,t,r)}function Bk(n,e,t){let r=null;const i=t?new Nk(t):null;"value"===e?r=new xD(i):e&&(r=new MD(e,i)),nR(n._repo,n,r)}class ku{}class jk extends ku{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Vl("endAt",this._value,e._path,!0);const t=IM(e._queryParams,this._value,this._key);if(SD(t),Mf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new _o(e._repo,e._path,t,e._orderByCalled)}}class MB extends ku{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Vl("endBefore",this._value,e._path,!1);const t=function UU(n,e,t){let r,i;return n.index_===Ll?("string"==typeof e&&(e=kP(e)),i=IM(n,e,t)):(r=null==t?dd:kP(t),i=IM(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(SD(t),Mf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new _o(e._repo,e._path,t,e._orderByCalled)}}class Hk extends ku{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Vl("startAt",this._value,e._path,!0);const t=CM(e._queryParams,this._value,this._key);if(SD(t),Mf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new _o(e._repo,e._path,t,e._orderByCalled)}}class OB extends ku{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Vl("startAfter",this._value,e._path,!1);const t=function VU(n,e,t){let r;if(n.index_===Ll)"string"==typeof e&&(e=PP(e)),r=CM(n,e,t);else{let i;i=null==t?Fl:PP(t),r=CM(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(SD(t),Mf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new _o(e._repo,e._path,t,e._orderByCalled)}}class kB extends ku{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new _o(e._repo,e._path,function FU(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class LB extends ku{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new _o(e._repo,e._path,function LU(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class UB extends ku{constructor(e){super(),this._path=e}_apply(e){AD(e,"orderByChild");const t=new wn(this._path);if(Bt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new _M(t),i=iD(e._queryParams,r);return Mf(i),new _o(e._repo,e._path,i,!0)}}class jB extends ku{_apply(e){AD(e,"orderByKey");const t=iD(e._queryParams,Ll);return Mf(t),new _o(e._repo,e._path,t,!0)}}class $B extends ku{_apply(e){AD(e,"orderByPriority");const t=iD(e._queryParams,Vn);return Mf(t),new _o(e._repo,e._path,t,!0)}}class qB extends ku{_apply(e){AD(e,"orderByValue");const t=iD(e._queryParams,vM);return Mf(t),new _o(e._repo,e._path,t,!0)}}class zB extends ku{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Vl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new jk(this._value,this._key)._apply(new Hk(this._value,this._key)._apply(e))}}function Fu(n,...e){let t=(0,P.m9)(n);for(const r of e)t=r._apply(t);return t}(function A2(n){(0,P.hu)(!pD,"__referenceConstructor has already been defined"),pD=n})(Oa),function N2(n){(0,P.hu)(!mD,"__referenceConstructor has already been defined"),mD=n}(Oa);const lR={};function Gk(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||kl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ei("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,C,c=oR(a,i),p=c.repoInfo;"undefined"!=typeof process&&(C=process.env.FIREBASE_DATABASE_EMULATOR_HOST),C?(_=!0,a=`http://${C}?ns=${p.namespace}`,c=oR(a,i),p=c.repoInfo):_=!c.repoInfo.secure;const A=i&&_?new Y0(Y0.OWNER):new UV(n.name,n.options,e);vk("Invalid Firebase Database URL",c),Bt(c.path)||kl("Database URL must point to the root of a Firebase Database (not including a child path).");const x=function JB(n,e,t,r){let i=lR[e.name];i||(i={},lR[e.name]=i);let a=i[n.toURLString()];return a&&kl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new oB(n,false,t,r),i[n.toURLString()]=a,a}(p,n,A,new VV(n.name,t));return new ej(x,n)}class ej{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function aB(n,e,t){if(n.stats_=uM(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new sD(n.repoInfo_,(r,i,a,c)=>{Ik(n,r,i,a,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>bk(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,P.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Hg(n.repoInfo_,e,(r,i,a,c)=>{Ik(n,r,i,a,c)},r=>{bk(n,r)},r=>{!function uB(n,e){Ci(e,(t,r)=>{eR(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function $V(n,e){const t=n.toString();return aM[t]||(aM[t]=e()),aM[t]}(n.repoInfo_,()=>new qU(n.stats_,n.server_)),n.infoData_=new BU,n.infoSyncTree_=new uk({startListening:(r,i,a,c)=>{let p=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(p=cE(n.infoSyncTree_,r._path,_),setTimeout(()=>{c("ok")},0)),p},stopListening:()=>{}}),eR(n,"connected",!1),n.serverSyncTree_=new uk({startListening:(r,i,a,c)=>(n.server_.listen(r,a,i,(p,_)=>{const C=c(p,_);Na(n.eventQueue_,r._path,C)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Oa(this._repo,fn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function QB(n,e){const t=lR[e];(!t||t[n.key]!==n)&&kl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Tk(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&kl("Cannot call "+e+" on a deleted database.")}}function ij(n,e){WO(n,e)}const oj={".sv":"timestamp"};class lj{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Hg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Hg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function sj(n){jO(_i.SDK_VERSION),(0,_i._registerComponent)(new ns.wA("database",(e,{instanceIdentifier:t})=>Gk(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,_i.registerVersion)(UO,"0.12.5",n),(0,_i.registerVersion)(UO,"0.12.5","esm2017")}();const fj=new uo.Yd("@firebase/database-compat"),qk=function(n){fj.warn("FIREBASE WARNING: "+n)};class mj{constructor(e){this._delegate=e}cancel(e){(0,P.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,P.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,P.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,P.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,P.Dv)("OnDisconnect.set",1,2,arguments.length),(0,P.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,P.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,P.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,qk("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,P.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class yj{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,P.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Rf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,P.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,P.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,P.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,P.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,P.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),mE("DataSnapshot.child","path",e,!1),new Rf(this._database,this._delegate.child(e))}hasChild(e){return(0,P.Dv)("DataSnapshot.hasChild",1,1,arguments.length),mE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,P.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,P.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,P.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Rf(this._database,t)))}hasChildren(){return(0,P.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,P.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,P.Dv)("DataSnapshot.ref",0,0,arguments.length),new qo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Wi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,P.Dv)("Query.on",2,4,arguments.length),(0,P.Wj)("Query.on","callback",t,!1);const c=Wi.getCancelAndContextArgs_("Query.on",r,i),p=(C,A)=>{t.call(c.context,new Rf(this.database,C),A)};p.userCallback=t,p.context=c.context;const _=null===(a=c.cancel)||void 0===a?void 0:a.bind(c.context);switch(e){case"value":return uR(this._delegate,p,_),t;case"child_added":return Fk(this._delegate,p,_),t;case"child_removed":return Uk(this._delegate,p,_),t;case"child_changed":return Lk(this._delegate,p,_),t;case"child_moved":return Vk(this._delegate,p,_),t;default:throw new Error((0,P.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,P.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,P.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,P.Wj)("Query.off","callback",t,!0),(0,P.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,Bk(this._delegate,e,i)}else Bk(this._delegate,e)}get(){return SB(this._delegate).then(e=>new Rf(this.database,e))}once(e,t,r,i){(0,P.Dv)("Query.once",1,4,arguments.length),(0,P.Wj)("Query.once","callback",t,!0);const a=Wi.getCancelAndContextArgs_("Query.once",r,i),c=new P.BH,p=(C,A)=>{const x=new Rf(this.database,C);t&&t.call(a.context,x,A),c.resolve(x)};p.userCallback=t,p.context=a.context;const _=C=>{a.cancel&&a.cancel.call(a.context,C),c.reject(C)};switch(e){case"value":uR(this._delegate,p,_,{onlyOnce:!0});break;case"child_added":Fk(this._delegate,p,_,{onlyOnce:!0});break;case"child_removed":Uk(this._delegate,p,_,{onlyOnce:!0});break;case"child_changed":Lk(this._delegate,p,_,{onlyOnce:!0});break;case"child_moved":Vk(this._delegate,p,_,{onlyOnce:!0});break;default:throw new Error((0,P.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,P.Dv)("Query.limitToFirst",1,1,arguments.length),new Wi(this.database,Fu(this._delegate,function FB(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new kB(n)}(e)))}limitToLast(e){return(0,P.Dv)("Query.limitToLast",1,1,arguments.length),new Wi(this.database,Fu(this._delegate,function VB(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new LB(n)}(e)))}orderByChild(e){return(0,P.Dv)("Query.orderByChild",1,1,arguments.length),new Wi(this.database,Fu(this._delegate,function BB(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return mE("orderByChild","path",n,!1),new UB(n)}(e)))}orderByKey(){return(0,P.Dv)("Query.orderByKey",0,0,arguments.length),new Wi(this.database,Fu(this._delegate,function HB(){return new jB}()))}orderByPriority(){return(0,P.Dv)("Query.orderByPriority",0,0,arguments.length),new Wi(this.database,Fu(this._delegate,function GB(){return new $B}()))}orderByValue(){return(0,P.Dv)("Query.orderByValue",0,0,arguments.length),new Wi(this.database,Fu(this._delegate,function WB(){return new qB}()))}startAt(e=null,t){return(0,P.Dv)("Query.startAt",0,2,arguments.length),new Wi(this.database,Fu(this._delegate,function NB(n=null,e){return gE("startAt","key",e,!0),new Hk(n,e)}(e,t)))}startAfter(e=null,t){return(0,P.Dv)("Query.startAfter",0,2,arguments.length),new Wi(this.database,Fu(this._delegate,function PB(n,e){return gE("startAfter","key",e,!0),new OB(n,e)}(e,t)))}endAt(e=null,t){return(0,P.Dv)("Query.endAt",0,2,arguments.length),new Wi(this.database,Fu(this._delegate,function xB(n,e){return gE("endAt","key",e,!0),new jk(n,e)}(e,t)))}endBefore(e=null,t){return(0,P.Dv)("Query.endBefore",0,2,arguments.length),new Wi(this.database,Fu(this._delegate,function RB(n,e){return gE("endBefore","key",e,!0),new MB(n,e)}(e,t)))}equalTo(e,t){return(0,P.Dv)("Query.equalTo",1,2,arguments.length),new Wi(this.database,Fu(this._delegate,function ZB(n,e){return gE("equalTo","key",e,!0),new zB(n,e)}(e,t)))}toString(){return(0,P.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,P.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,P.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Wi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,P.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,P.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,P.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new qo(this.database,new Oa(this._delegate._repo,this._delegate._path))}}class qo extends Wi{constructor(e,t){super(e,new _o(t._repo,t._path,new rD,!1)),this.database=e,this._delegate=t}getKey(){return(0,P.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,P.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new qo(this.database,Zg(this._delegate,e))}getParent(){(0,P.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new qo(this.database,e):null}getRoot(){return(0,P.Dv)("Reference.root",0,0,arguments.length),new qo(this.database,this._delegate.root)}set(e,t){(0,P.Dv)("Reference.set",1,2,arguments.length),(0,P.Wj)("Reference.set","onComplete",t,!0);const r=aR(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,P.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,qk("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ra("Reference.update",this._delegate._path),(0,P.Wj)("Reference.update","onComplete",t,!0);const r=AB(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,P.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,P.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function TB(n,e,t){if(Ra("setWithPriority",n._path),Vl("setWithPriority",e,n._path,!1),JM("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new P.BH;return tR(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,P.Dv)("Reference.remove",0,1,arguments.length),(0,P.Wj)("Reference.remove","onComplete",e,!0);const t=function bB(n){return Ra("remove",n._path),aR(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,P.Dv)("Reference.transaction",1,3,arguments.length),(0,P.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,P.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,P.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function cj(n,e,t){var r;if(n=(0,P.m9)(n),Ra("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new P.BH,p=uR(n,()=>{});return function yB(n,e,t,r,i,a){P_(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:$O(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},p=rR(n,e,void 0);c.currentInputSnapshot=p;const _=c.update(p.val());if(void 0===_)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{pE("transaction failed: Data returned ",_,c.path),c.status=0;const C=wD(n.transactionQueueTree_,e),A=Wg(C)||[];let x;A.push(c),KM(C,A),"object"==typeof _&&null!==_&&(0,P.r3)(_,".priority")?(x=(0,P.DV)(_,".priority"),(0,P.hu)(fE(x),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):x=(yD(n.serverSyncTree_,e)||Rt.EMPTY_NODE).getPriority().val();const O=yE(n),V=yr(_,x),z=WM(V,p,O);c.currentOutputSnapshotRaw=V,c.currentOutputSnapshotResolved=z,c.currentWriteId=bD(n);const Ee=UM(n.serverSyncTree_,e,z,c.currentWriteId,c.applyLocally);Na(n.eventQueue_,e,Ee),DD(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,C,A)=>{let x=null;_?a.reject(_):(x=new zg(A,new Oa(n._repo,n._path),Vn),a.resolve(new lj(C,x)))},p,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new yj(a.committed,new Rf(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,P.Dv)("Reference.setPriority",1,2,arguments.length),(0,P.Wj)("Reference.setPriority","onComplete",t,!0);const r=function DB(n,e){n=(0,P.m9)(n),Ra("setPriority",n._path),JM("setPriority",e,!1);const t=new P.BH;return tR(n._repo,ar(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,P.Dv)("Reference.push",0,2,arguments.length),(0,P.Wj)("Reference.push","onComplete",t,!0);const r=function IB(n,e){n=(0,P.m9)(n),Ra("push",n._path),Vl("push",e,n._path,!0);const t=Ck(n._repo),r=NU(t),i=Zg(n,r),a=Zg(n,r);let c;return c=null!=e?aR(a,e).then(()=>a):Promise.resolve(a),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new qo(this.database,c));t&&i.then(()=>t(null),c=>t(c));const a=new qo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Ra("Reference.onDisconnect",this._delegate._path),new mj(new Ok(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class vE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function tj(n,e,t,r={}){(n=(0,P.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&kl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&kl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Y0(Y0.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,P.Sg)(r.mockUserToken,n.app.options.projectId);a=new Y0(c)}!function YB(n,e,t,r){n.repoInfo_=new sM(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,P.Dv)("database.ref",0,1,arguments.length),e instanceof qo){const t=kk(this._delegate,e.toString());return new qo(this,t)}{const t=Pk(this._delegate,e);return new qo(this,t)}}refFromURL(e){(0,P.Dv)("database.refFromURL",1,1,arguments.length);const r=kk(this._delegate,e);return new qo(this,r)}goOffline(){return(0,P.Dv)("database.goOffline",0,0,arguments.length),function nj(n){(n=(0,P.m9)(n))._checkNotDeleted("goOffline"),Tk(n._repo)}(this._delegate)}goOnline(){return(0,P.Dv)("database.goOnline",0,0,arguments.length),function rj(n){(n=(0,P.m9)(n))._checkNotDeleted("goOnline"),function mB(n){n.persistentConnection_&&n.persistentConnection_.resume(Ek)}(n._repo)}(this._delegate)}}vE.ServerValue={TIMESTAMP:function aj(){return oj}(),increment:n=>function uj(n){return{".sv":{increment:n}}}(n)};var vj=Object.freeze({__proto__:null,initStandalone:function _j({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){jO(t);const c=new ns.zt("auth-internal",new ns.H0("database-standalone"));return c.setComponent(new ns.wA("auth-internal",()=>r,"PRIVATE")),{instance:new vE(Gk(n,c,void 0,e,a),n),namespace:i}}});const wj=vE.ServerValue;function Wk(n){return null==n}function zk(n){return"function"==typeof n.set}function Zk(n,e){return zk(e)?e:n.ref(e)}function Kk(n,e){if(function Cj(n){return"string"==typeof n}(n))return e.stringCase();if(zk(n))return e.firebaseCase();if(function Ij(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function wE(n,e,t="on",r=Ps.z){return new Br.y(i=>{let a=null;return a=n[t](e,(c,p)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:p})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,_t.U)(i=>{const{snapshot:a,prevKey:c}=i;let p=null;return a.exists()&&(p=a.key),{type:e,payload:a,prevKey:c,key:p}}),(0,rO.B)())}function Yk(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function Tj(n,e){const{payload:t,prevKey:r,key:i}=e,a=Yk(n,i),c=function Dj(n,e){if(Wk(e))return 0;{const t=Yk(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let p=null;e.payload.forEach(_=>{const C={payload:_,type:"value",prevKey:p,key:_.key};return p=_.key,n=[...n,C],!1})}return n;case"child_added":if(a>-1){const p=n[a-1];(p&&p.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(p=>p.payload.key!==t.key);case"child_changed":return n.map(p=>p.payload.key===i?e:p);case"child_moved":if(a>-1){const p=n.splice(a,1)[0];return(n=n.slice()).splice(c,0,p),n}return n;default:return n}}function Qk(n){return(Wk(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Jk(n,e,t){return function bj(n,e,t){return wE(n,"value","once",t).pipe(qt(r=>{const i=[Xe(r)];return e.forEach(a=>i.push(wE(n,a,"on",t))),(0,Ix.T)(...i).pipe(ko(Tj,[]))}),Sc())}(n,e=Qk(e),t)}function Xk(n,e,t){const r=(e=Qk(e)).map(i=>wE(n,i,"on",t));return(0,Ix.T)(...r)}function e1(n,e){return function(r,i){return Kk(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function Mj(n){return function(t){return t?Kk(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function t1(n,e){return function(){return wE(n,"value","on",e)}}!function Ej(n){n.INTERNAL.registerComponent(new ns.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new vE(i,r)},"PUBLIC").setServiceProps({Reference:qo,Query:Wi,Database:vE,DataSnapshot:Rf,enableLogging:ij,INTERNAL:vj,ServerValue:wj}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.5")}(xc.Z);const Oj=new h.OlP("angularfire2.realtimeDatabaseURL"),Pj=new h.OlP("angularfire2.database.use-emulator");let kj=(()=>{class n{constructor(t,r,i,a,c,p,_,C,A,x,O,V,z,Ee,Ue){this.schedulers=p;const at=_,St=(0,Ir.on)(t,c,r);C&&Zx(St,c,A,O,V,z,x,Ee),this.database=(0,Ir.cc)(`${St.name}.database.${i}`,"AngularFireDatabase",St.name,()=>{const Xt=c.runOutsideAngular(()=>St.database(i||void 0));return at&&Xt.useEmulator(...at),Xt},[at])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>Zk(this.database,t));let a=i;return r&&(a=r(i)),function Rj(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:e1(r,"update"),set:e1(r,"set"),push:i=>r.push(i),remove:Mj(r),snapshotChanges:i=>Jk(n,i,t).pipe(Dn.iC),stateChanges:i=>Xk(n,i,t).pipe(Dn.iC),auditTrail:i=>function Aj(n,e,t){return function xj(n,e,t){return function Sj(n,e){return wE(n,"value","on",e).pipe((0,_t.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function TV(...n){const e=(0,Qs.jO)(n);return(0,$n.e)((t,r)=>{const i=n.length,a=new Array(i);let c=n.map(()=>!1),p=!1;for(let _=0;_<i;_++)(0,ha.Xf)(n[_]).subscribe(new nr.Q(r,C=>{a[_]=C,!p&&!c[_]&&(c[_]=!0,(p=c.every(gl.y))&&(c=null))},DV.Z));t.subscribe(new nr.Q(r,_=>{if(p){const C=[_,...a];r.next(e?e(...C):C)}}))})}(e),(0,_t.U)(([i,a])=>{const c=i.lastKeyToLoad,p=a.map(_=>_.key);return{actions:a,lastKeyToLoad:c,loadedKeys:p}}),function AV(n){return(0,$n.e)((e,t)=>{let r=!1,i=0;e.subscribe(new nr.Q(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,_t.U)(i=>i.actions))}(n,Xk(n,e).pipe(ko((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Dn.iC),valueChanges:(i,a)=>Jk(n,i,t).pipe((0,_t.U)(p=>p.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),Dn.iC)}}(a,this)}object(t){return function Nj(n,e){return{query:n,snapshotChanges:()=>t1(n,e.schedulers.outsideAngular)().pipe(Dn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>t1(n,e.schedulers.outsideAngular)().pipe(Dn.iC,(0,_t.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Zk(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ir.Dh),h.LFG(Ir.xv,8),h.LFG(Oj,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Dn.HU),h.LFG(Pj,8),h.LFG(Kx,8),h.LFG(Hx,8),h.LFG($x,8),h.LFG(Gx,8),h.LFG(qx,8),h.LFG(Wx,8),h.LFG(zx,8),h.LFG(qb,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Fj=(()=>{class n{constructor(){aV.Z.registerVersion("angularfire",Dn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[kj]}),n})(),Lj=(()=>{class n{constructor(){this.rutas=[{name:"Home",path:"/home"},{name:"Libros",path:"/libros"},{name:"Imagenes",path:"/imagenes"},{name:"Canciones",path:"/canciones"},{name:"About",path:"/about"}]}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-menu"]],decls:16,vars:0,consts:[[1,"nav","nav-tabs"],[1,"nav-item"],["routerLink","/home",1,"nav-link",2,"font-size","2rem"],["routerLink","/libros",1,"nav-link","mt-3",2,"font-size","1rem"],["routerLink","/imagenes",1,"nav-link","mt-3",2,"font-size","1rem"],["routerLink","/canciones",1,"nav-link","mt-3",2,"font-size","1rem"],["routerLink","/about",1,"nav-link","mt-3",2,"font-size","1rem"]],template:function(t,r){1&t&&(h.TgZ(0,"ul",0),h.TgZ(1,"li",1),h.TgZ(2,"a",2),h._uU(3,"Home"),h.qZA(),h.qZA(),h.TgZ(4,"li",1),h.TgZ(5,"a",3),h._uU(6,"Libros"),h.qZA(),h.qZA(),h.TgZ(7,"li",1),h.TgZ(8,"a",4),h._uU(9,"Imagenes"),h.qZA(),h.qZA(),h.TgZ(10,"li",1),h.TgZ(11,"a",5),h._uU(12,"Canciones"),h.qZA(),h.qZA(),h.TgZ(13,"li",1),h.TgZ(14,"a",6),h._uU(15,"Acerca de"),h.qZA(),h.qZA(),h.qZA())},directives:[ji],styles:[""]}),n})(),Vj=(()=>{class n{constructor(){this.title="evaluacionds02"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&(h._UZ(0,"app-menu"),h._UZ(1,"router-outlet"))},directives:[Lj,Iv],styles:[""]}),n})(),Uj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[Vj]}),n.\u0275inj=h.cJS({providers:[LO,kO,FO],imports:[[Zl,io,zf,yh,Ir.hO.initializeApp(VO_firebaseConfig),Fj,bV]]}),n})();za().bootstrapModule(Uj).catch(n=>console.error(n))},5867:(ut,be,F)=>{"use strict";F.d(be,{Mq:()=>h.getApp,C6:()=>h.getApps});var h=F(9681);(0,h.registerVersion)("firebase","9.6.8","app")},127:(ut,be,F)=>{"use strict";F.d(be,{Z:()=>h.Z});var h=F(3942);h.Z.registerVersion("firebase","9.6.8","app-compat")},2438:(ut,be,F)=>{"use strict";F.r(be);var h=F(5861),Q=F(3942),k=F(2090),se=F(9681);function ae(y,f){var g={};for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&f.indexOf(w)<0&&(g[w]=y[w]);if(null!=y&&"function"==typeof Object.getOwnPropertySymbols){var T=0;for(w=Object.getOwnPropertySymbols(y);T<w.length;T++)f.indexOf(w[T])<0&&Object.prototype.propertyIsEnumerable.call(y,w[T])&&(g[w[T]]=y[w[T]])}return g}var Fe=F(1877),ce=F(4859);const _r=function ur(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},sn=function Kt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Jr=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Rn=new Fe.Yd("@firebase/auth");function bi(y,...f){Rn.logLevel<=Fe.in.ERROR&&Rn.error(`Auth (${se.SDK_VERSION}): ${y}`,...f)}function en(y,...f){throw hs(y,...f)}function Wt(y,...f){return hs(y,...f)}function vo(y,f,g){const w=Object.assign(Object.assign({},sn()),{[f]:g});return new k.LL("auth","Firebase",w).create(f,{appName:y.name})}function Xr(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&en(y,"argument-error"),vo(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hs(y,...f){if("string"!=typeof y){const g=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(g,...w)}return Jr.create(y,...f)}function Me(y,f,...g){if(!y)throw hs(f,...g)}function vr(y){const f="INTERNAL ASSERTION FAILED: "+y;throw bi(f),new Error(f)}function ot(y,f){y||vr(f)}const Di=new Map;function Ft(y){ot(y instanceof Function,"Expected a class definition");let f=Di.get(y);return f?(ot(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,Di.set(y,f),f)}function xr(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Mr(){return"http:"===yn()||"https:"===yn()}function yn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Nt{constructor(f,g){this.shortDelay=f,this.longDelay=g,ot(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function gi(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Mr()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function lt(y,f){ot(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class yt{static initialize(f,g,w){this.fetchImpl=f,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const wo={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},fs=new Nt(3e4,6e4);function dt(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function ln(y,f,g,w){return wr.apply(this,arguments)}function wr(){return(wr=(0,h.Z)(function*(y,f,g,w,T={}){return Ti(y,T,(0,h.Z)(function*(){let M={},j={};w&&("GET"===f?j=w:M={body:JSON.stringify(w)});const te=(0,k.xO)(Object.assign({key:y.config.apiKey},j)).slice(1),ke=yield y._getAdditionalHeaders();return ke["Content-Type"]="application/json",y.languageCode&&(ke["X-Firebase-Locale"]=y.languageCode),yt.fetch()(we(y,y.config.apiHost,g,te),Object.assign({method:f,headers:ke,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function Ti(y,f,g){return B.apply(this,arguments)}function B(){return(B=(0,h.Z)(function*(y,f,g){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},wo),f);try{const T=new ee(y),M=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const j=yield M.json();if("needConfirmation"in j)throw qe(y,"account-exists-with-different-credential",j);if(M.ok&&!("errorMessage"in j))return j;{const te=M.ok?j.errorMessage:j.error.message,[ke,Re]=te.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ke)throw qe(y,"credential-already-in-use",j);if("EMAIL_EXISTS"===ke)throw qe(y,"email-already-in-use",j);const Qe=w[ke]||ke.toLowerCase().replace(/[_\s]+/g,"-");if(Re)throw vo(y,Qe,Re);en(y,Qe)}}catch(T){if(T instanceof k.ZR)throw T;en(y,"network-request-failed")}})).apply(this,arguments)}function q(y,f,g,w){return W.apply(this,arguments)}function W(){return(W=(0,h.Z)(function*(y,f,g,w,T={}){const M=yield ln(y,f,g,w,T);return"mfaPendingCredential"in M&&en(y,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function we(y,f,g,w){const T=`${f}${g}?${w}`;return y.config.emulator?lt(y.config,T):`${y.config.apiScheme}://${T}`}class ee{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(Wt(this.auth,"network-request-failed")),fs.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qe(y,f,g){const w={appName:y.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const T=Wt(y,f,w);return T.customData._tokenResponse=g,T}function _e(){return(_e=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function $e(y,f){return it.apply(this,arguments)}function it(){return(it=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function bt(y,f){return ft.apply(this,arguments)}function ft(){return(ft=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function on(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function zo(){return(zo=(0,h.Z)(function*(y,f=!1){const g=(0,k.m9)(y),w=yield g.getIdToken(f),T=Eo(w);Me(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const M="object"==typeof T.firebase?T.firebase:void 0,j=null==M?void 0:M.sign_in_provider;return{claims:T,token:w,authTime:on(Vu(T.auth_time)),issuedAtTime:on(Vu(T.iat)),expirationTime:on(Vu(T.exp)),signInProvider:j||null,signInSecondFactor:(null==M?void 0:M.sign_in_second_factor)||null}})).apply(this,arguments)}function Vu(y){return 1e3*Number(y)}function Eo(y){const[f,g,w]=y.split(".");if(void 0===f||void 0===g||void 0===w)return bi("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,k.tV)(g);return T?JSON.parse(T):(bi("Failed to decode base64 JWT payload"),null)}catch(T){return bi("Caught error parsing JWT payload as JSON",T),null}}function Yn(y,f){return zi.apply(this,arguments)}function zi(){return(zi=(0,h.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(w){throw w instanceof k.ZR&&dr(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function dr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class qs{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,h.Z)(function*(){yield g.iteration()}),w)}iteration(){var f=this;return(0,h.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class Bl{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=on(this.lastLoginAt),this.creationTime=on(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ai(y){return Co.apply(this,arguments)}function Co(){return(Co=(0,h.Z)(function*(y){var f;const g=y.auth,w=yield y.getIdToken(),T=yield Yn(y,bt(g,{idToken:w}));Me(null==T?void 0:T.users.length,g,"internal-error");const M=T.users[0];y._notifyReloadListener(M);const j=(null===(f=M.providerUserInfo)||void 0===f?void 0:f.length)?ei(M.providerUserInfo):[],te=Pa(y.providerData,j),Qe=!!y.isAnonymous&&!(y.email&&M.passwordHash||(null==te?void 0:te.length)),nt={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:te,metadata:new Bl(M.createdAt,M.lastLoginAt),isAnonymous:Qe};Object.assign(y,nt)})).apply(this,arguments)}function Qn(){return(Qn=(0,h.Z)(function*(y){const f=(0,k.m9)(y);yield Ai(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Pa(y,f){return[...y.filter(w=>!f.some(T=>T.providerId===w.providerId)),...f]}function ei(y){return y.map(f=>{var{providerId:g}=f,w=ae(f,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function At(){return(At=(0,h.Z)(function*(y,f){const g=yield Ti(y,{},(0,h.Z)(function*(){const w=(0,k.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:M}=y.config,j=we(y,T,"/v1/token",`key=${M}`),te=yield y._getAdditionalHeaders();return te["Content-Type"]="application/x-www-form-urlencoded",yt.fetch()(j,{method:"POST",headers:te,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class zt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){Me(f.idToken,"internal-error"),Me(void 0!==f.idToken,"internal-error"),Me(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function cr(y){const f=Eo(y);return Me(f,"internal-error"),Me(void 0!==f.exp,"internal-error"),Me(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var w=this;return(0,h.Z)(function*(){return Me(!w.accessToken||w.refreshToken,f,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var w=this;return(0,h.Z)(function*(){const{accessToken:T,refreshToken:M,expiresIn:j}=yield function ze(y,f){return At.apply(this,arguments)}(f,g);w.updateTokensAndExpiration(T,M,Number(j))})()}updateTokensAndExpiration(f,g,w){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,g){const{refreshToken:w,accessToken:T,expirationTime:M}=g,j=new zt;return w&&(Me("string"==typeof w,"internal-error",{appName:f}),j.refreshToken=w),T&&(Me("string"==typeof T,"internal-error",{appName:f}),j.accessToken=T),M&&(Me("number"==typeof M,"internal-error",{appName:f}),j.expirationTime=M),j}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new zt,this.toJSON())}_performRefresh(){return vr("not implemented")}}function Nn(y,f){Me("string"==typeof y||void 0===y,"internal-error",{appName:f})}class Rr{constructor(f){var{uid:g,auth:w,stsTokenManager:T}=f,M=ae(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new Bl(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,h.Z)(function*(){const w=yield Yn(g,g.stsTokenManager.getToken(g.auth,f));return Me(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(f){return function Ul(y){return zo.apply(this,arguments)}(this,f)}reload(){return function Io(y){return Qn.apply(this,arguments)}(this)}_assign(f){this!==f&&(Me(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Rr(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var w=this;return(0,h.Z)(function*(){let T=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),T=!0),g&&(yield Ai(w)),yield w.auth._persistUserIfCurrent(w),T&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,h.Z)(function*(){const g=yield f.getIdToken();return yield Yn(f,function Ce(y,f){return _e.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var w,T,M,j,te,ke,Re,Qe;const nt=null!==(w=g.displayName)&&void 0!==w?w:void 0,Ot=null!==(T=g.email)&&void 0!==T?T:void 0,qt=null!==(M=g.phoneNumber)&&void 0!==M?M:void 0,Bi=null!==(j=g.photoURL)&&void 0!==j?j:void 0,mu=null!==(te=g.tenantId)&&void 0!==te?te:void 0,vh=null!==(ke=g._redirectEventId)&&void 0!==ke?ke:void 0,ko=null!==(Re=g.createdAt)&&void 0!==Re?Re:void 0,so=null!==(Qe=g.lastLoginAt)&&void 0!==Qe?Qe:void 0,{uid:yu,emailVerified:wh,isAnonymous:vc,providerData:_u,stsTokenManager:pp}=g;Me(yu&&pp,f,"internal-error");const Fo=zt.fromJSON(this.name,pp);Me("string"==typeof yu,f,"internal-error"),Nn(nt,f.name),Nn(Ot,f.name),Me("boolean"==typeof wh,f,"internal-error"),Me("boolean"==typeof vc,f,"internal-error"),Nn(qt,f.name),Nn(Bi,f.name),Nn(mu,f.name),Nn(vh,f.name),Nn(ko,f.name),Nn(so,f.name);const qr=new Rr({uid:yu,auth:f,email:Ot,emailVerified:wh,displayName:nt,isAnonymous:vc,photoURL:Bi,phoneNumber:qt,tenantId:mu,stsTokenManager:Fo,createdAt:ko,lastLoginAt:so});return _u&&Array.isArray(_u)&&(qr.providerData=_u.map(gp=>Object.assign({},gp))),vh&&(qr._redirectEventId=vh),qr}static _fromIdTokenResponse(f,g,w=!1){return(0,h.Z)(function*(){const T=new zt;T.updateFromServerResponse(g);const M=new Rr({uid:g.localId,auth:f,stsTokenManager:T,isAnonymous:w});return yield Ai(M),M})()}}const Lr=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(g,w){var T=this;return(0,h.Z)(function*(){T.storage[g]=w})()}_get(g){var w=this;return(0,h.Z)(function*(){const T=w.storage[g];return void 0===T?null:T})()}_remove(g){var w=this;return(0,h.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return y.type="NONE",y})();function Gt(y,f,g){return`firebase:${y}:${f}:${g}`}class Si{constructor(f,g,w){this.persistence=f,this.auth=g,this.userKey=w;const{config:T,name:M}=this.auth;this.fullUserKey=Gt(this.userKey,T.apiKey,M),this.fullPersistenceKey=Gt("persistence",T.apiKey,M),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,h.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?Rr._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,h.Z)(function*(){if(g.persistence===f)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,w="authUser"){return(0,h.Z)(function*(){if(!g.length)return new Si(Ft(Lr),f,w);const T=(yield Promise.all(g.map(function(){var Re=(0,h.Z)(function*(Qe){if(yield Qe._isAvailable())return Qe});return function(Qe){return Re.apply(this,arguments)}}()))).filter(Re=>Re);let M=T[0]||Ft(Lr);const j=Gt(w,f.config.apiKey,f.name);let te=null;for(const Re of g)try{const Qe=yield Re._get(j);if(Qe){const nt=Rr._fromJSON(f,Qe);Re!==M&&(te=nt),M=Re;break}}catch(Qe){}const ke=T.filter(Re=>Re._shouldAllowMigration);return M._shouldAllowMigration&&ke.length?(M=ke[0],te&&(yield M._set(j,te.toJSON())),yield Promise.all(g.map(function(){var Re=(0,h.Z)(function*(Qe){if(Qe!==M)try{yield Qe._remove(j)}catch(nt){}});return function(Qe){return Re.apply(this,arguments)}}())),new Si(M,f,w)):new Si(M,f,w)})()}}function On(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(ka(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Dt(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Pn(f))return"Blackberry";if(Zo(f))return"Webos";if(bo(f))return"Safari";if((f.includes("chrome/")||Do(f))&&!f.includes("edge/"))return"Chrome";if(Zi(f))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function Dt(y=(0,k.z$)()){return/firefox\//i.test(y)}function bo(y=(0,k.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Do(y=(0,k.z$)()){return/crios\//i.test(y)}function ka(y=(0,k.z$)()){return/iemobile/i.test(y)}function Zi(y=(0,k.z$)()){return/android/i.test(y)}function Pn(y=(0,k.z$)()){return/blackberry/i.test(y)}function Zo(y=(0,k.z$)()){return/webos/i.test(y)}function Ki(y=(0,k.z$)()){return/iphone|ipad|ipod/i.test(y)}function Ko(y=(0,k.z$)()){return Ki(y)||Zi(y)||Zo(y)||Pn(y)||/windows phone/i.test(y)||ka(y)}function Mi(y,f=[]){let g;switch(y){case"Browser":g=On((0,k.z$)());break;case"Worker":g=`${On((0,k.z$)())}-${y}`;break;default:g=y}const w=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${se.SDK_VERSION}/${w}`}class pd{constructor(f,g){this.app=f,this.config=g,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ps(this),this.idTokenSubscription=new ps(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jr,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=g.sdkClientVersion}_initializeWithPersistence(f,g){var w=this;return g&&(this._popupRedirectResolver=Ft(g)),this._initializationPromise=this.queue((0,h.Z)(function*(){var T,M;if(!w._deleted&&(w.persistenceManager=yield Si.create(w,f),!w._deleted)){if(null===(T=w._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(j){}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(M=w.currentUser)||void 0===M?void 0:M.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,h.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g)}})()}initializeCurrentUser(f){var g=this;return(0,h.Z)(function*(){var w;let T=yield g.assertedPersistence.getCurrentUser();if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const M=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,j=null==T?void 0:T._redirectEventId,te=yield g.tryRedirectSignIn(f);(!M||M===j)&&(null==te?void 0:te.user)&&(T=te.user)}return T?T._redirectEventId?(Me(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===T._redirectEventId?g.directlySetCurrentUser(T):g.reloadAndSetCurrentUserOrClear(T)):g.reloadAndSetCurrentUserOrClear(T):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var g=this;return(0,h.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(T){yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,h.Z)(function*(){try{yield Ai(f)}catch(w){if("auth/network-request-failed"!==w.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Wo(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,h.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,h.Z)(function*(){const w=f?(0,k.m9)(f):null;return w&&Me(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(f){var g=this;return(0,h.Z)(function*(){if(!g._deleted)return f&&Me(g.tenantId===f.tenantId,g,"tenant-id-mismatch"),g.queue((0,h.Z)(function*(){yield g.directlySetCurrentUser(f),g.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,h.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var g=this;return this.queue((0,h.Z)(function*(){yield g.assertedPersistence.setPersistence(Ft(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new k.LL("auth","Firebase",f())}onAuthStateChanged(f,g,w){return this.registerStateListener(this.authStateSubscription,f,g,w)}onIdTokenChanged(f,g,w){return this.registerStateListener(this.idTokenSubscription,f,g,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var w=this;return(0,h.Z)(function*(){const T=yield w.getOrInitRedirectPersistenceManager(g);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,h.Z)(function*(){if(!g.redirectPersistenceManager){const w=f&&Ft(f)||g._popupRedirectResolver;Me(w,g,"argument-error"),g.redirectPersistenceManager=yield Si.create(g,[Ft(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,h.Z)(function*(){var w,T;return g._isInitialized&&(yield g.queue((0,h.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===f?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,h.Z)(function*(){if(f===g.currentUser)return g.queue((0,h.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,w,T){if(this._deleted)return()=>{};const M="function"==typeof g?g:g.next.bind(g),j=this._isInitialized?Promise.resolve():this._initializationPromise;return Me(j,this,"internal-error"),j.then(()=>M(this.currentUser)),"function"==typeof g?f.addObserver(g,w,T):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,h.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Mi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,h.Z)(function*(){const g={"X-Client-Version":f.clientVersion};return f.app.options.appId&&(g["X-Firebase-gmpid"]=f.app.options.appId),g})()}}function Bn(y){return(0,k.m9)(y)}class ps{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,k.ne)(g=>this.observer=g)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function gd(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Nf(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class Fa{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return vr("not implemented")}_getIdTokenResponse(f){return vr("not implemented")}_linkToIdToken(f,g){return vr("not implemented")}_getReauthenticationResolver(f){return vr("not implemented")}}function Of(y,f){return md.apply(this,arguments)}function md(){return(md=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:resetPassword",dt(y,f))})).apply(this,arguments)}function Pf(y,f){return yd.apply(this,arguments)}function yd(){return(yd=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Yg(y,f){return La.apply(this,arguments)}function La(){return(La=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:update",dt(y,f))})).apply(this,arguments)}function _d(){return(_d=(0,h.Z)(function*(y,f){return q(y,"POST","/v1/accounts:signInWithPassword",dt(y,f))})).apply(this,arguments)}function jl(y,f){return vd.apply(this,arguments)}function vd(){return(vd=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:sendOobCode",dt(y,f))})).apply(this,arguments)}function Qg(y,f){return wd.apply(this,arguments)}function wd(){return(wd=(0,h.Z)(function*(y,f){return jl(y,f)})).apply(this,arguments)}function Jg(y,f){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,h.Z)(function*(y,f){return jl(y,f)})).apply(this,arguments)}function Va(y,f){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,h.Z)(function*(y,f){return jl(y,f)})).apply(this,arguments)}function $l(y,f){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,h.Z)(function*(y,f){return jl(y,f)})).apply(this,arguments)}function Uu(){return(Uu=(0,h.Z)(function*(y,f){return q(y,"POST","/v1/accounts:signInWithEmailLink",dt(y,f))})).apply(this,arguments)}function Ao(){return(Ao=(0,h.Z)(function*(y,f){return q(y,"POST","/v1/accounts:signInWithEmailLink",dt(y,f))})).apply(this,arguments)}class Ba extends Fa{constructor(f,g,w,T=null){super("password",w),this._email=f,this._password=g,this._tenantId=T}static _fromEmailAndPassword(f,g){return new Ba(f,g,"password")}static _fromEmailAndCode(f,g,w=null){return new Ba(f,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,h.Z)(function*(){switch(g.signInMethod){case"password":return function Yo(y,f){return _d.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function To(y,f){return Uu.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:en(f,"internal-error")}})()}_linkToIdToken(f,g){var w=this;return(0,h.Z)(function*(){switch(w.signInMethod){case"password":return Pf(f,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Ua(y,f){return Ao.apply(this,arguments)}(f,{idToken:g,email:w._email,oobCode:w._password});default:en(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Ws(y,f){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,h.Z)(function*(y,f){return q(y,"POST","/v1/accounts:signInWithIdp",dt(y,f))})).apply(this,arguments)}class Nr extends Fa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new Nr(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):en("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:T}=g,M=ae(g,["providerId","signInMethod"]);if(!w||!T)return null;const j=new Nr(w,T);return j.idToken=M.idToken||void 0,j.accessToken=M.accessToken||void 0,j.secret=M.secret,j.nonce=M.nonce,j.pendingToken=M.pendingToken||null,j}_getIdTokenResponse(f){return Ws(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,Ws(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Ws(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,k.xO)(g)}return f}}function Ni(y,f){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:sendVerificationCode",dt(y,f))})).apply(this,arguments)}function ja(){return(ja=(0,h.Z)(function*(y,f){return q(y,"POST","/v1/accounts:signInWithPhoneNumber",dt(y,f))})).apply(this,arguments)}function ju(){return(ju=(0,h.Z)(function*(y,f){const g=yield q(y,"POST","/v1/accounts:signInWithPhoneNumber",dt(y,f));if(g.temporaryProof)throw qe(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Dd={USER_NOT_FOUND:"user-not-found"};function Td(){return(Td=(0,h.Z)(function*(y,f){return q(y,"POST","/v1/accounts:signInWithPhoneNumber",dt(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Dd)})).apply(this,arguments)}class Yt extends Fa{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Yt({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Yt({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function ni(y,f){return ja.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function bd(y,f){return ju.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function ql(y,f){return Td.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:w,verificationCode:T}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:w,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:w,phoneNumber:T,temporaryProof:M}=f;return w||g||T||M?new Yt({verificationId:g,verificationCode:w,phoneNumber:T,temporaryProof:M}):null}}class an{constructor(f){var g,w,T,M,j,te;const ke=(0,k.zd)((0,k.pd)(f)),Re=null!==(g=ke.apiKey)&&void 0!==g?g:null,Qe=null!==(w=ke.oobCode)&&void 0!==w?w:null,nt=function zs(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=ke.mode)&&void 0!==T?T:null);Me(Re&&Qe&&nt,"argument-error"),this.apiKey=Re,this.operation=nt,this.code=Qe,this.continueUrl=null!==(M=ke.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(j=ke.languageCode)&&void 0!==j?j:null,this.tenantId=null!==(te=ke.tenantId)&&void 0!==te?te:null}static parseLink(f){const g=function Ad(y){const f=(0,k.zd)((0,k.pd)(y)).link,g=f?(0,k.zd)((0,k.pd)(f)).deep_link_id:null,w=(0,k.zd)((0,k.pd)(y)).deep_link_id;return(w?(0,k.zd)((0,k.pd)(w)).link:null)||w||g||f||y}(f);try{return new an(g)}catch(w){return null}}}let Qo=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,w){return Ba._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const T=an.parseLink(w);return Me(T,"argument-error"),Ba._fromEmailAndCode(g,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Xn{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class jn extends Xn{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class gs extends jn{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return Me("providerId"in g&&"signInMethod"in g,"argument-error"),Nr._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return Me(f.idToken||f.accessToken,"argument-error"),Nr._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return gs.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return gs.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:T,pendingToken:M,nonce:j,providerId:te}=f;if(!w&&!T&&!g&&!M||!te)return null;try{return new gs(te)._credential({idToken:g,accessToken:w,nonce:j,pendingToken:M})}catch(ke){return null}}}let Jo=(()=>{class y extends jn{constructor(){super("facebook.com")}static credential(g){return Nr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(w){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Qi=(()=>{class y extends jn{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return Nr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:T}=g;if(!w&&!T)return null;try{return y.credential(w,T)}catch(M){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Vr=(()=>{class y extends jn{constructor(){super("github.com")}static credential(g){return Nr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(w){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Ji extends Fa{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Ws(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,Ws(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Ws(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:T,pendingToken:M}=g;return w&&T&&M&&w===T?new Ji(w,M):null}static _create(f,g){return new Ji(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ur extends Xn{constructor(f){Me(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Ur.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Ur.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Ji.fromJSON(f);return Me(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:w}=f;if(!g||!w)return null;try{return Ji._create(w,g)}catch(T){return null}}}let Zs=(()=>{class y extends jn{constructor(){super("twitter.com")}static credential(g,w){return Nr._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:T}=g;if(!w||!T)return null;try{return y.credential(w,T)}catch(M){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Xo(y,f){return mt.apply(this,arguments)}function mt(){return(mt=(0,h.Z)(function*(y,f){return q(y,"POST","/v1/accounts:signUp",dt(y,f))})).apply(this,arguments)}class hr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,w,T=!1){return(0,h.Z)(function*(){const M=yield Rr._fromIdTokenResponse(f,w,T),j=Ha(w);return new hr({user:M,providerId:j,_tokenResponse:w,operationType:g})})()}static _forOperation(f,g,w){return(0,h.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const T=Ha(w);return new hr({user:f,providerId:T,_tokenResponse:w,operationType:g})})()}}function Ha(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function ea(){return(ea=(0,h.Z)(function*(y){var f;const g=Bn(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new hr({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield Xo(g,{returnSecureToken:!0}),T=yield hr._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class ta extends k.ZR{constructor(f,g,w,T){var M;super(g.code,g.message),this.operationType=w,this.user=T,Object.setPrototypeOf(this,ta.prototype),this.customData={appName:f.name,tenantId:null!==(M=f.tenantId)&&void 0!==M?M:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,g,w,T){return new ta(f,g,w,T)}}function zl(y,f,g,w){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?ta._fromErrorAndOperation(y,M,f,w):M})}function Hu(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function xt(){return(xt=(0,h.Z)(function*(y,f){const g=(0,k.m9)(y);yield So(!0,g,f);const{providerUserInfo:w}=yield $e(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),T=Hu(w||[]);return g.providerData=g.providerData.filter(M=>T.has(M.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function $u(y,f){return dn.apply(this,arguments)}function dn(){return(dn=(0,h.Z)(function*(y,f,g=!1){const w=yield Yn(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return hr._forOperation(y,"link",w)})).apply(this,arguments)}function So(y,f,g){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,h.Z)(function*(y,f,g){yield Ai(f);const T=!1===y?"provider-already-linked":"no-such-provider";Me(Hu(f.providerData).has(g)===y,f.auth,T)})).apply(this,arguments)}function ri(y,f){return ms.apply(this,arguments)}function ms(){return(ms=(0,h.Z)(function*(y,f,g=!1){const{auth:w}=y,T="reauthenticate";try{const M=yield Yn(y,zl(w,T,f,y),g);Me(M.idToken,w,"internal-error");const j=Eo(M.idToken);Me(j,w,"internal-error");const{sub:te}=j;return Me(y.uid===te,w,"user-mismatch"),hr._forOperation(y,T,M)}catch(M){throw"auth/user-not-found"===(null==M?void 0:M.code)&&en(w,"user-mismatch"),M}})).apply(this,arguments)}function Gu(y,f){return qu.apply(this,arguments)}function qu(){return(qu=(0,h.Z)(function*(y,f,g=!1){const w="signIn",T=yield zl(y,w,f),M=yield hr._fromIdTokenResponse(y,w,T);return g||(yield y._updateCurrentUser(M.user)),M})).apply(this,arguments)}function Wu(y,f){return na.apply(this,arguments)}function na(){return(na=(0,h.Z)(function*(y,f){return Gu(Bn(y),f)})).apply(this,arguments)}function Ga(y,f){return tr.apply(this,arguments)}function tr(){return(tr=(0,h.Z)(function*(y,f){const g=(0,k.m9)(y);return yield So(!1,g,f.providerId),$u(g,f)})).apply(this,arguments)}function Oi(y,f){return zu.apply(this,arguments)}function zu(){return(zu=(0,h.Z)(function*(y,f){return ri((0,k.m9)(y),f)})).apply(this,arguments)}function ys(y,f){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,h.Z)(function*(y,f){return q(y,"POST","/v1/accounts:signInWithCustomToken",dt(y,f))})).apply(this,arguments)}function ra(){return(ra=(0,h.Z)(function*(y,f){const g=Bn(y),w=yield ys(g,{token:f,returnSecureToken:!0}),T=yield hr._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class Zu{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?qa._fromServerResponse(f,g):en(f,"internal-error")}}class qa extends Zu{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new qa(g)}}function ia(y,f,g){var w;Me((null===(w=g.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),Me(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Me(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(Me(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function za(){return(za=(0,h.Z)(function*(y,f,g){const w=(0,k.m9)(y),T={requestType:"PASSWORD_RESET",email:f};g&&ia(w,T,g),yield Jg(w,T)})).apply(this,arguments)}function Zl(){return(Zl=(0,h.Z)(function*(y,f,g){yield Of((0,k.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function sa(){return(sa=(0,h.Z)(function*(y,f){yield Yg((0,k.m9)(y),{oobCode:f})})).apply(this,arguments)}function xd(y,f){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,h.Z)(function*(y,f){const g=(0,k.m9)(y),w=yield Of(g,{oobCode:f}),T=w.requestType;switch(Me(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Me(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Me(w.mfaInfo,g,"internal-error");default:Me(w.email,g,"internal-error")}let M=null;return w.mfaInfo&&(M=Zu._fromServerResponse(Bn(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:M},operation:T}})).apply(this,arguments)}function Ya(){return(Ya=(0,h.Z)(function*(y,f){const{data:g}=yield xd((0,k.m9)(y),f);return g.email})).apply(this,arguments)}function Md(){return(Md=(0,h.Z)(function*(y,f,g){const w=Bn(y),T=yield Xo(w,{returnSecureToken:!0,email:f,password:g}),M=yield hr._fromIdTokenResponse(w,"signIn",T);return yield w._updateCurrentUser(M.user),M})).apply(this,arguments)}function Hn(){return(Hn=(0,h.Z)(function*(y,f,g){const w=(0,k.m9)(y),T={requestType:"EMAIL_SIGNIN",email:f};Me(g.handleCodeInApp,w,"argument-error"),g&&ia(w,T,g),yield Va(w,T)})).apply(this,arguments)}function Qa(){return(Qa=(0,h.Z)(function*(y,f,g){const w=(0,k.m9)(y),T=Qo.credentialWithLink(f,g||xr());return Me(T._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Wu(w,T)})).apply(this,arguments)}function Ff(y,f){return Lf.apply(this,arguments)}function Lf(){return(Lf=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:createAuthUri",dt(y,f))})).apply(this,arguments)}function Vf(){return(Vf=(0,h.Z)(function*(y,f){const w={identifier:f,continueUri:Mr()?xr():"http://localhost"},{signinMethods:T}=yield Ff((0,k.m9)(y),w);return T||[]})).apply(this,arguments)}function Ys(){return(Ys=(0,h.Z)(function*(y,f){const g=(0,k.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&ia(g.auth,T,f);const{email:M}=yield Qg(g.auth,T);M!==y.email&&(yield y.reload())})).apply(this,arguments)}function Qu(){return(Qu=(0,h.Z)(function*(y,f,g){const w=(0,k.m9)(y),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&ia(w.auth,M,g);const{email:j}=yield $l(w.auth,M);j!==y.email&&(yield y.reload())})).apply(this,arguments)}function Uf(y,f){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,h.Z)(function*(y,f){return ln(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function In(){return(In=(0,h.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const w=(0,k.m9)(y),M={idToken:yield w.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},j=yield Yn(w,Uf(w.auth,M));w.displayName=j.displayName||null,w.photoURL=j.photoUrl||null;const te=w.providerData.find(({providerId:ke})=>"password"===ke);te&&(te.displayName=w.displayName,te.photoURL=w.photoURL),yield w._updateTokensIfNecessary(j)})).apply(this,arguments)}function Ja(y,f,g){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,h.Z)(function*(y,f,g){const{auth:w}=y,M={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(M.email=f),g&&(M.password=g);const j=yield Yn(y,Pf(w,M));yield y._updateTokensIfNecessary(j,!0)})).apply(this,arguments)}class Xa{constructor(f,g,w={}){this.isNewUser=f,this.providerId=g,this.profile=w}}class Pd extends Xa{constructor(f,g,w,T){super(f,g,w),this.username=T}}class tm extends Xa{constructor(f,g){super(f,"facebook.com",g)}}class Xl extends Pd{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Qs extends Xa{constructor(f,g){super(f,"google.com",g)}}class _n extends Pd{constructor(f,g,w){super(f,"twitter.com",g,w)}}function Xe(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Od(y){var f,g;if(!y)return null;const{providerId:w}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},M=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&(null==y?void 0:y.idToken)){const j=null===(g=null===(f=Eo(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(j)return new Xa(M,"anonymous"!==j&&"custom"!==j?j:null)}if(!w)return null;switch(w){case"facebook.com":return new tm(M,T);case"github.com":return new Xl(M,T);case"google.com":return new Qs(M,T);case"twitter.com":return new _n(M,T,y.screenName||null);case"custom":case"anonymous":return new Xa(M,null);default:return new Xa(M,w,T)}}(g)}class ki{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new ki("enroll",f)}static _fromMfaPendingCredential(f){return new ki("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,w;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return ki._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(w=f.multiFactorSession)||void 0===w?void 0:w.idToken)return ki._fromIdtoken(f.multiFactorSession.idToken)}return null}}class ua{constructor(f,g,w){this.session=f,this.hints=g,this.signInResolver=w}static _fromError(f,g){const w=Bn(f),T=g.customData._serverResponse,M=(T.mfaInfo||[]).map(te=>Zu._fromServerResponse(w,te));Me(T.mfaPendingCredential,w,"internal-error");const j=ki._fromMfaPendingCredential(T.mfaPendingCredential);return new ua(j,M,function(){var te=(0,h.Z)(function*(ke){const Re=yield ke._process(w,j);delete T.mfaInfo,delete T.mfaPendingCredential;const Qe=Object.assign(Object.assign({},T),{idToken:Re.idToken,refreshToken:Re.refreshToken});switch(g.operationType){case"signIn":const nt=yield hr._fromIdTokenResponse(w,g.operationType,Qe);return yield w._updateCurrentUser(nt.user),nt;case"reauthenticate":return Me(g.user,w,"internal-error"),hr._forOperation(g.user,g.operationType,Qe);default:en(w,"internal-error")}});return function(ke){return te.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,h.Z)(function*(){return g.signInResolver(f)})()}}function jf(y,f){return ln(y,"POST","/v2/accounts/mfaEnrollment:start",dt(y,f))}class tu{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>Zu._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new tu(f)}getSession(){var f=this;return(0,h.Z)(function*(){return ki._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var w=this;return(0,h.Z)(function*(){const T=f,M=yield w.getSession(),j=yield Yn(w.user,T._process(w.user.auth,M,g));return yield w.user._updateTokensIfNecessary(j),w.user.reload()})()}unenroll(f){var g=this;return(0,h.Z)(function*(){const w="string"==typeof f?f:f.uid,T=yield g.user.getIdToken(),M=yield Yn(g.user,function ec(y,f){return ln(y,"POST","/v2/accounts/mfaEnrollment:withdraw",dt(y,f))}(g.user.auth,{idToken:T,mfaEnrollmentId:w}));g.enrolledFactors=g.enrolledFactors.filter(({uid:j})=>j!==w),yield g.user._updateTokensIfNecessary(M);try{yield g.user.reload()}catch(j){if("auth/user-token-expired"!==j.code)throw j}})()}}const vs=new WeakMap,ii="__sak";class kd{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(ii,"1"),this.storage.removeItem(ii),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const la=(()=>{class y extends kd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Xi(){const y=(0,k.z$)();return bo(y)||Ki(y)}()&&function xi(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Ko(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const T=this.storage.getItem(w),M=this.localCache[w];T!==M&&g(w,M,T)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((te,ke,Re)=>{this.notifyListeners(te,Re)});const T=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const te=this.storage.getItem(T);if(g.newValue!==te)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!w)return}const M=()=>{const te=this.storage.getItem(T);!w&&this.localCache[T]===te||this.notifyListeners(T,te)},j=this.storage.getItem(T);!function fd(){return(0,k.w1)()&&10===document.documentMode}()||j===g.newValue||g.newValue===g.oldValue?M():setTimeout(M,10)}notifyListeners(g,w){this.localCache[g]=w;const T=this.listeners[g];if(T)for(const M of Array.from(T))M(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var T=()=>super._set,M=this;return(0,h.Z)(function*(){yield T().call(M,g,w),M.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,T=this;return(0,h.Z)(function*(){const M=yield w().call(T,g);return T.localCache[g]=JSON.stringify(M),M})()}_remove(g){var w=()=>super._remove,T=this;return(0,h.Z)(function*(){yield w().call(T,g),delete T.localCache[g]})()}}return y.type="LOCAL",y})(),kn=(()=>{class y extends kd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return y.type="SESSION",y})();let nc=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(M=>M.isListeningto(g));if(w)return w;const T=new y(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,h.Z)(function*(){const T=g,{eventId:M,eventType:j,data:te}=T.data,ke=w.handlersMap[j];if(!(null==ke?void 0:ke.size))return;T.ports[0].postMessage({status:"ack",eventId:M,eventType:j});const Re=Array.from(ke).map(function(){var nt=(0,h.Z)(function*(Ot){return Ot(T.origin,te)});return function(Ot){return nt.apply(this,arguments)}}()),Qe=yield function bn(y){return Promise.all(y.map(function(){var f=(0,h.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return f.apply(this,arguments)}}()))}(Re);T.ports[0].postMessage({status:"done",eventId:M,eventType:j,response:Qe})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Js(y="",f=10){let g="";for(let w=0;w<f;w++)g+=Math.floor(10*Math.random());return y+g}class ws{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,w=50){var T=this;return(0,h.Z)(function*(){const M="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let j,te;return new Promise((ke,Re)=>{const Qe=Js("",20);M.port1.start();const nt=setTimeout(()=>{Re(new Error("unsupported_event"))},w);te={messageChannel:M,onMessage(Ot){const qt=Ot;if(qt.data.eventId===Qe)switch(qt.data.status){case"ack":clearTimeout(nt),j=setTimeout(()=>{Re(new Error("timeout"))},3e3);break;case"done":clearTimeout(j),ke(qt.data.response);break;default:clearTimeout(nt),clearTimeout(j),Re(new Error("invalid_response"))}}},T.handlers.add(te),M.port1.addEventListener("message",te.onMessage),T.target.postMessage({eventType:f,eventId:Qe,data:g},[M.port2])}).finally(()=>{te&&T.removeMessageHandler(te)})})()}}function An(){return window}function ru(){return void 0!==An().WorkerGlobalScope&&"function"==typeof An().importScripts}function Cs(){return(Cs=(0,h.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const iu="firebaseLocalStorageDb",nl="firebaseLocalStorage",nm="fbase_key";class pn{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function rc(y,f){return y.transaction([nl],f?"readwrite":"readonly").objectStore(nl)}function $f(){const y=indexedDB.open(iu,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(nl,{keyPath:nm})}catch(T){g(T)}}),y.addEventListener("success",(0,h.Z)(function*(){const w=y.result;w.objectStoreNames.contains(nl)?f(w):(w.close(),yield function Fd(){const y=indexedDB.deleteDatabase(iu);return new pn(y).toPromise()}(),f(yield $f()))}))})}function Gf(y,f,g){return ic.apply(this,arguments)}function ic(){return(ic=(0,h.Z)(function*(y,f,g){const w=rc(y,!0).put({[nm]:f,value:g});return new pn(w).toPromise()})).apply(this,arguments)}function sc(){return(sc=(0,h.Z)(function*(y,f){const g=rc(y,!1).get(f),w=yield new pn(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Mo(y,f){const g=rc(y,!0).delete(f);return new pn(g).toPromise()}const Is=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,h.Z)(function*(){return g.db||(g.db=yield $f()),g.db})()}_withRetries(g){var w=this;return(0,h.Z)(function*(){let T=0;for(;;)try{const M=yield w._openDb();return yield g(M)}catch(M){if(T++>3)throw M;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,h.Z)(function*(){return ru()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,h.Z)(function*(){g.receiver=nc._getInstance(function Hf(){return ru()?self:null}()),g.receiver._subscribe("keyChanged",function(){var w=(0,h.Z)(function*(T,M){return{keyProcessed:(yield g._poll()).includes(M.key)}});return function(T,M){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,h.Z)(function*(T,M){return["keyChanged"]});return function(T,M){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,h.Z)(function*(){var w,T;if(g.activeServiceWorker=yield function Es(){return Cs.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new ws(g.activeServiceWorker);const M=yield g.sender._send("ping",{},800);!M||(null===(w=M[0])||void 0===w?void 0:w.fulfilled)&&(null===(T=M[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,h.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Xs(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const g=yield $f();return yield Gf(g,ii,"1"),yield Mo(g,ii),!0}catch(g){}return!1})()}_withPendingWrite(g){var w=this;return(0,h.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var T=this;return(0,h.Z)(function*(){return T._withPendingWrite((0,h.Z)(function*(){return yield T._withRetries(M=>Gf(M,g,w)),T.localCache[g]=w,T.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,h.Z)(function*(){const T=yield w._withRetries(M=>function qf(y,f){return sc.apply(this,arguments)}(M,g));return w.localCache[g]=T,T})()}_remove(g){var w=this;return(0,h.Z)(function*(){return w._withPendingWrite((0,h.Z)(function*(){return yield w._withRetries(T=>Mo(T,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,h.Z)(function*(){const w=yield g._withRetries(j=>{const te=rc(j,!1).getAll();return new pn(te).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const T=[],M=new Set;for(const{fbase_key:j,value:te}of w)M.add(j),JSON.stringify(g.localCache[j])!==JSON.stringify(te)&&(g.notifyListeners(j,te),T.push(j));for(const j of Object.keys(g.localCache))g.localCache[j]&&!M.has(j)&&(g.notifyListeners(j,null),T.push(j));return T})()}notifyListeners(g,w){this.localCache[g]=w;const T=this.listeners[g];if(T)for(const M of Array.from(T))M(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function rm(y,f){return ln(y,"POST","/v2/accounts/mfaSignIn:start",dt(y,f))}function es(){return(es=(0,h.Z)(function*(y){return(yield ln(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ou(y){return new Promise((f,g)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=f,w.onerror=T=>{const M=Wt("internal-error");M.customData=T,g(M)},w.type="text/javascript",w.charset="UTF-8",function Ld(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(w)})}function ca(y){return`__${y}${Math.floor(1e6*Math.random())}`}const da=1e12;class ha{constructor(f){this.auth=f,this.counter=da,this._widgets=new Map}render(f,g){const w=this.counter;return this._widgets.set(w,new Bd(f,this.auth.name,g||{})),this.counter++,w}reset(f){var g;const w=f||da;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(f){var g;return(null===(g=this._widgets.get(f||da))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,h.Z)(function*(){var w;return null===(w=g._widgets.get(f||da))||void 0===w||w.execute(),""})()}}class Bd{constructor(f,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;Me(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function rl(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const rr=ca("rcb"),fa=new Nt(3e4,6e4);class im{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!An().grecaptcha}load(f,g=""){return Me(function Ro(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(An().grecaptcha):new Promise((w,T)=>{const M=An().setTimeout(()=>{T(Wt(f,"network-request-failed"))},fa.get());An()[rr]=()=>{An().clearTimeout(M),delete An()[rr];const te=An().grecaptcha;if(!te)return void T(Wt(f,"internal-error"));const ke=te.render;te.render=(Re,Qe)=>{const nt=ke(Re,Qe);return this.counter++,nt},this.hostLanguage=g,w(te)},ou(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:rr,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(M),T(Wt(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!An().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class bs{load(f){return(0,h.Z)(function*(){return new ha(f)})()}clearedOneInstance(){}}const jd="recaptcha",Hd={theme:"light",type:"image"};class pa{constructor(f,g=Object.assign({},Hd),w){this.parameters=g,this.type=jd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Bn(w),this.isInvisible="invisible"===this.parameters.size,Me("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;Me(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new bs:new im,this.validateStartingState()}verify(){var f=this;return(0,h.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(g)||new Promise(M=>{const j=te=>{!te||(f.tokenChangeListeners.delete(j),M(te))};f.tokenChangeListeners.add(j),f.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){Me(!this.parameters.sitekey,this.auth,"argument-error"),Me(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Me("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof f)f(g);else if("string"==typeof f){const w=An()[f];"function"==typeof w&&w(g)}}}assertNotDestroyed(){Me(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,h.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,h.Z)(function*(){Me(Mr()&&!ru(),f.auth,"internal-error"),yield function $d(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function Li(y){return es.apply(this,arguments)}(f.auth);Me(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return Me(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class il{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Yt._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function qn(){return(qn=(0,h.Z)(function*(y,f,g){const w=Bn(y),T=yield ga(w,f,(0,k.m9)(g));return new il(T,M=>Wu(w,M))})).apply(this,arguments)}function tn(){return(tn=(0,h.Z)(function*(y,f,g){const w=(0,k.m9)(y);yield So(!1,w,"phone");const T=yield ga(w.auth,f,(0,k.m9)(g));return new il(T,M=>Ga(w,M))})).apply(this,arguments)}function au(){return(au=(0,h.Z)(function*(y,f,g){const w=(0,k.m9)(y),T=yield ga(w.auth,f,(0,k.m9)(g));return new il(T,M=>Oi(w,M))})).apply(this,arguments)}function ga(y,f,g){return sl.apply(this,arguments)}function sl(){return(sl=(0,h.Z)(function*(y,f,g){var w;const T=yield g.verify();try{let M;if(Me("string"==typeof T,y,"argument-error"),Me(g.type===jd,y,"argument-error"),M="string"==typeof f?{phoneNumber:f}:f,"session"in M){const j=M.session;if("phoneNumber"in M)return Me("enroll"===j.type,y,"internal-error"),(yield jf(y,{idToken:j.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{Me("signin"===j.type,y,"internal-error");const te=(null===(w=M.multiFactorHint)||void 0===w?void 0:w.uid)||M.multiFactorUid;return Me(te,y,"missing-multi-factor-info"),(yield rm(y,{mfaPendingCredential:j.credential,mfaEnrollmentId:te,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:j}=yield Ni(y,{phoneNumber:M.phoneNumber,recaptchaToken:T});return j}}finally{g._reset()}})).apply(this,arguments)}function ol(){return(ol=(0,h.Z)(function*(y,f){yield $u((0,k.m9)(y),f)})).apply(this,arguments)}let b=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Bn(g)}verifyPhoneNumber(g,w){return ga(this.auth,g,(0,k.m9)(w))}static credential(g,w){return Yt._fromVerification(g,w)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:T}=g;return w&&T?Yt._fromTokenResponse(w,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function D(y,f){return f?Ft(f):(Me(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class N extends Fa{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Ws(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Ws(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Ws(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function U(y){return Gu(y.auth,new N(y),y.bypassAuthState)}function Z(y){const{auth:f,user:g}=y;return Me(g,f,"internal-error"),ri(g,new N(y),y.bypassAuthState)}function ie(y){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,h.Z)(function*(y){const{auth:f,user:g}=y;return Me(g,f,"internal-error"),$u(g,new N(y),y.bypassAuthState)})).apply(this,arguments)}class Ze{constructor(f,g,w,T,M=!1){this.auth=f,this.resolver=w,this.user=T,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,h.Z)(function*(w,T){f.pendingPromise={resolve:w,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(M){f.reject(M)}});return function(w,T){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,h.Z)(function*(){const{urlResponse:w,sessionId:T,postBody:M,tenantId:j,error:te,type:ke}=f;if(te)return void g.reject(te);const Re={auth:g.auth,requestUri:w,sessionId:T,tenantId:j||void 0,postBody:M||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(ke)(Re))}catch(Qe){g.reject(Qe)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return U;case"linkViaPopup":case"linkViaRedirect":return ie;case"reauthViaPopup":case"reauthViaRedirect":return Z;default:en(this.auth,"internal-error")}}resolve(f){ot(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){ot(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ke=new Nt(2e3,1e4);function nn(){return(nn=(0,h.Z)(function*(y,f,g){const w=Bn(y);Xr(y,f,Xn);const T=D(w,g);return new mi(w,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function Wn(){return(Wn=(0,h.Z)(function*(y,f,g){const w=(0,k.m9)(y);Xr(w.auth,f,Xn);const T=D(w.auth,g);return new mi(w.auth,"reauthViaPopup",f,T,w).executeNotNull()})).apply(this,arguments)}function no(){return(no=(0,h.Z)(function*(y,f,g){const w=(0,k.m9)(y);Xr(w.auth,f,Xn);const T=D(w.auth,g);return new mi(w.auth,"linkViaPopup",f,T,w).executeNotNull()})).apply(this,arguments)}let mi=(()=>{class y extends Ze{constructor(g,w,T,M,j){super(g,w,M,j),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,h.Z)(function*(){const w=yield g.execute();return Me(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,h.Z)(function*(){ot(1===g.filter.length,"Popup operations only handle one event");const w=Js();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(Wt(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Wt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,T;this.pollId=(null===(T=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Wt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Ke.get())};g()}}return y.currentPopupAction=null,y})();const yi=new Map;class Ts extends Ze{constructor(f,g,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,h.Z)(function*(){let w=yi.get(g.auth._key());if(!w){try{const M=(yield function No(y,f){return uu.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;w=()=>Promise.resolve(M)}catch(T){w=()=>Promise.reject(T)}yi.set(g.auth._key(),w)}return g.bypassAuthState||yi.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,w=this;return(0,h.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(w,f);if("unknown"!==f.type){if(f.eventId){const T=yield w.auth._redirectUserForId(f.eventId);if(T)return w.user=T,g().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function uu(){return(uu=(0,h.Z)(function*(y,f){const g=$r(f),w=Vi(y);if(!(yield w._isAvailable()))return!1;const T="true"===(yield w._get(g));return yield w._remove(g),T})).apply(this,arguments)}function qd(y,f){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,h.Z)(function*(y,f){return Vi(y)._set($r(f),"true")})).apply(this,arguments)}function Vi(y){return Ft(y._redirectPersistence)}function $r(y){return Gt("pendingRedirect",y.config.apiKey,y.name)}function sm(){return(sm=(0,h.Z)(function*(y,f,g){const w=Bn(y);Xr(y,f,Xn);const T=D(w,g);return yield qd(T,w),T._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function ac(){return(ac=(0,h.Z)(function*(y,f,g){const w=(0,k.m9)(y);Xr(w.auth,f,Xn);const T=D(w.auth,g);yield qd(T,w.auth);const M=yield Kd(w);return T._openRedirect(w.auth,f,"reauthViaRedirect",M)})).apply(this,arguments)}function cu(){return(cu=(0,h.Z)(function*(y,f,g){const w=(0,k.m9)(y);Xr(w.auth,f,Xn);const T=D(w.auth,g);yield So(!1,w,f.providerId),yield qd(T,w.auth);const M=yield Kd(w);return T._openRedirect(w.auth,f,"linkViaRedirect",M)})).apply(this,arguments)}function am(){return(am=(0,h.Z)(function*(y,f){return yield Bn(y)._initializationPromise,Yf(y,f,!1)})).apply(this,arguments)}function Yf(y,f){return V_.apply(this,arguments)}function V_(){return(V_=(0,h.Z)(function*(y,f,g=!1){const w=Bn(y),T=D(w,f),j=yield new Ts(w,T,g).execute();return j&&!g&&(delete j.user._redirectEventId,yield w._persistUserIfCurrent(j.user),yield w._setRedirectUser(null,f)),j})).apply(this,arguments)}function Kd(y){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,h.Z)(function*(y){const f=Js(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class Qf{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(g=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function B_(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jf(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var w;if(f.error&&!Jf(f)){const T=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(Wt(this.auth,T))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const w=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qd(f))}saveEventToCache(f){this.cachedEventUids.add(Qd(f)),this.lastProcessedEventTime=Date.now()}}function Qd(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Jf({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function um(y){return ul.apply(this,arguments)}function ul(){return(ul=(0,h.Z)(function*(y,f={}){return ln(y,"GET","/v1/projects",f)})).apply(this,arguments)}const uc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jd=/^https?/;function du(){return(du=(0,h.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield um(y);for(const g of f)try{if(Xf(g))return}catch(w){}en(y,"unauthorized-domain")})).apply(this,arguments)}function Xf(y){const f=xr(),{protocol:g,hostname:w}=new URL(f);if(y.startsWith("chrome-extension://")){const j=new URL(y);return""===j.hostname&&""===w?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&j.hostname===w}if(!Jd.test(g))return!1;if(uc.test(y))return w===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(w)}const ep=new Nt(3e4,6e4);function j_(){const y=An().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Xd=null;function CE(y){return Xd=Xd||function EE(y){return new Promise((f,g)=>{var w,T,M;function j(){j_(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{j_(),g(Wt(y,"network-request-failed"))},timeout:ep.get()})}if(null===(T=null===(w=An().gapi)||void 0===w?void 0:w.iframes)||void 0===T?void 0:T.Iframe)f(gapi.iframes.getContext());else{if(!(null===(M=An().gapi)||void 0===M?void 0:M.load)){const te=ca("iframefcb");return An()[te]=()=>{gapi.load?j():g(Wt(y,"network-request-failed"))},ou(`https://apis.google.com/js/api.js?onload=${te}`).catch(ke=>g(ke))}j()}}).catch(f=>{throw Xd=null,f})}(y),Xd}const tp=new Nt(5e3,15e3),$_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},np=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bE(y){const f=y.config;Me(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?lt(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:y.name,v:se.SDK_VERSION},T=np.get(y.config.apiHost);T&&(w.eid=T);const M=y._getFrameworks();return M.length&&(w.fw=M.join(",")),`${g}?${(0,k.xO)(w).slice(1)}`}function ya(){return ya=(0,h.Z)(function*(y){const f=yield CE(y),g=An().gapi;return Me(g,y,"internal-error"),f.open({where:document.body,url:bE(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$_,dontclear:!0},w=>new Promise(function(){var T=(0,h.Z)(function*(M,j){yield w.restyle({setHideOnLeave:!1});const te=Wt(y,"network-request-failed"),ke=An().setTimeout(()=>{j(te)},tp.get());function Re(){An().clearTimeout(ke),M(w)}w.ping(Re).then(Re,()=>{j(te)})});return function(M,j){return T.apply(this,arguments)}}()))}),ya.apply(this,arguments)}const lc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class _a{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function fu(y,f,g,w,T,M){Me(y.config.authDomain,y,"auth-domain-config-required"),Me(y.config.apiKey,y,"invalid-api-key");const j={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:w,v:se.SDK_VERSION,eventId:T};if(f instanceof Xn){f.setDefaultLanguage(y.languageCode),j.providerId=f.providerId||"",(0,k.xb)(f.getCustomParameters())||(j.customParameters=JSON.stringify(f.getCustomParameters()));for(const[ke,Re]of Object.entries(M||{}))j[ke]=Re}if(f instanceof jn){const ke=f.getScopes().filter(Re=>""!==Re);ke.length>0&&(j.scopes=ke.join(","))}y.tenantId&&(j.tid=y.tenantId);const te=j;for(const ke of Object.keys(te))void 0===te[ke]&&delete te[ke];return`${function nh({config:y}){return y.emulator?lt(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,k.xO)(te).slice(1)}`}const rh="webStorageSupport";class ih extends class q_{constructor(f){this.factorId=f}_process(f,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,w);case"signin":return this._finalizeSignIn(f,g.credential);default:return vr("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new ih(f)}_finalizeEnroll(f,g,w){return function eu(y,f){return ln(y,"POST","/v2/accounts/mfaEnrollment:finalize",dt(y,f))}(f,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function zf(y,f){return ln(y,"POST","/v2/accounts/mfaSignIn:finalize",dt(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let dm=(()=>{class y{constructor(){}static assertion(g){return ih._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var rp="@firebase/auth";class va{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,h.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(w=>{var T;f((null===(T=w)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function rn(){return window}function oh(){return(oh=(0,h.Z)(function*(y,f,g){var w;const{BuildInfo:T}=rn();ot(f.sessionId,"AuthEvent did not contain a session ID");const M=yield K_(f.sessionId),j={};return Ki()?j.ibi=T.packageName:Zi()?j.apn=T.packageName:en(y,"operation-not-supported-in-this-environment"),T.displayName&&(j.appDisplayName=T.displayName),j.sessionId=M,fu(y,g,f.type,void 0,null!==(w=f.eventId)&&void 0!==w?w:void 0,j)})).apply(this,arguments)}function fm(){return(fm=(0,h.Z)(function*(y){const{BuildInfo:f}=rn(),g={};Ki()?g.iosBundleId=f.packageName:Zi()?g.androidPackageName=f.packageName:en(y,"operation-not-supported-in-this-environment"),yield um(y,g)})).apply(this,arguments)}function ah(){return(ah=(0,h.Z)(function*(y,f,g){const{cordova:w}=rn();let T=()=>{};try{yield new Promise((M,j)=>{let te=null;function ke(){var nt;M();const Ot=null===(nt=w.plugins.browsertab)||void 0===nt?void 0:nt.close;"function"==typeof Ot&&Ot(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Re(){te||(te=window.setTimeout(()=>{j(Wt(y,"redirect-cancelled-by-user"))},2e3))}function Qe(){"visible"===(null==document?void 0:document.visibilityState)&&Re()}f.addPassiveListener(ke),document.addEventListener("resume",Re,!1),Zi()&&document.addEventListener("visibilitychange",Qe,!1),T=()=>{f.removePassiveListener(ke),document.removeEventListener("resume",Re,!1),document.removeEventListener("visibilitychange",Qe,!1),te&&window.clearTimeout(te)}})}finally{T()}})).apply(this,arguments)}function K_(y){return fc.apply(this,arguments)}function fc(){return(fc=(0,h.Z)(function*(y){const f=cl(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function cl(y){if(ot(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let w=0;w<y.length;w++)g[w]=y.charCodeAt(w);return g}!function ip(y){(0,se._registerComponent)(new ce.wA("auth",(f,{options:g})=>{const w=f.getProvider("app").getImmediate(),{apiKey:T,authDomain:M}=w.options;return(j=>{Me(T&&!T.includes(":"),"invalid-api-key",{appName:j.name}),Me(!(null==M?void 0:M.includes(":")),"argument-error",{appName:j.name});const te={apiKey:T,authDomain:M,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mi(y)},ke=new pd(j,te);return function Gs(y,f){const g=(null==f?void 0:f.persistence)||[],w=(Array.isArray(g)?g:[g]).map(Ft);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(w,null==f?void 0:f.popupRedirectResolver)}(ke,g),ke})(w)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,w)=>{f.getProvider("auth-internal").initialize()})),(0,se._registerComponent)(new ce.wA("auth-internal",f=>{const g=Bn(f.getProvider("auth").getImmediate());return new va(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,se.registerVersion)(rp,"0.19.9",function sh(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,se.registerVersion)(rp,"0.19.9","esm2017")}("Browser");class pc extends Qf{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,h.Z)(function*(){yield f.initPromise})()}}function Cr(y){return pu.apply(this,arguments)}function pu(){return(pu=(0,h.Z)(function*(y){const f=yield lh()._get(dl(y));return f&&(yield lh()._remove(dl(y))),f})).apply(this,arguments)}function Q_(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const w=Math.floor(Math.random()*f.length);y.push(f.charAt(w))}return y.join("")}function lh(){return Ft(la)}function dl(y){return Gt("authEvent",y.config.apiKey,y.name)}function ch(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,k.zd)(g.join("?"))}function dh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Wt("no-auth-event")}}function hh(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function mm(y=(0,k.z$)()){return!("file:"!==hh()&&"ionic:"!==hh()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function hp(){try{const y=self.localStorage,f=Js();if(y)return y.setItem(f,"1"),y.removeItem(f),!function ym(y=(0,k.z$)()){return function ev(){return(0,k.w1)()&&11===(null==document?void 0:document.documentMode)}()||function tv(y=(0,k.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,k.hl)()}catch(y){return _m()&&(0,k.hl)()}return!1}function _m(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function mc(){return(function hl(){return"http:"===hh()||"https:"===hh()}()||(0,k.ru)()||mm())&&!function dp(){return(0,k.b$)()||(0,k.UG)()}()&&hp()&&!_m()}function vm(){return mm()&&"undefined"!=typeof document}function yc(){return(yc=(0,h.Z)(function*(){return!!vm()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Ui={LOCAL:"local",NONE:"none",SESSION:"session"},fl=Me,gu="persistence";function Em(y){return Cm.apply(this,arguments)}function Cm(){return(Cm=(0,h.Z)(function*(y){yield y._initializationPromise;const f=Im(),g=Gt(gu,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function Im(){var y;try{return(null===(y=function _c(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const ro=Me;class xs{constructor(){this.browserResolver=Ft(class G_{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kn,this._completeRedirectFn=Yf}_openPopup(f,g,w,T){var M=this;return(0,h.Z)(function*(){var j;ot(null===(j=M.eventManagers[f._key()])||void 0===j?void 0:j.manager,"_initialize() not called before _openPopup()");const te=fu(f,g,w,xr(),T);return function eh(y,f,g,w=500,T=600){const M=Math.max((window.screen.availHeight-T)/2,0).toString(),j=Math.max((window.screen.availWidth-w)/2,0).toString();let te="";const ke=Object.assign(Object.assign({},lc),{width:w.toString(),height:T.toString(),top:M,left:j}),Re=(0,k.z$)().toLowerCase();g&&(te=Do(Re)?"_blank":g),Dt(Re)&&(f=f||"http://localhost",ke.scrollbars="yes");const Qe=Object.entries(ke).reduce((Ot,[qt,Bi])=>`${Ot}${qt}=${Bi},`,"");if(function cn(y=(0,k.z$)()){var f;return Ki(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Re)&&"_self"!==te)return function DE(y,f){const g=document.createElement("a");g.href=y,g.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(f||"",te),new _a(null);const nt=window.open(f||"",te,Qe);Me(nt,y,"popup-blocked");try{nt.focus()}catch(Ot){}return new _a(nt)}(f,te,Js())})()}_openRedirect(f,g,w,T){var M=this;return(0,h.Z)(function*(){return yield M._originValidation(f),function xo(y){An().location.href=y}(fu(f,g,w,xr(),T)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:T,promise:M}=this.eventManagers[g];return T?Promise.resolve(T):(ot(M,"If manager is not set, promise should be"),M)}const w=this.initAndGetManager(f);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(f){var g=this;return(0,h.Z)(function*(){const w=yield function lm(y){return ya.apply(this,arguments)}(f),T=new Qf(f);return w.register("authEvent",M=>(Me(null==M?void 0:M.authEvent,f,"invalid-auth-event"),{status:T.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:T},g.iframes[f._key()]=w,T})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(rh,{type:rh},T=>{var M;const j=null===(M=null==T?void 0:T[0])||void 0===M?void 0:M[rh];void 0!==j&&g(!!j),en(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function As(y){return du.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Ko()||bo()||Ki()}}),this.cordovaResolver=Ft(class X_{constructor(){this._redirectPersistence=kn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Yf}_initialize(f){var g=this;return(0,h.Z)(function*(){const w=f._key();let T=g.eventManagers.get(w);return T||(T=new pc(f),g.eventManagers.set(w,T),g.attachCallbackListeners(f,T)),T})()}_openPopup(f){en(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,w,T){var M=this;return(0,h.Z)(function*(){!function Z_(y){var f,g,w,T,M,j,te,ke,Re,Qe;const nt=rn();Me("function"==typeof(null===(f=null==nt?void 0:nt.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Me(void 0!==(null===(g=null==nt?void 0:nt.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Me("function"==typeof(null===(M=null===(T=null===(w=null==nt?void 0:nt.cordova)||void 0===w?void 0:w.plugins)||void 0===T?void 0:T.browsertab)||void 0===M?void 0:M.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Me("function"==typeof(null===(ke=null===(te=null===(j=null==nt?void 0:nt.cordova)||void 0===j?void 0:j.plugins)||void 0===te?void 0:te.browsertab)||void 0===ke?void 0:ke.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Me("function"==typeof(null===(Qe=null===(Re=null==nt?void 0:nt.cordova)||void 0===Re?void 0:Re.InAppBrowser)||void 0===Qe?void 0:Qe.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const j=yield M._initialize(f);yield j.initialized(),j.resetRedirect(),function lu(){yi.clear()}(),yield M._originValidation(f);const te=function pm(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Q_(),postBody:null,tenantId:y.tenantId,error:Wt(y,"no-auth-event")}}(f,w,T);yield function Y_(y,f){return lh()._set(dl(y),f)}(f,te);const ke=yield function hm(y,f,g){return oh.apply(this,arguments)}(f,te,g),Re=yield function AE(y){const{cordova:f}=rn();return new Promise(g=>{f.plugins.browsertab.isAvailable(w=>{let T=null;w?f.plugins.browsertab.openUrl(y):T=f.InAppBrowser.open(y,function ti(y=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(T)})})}(ke);return function z_(y,f,g){return ah.apply(this,arguments)}(f,j,Re)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function W_(y){return fm.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:w,handleOpenURL:T,BuildInfo:M}=rn(),j=setTimeout((0,h.Z)(function*(){yield Cr(f),g.onEvent(dh())}),500),te=function(){var Qe=(0,h.Z)(function*(nt){clearTimeout(j);const Ot=yield Cr(f);let qt=null;Ot&&(null==nt?void 0:nt.url)&&(qt=function uh(y,f){var g,w;const T=function op(y){const f=ch(y),g=f.link?decodeURIComponent(f.link):void 0,w=ch(g).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return ch(T).link||T||w||g||y}(f);if(T.includes("/__/auth/callback")){const M=ch(T),j=M.firebaseError?function J_(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(M.firebaseError)):null,te=null===(w=null===(g=null==j?void 0:j.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],ke=te?Wt(te):null;return ke?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:ke,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(Ot,nt.url)),g.onEvent(qt||dh())});return function(Ot){return Qe.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,te);const ke=T,Re=`${M.packageName.toLowerCase()}://`;rn().handleOpenURL=function(){var Qe=(0,h.Z)(function*(nt){if(nt.toLowerCase().startsWith(Re)&&te({url:nt}),"function"==typeof ke)try{ke(nt)}catch(Ot){console.error(Ot)}});return function(nt){return Qe.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=kn,this._completeRedirectFn=Yf}_initialize(f){var g=this;return(0,h.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,w,T){var M=this;return(0,h.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(f,g,w,T)})()}_openRedirect(f,g,w,T){var M=this;return(0,h.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(f,g,w,T)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return vm()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ro(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,h.Z)(function*(){if(f.underlyingResolver)return;const g=yield function wm(){return yc.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function ph(y){return y.unwrap()}function Dm(y){return fp(y)}function fp(y){const{_tokenResponse:f}=y instanceof k.ZR?y.customData:y;if(!f)return null;if(!(y instanceof k.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return b.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let w;switch(g){case"google.com":w=Qi;break;case"facebook.com":w=Jo;break;case"github.com":w=Vr;break;case"twitter.com":w=Zs;break;default:const{oauthIdToken:T,oauthAccessToken:M,oauthTokenSecret:j,pendingToken:te,nonce:ke}=f;return M||j||T||te?te?g.startsWith("saml.")?Ji._create(g,te):Nr._fromParams({providerId:g,signInMethod:g,pendingToken:te,idToken:T,accessToken:M}):new gs(g).credential({idToken:T,accessToken:M,rawNonce:ke}):null}return y instanceof k.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function Gr(y,f){return f.catch(g=>{throw g instanceof k.ZR&&function pl(y,f){var g;const w=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new nv(y,function Fi(y,f){var g;const w=(0,k.m9)(y),T=f;return Me(f.customData.operationType,w,"argument-error"),Me(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),ua._fromError(w,T)}(y,f));else if(w){const T=fp(f),M=f;T&&(M.credential=T,M.tenantId=w.tenantId||void 0,M.email=w.email||void 0,M.phoneNumber=w.phoneNumber||void 0)}}(y,g),g}).then(g=>{const T=g.user;return{operationType:g.operationType,credential:Dm(g),additionalUserInfo:Xe(g),user:Po.getOrCreate(T)}})}function gh(y,f){return mh.apply(this,arguments)}function mh(){return(mh=(0,h.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:w=>Gr(y,g.confirm(w))}})).apply(this,arguments)}class nv{constructor(f,g){this.resolver=g,this.auth=function bm(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Gr(ph(this.auth),this.resolver.resolveSignIn(f))}}class Po{constructor(f){this._delegate=f,this.multiFactor=function nu(y){const f=(0,k.m9)(y);return vs.has(f)||vs.set(f,tu._fromUser(f)),vs.get(f)}(f)}static getOrCreate(f){return Po.USER_MAP.has(f)||Po.USER_MAP.set(f,new Po(f)),Po.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,h.Z)(function*(){return Gr(g.auth,Ga(g._delegate,f))})()}linkWithPhoneNumber(f,g){var w=this;return(0,h.Z)(function*(){return gh(w.auth,function Zf(y,f,g){return tn.apply(this,arguments)}(w._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,h.Z)(function*(){return Gr(g.auth,function gn(y,f,g){return no.apply(this,arguments)}(g._delegate,f,xs))})()}linkWithRedirect(f){var g=this;return(0,h.Z)(function*(){return yield Em(Bn(g.auth)),function zd(y,f,g){return function Zd(y,f,g){return cu.apply(this,arguments)}(y,f,g)}(g._delegate,f,xs)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,h.Z)(function*(){return Gr(g.auth,Oi(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return gh(this.auth,function Ds(y,f,g){return au.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return Gr(this.auth,function Hr(y,f,g){return Wn.apply(this,arguments)}(this._delegate,f,xs))}reauthenticateWithRedirect(f){var g=this;return(0,h.Z)(function*(){return yield Em(Bn(g.auth)),function Kf(y,f,g){return function om(y,f,g){return ac.apply(this,arguments)}(y,f,g)}(g._delegate,f,xs)})()}sendEmailVerification(f){return function Jl(y,f){return Ys.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,h.Z)(function*(){return yield function xe(y,f){return xt.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function Bf(y,f){return Ja((0,k.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function em(y,f){return Ja((0,k.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Gd(y,f){return ol.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function _s(y,f){return In.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function Yu(y,f,g){return Qu.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Po.USER_MAP=new WeakMap;const io=Me;let yh=(()=>{class y{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=g.options;io(T,"invalid-api-key",{appName:g.name}),io(T,"invalid-api-key",{appName:g.name});const M="undefined"!=typeof window?xs:void 0;this._delegate=w.initialize({options:{persistence:SE(T,g.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(_r),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Po.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function Yi(y,f,g){const w=Bn(y);Me(w._canInitEmulator,w,"emulator-config-failed"),Me(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const T=!!(null==g?void 0:g.disableWarnings),M=gd(f),{host:j,port:te}=function Kg(y){const f=gd(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(w);if(T){const M=T[1];return{host:M,port:Nf(w.substr(M.length+1))}}{const[M,j]=w.split(":");return{host:M,port:Nf(j)}}}(f);w.config.emulator={url:`${M}//${j}${null===te?"":`:${te}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:j,port:te,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Ri(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,w)}applyActionCode(g){return function Kl(y,f){return sa.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return xd(this._delegate,g)}confirmPasswordReset(g,w){return function Za(y,f,g){return Zl.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var T=this;return(0,h.Z)(function*(){return Gr(T._delegate,function Ku(y,f,g){return Md.apply(this,arguments)}(T._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Rd(y,f){return Vf.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Cn(y,f){const g=an.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,h.Z)(function*(){io(mc(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function al(y,f){return am.apply(this,arguments)}(g._delegate,xs);return w?Gr(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function up(y,f){Bn(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,w,T){const{next:M,error:j,complete:te}=Tm(g,w,T);return this._delegate.onAuthStateChanged(M,j,te)}onIdTokenChanged(g,w,T){const{next:M,error:j,complete:te}=Tm(g,w,T);return this._delegate.onIdTokenChanged(M,j,te)}sendSignInLinkToEmail(g,w){return function fr(y,f,g){return Hn.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function Wa(y,f,g){return za.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,h.Z)(function*(){let T;switch(function Ss(y,f){fl(Object.values(Ui).includes(f),y,"invalid-persistence-type"),(0,k.b$)()?fl(f!==Ui.SESSION,y,"unsupported-persistence-type"):(0,k.UG)()?fl(f===Ui.NONE,y,"unsupported-persistence-type"):_m()?fl(f===Ui.NONE||f===Ui.LOCAL&&(0,k.hl)(),y,"unsupported-persistence-type"):fl(f===Ui.NONE||hp(),y,"unsupported-persistence-type")}(w._delegate,g),g){case Ui.SESSION:T=kn;break;case Ui.LOCAL:T=(yield Ft(Is)._isAvailable())?Is:la;break;case Ui.NONE:T=Lr;break;default:return en("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Gr(this._delegate,function $a(y){return ea.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Gr(this._delegate,Wu(this._delegate,g))}signInWithCustomToken(g){return Gr(this._delegate,function Sd(y,f){return ra.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return Gr(this._delegate,function Xg(y,f,g){return Wu((0,k.m9)(y),Qo.credential(f,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return Gr(this._delegate,function Ql(y,f,g){return Qa.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return gh(this._delegate,function to(y,f,g){return qn.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,h.Z)(function*(){return io(mc(),w._delegate,"operation-not-supported-in-this-environment"),Gr(w._delegate,function Lt(y,f,g){return nn.apply(this,arguments)}(w._delegate,g,xs))})()}signInWithRedirect(g){var w=this;return(0,h.Z)(function*(){return io(mc(),w._delegate,"operation-not-supported-in-this-environment"),yield Em(w._delegate),function F_(y,f,g){return function L_(y,f,g){return sm.apply(this,arguments)}(y,f,g)}(w._delegate,g,xs)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Yl(y,f){return Ya.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Ui,y})();function Tm(y,f,g){let w=y;"function"!=typeof y&&({next:w,error:f,complete:g}=y);const T=w;return{next:j=>T(j&&Po.getOrCreate(j)),error:f,complete:g}}function SE(y,f){const g=function fh(y,f){const g=Im();if(!g)return[];const w=Gt(gu,y,f);switch(g.getItem(w)){case Ui.NONE:return[Lr];case Ui.LOCAL:return[Is,kn];case Ui.SESSION:return[kn];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(Is)&&g.push(Is),"undefined"!=typeof window)for(const w of[la,kn])g.includes(w)||g.push(w);return g.includes(Lr)||g.push(Lr),g}class _h{constructor(){this.providerId="phone",this._delegate=new b(ph(Q.Z.auth()))}static credential(f,g){return b.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}_h.PHONE_SIGN_IN_METHOD=b.PHONE_SIGN_IN_METHOD,_h.PROVIDER_ID=b.PROVIDER_ID;const wa=Me;class Ms{constructor(f,g,w=Q.Z.app()){var T;wa(null===(T=w.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new pa(f,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function rv(y){y.INTERNAL.registerComponent(new ce.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),w=f.getProvider("auth");return new yh(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Qo,FacebookAuthProvider:Jo,GithubAuthProvider:Vr,GoogleAuthProvider:Qi,OAuthProvider:gs,SAMLAuthProvider:Ur,PhoneAuthProvider:_h,PhoneMultiFactorGenerator:dm,RecaptchaVerifier:Ms,TwitterAuthProvider:Zs,Auth:yh,AuthCredential:Fa,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.9")}(Q.Z)},2940:function(ut,be){!function(F){"use strict";function h(K){return Array.prototype.slice.call(K)}function Q(K){return new Promise(function(ne,ge){K.onsuccess=function(){ne(K.result)},K.onerror=function(){ge(K.error)}})}function k(K,ne,ge){var Te,ye=new Promise(function(He,Ae){Q(Te=K[ne].apply(K,ge)).then(He,Ae)});return ye.request=Te,ye}function se(K,ne,ge){var Te=k(K,ne,ge);return Te.then(function(ye){if(ye)return new H(ye,Te.request)})}function re(K,ne,ge){ge.forEach(function(Te){Object.defineProperty(K.prototype,Te,{get:function(){return this[ne][Te]},set:function(ye){this[ne][Te]=ye}})})}function de(K,ne,ge,Te){Te.forEach(function(ye){ye in ge.prototype&&(K.prototype[ye]=function(){return k(this[ne],ye,arguments)})})}function oe(K,ne,ge,Te){Te.forEach(function(ye){ye in ge.prototype&&(K.prototype[ye]=function(){return this[ne][ye].apply(this[ne],arguments)})})}function ae(K,ne,ge,Te){Te.forEach(function(ye){ye in ge.prototype&&(K.prototype[ye]=function(){return se(this[ne],ye,arguments)})})}function le(K){this._index=K}function H(K,ne){this._cursor=K,this._request=ne}function $(K){this._store=K}function X(K){this._tx=K,this.complete=new Promise(function(ne,ge){K.oncomplete=function(){ne()},K.onerror=function(){ge(K.error)},K.onabort=function(){ge(K.error)}})}function je(K,ne,ge){this._db=K,this.oldVersion=ne,this.transaction=new X(ge)}function De(K){this._db=K}re(le,"_index",["name","keyPath","multiEntry","unique"]),de(le,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ae(le,"_index",IDBIndex,["openCursor","openKeyCursor"]),re(H,"_cursor",["direction","key","primaryKey","value"]),de(H,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(K){K in IDBCursor.prototype&&(H.prototype[K]=function(){var ne=this,ge=arguments;return Promise.resolve().then(function(){return ne._cursor[K].apply(ne._cursor,ge),Q(ne._request).then(function(Te){if(Te)return new H(Te,ne._request)})})})}),$.prototype.createIndex=function(){return new le(this._store.createIndex.apply(this._store,arguments))},$.prototype.index=function(){return new le(this._store.index.apply(this._store,arguments))},re($,"_store",["name","keyPath","indexNames","autoIncrement"]),de($,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ae($,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),oe($,"_store",IDBObjectStore,["deleteIndex"]),X.prototype.objectStore=function(){return new $(this._tx.objectStore.apply(this._tx,arguments))},re(X,"_tx",["objectStoreNames","mode"]),oe(X,"_tx",IDBTransaction,["abort"]),je.prototype.createObjectStore=function(){return new $(this._db.createObjectStore.apply(this._db,arguments))},re(je,"_db",["name","version","objectStoreNames"]),oe(je,"_db",IDBDatabase,["deleteObjectStore","close"]),De.prototype.transaction=function(){return new X(this._db.transaction.apply(this._db,arguments))},re(De,"_db",["name","version","objectStoreNames"]),oe(De,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(K){[$,le].forEach(function(ne){K in ne.prototype&&(ne.prototype[K.replace("open","iterate")]=function(){var ge=h(arguments),Te=ge[ge.length-1],ye=this._store||this._index,He=ye[K].apply(ye,ge.slice(0,-1));He.onsuccess=function(){Te(He.result)}})})}),[le,$].forEach(function(K){K.prototype.getAll||(K.prototype.getAll=function(ne,ge){var Te=this,ye=[];return new Promise(function(He){Te.iterateCursor(ne,function(Ae){Ae?(ye.push(Ae.value),void 0===ge||ye.length!=ge?Ae.continue():He(ye)):He(ye)})})})}),F.openDb=function Pe(K,ne,ge){var Te=k(indexedDB,"open",[K,ne]),ye=Te.request;return ye&&(ye.onupgradeneeded=function(He){ge&&ge(new je(ye.result,He.oldVersion,ye.transaction))}),Te.then(function(He){return new De(He)})},F.deleteDb=function Be(K){return k(indexedDB,"deleteDatabase",[K])},Object.defineProperty(F,"__esModule",{value:!0})}(be)},8306:(ut,be,F)=>{"use strict";F.d(be,{y:()=>H});var h=F(930),Q=F(727),k=F(8822),se=F(4671);var oe=F(2416),ae=F(576),le=F(2806);let H=(()=>{class De{constructor(Be){Be&&(this._subscribe=Be)}lift(Be){const K=new De;return K.source=this,K.operator=Be,K}subscribe(Be,K,ne){const ge=function je(De){return De&&De instanceof h.Lv||function X(De){return De&&(0,ae.m)(De.next)&&(0,ae.m)(De.error)&&(0,ae.m)(De.complete)}(De)&&(0,Q.Nn)(De)}(Be)?Be:new h.Hp(Be,K,ne);return(0,le.x)(()=>{const{operator:Te,source:ye}=this;ge.add(Te?Te.call(ge,ye):ye?this._subscribe(ge):this._trySubscribe(ge))}),ge}_trySubscribe(Be){try{return this._subscribe(Be)}catch(K){Be.error(K)}}forEach(Be,K){return new(K=$(K))((ne,ge)=>{let Te;Te=this.subscribe(ye=>{try{Be(ye)}catch(He){ge(He),null==Te||Te.unsubscribe()}},ge,ne)})}_subscribe(Be){var K;return null===(K=this.source)||void 0===K?void 0:K.subscribe(Be)}[k.L](){return this}pipe(...Be){return function de(De){return 0===De.length?se.y:1===De.length?De[0]:function(Be){return De.reduce((K,ne)=>ne(K),Be)}}(Be)(this)}toPromise(Be){return new(Be=$(Be))((K,ne)=>{let ge;this.subscribe(Te=>ge=Te,Te=>ne(Te),()=>K(ge))})}}return De.create=Pe=>new De(Pe),De})();function $(De){var Pe;return null!==(Pe=null!=De?De:oe.v.Promise)&&void 0!==Pe?Pe:Promise}},7579:(ut,be,F)=>{"use strict";F.d(be,{x:()=>oe});var h=F(8306),Q=F(727);const se=(0,F(3888).d)(le=>function(){le(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=F(8737),de=F(2806);let oe=(()=>{class le extends h.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const X=new ae(this,this);return X.operator=$,X}_throwIfClosed(){if(this.closed)throw new se}next($){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const X=this.observers.slice();for(const je of X)je.next($)}})}error($){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:X}=this;for(;X.length;)X.shift().error($)}})}complete(){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:X,isStopped:je,observers:De}=this;return X||je?Q.Lc:(De.push($),new Q.w0(()=>(0,re.P)(De,$)))}_checkFinalizedStatuses($){const{hasError:X,thrownError:je,isStopped:De}=this;X?$.error(je):De&&$.complete()}asObservable(){const $=new h.y;return $.source=this,$}}return le.create=(H,$)=>new ae(H,$),le})();class ae extends oe{constructor(H,$){super(),this.destination=H,this.source=$}next(H){var $,X;null===(X=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===X||X.call($,H)}error(H){var $,X;null===(X=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===X||X.call($,H)}complete(){var H,$;null===($=null===(H=this.destination)||void 0===H?void 0:H.complete)||void 0===$||$.call(H)}_subscribe(H){var $,X;return null!==(X=null===($=this.source)||void 0===$?void 0:$.subscribe(H))&&void 0!==X?X:Q.Lc}}},930:(ut,be,F)=>{"use strict";F.d(be,{Hp:()=>je,Lv:()=>X});var h=F(576),Q=F(727),k=F(2416),se=F(7849),re=F(5032);const de=le("C",void 0,void 0);function le(ne,ge,Te){return{kind:ne,value:ge,error:Te}}var H=F(3410),$=F(2806);class X extends Q.w0{constructor(ge){super(),this.isStopped=!1,ge?(this.destination=ge,(0,Q.Nn)(ge)&&ge.add(this)):this.destination=K}static create(ge,Te,ye){return new je(ge,Te,ye)}next(ge){this.isStopped?Be(function ae(ne){return le("N",ne,void 0)}(ge),this):this._next(ge)}error(ge){this.isStopped?Be(function oe(ne){return le("E",void 0,ne)}(ge),this):(this.isStopped=!0,this._error(ge))}complete(){this.isStopped?Be(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ge){this.destination.next(ge)}_error(ge){try{this.destination.error(ge)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class je extends X{constructor(ge,Te,ye){let He;if(super(),(0,h.m)(ge))He=ge;else if(ge){let Ae;({next:He,error:Te,complete:ye}=ge),this&&k.v.useDeprecatedNextContext?(Ae=Object.create(ge),Ae.unsubscribe=()=>this.unsubscribe()):Ae=ge,He=null==He?void 0:He.bind(Ae),Te=null==Te?void 0:Te.bind(Ae),ye=null==ye?void 0:ye.bind(Ae)}this.destination={next:He?De(He):re.Z,error:De(null!=Te?Te:Pe),complete:ye?De(ye):re.Z}}}function De(ne,ge){return(...Te)=>{try{ne(...Te)}catch(ye){k.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(ye):(0,se.h)(ye)}}}function Pe(ne){throw ne}function Be(ne,ge){const{onStoppedNotification:Te}=k.v;Te&&H.z.setTimeout(()=>Te(ne,ge))}const K={closed:!0,next:re.Z,error:Pe,complete:re.Z}},727:(ut,be,F)=>{"use strict";F.d(be,{Lc:()=>de,w0:()=>re,Nn:()=>oe});var h=F(576);const k=(0,F(3888).d)(le=>function($){le(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((X,je)=>`${je+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var se=F(8737);class re{constructor(H){this.initialTeardown=H,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let H;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const De of $)De.remove(this);else $.remove(this);const{initialTeardown:X}=this;if((0,h.m)(X))try{X()}catch(De){H=De instanceof k?De.errors:[De]}const{_teardowns:je}=this;if(je){this._teardowns=null;for(const De of je)try{ae(De)}catch(Pe){H=null!=H?H:[],Pe instanceof k?H=[...H,...Pe.errors]:H.push(Pe)}}if(H)throw new k(H)}}add(H){var $;if(H&&H!==this)if(this.closed)ae(H);else{if(H instanceof re){if(H.closed||H._hasParent(this))return;H._addParent(this)}(this._teardowns=null!==($=this._teardowns)&&void 0!==$?$:[]).push(H)}}_hasParent(H){const{_parentage:$}=this;return $===H||Array.isArray($)&&$.includes(H)}_addParent(H){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(H),$):$?[$,H]:H}_removeParent(H){const{_parentage:$}=this;$===H?this._parentage=null:Array.isArray($)&&(0,se.P)($,H)}remove(H){const{_teardowns:$}=this;$&&(0,se.P)($,H),H instanceof re&&H._removeParent(this)}}re.EMPTY=(()=>{const le=new re;return le.closed=!0,le})();const de=re.EMPTY;function oe(le){return le instanceof re||le&&"closed"in le&&(0,h.m)(le.remove)&&(0,h.m)(le.add)&&(0,h.m)(le.unsubscribe)}function ae(le){(0,h.m)(le)?le():le.unsubscribe()}},2416:(ut,be,F)=>{"use strict";F.d(be,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ut,be,F)=>{"use strict";F.d(be,{E:()=>Q});const Q=new(F(8306).y)(re=>re.complete())},8996:(ut,be,F)=>{"use strict";F.d(be,{D:()=>He});var h=F(8421),Q=F(5363),k=F(9468),de=F(8306),ae=F(2202),le=F(576),H=F(9672);function X(Ae,rt){if(!Ae)throw new Error("Iterable cannot be null");return new de.y(Ye=>{(0,H.f)(Ye,rt,()=>{const pt=Ae[Symbol.asyncIterator]();(0,H.f)(Ye,rt,()=>{pt.next().then(J=>{J.done?Ye.complete():Ye.next(J.value)})},0,!0)})})}var je=F(3670),De=F(8239),Pe=F(1144),Be=F(6495),K=F(2206),ne=F(4532),ge=F(3260);function He(Ae,rt){return rt?function ye(Ae,rt){if(null!=Ae){if((0,je.c)(Ae))return function se(Ae,rt){return(0,h.Xf)(Ae).pipe((0,k.R)(rt),(0,Q.Q)(rt))}(Ae,rt);if((0,Pe.z)(Ae))return function oe(Ae,rt){return new de.y(Ye=>{let pt=0;return rt.schedule(function(){pt===Ae.length?Ye.complete():(Ye.next(Ae[pt++]),Ye.closed||this.schedule())})})}(Ae,rt);if((0,De.t)(Ae))return function re(Ae,rt){return(0,h.Xf)(Ae).pipe((0,k.R)(rt),(0,Q.Q)(rt))}(Ae,rt);if((0,K.D)(Ae))return X(Ae,rt);if((0,Be.T)(Ae))return function $(Ae,rt){return new de.y(Ye=>{let pt;return(0,H.f)(Ye,rt,()=>{pt=Ae[ae.h](),(0,H.f)(Ye,rt,()=>{let J,pe;try{({value:J,done:pe}=pt.next())}catch(ve){return void Ye.error(ve)}pe?Ye.complete():Ye.next(J)},0,!0)}),()=>(0,le.m)(null==pt?void 0:pt.return)&&pt.return()})}(Ae,rt);if((0,ge.L)(Ae))return function Te(Ae,rt){return X((0,ge.Q)(Ae),rt)}(Ae,rt)}throw(0,ne.z)(Ae)}(Ae,rt):(0,h.Xf)(Ae)}},8421:(ut,be,F)=>{"use strict";F.d(be,{Xf:()=>je});var h=F(5987),Q=F(1144),k=F(8239),se=F(8306),re=F(3670),de=F(2206),oe=F(4532),ae=F(6495),le=F(3260),H=F(576),$=F(7849),X=F(8822);function je(ye){if(ye instanceof se.y)return ye;if(null!=ye){if((0,re.c)(ye))return function De(ye){return new se.y(He=>{const Ae=ye[X.L]();if((0,H.m)(Ae.subscribe))return Ae.subscribe(He);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ye);if((0,Q.z)(ye))return function Pe(ye){return new se.y(He=>{for(let Ae=0;Ae<ye.length&&!He.closed;Ae++)He.next(ye[Ae]);He.complete()})}(ye);if((0,k.t)(ye))return function Be(ye){return new se.y(He=>{ye.then(Ae=>{He.closed||(He.next(Ae),He.complete())},Ae=>He.error(Ae)).then(null,$.h)})}(ye);if((0,de.D)(ye))return ne(ye);if((0,ae.T)(ye))return function K(ye){return new se.y(He=>{for(const Ae of ye)if(He.next(Ae),He.closed)return;He.complete()})}(ye);if((0,le.L)(ye))return function ge(ye){return ne((0,le.Q)(ye))}(ye)}throw(0,oe.z)(ye)}function ne(ye){return new se.y(He=>{(function Te(ye,He){var Ae,rt,Ye,pt;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Ae=(0,h.KL)(ye);!(rt=yield Ae.next()).done;)if(He.next(rt.value),He.closed)return}catch(J){Ye={error:J}}finally{try{rt&&!rt.done&&(pt=Ae.return)&&(yield pt.call(Ae))}finally{if(Ye)throw Ye.error}}He.complete()})})(ye,He).catch(Ae=>He.error(Ae))})}},6451:(ut,be,F)=>{"use strict";F.d(be,{T:()=>de});var h=F(8189),Q=F(8421),k=F(515),se=F(7669),re=F(8996);function de(...oe){const ae=(0,se.yG)(oe),le=(0,se._6)(oe,1/0),H=oe;return H.length?1===H.length?(0,Q.Xf)(H[0]):(0,h.J)(le)((0,re.D)(H,ae)):k.E}},5403:(ut,be,F)=>{"use strict";F.d(be,{Q:()=>Q});var h=F(930);class Q extends h.Lv{constructor(se,re,de,oe,ae){super(se),this.onFinalize=ae,this._next=re?function(le){try{re(le)}catch(H){se.error(H)}}:super._next,this._error=oe?function(le){try{oe(le)}catch(H){se.error(H)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch(le){se.error(le)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;const{closed:re}=this;super.unsubscribe(),!re&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}},4004:(ut,be,F)=>{"use strict";F.d(be,{U:()=>k});var h=F(4482),Q=F(5403);function k(se,re){return(0,h.e)((de,oe)=>{let ae=0;de.subscribe(new Q.Q(oe,le=>{oe.next(se.call(re,le,ae++))}))})}},8189:(ut,be,F)=>{"use strict";F.d(be,{J:()=>k});var h=F(5577),Q=F(4671);function k(se=1/0){return(0,h.z)(Q.y,se)}},5577:(ut,be,F)=>{"use strict";F.d(be,{z:()=>ae});var h=F(4004),Q=F(8421),k=F(4482),se=F(9672),re=F(5403),oe=F(576);function ae(le,H,$=1/0){return(0,oe.m)(H)?ae((X,je)=>(0,h.U)((De,Pe)=>H(X,De,je,Pe))((0,Q.Xf)(le(X,je))),$):("number"==typeof H&&($=H),(0,k.e)((X,je)=>function de(le,H,$,X,je,De,Pe,Be){const K=[];let ne=0,ge=0,Te=!1;const ye=()=>{Te&&!K.length&&!ne&&H.complete()},He=rt=>ne<X?Ae(rt):K.push(rt),Ae=rt=>{De&&H.next(rt),ne++;let Ye=!1;(0,Q.Xf)($(rt,ge++)).subscribe(new re.Q(H,pt=>{null==je||je(pt),De?He(pt):H.next(pt)},()=>{Ye=!0},void 0,()=>{if(Ye)try{for(ne--;K.length&&ne<X;){const pt=K.shift();Pe?(0,se.f)(H,Pe,()=>Ae(pt)):Ae(pt)}ye()}catch(pt){H.error(pt)}}))};return le.subscribe(new re.Q(H,He,()=>{Te=!0,ye()})),()=>{null==Be||Be()}}(X,je,le,$)))}},5363:(ut,be,F)=>{"use strict";F.d(be,{Q:()=>se});var h=F(9672),Q=F(4482),k=F(5403);function se(re,de=0){return(0,Q.e)((oe,ae)=>{oe.subscribe(new k.Q(ae,le=>(0,h.f)(ae,re,()=>ae.next(le),de),()=>(0,h.f)(ae,re,()=>ae.complete(),de),le=>(0,h.f)(ae,re,()=>ae.error(le),de)))})}},3099:(ut,be,F)=>{"use strict";F.d(be,{B:()=>de});var h=F(8996),Q=F(5698),k=F(7579),se=F(930),re=F(4482);function de(ae={}){const{connector:le=(()=>new k.x),resetOnError:H=!0,resetOnComplete:$=!0,resetOnRefCountZero:X=!0}=ae;return je=>{let De=null,Pe=null,Be=null,K=0,ne=!1,ge=!1;const Te=()=>{null==Pe||Pe.unsubscribe(),Pe=null},ye=()=>{Te(),De=Be=null,ne=ge=!1},He=()=>{const Ae=De;ye(),null==Ae||Ae.unsubscribe()};return(0,re.e)((Ae,rt)=>{K++,!ge&&!ne&&Te();const Ye=Be=null!=Be?Be:le();rt.add(()=>{K--,0===K&&!ge&&!ne&&(Pe=oe(He,X))}),Ye.subscribe(rt),De||(De=new se.Hp({next:pt=>Ye.next(pt),error:pt=>{ge=!0,Te(),Pe=oe(ye,H,pt),Ye.error(pt)},complete:()=>{ne=!0,Te(),Pe=oe(ye,$),Ye.complete()}}),(0,h.D)(Ae).subscribe(De))})(je)}}function oe(ae,le,...H){return!0===le?(ae(),null):!1===le?null:le(...H).pipe((0,Q.q)(1)).subscribe(()=>ae())}},9468:(ut,be,F)=>{"use strict";F.d(be,{R:()=>Q});var h=F(4482);function Q(k,se=0){return(0,h.e)((re,de)=>{de.add(k.schedule(()=>re.subscribe(de),se))})}},5698:(ut,be,F)=>{"use strict";F.d(be,{q:()=>se});var h=F(515),Q=F(4482),k=F(5403);function se(re){return re<=0?()=>h.E:(0,Q.e)((de,oe)=>{let ae=0;de.subscribe(new k.Q(oe,le=>{++ae<=re&&(oe.next(le),re<=ae&&oe.complete())}))})}},8505:(ut,be,F)=>{"use strict";F.d(be,{b:()=>re});var h=F(576),Q=F(4482),k=F(5403),se=F(4671);function re(de,oe,ae){const le=(0,h.m)(de)||oe||ae?{next:de,error:oe,complete:ae}:de;return le?(0,Q.e)((H,$)=>{var X;null===(X=le.subscribe)||void 0===X||X.call(le);let je=!0;H.subscribe(new k.Q($,De=>{var Pe;null===(Pe=le.next)||void 0===Pe||Pe.call(le,De),$.next(De)},()=>{var De;je=!1,null===(De=le.complete)||void 0===De||De.call(le),$.complete()},De=>{var Pe;je=!1,null===(Pe=le.error)||void 0===Pe||Pe.call(le,De),$.error(De)},()=>{var De,Pe;je&&(null===(De=le.unsubscribe)||void 0===De||De.call(le)),null===(Pe=le.finalize)||void 0===Pe||Pe.call(le)}))}):se.y}},4408:(ut,be,F)=>{"use strict";F.d(be,{o:()=>re});var h=F(727);class Q extends h.w0{constructor(oe,ae){super()}schedule(oe,ae=0){return this}}const k={setInterval(...de){const{delegate:oe}=k;return((null==oe?void 0:oe.setInterval)||setInterval)(...de)},clearInterval(de){const{delegate:oe}=k;return((null==oe?void 0:oe.clearInterval)||clearInterval)(de)},delegate:void 0};var se=F(8737);class re extends Q{constructor(oe,ae){super(oe,ae),this.scheduler=oe,this.work=ae,this.pending=!1}schedule(oe,ae=0){if(this.closed)return this;this.state=oe;const le=this.id,H=this.scheduler;return null!=le&&(this.id=this.recycleAsyncId(H,le,ae)),this.pending=!0,this.delay=ae,this.id=this.id||this.requestAsyncId(H,this.id,ae),this}requestAsyncId(oe,ae,le=0){return k.setInterval(oe.flush.bind(oe,this),le)}recycleAsyncId(oe,ae,le=0){if(null!=le&&this.delay===le&&!1===this.pending)return ae;k.clearInterval(ae)}execute(oe,ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const le=this._execute(oe,ae);if(le)return le;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(oe,ae){let H,le=!1;try{this.work(oe)}catch($){le=!0,H=$||new Error("Scheduled action threw falsy error")}if(le)return this.unsubscribe(),H}unsubscribe(){if(!this.closed){const{id:oe,scheduler:ae}=this,{actions:le}=ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(le,this),null!=oe&&(this.id=this.recycleAsyncId(ae,oe,null)),this.delay=null,super.unsubscribe()}}}},7565:(ut,be,F)=>{"use strict";F.d(be,{v:()=>k});var h=F(6063);class Q{constructor(re,de=Q.now){this.schedulerActionCtor=re,this.now=de}schedule(re,de=0,oe){return new this.schedulerActionCtor(this,re).schedule(oe,de)}}Q.now=h.l.now;class k extends Q{constructor(re,de=Q.now){super(re,de),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:de}=this;if(this._active)return void de.push(re);let oe;this._active=!0;do{if(oe=re.execute(re.state,re.delay))break}while(re=de.shift());if(this._active=!1,oe){for(;re=de.shift();)re.unsubscribe();throw oe}}}},4986:(ut,be,F)=>{"use strict";F.d(be,{z:()=>k});var h=F(4408);const k=new(F(7565).v)(h.o)},6063:(ut,be,F)=>{"use strict";F.d(be,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(ut,be,F)=>{"use strict";F.d(be,{z:()=>h});const h={setTimeout(...Q){const{delegate:k}=h;return((null==k?void 0:k.setTimeout)||setTimeout)(...Q)},clearTimeout(Q){const{delegate:k}=h;return((null==k?void 0:k.clearTimeout)||clearTimeout)(Q)},delegate:void 0}},2202:(ut,be,F)=>{"use strict";F.d(be,{h:()=>Q});const Q=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ut,be,F)=>{"use strict";F.d(be,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ut,be,F)=>{"use strict";F.d(be,{_6:()=>de,jO:()=>se,yG:()=>re});var h=F(576);function k(oe){return oe[oe.length-1]}function se(oe){return(0,h.m)(k(oe))?oe.pop():void 0}function re(oe){return function Q(oe){return oe&&(0,h.m)(oe.schedule)}(k(oe))?oe.pop():void 0}function de(oe,ae){return"number"==typeof k(oe)?oe.pop():ae}},8737:(ut,be,F)=>{"use strict";function h(Q,k){if(Q){const se=Q.indexOf(k);0<=se&&Q.splice(se,1)}}F.d(be,{P:()=>h})},3888:(ut,be,F)=>{"use strict";function h(Q){const se=Q(re=>{Error.call(re),re.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}F.d(be,{d:()=>h})},2806:(ut,be,F)=>{"use strict";F.d(be,{x:()=>k,O:()=>se});var h=F(2416);let Q=null;function k(re){if(h.v.useDeprecatedSynchronousErrorHandling){const de=!Q;if(de&&(Q={errorThrown:!1,error:null}),re(),de){const{errorThrown:oe,error:ae}=Q;if(Q=null,oe)throw ae}}else re()}function se(re){h.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=re)}},9672:(ut,be,F)=>{"use strict";function h(Q,k,se,re=0,de=!1){const oe=k.schedule(function(){se(),de?Q.add(this.schedule(null,re)):this.unsubscribe()},re);if(Q.add(oe),!de)return oe}F.d(be,{f:()=>h})},4671:(ut,be,F)=>{"use strict";function h(Q){return Q}F.d(be,{y:()=>h})},1144:(ut,be,F)=>{"use strict";F.d(be,{z:()=>h});const h=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(ut,be,F)=>{"use strict";F.d(be,{D:()=>Q});var h=F(576);function Q(k){return Symbol.asyncIterator&&(0,h.m)(null==k?void 0:k[Symbol.asyncIterator])}},576:(ut,be,F)=>{"use strict";function h(Q){return"function"==typeof Q}F.d(be,{m:()=>h})},3670:(ut,be,F)=>{"use strict";F.d(be,{c:()=>k});var h=F(8822),Q=F(576);function k(se){return(0,Q.m)(se[h.L])}},6495:(ut,be,F)=>{"use strict";F.d(be,{T:()=>k});var h=F(2202),Q=F(576);function k(se){return(0,Q.m)(null==se?void 0:se[h.h])}},8239:(ut,be,F)=>{"use strict";F.d(be,{t:()=>Q});var h=F(576);function Q(k){return(0,h.m)(null==k?void 0:k.then)}},3260:(ut,be,F)=>{"use strict";F.d(be,{Q:()=>k,L:()=>se});var h=F(5987),Q=F(576);function k(re){return(0,h.FC)(this,arguments,function*(){const oe=re.getReader();try{for(;;){const{value:ae,done:le}=yield(0,h.qq)(oe.read());if(le)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(ae)}}finally{oe.releaseLock()}})}function se(re){return(0,Q.m)(null==re?void 0:re.getReader)}},4482:(ut,be,F)=>{"use strict";F.d(be,{A:()=>Q,e:()=>k});var h=F(576);function Q(se){return(0,h.m)(null==se?void 0:se.lift)}function k(se){return re=>{if(Q(re))return re.lift(function(de){try{return se(de,this)}catch(oe){this.error(oe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ut,be,F)=>{"use strict";function h(){}F.d(be,{Z:()=>h})},7849:(ut,be,F)=>{"use strict";F.d(be,{h:()=>k});var h=F(2416),Q=F(3410);function k(se){Q.z.setTimeout(()=>{const{onUnhandledError:re}=h.v;if(!re)throw se;re(se)})}},4532:(ut,be,F)=>{"use strict";function h(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(be,{z:()=>h})},5987:(ut,be,F)=>{"use strict";function ae(J,pe,ve,Ie){return new(ve||(ve=Promise))(function(ce,Tt){function jt(gt){try{st(Ie.next(gt))}catch(ur){Tt(ur)}}function Sr(gt){try{st(Ie.throw(gt))}catch(ur){Tt(ur)}}function st(gt){gt.done?ce(gt.value):function Fe(ce){return ce instanceof ve?ce:new ve(function(Tt){Tt(ce)})}(gt.value).then(jt,Sr)}st((Ie=Ie.apply(J,pe||[])).next())})}function K(J){return this instanceof K?(this.v=J,this):new K(J)}function ne(J,pe,ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,Ie=ve.apply(J,pe||[]),ce=[];return Fe={},Tt("next"),Tt("throw"),Tt("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function Tt(Kt){Ie[Kt]&&(Fe[Kt]=function(_r){return new Promise(function(sn,Jr){ce.push([Kt,_r,sn,Jr])>1||jt(Kt,_r)})})}function jt(Kt,_r){try{!function Sr(Kt){Kt.value instanceof K?Promise.resolve(Kt.value.v).then(st,gt):ur(ce[0][2],Kt)}(Ie[Kt](_r))}catch(sn){ur(ce[0][3],sn)}}function st(Kt){jt("next",Kt)}function gt(Kt){jt("throw",Kt)}function ur(Kt,_r){Kt(_r),ce.shift(),ce.length&&jt(ce[0][0],ce[0][1])}}function Te(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ve,pe=J[Symbol.asyncIterator];return pe?pe.call(J):(J=function X(J){var pe="function"==typeof Symbol&&Symbol.iterator,ve=pe&&J[pe],Ie=0;if(ve)return ve.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&Ie>=J.length&&(J=void 0),{value:J&&J[Ie++],done:!J}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),ve={},Ie("next"),Ie("throw"),Ie("return"),ve[Symbol.asyncIterator]=function(){return this},ve);function Ie(ce){ve[ce]=J[ce]&&function(Tt){return new Promise(function(jt,Sr){!function Fe(ce,Tt,jt,Sr){Promise.resolve(Sr).then(function(st){ce({value:st,done:jt})},Tt)}(jt,Sr,(Tt=J[ce](Tt)).done,Tt.value)})}}}F.d(be,{mG:()=>ae,qq:()=>K,FC:()=>ne,KL:()=>Te})},5e3:(ut,be,F)=>{"use strict";F.d(be,{deG:()=>rc,tb:()=>a0,AFp:()=>ZI,ip1:()=>Xy,CZH:()=>cf,hGG:()=>pb,z2F:()=>id,sBO:()=>nb,Sil:()=>Kr,_Vd:()=>co,EJc:()=>$o,SBq:()=>Gc,qLn:()=>hl,vpe:()=>jo,tBr:()=>Wn,XFs:()=>ot,OlP:()=>pn,zs3:()=>ao,ZZ4:()=>Aa,aQg:()=>a_,soG:()=>Cg,YKP:()=>Uw,h0i:()=>gr,PXZ:()=>Ig,R0b:()=>mn,FiY:()=>gn,Lbi:()=>YI,g9A:()=>KI,Qsj:()=>qc,FYo:()=>DI,JOm:()=>ro,tp0:()=>mi,Rgc:()=>Qc,dDg:()=>Fr,q4F:()=>AI,GfV:()=>Je,s_b:()=>gg,ifc:()=>Nt,eFA:()=>eb,G48:()=>sd,Gpc:()=>$,X6Q:()=>p0,_c5:()=>hb,VLi:()=>VA,c2e:()=>QI,zSh:()=>Rv,wAp:()=>wt,vHH:()=>Pe,cg1:()=>eg,kL8:()=>Iw,dqk:()=>dt,sIi:()=>Np,CqO:()=>rw,QGY:()=>sy,F4k:()=>xC,RDi:()=>Dd,AaK:()=>ae,qOj:()=>mC,TTD:()=>Ua,_Bn:()=>Qt,xp6:()=>uv,uIk:()=>Dn,ekj:()=>Oc,Suo:()=>Kw,Xpm:()=>$e,lG2:()=>Vu,Yz7:()=>sn,cJS:()=>Ii,oAB:()=>lr,Yjl:()=>Eo,Y36:()=>Bp,_UZ:()=>Hp,qZA:()=>Jv,TgZ:()=>Qv,EpF:()=>nw,n5z:()=>An,LFG:()=>Z,$8M:()=>ru,$Z:()=>ui,NdJ:()=>oy,CRH:()=>Yw,oxw:()=>ly,Q6J:()=>Rc,s9C:()=>Gp,iGM:()=>zy,CHM:()=>$u,LSH:()=>oh,YNc:()=>vC,_uU:()=>mw,Oqu:()=>yw});var h=F(7579),Q=F(727),k=F(8306),se=F(6451),re=F(3099);function de(s){for(let o in s)if(s[o]===de)return o;throw Error("Could not find renamed property on target object.")}function oe(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function ae(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ae).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function le(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const H=de({__forward_ref__:de});function $(s){return s.__forward_ref__=$,s.toString=function(){return ae(this())},s}function X(s){return je(s)?s():s}function je(s){return"function"==typeof s&&s.hasOwnProperty(H)&&s.__forward_ref__===$}class Pe extends Error{constructor(o,u){super(function Be(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function K(s){return"string"==typeof s?s:null==s?"":String(s)}function ne(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():K(s)}function He(s,o){const u=o?` in ${o}`:"";throw new Pe(-201,`No provider for ${ne(s)} found${u}`)}function st(s,o){null==s&&function gt(s,o,u,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${u} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function sn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Ii(s){return{providers:s.providers||[],imports:s.imports||[]}}function Rn(s){return bi(s,Xr)||bi(s,Me)}function bi(s,o){return s.hasOwnProperty(o)?s[o]:null}function vo(s){return s&&(s.hasOwnProperty(hs)||s.hasOwnProperty(vr))?s[hs]:null}const Xr=de({\u0275prov:de}),hs=de({\u0275inj:de}),Me=de({ngInjectableDef:de}),vr=de({ngInjectorDef:de});var ot=(()=>((ot=ot||{})[ot.Default=0]="Default",ot[ot.Host=1]="Host",ot[ot.Self=2]="Self",ot[ot.SkipSelf=4]="SkipSelf",ot[ot.Optional=8]="Optional",ot))();let Di;function Kn(s){const o=Di;return Di=s,o}function Gs(s,o,u){const l=Rn(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:u&ot.Optional?null:void 0!==o?o:void He(ae(s),"Injector")}function Mr(s){return{toString:s}.toString()}var yn=(()=>((yn=yn||{})[yn.OnPush=0]="OnPush",yn[yn.Default=1]="Default",yn))(),Nt=(()=>{return(s=Nt||(Nt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Nt;var s})();const lt="undefined"!=typeof globalThis&&globalThis,yt="undefined"!=typeof window&&window,wo="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,dt=lt||"undefined"!=typeof global&&global||yt||wo,Ti={},B=[],q=de({\u0275cmp:de}),W=de({\u0275dir:de}),we=de({\u0275pipe:de}),ee=de({\u0275mod:de}),qe=de({\u0275fac:de}),Ce=de({__NG_ELEMENT_ID__:de});let _e=0;function $e(s){return Mr(()=>{const u={},l={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===yn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||B,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Nt.Emulated,id:"c",styles:s.styles||B,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,m=s.features,v=s.pipes;return l.id+=_e++,l.inputs=zo(s.inputs,u),l.outputs=zo(s.outputs),m&&m.forEach(E=>E(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(bt):null,l.pipeDefs=v?()=>("function"==typeof v?v():v).map(ft):null,l})}function bt(s){return cr(s)||function Yn(s){return s[W]||null}(s)}function ft(s){return function zi(s){return s[we]||null}(s)}const on={};function lr(s){return Mr(()=>{const o={type:s.type,bootstrap:s.bootstrap||B,declarations:s.declarations||B,imports:s.imports||B,exports:s.exports||B,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(on[s.id]=s.type),o})}function zo(s,o){if(null==s)return Ti;const u={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],m=d;Array.isArray(d)&&(m=d[1],d=d[0]),u[d]=l,o&&(o[d]=m)}return u}const Vu=$e;function Eo(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function cr(s){return s[q]||null}function dr(s,o){const u=s[ee]||null;if(!u&&!0===o)throw new Error(`Type ${ae(s)} does not have '\u0275mod' property.`);return u}function xi(s){return Array.isArray(s)&&"object"==typeof s[1]}function Mi(s){return Array.isArray(s)&&!0===s[1]}function pd(s){return 0!=(8&s.flags)}function Bn(s){return 2==(2&s.flags)}function ps(s){return 1==(1&s.flags)}function Yi(s){return null!==s.template}function gd(s){return 0!=(512&s[2])}function To(s,o){return s.hasOwnProperty(qe)?s[qe]:null}class Uu{constructor(o,u,l){this.previousValue=o,this.currentValue=u,this.firstChange=l}isFirstChange(){return this.firstChange}}function Ua(){return Ao}function Ao(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ws),Ba}function Ba(){const s=Id(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===Ti)s.previous=o;else for(let l in o)u[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Ws(s,o,u,l){const d=Id(s)||function Nr(s,o){return s[Bu]=o}(s,{previous:Ti,current:null}),m=d.current||(d.current={}),v=d.previous,E=this.declaredInputs[u],I=v[E];m[E]=new Uu(I&&I.currentValue,o,v===Ti),s[l]=o}Ua.ngInherit=!0;const Bu="__ngSimpleChanges__";function Id(s){return s[Bu]||null}let ju;function Dd(s){ju=s}function Yt(s){return!!s.listen}const zs={createRenderer:(s,o)=>function ql(){return void 0!==ju?ju:"undefined"!=typeof document?document:void 0}()};function an(s){for(;Array.isArray(s);)s=s[0];return s}function Xn(s,o){return an(o[s])}function jn(s,o){return an(o[s.index])}function Jo(s,o){return s.data[o]}function Vr(s,o){const u=o[s];return xi(u)?u:u[0]}function er(s){return 4==(4&s[2])}function Ji(s){return 128==(128&s[2])}function Ur(s,o){return null==o?null:s[o]}function Zs(s){s[18]=0}function Xo(s,o){s[5]+=o;let u=s,l=s[3];for(;null!==l&&(1===o&&1===u[5]||-1===o&&0===u[5]);)l[5]+=o,u=l,l=l[3]}const mt={lFrame:Ka(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ta(){return mt.bindingsEnabled}function xe(){return mt.lFrame.lView}function xt(){return mt.lFrame.tView}function $u(s){return mt.lFrame.contextLView=s,s[8]}function dn(){let s=So();for(;null!==s&&64===s.type;)s=s.parent;return s}function So(){return mt.lFrame.currentTNode}function ri(s,o){const u=mt.lFrame;u.currentTNode=s,u.isParent=o}function ms(){return mt.lFrame.isParent}function na(){return mt.isInCheckNoChangesMode}function Ga(s){mt.isInCheckNoChangesMode=s}function ys(){return mt.lFrame.bindingIndex++}function Zu(s,o){const u=mt.lFrame;u.bindingIndex=u.bindingRootIndex=s,ia(o)}function ia(s){mt.lFrame.currentDirectiveIndex=s}function za(){return mt.lFrame.currentQueryIndex}function Za(s){mt.lFrame.currentQueryIndex=s}function Zl(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Kl(s,o,u){if(u&ot.SkipSelf){let d=o,m=s;for(;!(d=d.parent,null!==d||u&ot.Host||(d=Zl(m),null===d||(m=m[15],10&d.type))););if(null===d)return!1;o=d,s=m}const l=mt.lFrame=xd();return l.currentTNode=o,l.lView=s,!0}function sa(s){const o=xd(),u=s[1];mt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function xd(){const s=mt.lFrame,o=null===s?null:s.child;return null===o?Ka(s):o}function Ka(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Yl(){const s=mt.lFrame;return mt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Ya=Yl;function Ku(){const s=Yl();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function fr(){return mt.lFrame.selectedIndex}function Hn(s){mt.lFrame.selectedIndex=s}function Cn(){const s=mt.lFrame;return Jo(s.tView,s.selectedIndex)}function Jl(s,o){for(let u=o.directiveStart,l=o.directiveEnd;u<l;u++){const m=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:S,ngOnDestroy:R}=m;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),E&&((s.contentHooks||(s.contentHooks=[])).push(u,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,E)),I&&(s.viewHooks||(s.viewHooks=[])).push(-u,I),S&&((s.viewHooks||(s.viewHooks=[])).push(u,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,S)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(u,R)}}function Ys(s,o,u){Uf(s,o,3,u)}function Yu(s,o,u,l){(3&s[2])===u&&Uf(s,o,u,l)}function Qu(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function Uf(s,o,u,l){const m=null!=l?l:-1,v=o.length-1;let E=0;for(let I=void 0!==l?65535&s[18]:0;I<v;I++)if("number"==typeof o[I+1]){if(E=o[I],null!=l&&E>=l)break}else o[I]<0&&(s[18]+=65536),(E<m||-1==m)&&(Nd(s,u,o,I),s[18]=(4294901760&s[18])+I+2),I++}function Nd(s,o,u,l){const d=u[l]<0,m=u[l+1],E=s[d?-u[l]:u[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{m.call(E)}finally{}}}else try{m.call(E)}finally{}}class In{constructor(o,u,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=l}}function Xl(s,o,u){const l=Yt(s);let d=0;for(;d<u.length;){const m=u[d];if("number"==typeof m){if(0!==m)break;d++;const v=u[d++],E=u[d++],I=u[d++];l?s.setAttribute(o,E,I,v):o.setAttributeNS(v,E,I)}else{const v=m,E=u[++d];_n(v)?l&&s.setProperty(o,v,E):l?s.setAttribute(o,v,E):o.setAttribute(v,E),d++}}return d}function Qs(s){return 3===s||4===s||6===s}function _n(s){return 64===s.charCodeAt(0)}function Xe(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?u=d:0===u||Br(s,u,d,null,-1===u||2===u?o[++l]:null)}}return s}function Br(s,o,u,l,d){let m=0,v=s.length;if(-1===o)v=-1;else for(;m<s.length;){const E=s[m++];if("number"==typeof E){if(E===o){v=-1;break}if(E>o){v=m-1;break}}}for(;m<s.length;){const E=s[m];if("number"==typeof E)break;if(E===u){if(null===l)return void(null!==d&&(s[m+1]=d));if(l===s[m+1])return void(s[m+2]=d)}m++,null!==l&&m++,null!==d&&m++}-1!==v&&(s.splice(v,0,o),m=v+1),s.splice(m++,0,u),null!==l&&s.splice(m++,0,l),null!==d&&s.splice(m++,0,d)}function Er(s){return-1!==s}function oa(s){return 32767&s}function $n(s,o){let u=function aa(s){return s>>16}(s),l=o;for(;u>0;)l=l[15],u--;return l}let nr=!0;function jr(s){const o=nr;return nr=s,o}let Fi=0;function eu(s,o){const u=tu(s,o);if(-1!==u)return u;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,ec(l.data,s),ec(o,null),ec(l.blueprint,null));const d=vs(s,o),m=s.injectorIndex;if(Er(d)){const v=oa(d),E=$n(d,o),I=E[1].data;for(let S=0;S<8;S++)o[m+S]=E[v+S]|I[v+S]}return o[m+8]=d,m}function ec(s,o){s.push(0,0,0,0,0,0,0,0,o)}function tu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function vs(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,l=null,d=o;for(;null!==d;){const m=d[1],v=m.type;if(l=2===v?m.declTNode:1===v?d[6]:null,null===l)return-1;if(u++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|u<<16}return-1}function nu(s,o,u){!function jf(s,o,u){let l;"string"==typeof u?l=u.charCodeAt(0)||0:u.hasOwnProperty(Ce)&&(l=u[Ce]),null==l&&(l=u[Ce]=Fi++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function kd(s,o,u){if(u&ot.Optional)return s;He(o,"NodeInjector")}function Xi(s,o,u,l){if(u&ot.Optional&&void 0===l&&(l=null),0==(u&(ot.Self|ot.Host))){const d=s[9],m=Kn(void 0);try{return d?d.get(o,l,u&ot.Optional):Gs(o,l,u&ot.Optional)}finally{Kn(m)}}return kd(l,o,u)}function tc(s,o,u,l=ot.Default,d){if(null!==s){const m=function bn(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Ce)?s[Ce]:void 0;return"number"==typeof o?o>=0?255&o:el:o}(u);if("function"==typeof m){if(!Kl(o,s,l))return l&ot.Host?kd(d,u,l):Xi(o,u,l,d);try{const v=m(l);if(null!=v||l&ot.Optional)return v;He(u)}finally{Ya()}}else if("number"==typeof m){let v=null,E=tu(s,o),I=-1,S=l&ot.Host?o[16][6]:null;for((-1===E||l&ot.SkipSelf)&&(I=-1===E?vs(s,o):o[E+8],-1!==I&&Js(l,!1)?(v=o[1],E=oa(I),o=$n(I,o)):E=-1);-1!==E;){const R=o[1];if(nc(m,E,R.data)){const L=la(E,o,u,v,l,S);if(L!==Xu)return L}I=o[E+8],-1!==I&&Js(l,o[1].data[E+8]===S)&&nc(m,E,o)?(v=R,E=oa(I),o=$n(I,o)):E=-1}}}return Xi(o,u,l,d)}const Xu={};function el(){return new ws(dn(),xe())}function la(s,o,u,l,d,m){const v=o[1],E=v.data[s+8],R=tl(E,v,u,null==l?Bn(E)&&nr:l!=v&&0!=(3&E.type),d&ot.Host&&m===E);return null!==R?kn(o,v,R,E):Xu}function tl(s,o,u,l,d){const m=s.providerIndexes,v=o.data,E=1048575&m,I=s.directiveStart,R=m>>20,G=d?E+R:s.directiveEnd;for(let Y=l?E:E+R;Y<G;Y++){const me=v[Y];if(Y<I&&u===me||Y>=I&&me.type===u)return Y}if(d){const Y=v[I];if(Y&&Yi(Y)&&Y.type===u)return I}return null}function kn(s,o,u,l){let d=s[u];const m=o.data;if(function Bf(s){return s instanceof In}(d)){const v=d;v.resolving&&function ge(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Pe(-200,`Circular dependency in DI detected for ${s}${u}`)}(ne(m[u]));const E=jr(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?Kn(v.injectImpl):null;Kl(s,l,ot.Default);try{d=s[u]=v.factory(void 0,m,s,l),o.firstCreatePass&&u>=l.directiveStart&&function Vf(s,o,u){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:m}=o.type.prototype;if(l){const v=Ao(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,m))}(u,m[u],o)}finally{null!==I&&Kn(I),jr(E),v.resolving=!1,Ya()}}return d}function nc(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Js(s,o){return!(s&ot.Self||s&ot.Host&&o)}class ws{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,l){return tc(this._tNode,this._lView,o,l,u)}}function An(s){return Mr(()=>{const o=s.prototype.constructor,u=o[qe]||xo(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const m=d[qe]||xo(d);if(m&&m!==u)return m;d=Object.getPrototypeOf(d)}return m=>new m})}function xo(s){return je(s)?()=>{const o=xo(X(s));return o&&o()}:To(s)}function ru(s){return function ii(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const l=u.length;let d=0;for(;d<l;){const m=u[d];if(Qs(m))break;if(0===m)d+=2;else if("number"==typeof m)for(d++;d<l&&"string"==typeof u[d];)d++;else{if(m===o)return u[d+1];d+=2}}}return null}(dn(),s)}const Cs="__parameters__";function su(s,o,u){return Mr(()=>{const l=function iu(s){return function(...u){if(s){const l=s(...u);for(const d in l)this[d]=l[d]}}}(o);function d(...m){if(this instanceof d)return l.apply(this,m),this;const v=new d(...m);return E.annotation=v,E;function E(I,S,R){const L=I.hasOwnProperty(Cs)?I[Cs]:Object.defineProperty(I,Cs,{value:[]})[Cs];for(;L.length<=R;)L.push(null);return(L[R]=L[R]||[]).push(v),I}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class pn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=sn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const rc=new pn("AnalyzeForEntryComponents");function Li(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let l=s[u];Array.isArray(l)?(o===s&&(o=s.slice(0,u)),Li(l,o)):o!==s&&o.push(l)}return o}function es(s,o){s.forEach(u=>Array.isArray(u)?es(u,o):o(u))}function Ld(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function ou(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function rr(s,o,u){let l=eo(s,o);return l>=0?s[1|l]=u:(l=~l,function da(s,o,u,l){let d=s.length;if(d==o)s.push(u,l);else if(1===d)s.push(l,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=l}}(s,l,o,u)),l}function fa(s,o){const u=eo(s,o);if(u>=0)return s[1|u]}function eo(s,o){return function Ro(s,o,u){let l=0,d=s.length>>u;for(;d!==l;){const m=l+(d-l>>1),v=s[m<<u];if(o===v)return m<<u;v>o?d=m:l=m+1}return~(d<<u)}(s,o,1)}const tn={},Ds="__NG_DI_FLAG__",au="ngTempTokenPath",sl=/\n/gm,ol="__source",b=de({provide:String,useValue:de});let D;function N(s){const o=D;return D=s,o}function U(s,o=ot.Default){if(void 0===D)throw new Pe(203,"");return null===D?Gs(s,void 0,o):D.get(s,o&ot.Optional?null:void 0,o)}function Z(s,o=ot.Default){return(function Ft(){return Di}()||U)(X(s),o)}function Ze(s){const o=[];for(let u=0;u<s.length;u++){const l=X(s[u]);if(Array.isArray(l)){if(0===l.length)throw new Pe(900,"");let d,m=ot.Default;for(let v=0;v<l.length;v++){const E=l[v],I=Lt(E);"number"==typeof I?-1===I?d=E.token:m|=I:d=E}o.push(Z(d,m))}else o.push(Z(l))}return o}function Ke(s,o){return s[Ds]=o,s.prototype[Ds]=o,s}function Lt(s){return s[Ds]}const Wn=Ke(su("Inject",s=>({token:s})),-1),gn=Ke(su("Optional"),8),mi=Ke(su("SkipSelf"),4);class Jf{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function As(s){return s instanceof Jf?s.changingThisBreaksApplicationSecurity:s}const np=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,lm=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var rn=(()=>((rn=rn||{})[rn.NONE=0]="NONE",rn[rn.HTML=1]="HTML",rn[rn.STYLE=2]="STYLE",rn[rn.SCRIPT=3]="SCRIPT",rn[rn.URL=4]="URL",rn[rn.RESOURCE_URL=5]="RESOURCE_URL",rn))();function oh(s){const o=function cl(){const s=xe();return s&&s[12]}();return o?o.sanitize(rn.URL,s)||"":function du(s,o){const u=function Xf(s){return s instanceof Jf&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?As(s):function ya(s){return(s=String(s)).match(np)||s.match(lm)?s:"unsafe:"+s}(K(s))}const Y_="__ngContext__";function Cr(s,o){s[Y_]=o}function uh(s){const o=function pu(s){return s[Y_]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function lp(s){return s.ngOriginalError}function hh(s,...o){s.error(...o)}class hl{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),l=function cp(s){return s&&s.ngErrorLogger||hh}(o);l(this._console,"ERROR",o),u&&l(this._console,"ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&lp(o);for(;u&&lp(u);)u=lp(u);return u||null}}const yc=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(dt))();function Ss(s){return s instanceof Function?s():s}var ro=(()=>((ro=ro||{})[ro.Important=1]="Important",ro[ro.DashCase=2]="DashCase",ro))();function ph(s,o){return undefined(s,o)}function pl(s){const o=s[3];return Mi(o)?o[3]:o}function gh(s){return nv(s[13])}function mh(s){return nv(s[4])}function nv(s){for(;null!==s&&!Mi(s);)s=s[4];return s}function io(s,o,u,l,d){if(null!=l){let m,v=!1;Mi(l)?m=l:xi(l)&&(v=!0,l=l[0]);const E=an(l);0===s&&null!==u?null==d?nt(o,u,E):Qe(o,u,E,d||null,!0):1===s&&null!==u?Qe(o,u,E,d||null,!0):2===s?function qr(s,o,u){const l=Bi(s,o);l&&function qt(s,o,u,l){Yt(s)?s.removeChild(o,u,l):o.removeChild(u)}(s,l,o,u)}(o,E,v):3===s&&o.destroyNode(E),null!=m&&function xE(s,o,u,l,d){const m=u[7];m!==an(u)&&io(o,s,l,m,d);for(let E=10;E<u.length;E++){const I=u[E];Rs(I[1],I,s,o,l,m)}}(o,s,m,u,d)}}function _h(s,o,u){return Yt(s)?s.createElement(o,u):null===u?s.createElement(o):s.createElementNS(u,o)}function g(s,o){const u=s[9],l=u.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Xo(d,-1)),u.splice(l,1)}function w(s,o){if(s.length<=10)return;const u=10+o,l=s[u];if(l){const d=l[17];null!==d&&d!==s&&g(d,l),o>0&&(s[u-1][4]=l[4]);const m=ou(s,10+o);!function wa(s,o){Rs(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const v=m[19];null!==v&&v.detachView(m[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function T(s,o){if(!(256&o[2])){const u=o[11];Yt(u)&&u.destroyNode&&Rs(s,o,u,3,null,null),function rv(s){let o=s[13];if(!o)return M(s[1],s);for(;o;){let u=null;if(xi(o))u=o[13];else{const l=o[10];l&&(u=l)}if(!u){for(;o&&!o[4]&&o!==s;)xi(o)&&M(o[1],o),o=o[3];null===o&&(o=s),xi(o)&&M(o[1],o),u=o&&o[4]}o=u}}(o)}}function M(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function te(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let l=0;l<u.length;l+=2){const d=o[u[l]];if(!(d instanceof In)){const m=u[l+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const E=d[m[v]],I=m[v+1];try{I.call(E)}finally{}}else try{m.call(d)}finally{}}}}(s,o),function j(s,o){const u=s.cleanup,l=o[7];let d=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const v=u[m+1],E="function"==typeof v?v(o):an(o[v]),I=l[d=u[m+2]],S=u[m+3];"boolean"==typeof S?E.removeEventListener(u[m],I,S):S>=0?l[d=S]():l[d=-S].unsubscribe(),m+=2}else{const v=l[d=u[m+1]];u[m].call(v)}if(null!==l){for(let m=d+1;m<l.length;m++)l[m]();o[7]=null}}(s,o),1===o[1].type&&Yt(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&Mi(o[3])){u!==o[3]&&g(u,o);const l=o[19];null!==l&&l.detachView(s)}}}function ke(s,o,u){return function Re(s,o,u){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return u[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===Nt.None||d===Nt.Emulated)return null}return jn(l,u)}(s,o.parent,u)}function Qe(s,o,u,l,d){Yt(s)?s.insertBefore(o,u,l,d):o.insertBefore(u,l,d)}function nt(s,o,u){Yt(s)?s.appendChild(o,u):o.appendChild(u)}function Ot(s,o,u,l,d){null!==l?Qe(s,o,u,l,d):nt(s,o,u)}function Bi(s,o){return Yt(s)?s.parentNode(o):o.parentNode}let so=function ko(s,o,u){return 40&s.type?jn(s,u):null};function vc(s,o,u,l){const d=ke(s,l,o),m=o[11],E=function vh(s,o,u){return so(s,o,u)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(u))for(let I=0;I<u.length;I++)Ot(m,d,u[I],E,!1);else Ot(m,d,u,E,!1)}function _u(s,o){if(null!==o){const u=o.type;if(3&u)return jn(o,s);if(4&u)return Fo(-1,s[o.index]);if(8&u){const l=o.child;if(null!==l)return _u(s,l);{const d=s[o.index];return Mi(d)?Fo(-1,d):an(d)}}if(32&u)return ph(o,s)()||an(s[o.index]);{const l=pp(s,o);return null!==l?Array.isArray(l)?l[0]:_u(pl(s[16]),l):_u(s,o.next)}}return null}function pp(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Fo(s,o){const u=10+s+1;if(u<o.length){const l=o[u],d=l[1].firstChild;if(null!==d)return _u(l,d)}return o[7]}function gp(s,o,u,l,d,m,v){for(;null!=u;){const E=l[u.index],I=u.type;if(v&&0===o&&(E&&Cr(an(E),l),u.flags|=4),64!=(64&u.flags))if(8&I)gp(s,o,u.child,l,d,m,!1),io(o,s,d,E,m);else if(32&I){const S=ph(u,l);let R;for(;R=S();)io(o,s,d,R,m);io(o,s,d,E,m)}else 16&I?Eh(s,o,l,u,d,m):io(o,s,d,E,m);u=v?u.projectionNext:u.next}}function Rs(s,o,u,l,d,m){gp(u,l,s.firstChild,o,d,m,!1)}function Eh(s,o,u,l,d,m){const v=u[16],I=v[6].projection[l.projection];if(Array.isArray(I))for(let S=0;S<I.length;S++)io(o,s,d,I[S],m);else gp(s,o,I,v[3],d,m,!0)}function ME(s,o,u){Yt(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function sv(s,o,u){Yt(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function RE(s,o,u){let l=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const m=o.length;if(d+m===l||s.charCodeAt(d+m)<=32)return d}u=d+1}}const NE="ng-template";function OE(s,o,u){let l=0;for(;l<s.length;){let d=s[l++];if(u&&"class"===d){if(d=s[l],-1!==RE(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function ov(s){return 4===s.type&&s.value!==NE}function OD(s,o,u){return o===(4!==s.type||u?s.value:NE)}function PD(s,o,u){let l=4;const d=s.attrs||[],m=function FD(s){for(let o=0;o<s.length;o++)if(Qs(s[o]))return o;return s.length}(d);let v=!1;for(let E=0;E<o.length;E++){const I=o[E];if("number"!=typeof I){if(!v)if(4&l){if(l=2|1&l,""!==I&&!OD(s,I,u)||""===I&&1===o.length){if(Lo(l))return!1;v=!0}}else{const S=8&l?I:o[++E];if(8&l&&null!==s.attrs){if(!OE(s.attrs,S,u)){if(Lo(l))return!1;v=!0}continue}const L=kD(8&l?"class":I,d,ov(s),u);if(-1===L){if(Lo(l))return!1;v=!0;continue}if(""!==S){let G;G=L>m?"":d[L+1].toLowerCase();const Y=8&l?G:null;if(Y&&-1!==RE(Y,S,0)||2&l&&S!==G){if(Lo(l))return!1;v=!0}}}}else{if(!v&&!Lo(l)&&!Lo(I))return!1;if(v&&Lo(I))continue;v=!1,l=I|1&l}}return Lo(l)||v}function Lo(s){return 0==(1&s)}function kD(s,o,u,l){if(null===o)return-1;let d=0;if(l||!u){let m=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)m=!0;else{if(1===v||2===v){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=m?1:2}return-1}return function Ch(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const l=s[u];if("number"==typeof l)return-1;if(l===o)return u;u++}return-1}(o,s)}function av(s,o,u=!1){for(let l=0;l<o.length;l++)if(PD(s,o[l],u))return!0;return!1}function Am(s,o){return s?":not("+o.trim()+")":o}function LD(s){let o=s[0],u=1,l=2,d="",m=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&l){const E=s[++u];d+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!Lo(v)&&(o+=Am(m,d),d=""),l=v,m=m||!Lo(l);u++}return""!==d&&(o+=Am(m,d)),o}const vt={};function uv(s){lv(xt(),xe(),fr()+s,na())}function lv(s,o,u,l){if(!l)if(3==(3&o[2])){const m=s.preOrderCheckHooks;null!==m&&Ys(o,m,u)}else{const m=s.preOrderHooks;null!==m&&Yu(o,m,0,u)}Hn(u)}function dv(s,o){return s<<17|o<<2}function En(s){return s>>17&32767}function hv(s){return 2|s}function Ea(s){return(131068&s)>>2}function Sm(s,o){return-131069&s|o<<2}function xm(s){return 1|s}function km(s,o){const u=s.contentQueries;if(null!==u)for(let l=0;l<u.length;l+=2){const d=u[l],m=u[l+1];if(-1!==m){const v=s.data[m];Za(d),v.contentQueries(2,o[m],m)}}}function Cc(s,o,u,l,d,m,v,E,I,S){const R=o.blueprint.slice();return R[0]=d,R[2]=140|l,Zs(R),R[3]=R[15]=s,R[8]=u,R[10]=v||s&&s[10],R[11]=E||s&&s[11],R[12]=I||s&&s[12]||null,R[9]=S||s&&s[9]||null,R[6]=m,R[16]=2==o.type?s[16]:R,R}function Dh(s,o,u,l,d){let m=s.data[o];if(null===m)m=function Ic(s,o,u,l,d){const m=So(),v=ms(),I=s.data[o]=function ZD(s,o,u,l,d,m){return{type:u,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,u,o,l,d);return null===s.firstChild&&(s.firstChild=I),null!==m&&(v?null==m.child&&null!==I.parent&&(m.child=I):null===m.next&&(m.next=I)),I}(s,o,u,l,d),function Sd(){return mt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=u,m.value=l,m.attrs=d;const v=function Ks(){const s=mt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return ri(m,!0),m}function Th(s,o,u,l){if(0===u)return-1;const d=o.length;for(let m=0;m<u;m++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function _p(s,o,u){sa(o);try{const l=s.viewQuery;null!==l&&Sv(1,l,u);const d=s.template;null!==d&&Sh(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&km(s,o),s.staticViewQueries&&Sv(2,s.viewQuery,u);const m=s.components;null!==m&&function wv(s,o){for(let u=0;u<o.length;u++)oT(s,o[u])}(o,m)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,Ku()}}function Ah(s,o,u,l){const d=o[2];if(256==(256&d))return;sa(o);const m=na();try{Zs(o),function zu(s){return mt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Sh(s,o,u,2,l);const v=3==(3&d);if(!m)if(v){const S=s.preOrderCheckHooks;null!==S&&Ys(o,S,null)}else{const S=s.preOrderHooks;null!==S&&Yu(o,S,0,null),Qu(o,0)}if(function iT(s){for(let o=gh(s);null!==o;o=mh(o)){if(!o[2])continue;const u=o[9];for(let l=0;l<u.length;l++){const d=u[l],m=d[3];0==(1024&d[2])&&Xo(m,1),d[2]|=1024}}}(o),function jm(s){for(let o=gh(s);null!==o;o=mh(o))for(let u=10;u<o.length;u++){const l=o[u],d=l[1];Ji(l)&&Ah(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&km(s,o),!m)if(v){const S=s.contentCheckHooks;null!==S&&Ys(o,S)}else{const S=s.contentHooks;null!==S&&Yu(o,S,1),Qu(o,1)}!function BE(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let l=0;l<u.length;l++){const d=u[l];if(d<0)Hn(~d);else{const m=d,v=u[++l],E=u[++l];Zu(v,m),E(2,o[m])}}}finally{Hn(-1)}}(s,o);const E=s.components;null!==E&&function jE(s,o){for(let u=0;u<o.length;u++)sT(s,o[u])}(o,E);const I=s.viewQuery;if(null!==I&&Sv(2,I,l),!m)if(v){const S=s.viewCheckHooks;null!==S&&Ys(o,S)}else{const S=s.viewHooks;null!==S&&Yu(o,S,2),Qu(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),m||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Xo(o[3],-1))}finally{Ku()}}function Fm(s,o,u,l){const d=o[10],m=!na(),v=er(o);try{m&&!v&&d.begin&&d.begin(),v&&_p(s,o,l),Ah(s,o,u,l)}finally{m&&!v&&d.end&&d.end()}}function Sh(s,o,u,l,d){const m=fr(),v=2&l;try{Hn(-1),v&&o.length>20&&lv(s,o,20,na()),u(l,d)}finally{Hn(m)}}function Vm(s,o,u){!ta()||(function XD(s,o,u,l){const d=u.directiveStart,m=u.directiveEnd;s.firstCreatePass||eu(u,o),Cr(l,o);const v=u.initialInputs;for(let E=d;E<m;E++){const I=s.data[E],S=Yi(I);S&&nT(o,u,I);const R=kn(o,s,E,u);Cr(R,o),null!==v&&oo(0,E-d,R,I,0,v),S&&(Vr(u.index,o)[8]=R)}}(s,o,u,jn(u,o)),128==(128&u.flags)&&function wp(s,o,u){const l=u.directiveStart,d=u.directiveEnd,v=u.index,E=function qa(){return mt.lFrame.currentDirectiveIndex}();try{Hn(v);for(let I=l;I<d;I++){const S=s.data[I],R=o[I];ia(I),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&Mh(S,R)}}finally{Hn(-1),ia(E)}}(s,o,u))}function Um(s,o,u=jn){const l=o.localNames;if(null!==l){let d=o.index+1;for(let m=0;m<l.length;m+=2){const v=l[m+1],E=-1===v?u(o,s):s[v];s[d++]=E}}}function HE(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=xh(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function xh(s,o,u,l,d,m,v,E,I,S){const R=20+l,L=R+d,G=function zD(s,o){const u=[];for(let l=0;l<o;l++)u.push(l<s?null:vt);return u}(R,L),Y="function"==typeof S?S():S;return G[1]={type:s,blueprint:G,template:u,queries:null,viewQuery:E,declTNode:o,data:G.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:Y,incompleteFirstPass:!1}}function vp(s,o,u,l){const d=qm(o);null===u?d.push(l):(d.push(u),s.firstCreatePass&&ZE(s).push(l,d.length-1))}function Bm(s,o,u){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(u=null===u?{}:u).hasOwnProperty(l)?u[l].push(o,d):u[l]=[o,d]}return u}function ts(s,o,u,l,d,m,v,E){const I=jn(o,u);let R,S=o.inputs;!E&&null!=S&&(R=S[l])?(KE(s,u,R,l,d),Bn(o)&&function YD(s,o){const u=Vr(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(l=function GE(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=v?v(d,o.value||"",l):d,Yt(m)?m.setProperty(I,l,d):_n(l)||(I.setProperty?I.setProperty(l,d):I[l]=d))}function Cv(s,o,u,l){let d=!1;if(ta()){const m=function eT(s,o,u){const l=s.directiveRegistry;let d=null;if(l)for(let m=0;m<l.length;m++){const v=l[m];av(u,v.selectors,!1)&&(d||(d=[]),nu(eu(u,o),s,v.type),Yi(v)?(Rh(s,u),d.unshift(v)):d.push(v))}return d}(s,o,u),v=null===l?null:{"":-1};if(null!==m){d=!0,bv(u,s.data.length,m.length);for(let R=0;R<m.length;R++){const L=m[R];L.providersResolver&&L.providersResolver(L)}let E=!1,I=!1,S=Th(s,o,m.length,null);for(let R=0;R<m.length;R++){const L=m[R];u.mergedAttrs=Xe(u.mergedAttrs,L.hostAttrs),Dv(s,u,o,S,L),tT(S,L,v),null!==L.contentQueries&&(u.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(u.flags|=128);const G=L.type.prototype;!E&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),E=!0),!I&&(G.ngOnChanges||G.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),I=!0),S++}!function KD(s,o){const l=o.directiveEnd,d=s.data,m=o.attrs,v=[];let E=null,I=null;for(let S=o.directiveStart;S<l;S++){const R=d[S],L=R.inputs,G=null===m||ov(o)?null:zE(L,m);v.push(G),E=Bm(L,S,E),I=Bm(R.outputs,S,I)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=E,o.outputs=I}(s,u)}v&&function Iv(s,o,u){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const m=u[o[d+1]];if(null==m)throw new Pe(-301,`Export of name '${o[d+1]}' not found!`);l.push(o[d],m)}}}(u,l,v)}return u.mergedAttrs=Xe(u.mergedAttrs,u.attrs),d}function WE(s,o,u,l,d,m){const v=m.hostBindings;if(v){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const I=~o.index;(function JD(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(E)!=I&&E.push(I),E.push(l,d,v)}}function Mh(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Rh(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function tT(s,o,u){if(u){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)u[o.exportAs[l]]=s;Yi(o)&&(u[""]=s)}}function bv(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function Dv(s,o,u,l,d){s.data[l]=d;const m=d.factory||(d.factory=To(d.type)),v=new In(m,Yi(d),null);s.blueprint[l]=v,u[l]=v,WE(s,o,0,l,Th(s,u,d.hostVars,vt),d)}function nT(s,o,u){const l=jn(o,s),d=HE(u),m=s[10],v=Ip(s,Cc(s,d,null,u.onPush?64:16,l,o,m,m.createRenderer(l,u),null,null));s[o.index]=v}function ba(s,o,u,l,d,m){const v=jn(s,o);!function Ep(s,o,u,l,d,m,v){if(null==m)Yt(s)?s.removeAttribute(o,d,u):o.removeAttribute(d);else{const E=null==v?K(m):v(m,l||"",d);Yt(s)?s.setAttribute(o,d,E,u):u?o.setAttributeNS(u,d,E):o.setAttribute(d,E)}}(o[11],v,m,s.value,u,l,d)}function oo(s,o,u,l,d,m){const v=m[o];if(null!==v){const E=l.setInput;for(let I=0;I<v.length;){const S=v[I++],R=v[I++],L=v[I++];null!==E?l.setInput(u,L,S,R):u[R]=L}}}function zE(s,o){let u=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return u}function Cp(s,o,u,l){return new Array(s,!0,!1,o,null,0,l,u,null,null)}function sT(s,o){const u=Vr(o,s);if(Ji(u)){const l=u[1];80&u[2]?Ah(l,u,l.template,u[8]):u[5]>0&&Tv(u)}}function Tv(s){for(let l=gh(s);null!==l;l=mh(l))for(let d=10;d<l.length;d++){const m=l[d];if(1024&m[2]){const v=m[1];Ah(v,m,v.template,m[8])}else m[5]>0&&Tv(m)}const u=s[1].components;if(null!==u)for(let l=0;l<u.length;l++){const d=Vr(u[l],s);Ji(d)&&d[5]>0&&Tv(d)}}function oT(s,o){const u=Vr(o,s),l=u[1];(function Hm(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(l,u),_p(l,u,u[8])}function Ip(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function $m(s){for(;s;){s[2]|=64;const o=pl(s);if(gd(s)&&!o)return s;s=o}return null}function Nh(s,o,u){const l=o[10];l.begin&&l.begin();try{Ah(s,o,s.template,u)}catch(d){throw Dp(o,d),d}finally{l.end&&l.end()}}function Av(s){!function Gm(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],l=uh(u),d=l[1];Fm(d,l,d.template,u)}}(s[8])}function Sv(s,o,u){Za(0),o(s,u)}const lT=(()=>Promise.resolve(null))();function qm(s){return s[7]||(s[7]=[])}function ZE(s){return s.cleanup||(s.cleanup=[])}function Dp(s,o){const u=s[9],l=u?u.get(hl,null):null;l&&l.handleError(o)}function KE(s,o,u,l,d){for(let m=0;m<u.length;){const v=u[m++],E=u[m++],I=o[v],S=s.data[v];null!==S.setInput?S.setInput(I,d,l,E):I[E]=d}}function Eu(s,o,u){const l=Xn(o,s);!function Tm(s,o,u){Yt(s)?s.setValue(o,u):o.textContent=u}(s[11],l,u)}function Dc(s,o,u){let l=u?s.styles:null,d=u?s.classes:null,m=0;if(null!==o)for(let v=0;v<o.length;v++){const E=o[v];"number"==typeof E?m=E:1==m?d=le(d,E):2==m&&(l=le(l,E+": "+o[++v]+";"))}u?s.styles=l:s.stylesWithoutHost=l,u?s.classes=d:s.classesWithoutHost=d}const Mv=new pn("INJECTOR",-1);class Oh{get(o,u=tn){if(u===tn){const l=new Error(`NullInjectorError: No provider for ${ae(o)}!`);throw l.name="NullInjectorError",l}return u}}const Rv=new pn("Set Injector scope."),Ap={},dT={};let Nv;function YE(){return void 0===Nv&&(Nv=new Oh),Nv}function QE(s,o=null,u=null,l){const d=JE(s,o,u,l);return d._resolveInjectorDefTypes(),d}function JE(s,o=null,u=null,l){return new hT(s,u,o||YE(),l)}class hT{constructor(o,u,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];u&&es(u,E=>this.processProvider(E,o,u)),es([o],E=>this.processInjectorType(E,[],m)),this.records.set(Mv,Ph(void 0,this));const v=this.records.get(Rv);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof o?null:ae(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=tn,l=ot.Default){this.assertNotDestroyed();const d=N(this),m=Kn(void 0);try{if(!(l&ot.SkipSelf)){let E=this.records.get(o);if(void 0===E){const I=function oC(s){return"function"==typeof s||"object"==typeof s&&s instanceof pn}(o)&&Rn(o);E=I&&this.injectableDefInScope(I)?Ph(Ov(o),Ap):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(l&ot.Self?YE():this.parent).get(o,u=l&ot.Optional&&u===tn?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[au]=v[au]||[]).unshift(ae(o)),d)throw v;return function nn(s,o,u,l){const d=s[au];throw o[ol]&&d.unshift(o[ol]),s.message=function Hr(s,o,u,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=ae(o);if(Array.isArray(o))d=o.map(ae).join(" -> ");else if("object"==typeof o){let m=[];for(let v in o)if(o.hasOwnProperty(v)){let E=o[v];m.push(v+":"+("string"==typeof E?JSON.stringify(E):ae(E)))}d=`{${m.join(", ")}}`}return`${u}${l?"("+l+")":""}[${d}]: ${s.replace(sl,"\n  ")}`}("\n"+s.message,d,u,l),s.ngTokenPath=d,s[au]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Kn(m),N(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(ae(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Pe(205,"")}processInjectorType(o,u,l){if(!(o=X(o)))return!1;let d=vo(o);const m=null==d&&o.ngModule||void 0,v=void 0===m?o:m,E=-1!==l.indexOf(v);if(void 0!==m&&(d=vo(m)),null==d)return!1;if(null!=d.imports&&!E){let R;l.push(v);try{es(d.imports,L=>{this.processInjectorType(L,u,l)&&(void 0===R&&(R=[]),R.push(L))})}finally{}if(void 0!==R)for(let L=0;L<R.length;L++){const{ngModule:G,providers:Y}=R[L];es(Y,me=>this.processProvider(me,G,Y||B))}}this.injectorDefTypes.add(v);const I=To(v)||(()=>new v);this.records.set(v,Ph(I,Ap));const S=d.providers;if(null!=S&&!E){const R=o;es(S,L=>this.processProvider(L,R,S))}return void 0!==m&&void 0!==o.providers}processProvider(o,u,l){let d=Sp(o=X(o))?o:X(o&&o.provide);const m=function fT(s,o,u){return tC(s)?Ph(void 0,s.useValue):Ph(eC(s),Ap)}(o);if(Sp(o)||!0!==o.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=Ph(void 0,Ap,!0),v.factory=()=>Ze(v.multi),this.records.set(d,v)),d=o,v.multi.push(o)}this.records.set(d,m)}hydrate(o,u){return u.value===Ap&&(u.value=dT,u.value=u.factory()),"object"==typeof u.value&&u.value&&function sC(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=X(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function Ov(s){const o=Rn(s),u=null!==o?o.factory:To(s);if(null!==u)return u;if(s instanceof pn)throw new Pe(204,"");if(s instanceof Function)return function XE(s){const o=s.length;if(o>0)throw function ca(s,o){const u=[];for(let l=0;l<s;l++)u.push(o);return u}(o,"?"),new Pe(204,"");const u=function en(s){const o=s&&(s[Xr]||s[Me]);if(o){const u=function Wt(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Pe(204,"")}function eC(s,o,u){let l;if(Sp(s)){const d=X(s);return To(d)||Ov(d)}if(tC(s))l=()=>X(s.useValue);else if(function nC(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...Ze(s.deps||[]));else if(function pT(s){return!(!s||!s.useExisting)}(s))l=()=>Z(X(s.useExisting));else{const d=X(s&&(s.useClass||s.provide));if(!function iC(s){return!!s.deps}(s))return To(d)||Ov(d);l=()=>new d(...Ze(s.deps))}return l}function Ph(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function tC(s){return null!==s&&"object"==typeof s&&b in s}function Sp(s){return"function"==typeof s}let ao=(()=>{class s{static create(u,l){var d;if(Array.isArray(u))return QE({name:""},l,u,"");{const m=null!==(d=u.name)&&void 0!==d?d:"";return QE({name:m},u.parent,u.providers,m)}}}return s.THROW_IF_NOT_FOUND=tn,s.NULL=new Oh,s.\u0275prov=sn({token:s,providedIn:"any",factory:()=>Z(Mv)}),s.__NG_ELEMENT_ID__=-1,s})();function gC(s,o){Jl(uh(s)[1],dn())}function mC(s){let o=function zm(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const l=[s];for(;o;){let d;if(Yi(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Pe(903,"");d=o.\u0275dir}if(d){if(u){l.push(d);const v=s;v.inputs=Zm(s.inputs),v.declaredInputs=Zm(s.declaredInputs),v.outputs=Zm(s.outputs);const E=d.hostBindings;E&&yC(s,E);const I=d.viewQuery,S=d.contentQueries;if(I&&CT(s,I),S&&IT(s,S),oe(s.inputs,d.inputs),oe(s.declaredInputs,d.declaredInputs),oe(s.outputs,d.outputs),Yi(d)&&d.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const m=d.features;if(m)for(let v=0;v<m.length;v++){const E=m[v];E&&E.ngInherit&&E(s),E===mC&&(u=!1)}}o=Object.getPrototypeOf(o)}!function Tc(s){let o=0,u=null;for(let l=s.length-1;l>=0;l--){const d=s[l];d.hostVars=o+=d.hostVars,d.hostAttrs=Xe(d.hostAttrs,u=Xe(u,d.hostAttrs))}}(l)}function Zm(s){return s===Ti?{}:s===B?[]:s}function CT(s,o){const u=s.viewQuery;s.viewQuery=u?(l,d)=>{o(l,d),u(l,d)}:o}function IT(s,o){const u=s.contentQueries;s.contentQueries=u?(l,d,m)=>{o(l,d,m),u(l,d,m)}:o}function yC(s,o){const u=s.hostBindings;s.hostBindings=u?(l,d)=>{o(l,d),u(l,d)}:o}let Rp=null;function kh(){if(!Rp){const s=dt.Symbol;if(s&&s.iterator)Rp=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const l=o[u];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Rp=l)}}}return Rp}function Np(s){return!!Bv(s)&&(Array.isArray(s)||!(s instanceof Map)&&kh()in s)}function Bv(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Hi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Dn(s,o,u,l){const d=xe();return Hi(d,ys(),o)&&(xt(),ba(Cn(),d,s,o,u,l)),Dn}function Sc(s,o,u,l){return Hi(s,ys(),u)?o+K(u)+l:vt}function vC(s,o,u,l,d,m,v,E){const I=xe(),S=xt(),R=s+20,L=S.firstCreatePass?function Fp(s,o,u,l,d,m,v,E,I){const S=o.consts,R=Dh(o,s,4,v||null,Ur(S,E));Cv(o,u,R,Ur(S,I)),Jl(o,R);const L=R.tViews=xh(2,R,l,d,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,R),L.queries=o.queries.embeddedTView(R)),R}(R,S,I,o,u,l,d,m,v):S.data[R];ri(L,!1);const G=I[11].createComment("");vc(S,I,G,L),Cr(G,I),Ip(I,I[R]=Cp(G,I,G,L)),ps(L)&&Vm(S,I,L),null!=v&&Um(I,L,E)}function Bp(s,o=ot.Default){const u=xe();return null===u?Z(s,o):tc(dn(),u,X(s),o)}function ui(){throw new Error("invalid")}function Rc(s,o,u){const l=xe();return Hi(l,ys(),o)&&ts(xt(),Cn(),l,s,o,l[11],u,!1),Rc}function Yv(s,o,u,l,d){const v=d?"class":"style";KE(s,u,o.inputs[v],v,l)}function Qv(s,o,u,l){const d=xe(),m=xt(),v=20+s,E=d[11],I=d[v]=_h(E,o,function Rd(){return mt.lFrame.currentNamespace}()),S=m.firstCreatePass?function jp(s,o,u,l,d,m,v){const E=o.consts,S=Dh(o,s,2,d,Ur(E,m));return Cv(o,u,S,Ur(E,v)),null!==S.attrs&&Dc(S,S.attrs,!1),null!==S.mergedAttrs&&Dc(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(v,m,d,0,o,u,l):m.data[v];ri(S,!0);const R=S.mergedAttrs;null!==R&&Xl(E,I,R);const L=S.classes;null!==L&&sv(E,I,L);const G=S.styles;null!==G&&ME(E,I,G),64!=(64&S.flags)&&vc(m,d,I,S),0===function Ha(){return mt.lFrame.elementDepthCount}()&&Cr(I,d),function $a(){mt.lFrame.elementDepthCount++}(),ps(S)&&(Vm(m,d,S),function Lm(s,o,u){if(pd(o)){const d=o.directiveEnd;for(let m=o.directiveStart;m<d;m++){const v=s.data[m];v.contentQueries&&v.contentQueries(1,u[m],m)}}}(m,S,d)),null!==l&&Um(d,S)}function Jv(){let s=dn();ms()?function Gu(){mt.lFrame.isParent=!1}():(s=s.parent,ri(s,!1));const o=s;!function ea(){mt.lFrame.elementDepthCount--}();const u=xt();u.firstCreatePass&&(Jl(u,s),pd(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Od(s){return 0!=(16&s.flags)}(o)&&Yv(u,o,xe(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Xa(s){return 0!=(32&s.flags)}(o)&&Yv(u,o,xe(),o.stylesWithoutHost,!1)}function Hp(s,o,u,l){Qv(s,o,u,l),Jv()}function nw(){return xe()}function sy(s){return!!s&&"function"==typeof s.then}function xC(s){return!!s&&"function"==typeof s.subscribe}const rw=xC;function oy(s,o,u,l){const d=xe(),m=xt(),v=dn();return function RC(s,o,u,l,d,m,v,E){const I=ps(l),R=s.firstCreatePass&&ZE(s),L=o[8],G=qm(o);let Y=!0;if(3&l.type||E){const Ge=jn(l,o),et=E?E(Ge):Ge,Se=G.length,ht=E?Vt=>E(an(Vt[l.index])):l.index;if(Yt(u)){let Vt=null;if(!E&&I&&(Vt=function MC(s,o,u,l){const d=s.cleanup;if(null!=d)for(let m=0;m<d.length-1;m+=2){const v=d[m];if(v===u&&d[m+1]===l){const E=o[7],I=d[m+2];return E.length>I?E[I]:null}"string"==typeof v&&(m+=2)}return null}(s,o,d,l.index)),null!==Vt)(Vt.__ngLastListenerFn__||Vt).__ngNextListenerFn__=m,Vt.__ngLastListenerFn__=m,Y=!1;else{m=$p(l,o,L,m,!1);const hn=u.listen(et,d,m);G.push(m,hn),R&&R.push(d,ht,Se,Se+1)}}else m=$p(l,o,L,m,!0),et.addEventListener(d,m,v),G.push(m),R&&R.push(d,ht,Se,v)}else m=$p(l,o,L,m,!1);const me=l.outputs;let Le;if(Y&&null!==me&&(Le=me[d])){const Ge=Le.length;if(Ge)for(let et=0;et<Ge;et+=2){const qi=o[Le[et]][Le[et+1]].subscribe(m),Ln=G.length;G.push(m,qi),R&&R.push(d,l.index,Ln,-(Ln+1))}}}(m,d,d[11],v,s,o,!!u,l),oy}function uy(s,o,u,l){try{return!1!==u(l)}catch(d){return Dp(s,d),!1}}function $p(s,o,u,l,d){return function m(v){if(v===Function)return l;const E=2&s.flags?Vr(s.index,o):o;0==(32&o[2])&&$m(E);let I=uy(o,0,l,v),S=m.__ngNextListenerFn__;for(;S;)I=uy(o,0,S,v)&&I,S=S.__ngNextListenerFn__;return d&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function ly(s=1){return function Md(s){return(mt.lFrame.contextLView=function Xg(s,o){for(;s>0;)o=o[15],s--;return o}(s,mt.lFrame.contextLView))[8]}(s)}function Gp(s,o,u){return iw(s,"",o,"",u),Gp}function iw(s,o,u,l,d){const m=xe(),v=Sc(m,o,u,l);return v!==vt&&ts(xt(),Cn(),m,s,v,m[11],d,!1),iw}function gy(s,o,u,l,d){const m=s[u+1],v=null===o;let E=l?En(m):Ea(m),I=!1;for(;0!==E&&(!1===I||v);){const R=s[E+1];ow(s[E],o)&&(I=!0,s[E+1]=l?xm(R):hv(R)),E=l?En(R):Ea(R)}I&&(s[u+1]=l?hv(m):xm(m))}function ow(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&eo(s,o)>=0}function Oc(s,o){return function ss(s,o,u,l){const d=xe(),m=xt(),v=function Pi(s){const o=mt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);m.firstUpdatePass&&function dw(s,o,u,l){const d=s.data;if(null===d[u+1]){const m=d[fr()],v=function my(s,o){return o>=s.expandoStartIndex}(s,u);(function gw(s,o){return 0!=(s.flags&(o?16:32))})(m,l)&&null===o&&!v&&(o=!1),o=function HC(s,o,u,l){const d=function Wa(s){const o=mt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let m=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(u=vl(u=Zp(null,s,o,u,l),o.attrs,l),m=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(u=Zp(d,s,o,u,l),null===m){let I=function zp(s,o,u){const l=u?o.classBindings:o.styleBindings;if(0!==Ea(l))return s[En(l)]}(s,o,l);void 0!==I&&Array.isArray(I)&&(I=Zp(null,s,o,I[1],l),I=vl(I,o.attrs,l),function hw(s,o,u,l){s[En(u?o.classBindings:o.styleBindings)]=l}(s,o,l,I))}else m=function fw(s,o,u){let l;const d=o.directiveEnd;for(let m=1+o.directiveStylingLast;m<d;m++)l=vl(l,s[m].hostAttrs,u);return vl(l,o.attrs,u)}(s,o,l)}return void 0!==m&&(l?o.residualClasses=m:o.residualStyles=m),u}(d,m,o,l),function UT(s,o,u,l,d,m){let v=m?o.classBindings:o.styleBindings,E=En(v),I=Ea(v);s[l]=u;let R,S=!1;if(Array.isArray(u)){const L=u;R=L[1],(null===R||eo(L,R)>0)&&(S=!0)}else R=u;if(d)if(0!==I){const G=En(s[E+1]);s[l+1]=dv(G,E),0!==G&&(s[G+1]=Sm(s[G+1],l)),s[E+1]=function BD(s,o){return 131071&s|o<<17}(s[E+1],l)}else s[l+1]=dv(E,0),0!==E&&(s[E+1]=Sm(s[E+1],l)),E=l;else s[l+1]=dv(I,0),0===E?E=l:s[I+1]=Sm(s[I+1],l),I=l;S&&(s[l+1]=hv(s[l+1])),gy(s,R,l,!0),gy(s,R,l,!1),function py(s,o,u,l,d){const m=d?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof o&&eo(m,o)>=0&&(u[l+1]=xm(u[l+1]))}(o,R,s,l,m),v=dv(E,I),m?o.classBindings=v:o.styleBindings=v}(d,m,o,u,v,l)}}(m,s,v,l),o!==vt&&Hi(d,v,o)&&function yy(s,o,u,l,d,m,v,E){if(!(3&o.type))return;const I=s.data,S=I[E+1];Uh(function kE(s){return 1==(1&s)}(S)?Yp(I,o,u,d,Ea(S),v):void 0)||(Uh(m)||function Vo(s){return 2==(2&s)}(S)&&(m=Yp(I,null,u,d,E,v)),function ND(s,o,u,l,d){const m=Yt(s);if(o)d?m?s.addClass(u,l):u.classList.add(l):m?s.removeClass(u,l):u.classList.remove(l);else{let v=-1===l.indexOf("-")?void 0:ro.DashCase;if(null==d)m?s.removeStyle(u,l,v):u.style.removeProperty(l);else{const E="string"==typeof d&&d.endsWith("!important");E&&(d=d.slice(0,-10),v|=ro.Important),m?s.setStyle(u,l,d,v):u.style.setProperty(l,d,E?"important":"")}}}(l,v,Xn(fr(),u),d,m))}(m,m.data[fr()],d,d[11],s,d[v+1]=function $C(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ae(As(s)))),s}(o,u),l,v)}(s,o,null,!0),Oc}function Zp(s,o,u,l,d){let m=null;const v=u.directiveEnd;let E=u.directiveStylingLast;for(-1===E?E=u.directiveStart:E++;E<v&&(m=o[E],l=vl(l,m.hostAttrs,d),m!==s);)E++;return null!==s&&(u.directiveStylingLast=E),l}function vl(s,o,u){const l=u?1:2;let d=-1;if(null!==o)for(let m=0;m<o.length;m++){const v=o[m];"number"==typeof v?d=v:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),rr(s,v,!!u||o[++m]))}return void 0===s?null:s}function Yp(s,o,u,l,d,m){const v=null===o;let E;for(;d>0;){const I=s[d],S=Array.isArray(I),R=S?I[1]:I,L=null===R;let G=u[d+1];G===vt&&(G=L?B:void 0);let Y=L?fa(G,l):R===l?G:void 0;if(S&&!Uh(Y)&&(Y=fa(I,l)),Uh(Y)&&(E=Y,v))return E;const me=s[d+1];d=v?En(me):Ea(me)}if(null!==o){let I=m?o.residualClasses:o.residualStyles;null!=I&&(E=fa(I,l))}return E}function Uh(s){return void 0!==s}function mw(s,o=""){const u=xe(),l=xt(),d=s+20,m=l.firstCreatePass?Dh(l,d,1,o,null):l.data[d],v=u[d]=function yh(s,o){return Yt(s)?s.createText(o):s.createTextNode(o)}(u[11],o);vc(l,u,v,m),ri(m,!1)}function yw(s){return Pc("",s,""),yw}function Pc(s,o,u){const l=xe(),d=Sc(l,s,o,u);return d!==vt&&Eu(l,fr(),d),Pc}const Uc=void 0;var WT=["en",[["a","p"],["AM","PM"],Uc],[["AM","PM"],Uc,Uc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Uc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Uc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Uc,"{1} 'at' {0}",Uc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function XC(s){const u=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===l?1:5}];let Bc={};function eg(s){const o=function ZT(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=bw(o);if(u)return u;const l=o.split("-")[0];if(u=bw(l),u)return u;if("en"===l)return WT;throw new Error(`Missing locale data for the locale "${s}".`)}function Iw(s){return eg(s)[wt.PluralCase]}function bw(s){return s in Bc||(Bc[s]=dt.ng&&dt.ng.common&&dt.ng.common.locales&&dt.ng.common.locales[s]),Bc[s]}var wt=(()=>((wt=wt||{})[wt.LocaleId=0]="LocaleId",wt[wt.DayPeriodsFormat=1]="DayPeriodsFormat",wt[wt.DayPeriodsStandalone=2]="DayPeriodsStandalone",wt[wt.DaysFormat=3]="DaysFormat",wt[wt.DaysStandalone=4]="DaysStandalone",wt[wt.MonthsFormat=5]="MonthsFormat",wt[wt.MonthsStandalone=6]="MonthsStandalone",wt[wt.Eras=7]="Eras",wt[wt.FirstDayOfWeek=8]="FirstDayOfWeek",wt[wt.WeekendRange=9]="WeekendRange",wt[wt.DateFormat=10]="DateFormat",wt[wt.TimeFormat=11]="TimeFormat",wt[wt.DateTimeFormat=12]="DateTimeFormat",wt[wt.NumberSymbols=13]="NumberSymbols",wt[wt.NumberFormats=14]="NumberFormats",wt[wt.CurrencyCode=15]="CurrencyCode",wt[wt.CurrencySymbol=16]="CurrencySymbol",wt[wt.CurrencyName=17]="CurrencyName",wt[wt.Currencies=18]="Currencies",wt[wt.Directionality=19]="Directionality",wt[wt.PluralCase=20]="PluralCase",wt[wt.ExtraData=21]="ExtraData",wt))();const El="en-US";let nI=El;function Dl(s,o,u,l,d){if(s=X(s),Array.isArray(s))for(let m=0;m<s.length;m++)Dl(s[m],o,u,l,d);else{const m=xt(),v=xe();let E=Sp(s)?s:X(s.provide),I=eC(s);const S=dn(),R=1048575&S.providerIndexes,L=S.directiveStart,G=S.providerIndexes>>20;if(Sp(s)||!s.multi){const Y=new In(I,d,Bp),me=Et(E,o,d?R:R+G,L);-1===me?(nu(eu(S,v),m,E),Ny(m,s,o.length),o.push(E),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),u.push(Y),v.push(Y)):(u[me]=Y,v[me]=Y)}else{const Y=Et(E,o,R+G,L),me=Et(E,o,R,R+G),Le=Y>=0&&u[Y],Ge=me>=0&&u[me];if(d&&!Ge||!d&&!Le){nu(eu(S,v),m,E);const et=function ag(s,o,u,l,d){const m=new In(s,u,Bp);return m.multi=[],m.index=o,m.componentProviders=0,Or(m,d,l&&!u),m}(d?$c:CI,u.length,d,l,I);!d&&Ge&&(u[me].providerFactory=et),Ny(m,s,o.length,0),o.push(E),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),u.push(et),v.push(et)}else Ny(m,s,Y>-1?Y:me,Or(u[d?me:Y],I,!d&&l));!d&&l&&Ge&&u[me].componentProviders++}}}function Ny(s,o,u,l){const d=Sp(o),m=function rC(s){return!!s.useClass}(o);if(d||m){const I=(m?X(o.useClass):o).prototype.ngOnDestroy;if(I){const S=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const R=S.indexOf(u);-1===R?S.push(u,[l,I]):S[R+1].push(l,I)}else S.push(u,I)}}}function Or(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Et(s,o,u,l){for(let d=u;d<l;d++)if(o[d]===s)return d;return-1}function CI(s,o,u,l){return Oy(this.multi,[])}function $c(s,o,u,l){const d=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=kn(u,u[1],this.providerFactory.index,l);m=E.slice(0,v),Oy(d,m);for(let I=v;I<E.length;I++)m.push(E[I])}else m=[],Oy(d,m);return m}function Oy(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function Qt(s,o=[]){return u=>{u.providersResolver=(l,d)=>function Ht(s,o,u){const l=xt();if(l.firstCreatePass){const d=Yi(s);Dl(u,l.data,l.blueprint,d,!0),Dl(o,l.data,l.blueprint,d,!1)}}(l,d?d(s):s,o)}}class Pr{}class pA{resolveComponentFactory(o){throw function Zh(s){const o=Error(`No component factory found for ${ae(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let co=(()=>{class s{}return s.NULL=new pA,s})();function ir(){return ho(dn(),xe())}function ho(s,o){return new Gc(jn(s,o))}let Gc=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=ir,s})();function bI(s){return s instanceof Gc?s.nativeElement:s}class DI{}let qc=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function ug(){const s=xe(),u=Vr(dn().index,s);return function Wc(s){return s[11]}(xi(u)?u:s)}(),s})(),TI=(()=>{class s{}return s.\u0275prov=sn({token:s,providedIn:"root",factory:()=>null}),s})();class Je{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const AI=new Je("13.1.3"),Tu={};function as(s,o,u,l,d=!1){for(;null!==u;){const m=o[u.index];if(null!==m&&l.push(an(m)),Mi(m))for(let E=10;E<m.length;E++){const I=m[E],S=I[1].firstChild;null!==S&&as(I[1],I,S,l)}const v=u.type;if(8&v)as(s,o,u.child,l);else if(32&v){const E=ph(u,o);let I;for(;I=E();)l.push(I)}else if(16&v){const E=pp(o,u);if(Array.isArray(E))l.push(...E);else{const I=pl(o[16]);as(I[1],I,E,l,!0)}}u=d?u.projectionNext:u.next}return l}class Au{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return as(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Mi(o)){const u=o[8],l=u?u.indexOf(this):-1;l>-1&&(w(o,l),ou(u,l))}this._attachedToViewContainer=!1}T(this._lView[1],this._lView)}onDestroy(o){vp(this._lView[1],this._lView,null,o)}markForCheck(){$m(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Nh(this._lView[1],this._lView,this.context)}checkNoChanges(){!function aT(s,o,u){Ga(!0);try{Nh(s,o,u)}finally{Ga(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Pe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function gl(s,o){Rs(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Pe(902,"");this._appRef=o}}class Kh extends Au{constructor(o){super(o),this._view=o}detectChanges(){Av(this._view)}checkNoChanges(){!function uT(s){Ga(!0);try{Av(s)}finally{Ga(!1)}}(this._view)}get context(){return null}}class Fw extends co{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=cr(o);return new Yh(u,this.ngModule)}}function zc(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}const ky=new pn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>yc});class Yh extends Pr{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function VD(s){return s.map(LD).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return zc(this.componentDef.inputs)}get outputs(){return zc(this.componentDef.outputs)}create(o,u,l,d){const m=(d=d||this.ngModule)?function Vw(s,o){return{get:(u,l,d)=>{const m=s.get(u,Tu,d);return m!==Tu||l===Tu?m:o.get(u,l,d)}}}(o,d.injector):o,v=m.get(DI,zs),E=m.get(TI,null),I=v.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",R=l?function Ev(s,o,u){if(Yt(s))return s.selectRootElement(o,u===Nt.ShadowDom);let l="string"==typeof o?s.querySelector(o):o;return l.textContent="",l}(I,l,this.componentDef.encapsulation):_h(v.createRenderer(null,this.componentDef),S,function Lw(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(S)),L=this.componentDef.onPush?576:528,G=function pC(s,o){return{components:[],scheduler:s||yc,clean:lT,playerHandler:o||null,flags:0}}(),Y=xh(0,null,null,1,0,null,null,null,null,null),me=Cc(null,Y,G,L,null,null,v,I,E,m);let Le,Ge;sa(me);try{const et=function fC(s,o,u,l,d,m){const v=u[1];u[20]=s;const I=Dh(v,20,2,"#host",null),S=I.mergedAttrs=o.hostAttrs;null!==S&&(Dc(I,S,!0),null!==s&&(Xl(d,s,S),null!==I.classes&&sv(d,s,I.classes),null!==I.styles&&ME(d,s,I.styles)));const R=l.createRenderer(s,o),L=Cc(u,HE(o),null,o.onPush?64:16,u[20],I,l,R,m||null,null);return v.firstCreatePass&&(nu(eu(I,u),v,o.type),Rh(v,I),bv(I,u.length,1)),Ip(u,L),u[20]=L}(R,this.componentDef,me,v,I);if(R)if(l)Xl(I,R,["ng-version",AI.full]);else{const{attrs:Se,classes:ht}=function UD(s){const o=[],u=[];let l=1,d=2;for(;l<s.length;){let m=s[l];if("string"==typeof m)2===d?""!==m&&o.push(m,s[++l]):8===d&&u.push(m);else{if(!Lo(d))break;d=m}l++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Se&&Xl(I,R,Se),ht&&ht.length>0&&sv(I,R,ht.join(" "))}if(Ge=Jo(Y,20),void 0!==u){const Se=Ge.projection=[];for(let ht=0;ht<this.ngContentSelectors.length;ht++){const Vt=u[ht];Se.push(null!=Vt?Array.from(Vt):null)}}Le=function Vv(s,o,u,l,d){const m=u[1],v=function bc(s,o,u){const l=dn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),Dv(s,l,o,Th(s,o,1,null),u));const d=kn(o,s,l.directiveStart,l);Cr(d,o);const m=jn(l,o);return m&&Cr(m,o),d}(m,u,o);if(l.components.push(v),s[8]=v,d&&d.forEach(I=>I(v,o)),o.contentQueries){const I=dn();o.contentQueries(1,v,I.directiveStart)}const E=dn();return!m.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Hn(E.index),WE(u[1],E,0,E.directiveStart,E.directiveEnd,o),Mh(o,v)),v}(et,this.componentDef,me,G,[gC]),_p(Y,me,null)}finally{Ku()}return new Fy(this.componentType,Le,ho(Ge,me),me,Ge)}}class Fy extends class fA{}{constructor(o,u,l,d,m){super(),this.location=l,this._rootLView=d,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new Kh(d),this.componentType=o}get injector(){return new ws(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class gr{}class Uw{}const vn=new Map;class Qh extends gr{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Fw(this);const l=dr(o);this._bootstrapComponents=Ss(l.bootstrap),this._r3Injector=JE(o,u,[{provide:gr,useValue:this},{provide:co,useValue:this.componentFactoryResolver}],ae(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=ao.THROW_IF_NOT_FOUND,l=ot.Default){return o===ao||o===gr||o===Mv?this:this._r3Injector.get(o,u,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class jw extends Uw{constructor(o){super(),this.moduleType=o,null!==dr(o)&&function dg(s){const o=new Set;!function u(l){const d=dr(l,!0),m=d.id;null!==m&&(function cg(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${ae(o)} vs ${ae(o.name)}`)}(m,vn.get(m),l),vn.set(m,l));const v=Ss(d.imports);for(const E of v)o.has(E)||(o.add(E),u(E))}(s)}(o)}create(o){return new Qh(this.moduleType,o)}}function us(s){return o=>{setTimeout(s,void 0,o)}}const jo=class Xh extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,l){var d,m,v;let E=o,I=u||(()=>null),S=l;if(o&&"object"==typeof o){const L=o;E=null===(d=L.next)||void 0===d?void 0:d.bind(L),I=null===(m=L.error)||void 0===m?void 0:m.bind(L),S=null===(v=L.complete)||void 0===v?void 0:v.bind(L)}this.__isAsync&&(I=us(I),E&&(E=us(E)),S&&(S=us(S)));const R=super.subscribe({next:E,error:I,complete:S});return o instanceof Q.w0&&o.add(R),R}};function fg(){return this._results[kh()]()}class jy{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=kh(),l=jy.prototype;l[u]||(l[u]=fg)}get changes(){return this._changes||(this._changes=new jo)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const l=this;l.dirty=!1;const d=Li(o);(this._changesDetected=!function zf(s,o,u){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],m=o[l];if(u&&(d=u(d),m=u(m)),m!==d)return!1}return!0}(l._results,d,u))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Qc=(()=>{class s{}return s.__NG_ELEMENT_ID__=IA,s})();const Ww=Qc,PI=class extends Ww{constructor(o,u,l){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=l}createEmbeddedView(o){const u=this._declarationTContainer.tViews,l=Cc(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(l[19]=m.createEmbeddedView(u)),_p(u,l,o),new Au(l)}};function IA(){return pg(dn(),xe())}function pg(s,o){return 4&s.type?new PI(o,s,ho(s,o)):null}let gg=(()=>{class s{}return s.__NG_ELEMENT_ID__=kI,s})();function kI(){return Jc(dn(),xe())}const Hy=gg,FI=class extends Hy{constructor(o,u,l){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=l}get element(){return ho(this._hostTNode,this._hostLView)}get injector(){return new ws(this._hostTNode,this._hostLView)}get parentInjector(){const o=vs(this._hostTNode,this._hostLView);if(Er(o)){const u=$n(o,this._hostLView),l=oa(o);return new ws(u[1].data[l+8],u)}return new ws(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=LI(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,l){const d=o.createEmbeddedView(u||{});return this.insert(d,l),d}createComponent(o,u,l,d,m){const v=o&&!function Is(s){return"function"==typeof s}(o);let E;if(v)E=u;else{const L=u||{};E=L.index,l=L.injector,d=L.projectableNodes,m=L.ngModuleRef}const I=v?o:new Yh(cr(o)),S=l||this.parentInjector;if(!m&&null==I.ngModule&&S){const L=S.get(gr,null);L&&(m=L)}const R=I.create(S,d,void 0,m);return this.insert(R.hostView,E),R}insert(o,u){const l=o._lView,d=l[1];if(function Wl(s){return Mi(s[3])}(l)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const L=l[3],G=new FI(L,L[6],L[3]);G.detach(G.indexOf(o))}}const m=this._adjustIndex(u),v=this._lContainer;!function y(s,o,u,l){const d=10+l,m=u.length;l>0&&(u[d-1][4]=o),l<m-10?(o[4]=u[d],Ld(u,10+l,o)):(u.push(o),o[4]=null),o[3]=u;const v=o[17];null!==v&&u!==v&&function f(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(v,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(d,l,v,m);const E=Fo(m,v),I=l[11],S=Bi(I,v[7]);return null!==S&&function Ms(s,o,u,l,d,m){l[0]=d,l[6]=o,Rs(s,l,u,1,d,m)}(d,v[6],I,l,S,E),o.attachToViewContainerRef(),Ld($y(v),m,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=LI(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),l=w(this._lContainer,u);l&&(ou($y(this._lContainer),u),T(l[1],l))}detach(o){const u=this._adjustIndex(o,-1),l=w(this._lContainer,u);return l&&null!=ou($y(this._lContainer),u)?new Au(l):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function LI(s){return s[8]}function $y(s){return s[8]||(s[8]=[])}function Jc(s,o){let u;const l=o[s.index];if(Mi(l))u=l;else{let d;if(8&s.type)d=an(l);else{const m=o[11];d=m.createComment("");const v=jn(s,o);Qe(m,Bi(m,v),d,function mu(s,o){return Yt(s)?s.nextSibling(o):o.nextSibling}(m,v),!1)}o[s.index]=u=Cp(l,o,d,s),Ip(o,u)}return new FI(u,s,o)}class Gy{constructor(o){this.queryList=o,this.matches=null}clone(){return new Gy(this.queryList)}setDirty(){this.queryList.setDirty()}}class Tl{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const l=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let m=0;m<l;m++){const v=u.getByIndex(m);d.push(this.queries[v.indexInDeclarationView].clone())}return new Tl(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Jw(o,u).matches&&this.queries[u].setDirty()}}class zw{constructor(o,u,l=null){this.predicate=o,this.flags=u,this.read=l}}class qy{constructor(o=[]){this.queries=o}elementStart(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let l=0;l<this.length;l++){const d=null!==u?u.length:0,m=this.getByIndex(l).embeddedTView(o,d);m&&(m.indexInDeclarationView=l,null!==u?u.push(m):u=[m])}return null!==u?new qy(u):null}template(o,u){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class ed{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new ed(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==u;)l=l.parent;return u===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const m=l[d];this.matchTNodeWithReadOption(o,u,bA(u,m)),this.matchTNodeWithReadOption(o,u,tl(u,o,m,!1,!1))}else l===Qc?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,tl(u,o,l,!1,!1))}matchTNodeWithReadOption(o,u,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===Gc||d===gg||d===Qc&&4&u.type)this.addMatch(u.index,-2);else{const m=tl(u,o,d,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,l)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function bA(s,o){const u=s.localNames;if(null!==u)for(let l=0;l<u.length;l+=2)if(u[l]===o)return u[l+1];return null}function Tr(s,o,u,l){return-1===u?function DA(s,o){return 11&s.type?ho(s,o):4&s.type?pg(s,o):null}(o,s):-2===u?function Wy(s,o,u){return u===Gc?ho(o,s):u===Qc?pg(o,s):u===gg?Jc(o,s):void 0}(s,o,l):kn(s,s[1],u,o)}function mg(s,o,u,l){const d=o[19].queries[l];if(null===d.matches){const m=s.data,v=u.matches,E=[];for(let I=0;I<v.length;I+=2){const S=v[I];E.push(S<0?null:Tr(o,m[S],v[I+1],u.metadata.read))}d.matches=E}return d.matches}function Zw(s,o,u,l){const d=s.queries.getByIndex(u),m=d.matches;if(null!==m){const v=mg(s,o,d,u);for(let E=0;E<m.length;E+=2){const I=m[E];if(I>0)l.push(v[E/2]);else{const S=m[E+1],R=o[-I];for(let L=10;L<R.length;L++){const G=R[L];G[17]===G[3]&&Zw(G[1],G,S,l)}if(null!==R[9]){const L=R[9];for(let G=0;G<L.length;G++){const Y=L[G];Zw(Y[1],Y,S,l)}}}}}return l}function zy(s){const o=xe(),u=xt(),l=za();Za(l+1);const d=Jw(u,l);if(s.dirty&&er(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const m=d.crossesNgTemplate?Zw(u,o,l,[]):mg(u,o,d,l);s.reset(m,bI),s.notifyOnChanges()}return!0}return!1}function Kw(s,o,u,l){const d=xt();if(d.firstCreatePass){const m=dn();(function Qw(s,o,u){null===s.queries&&(s.queries=new qy),s.queries.track(new ed(o,u))})(d,new zw(o,u,l),m.index),function UI(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function Al(s,o,u){const l=new jy(4==(4&u));vp(s,o,l,l.destroy),null===o[19]&&(o[19]=new Tl),o[19].queries.push(new Gy(l))}(d,xe(),u)}function Yw(){return function yg(s,o){return s[19].queries[o].queryList}(xe(),za())}function Jw(s,o){return s.queries.getByIndex(o)}function Eg(...s){}const Xy=new pn("Application Initializer");let cf=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Eg,this.reject=Eg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const m=this.appInits[d]();if(sy(m))u.push(m);else if(rw(m)){const v=new Promise((E,I)=>{m.subscribe({complete:E,error:I})});u.push(v)}}Promise.all(u).then(()=>{l()}).catch(d=>{this.reject(d)}),0===u.length&&l(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(Z(Xy,8))},s.\u0275prov=sn({token:s,factory:s.\u0275fac}),s})();const ZI=new pn("AppId"),hf={provide:ZI,useFactory:function df(){return`${o0()}${o0()}${o0()}`},deps:[]};function o0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const KI=new pn("Platform Initializer"),YI=new pn("Platform ID"),a0=new pn("appBootstrapListener");let QI=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=sn({token:s,factory:s.\u0275fac}),s})();const Cg=new pn("LocaleId"),$o=new pn("DefaultCurrencyCode");class xn{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let Kr=(()=>{class s{compileModuleSync(u){return new jw(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const l=this.compileModuleSync(u),m=Ss(dr(u).declarations).reduce((v,E)=>{const I=cr(E);return I&&v.push(new Yh(I)),v},[]);return new xn(l,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=sn({token:s,factory:s.\u0275fac}),s})();const sr=(()=>Promise.resolve(0))();function po(s){"undefined"==typeof Zone?sr.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class mn{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new jo(!1),this.onMicrotaskEmpty=new jo(!1),this.onStable=new jo(!1),this.onError=new jo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&u,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function ls(){let s=dt.requestAnimationFrame,o=dt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function ff(s){const o=()=>{!function Mu(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(dt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,xl(s),s.isCheckStableRunning=!0,xu(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),xl(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,l,d,m,v,E)=>{try{return cs(s),u.invokeTask(d,m,v,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),Ls(s)}},onInvoke:(u,l,d,m,v,E,I)=>{try{return cs(s),u.invoke(d,m,v,E,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),Ls(s)}},onHasTask:(u,l,d,m)=>{u.hasTask(d,m),l===d&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,xl(s),xu(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,l,d,m)=>(u.handleError(d,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(d)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!mn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(mn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,l){return this._inner.run(o,u,l)}runTask(o,u,l,d){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+d,o,Fs,Eg,Eg);try{return m.runTask(v,u,l)}finally{m.cancelTask(v)}}runGuarded(o,u,l){return this._inner.runGuarded(o,u,l)}runOutsideAngular(o){return this._outer.run(o)}}const Fs={};function xu(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function xl(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function cs(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Ls(s){s._nesting--,xu(s)}class go{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new jo,this.onMicrotaskEmpty=new jo,this.onStable=new jo,this.onError=new jo}run(o,u,l){return o.apply(u,l)}runGuarded(o,u,l){return o.apply(u,l)}runOutsideAngular(o){return o()}runTask(o,u,l,d){return o.apply(u,l)}}let Fr=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{mn.assertNotInAngularZone(),po(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())po(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(u)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,l,d){let m=-1;l&&l>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),u(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:d})}whenStable(u,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,l,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(Z(mn))},s.\u0275prov=sn({token:s,factory:s.\u0275fac}),s})(),u0=(()=>{class s{constructor(){this._applications=new Map,e_.addToWindow(this)}registerApplication(u,l){this._applications.set(u,l)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,l=!0){return e_.findTestabilityInTree(this,u,l)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=sn({token:s,factory:s.\u0275fac}),s})();class JI{addToWindow(o){}findTestabilityInTree(o,u,l){return null}}function VA(s){e_=s}let mo,e_=new JI;const XI=new pn("AllowMultipleToken");class Ig{constructor(o,u){this.name=o,this.token=u}}function eb(s,o,u=[]){const l=`Platform: ${o}`,d=new pn(l);return(m=[])=>{let v=t_();if(!v||v.injector.get(XI,!1))if(s)s(u.concat(m).concat({provide:d,useValue:!0}));else{const E=u.concat(m).concat({provide:d,useValue:!0},{provide:Rv,useValue:"platform"});!function nd(s){if(mo&&!mo.destroyed&&!mo.injector.get(XI,!1))throw new Pe(400,"");mo=s.get(c0);const o=s.get(KI,null);o&&o.forEach(u=>u())}(ao.create({providers:E,name:l}))}return function rd(s){const o=t_();if(!o)throw new Pe(401,"");return o}()}}function t_(){return mo&&!mo.destroyed?mo:null}let c0=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,l){const E=function Yr(s,o){let u;return u="noop"===s?new go:("zone.js"===s?void 0:s)||new mn({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:mn,useValue:E}];return E.run(()=>{const S=ao.create({providers:I,parent:this.injector,name:u.moduleType.name}),R=u.create(S),L=R.injector.get(hl,null);if(!L)throw new Pe(402,"");return E.runOutsideAngular(()=>{const G=E.onError.subscribe({next:Y=>{L.handleError(Y)}});R.onDestroy(()=>{Ta(this._modules,R),G.unsubscribe()})}),function d0(s,o,u){try{const l=u();return sy(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(L,E,()=>{const G=R.injector.get(cf);return G.runInitializers(),G.donePromise.then(()=>(function Dr(s){st(s,"Expected localeId to be defined"),"string"==typeof s&&(nI=s.toLowerCase().replace(/_/g,"-"))}(R.injector.get(Cg,El)||El),this._moduleDoBootstrap(R),R))})})}bootstrapModule(u,l=[]){const d=n_({},l);return function fe(s,o,u){const l=new jw(u);return Promise.resolve(l)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,d))}_moduleDoBootstrap(u){const l=u.injector.get(id);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new Pe(403,"");u.instance.ngDoBootstrap(l)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Pe(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(Z(ao))},s.\u0275prov=sn({token:s,factory:s.\u0275fac}),s})();function n_(s,o){return Array.isArray(o)?o.reduce(n_,s):Object.assign(Object.assign({},s),o)}let id=(()=>{class s{constructor(u,l,d,m,v){this._zone=u,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=m,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new k.y(S=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{S.next(this._stable),S.complete()})}),I=new k.y(S=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{mn.assertNotInAngularZone(),po(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,S.next(!0))})})});const L=this._zone.onUnstable.subscribe(()=>{mn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{S.next(!1)}))});return()=>{R.unsubscribe(),L.unsubscribe()}});this.isStable=(0,se.T)(E,I.pipe((0,re.B)()))}bootstrap(u,l){if(!this._initStatus.done)throw new Pe(405,"");let d;d=u instanceof Pr?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(d.componentType);const m=function Go(s){return s.isBoundToModule}(d)?void 0:this._injector.get(gr),E=d.create(ao.NULL,[],l||d.selector,m),I=E.location.nativeElement,S=E.injector.get(Fr,null),R=S&&E.injector.get(u0);return S&&R&&R.registerApplication(I,S),E.onDestroy(()=>{this.detachView(E.hostView),Ta(this.components,E),R&&R.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Pe(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const l=u;this._views.push(l),l.attachToAppRef(this)}detachView(u){const l=u;Ta(this._views,l),l.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(a0,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(Z(mn),Z(ao),Z(hl),Z(co),Z(cf))},s.\u0275prov=sn({token:s,factory:s.\u0275fac}),s})();function Ta(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let f0=!0,r_=!1;function p0(){return r_=!0,f0}function sd(){if(r_)throw new Error("Cannot enable prod mode after platform setup.");f0=!1}let nb=(()=>{class s{}return s.__NG_ELEMENT_ID__=g0,s})();function g0(s){return function m0(s,o,u){if(Bn(s)&&!u){const l=Vr(s.index,o);return new Au(l,l)}return 47&s.type?new Au(o[16],o):null}(dn(),xe(),16==(16&s))}class Ag{constructor(){}supports(o){return Np(o)}create(o){return new ub(o)}}const C0=(s,o)=>o;class ub{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||C0}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,l=this._removalsHead,d=0,m=null;for(;u||l;){const v=!l||u&&u.currentIndex<Rl(l,d,m)?u:l,E=Rl(v,d,m),I=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(u=u._next,null==v.previousIndex)d++;else{m||(m=[]);const S=E-d,R=I-d;if(S!=R){for(let G=0;G<S;G++){const Y=G<m.length?m[G]:m[G]=0,me=Y+G;R<=me&&me<S&&(m[G]=Y+1)}m[v.previousIndex]=R-S}}E!==I&&o(v,E,I)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Np(o))throw new Pe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,m,v,u=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)m=o[E],v=this._trackByFn(E,m),null!==u&&Object.is(u.trackById,v)?(l&&(u=this._verifyReinsertion(u,m,v,E)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,v,E),l=!0),u=u._next}else d=0,function ST(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[kh()]();let l;for(;!(l=u.next()).done;)o(l.value)}}(o,E=>{v=this._trackByFn(d,E),null!==u&&Object.is(u.trackById,v)?(l&&(u=this._verifyReinsertion(u,E,v,d)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,v,d),l=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,l,d){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,m,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,m,d)):o=this._addAfter(new Ml(u,l),m,d),o}_verifyReinsertion(o,u,l,d){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==m?o=this._reinsertAfter(m,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,m=o._nextRemoved;return null===d?this._removalsHead=m:d._nextRemoved=m,null===m?this._removalsTail=d:m._prevRemoved=d,this._insertAfter(o,u,l),this._addToMoves(o,l),o}_moveAfter(o,u,l){return this._unlink(o),this._insertAfter(o,u,l),this._addToMoves(o,l),o}_addAfter(o,u,l){return this._insertAfter(o,u,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,l){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new I0),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,l=o._next;return null===u?this._itHead=l:u._next=l,null===l?this._itTail=u:l._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new I0),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Ml{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class mf{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===u||u<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const u=o._prevDup,l=o._nextDup;return null===u?this._head=l:u._nextDup=l,null===l?this._tail=u:l._prevDup=u,null===this._head}}class I0{constructor(){this.map=new Map}put(o){const u=o.trackById;let l=this.map.get(u);l||(l=new mf,this.map.set(u,l)),l.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Rl(s,o,u){const l=s.previousIndex;if(null===l)return l;let d=0;return u&&l<u.length&&(d=u[l]),l+o+d}class lb{constructor(){}supports(o){return o instanceof Map||Bv(o)}create(){return new yf}}class yf{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Bv(o)))throw new Pe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,l),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(d,l);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let l=u;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const l=o._prev;return u._next=o,u._prev=l,o._prev=u,l&&(l._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const m=d._prev,v=d._next;return m&&(m._next=v),v&&(v._prev=m),d._next=null,d._prev=null,d}const l=new cb(o);return this._records.set(o,l),l.currentValue=u,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(l=>u(o[l],l))}}class cb{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ru(){return new Aa([new Ag])}let Aa=(()=>{class s{constructor(u){this.factories=u}static create(u,l){if(null!=l){const d=l.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||Ru()),deps:[[s,new mi,new gn]]}}find(u){const l=this.factories.find(d=>d.supports(u));if(null!=l)return l;throw new Pe(901,"")}}return s.\u0275prov=sn({token:s,providedIn:"root",factory:Ru}),s})();function b0(){return new a_([new lb])}let a_=(()=>{class s{constructor(u){this.factories=u}static create(u,l){if(l){const d=l.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:l=>s.create(u,l||b0()),deps:[[s,new mi,new gn]]}}find(u){const l=this.factories.find(m=>m.supports(u));if(l)return l;throw new Pe(901,"")}}return s.\u0275prov=sn({token:s,providedIn:"root",factory:b0}),s})();const zA=[new lb],KA=new Aa([new Ag]),u_=new a_(zA),hb=eb(null,"core",[{provide:YI,useValue:"unknown"},{provide:c0,deps:[ao]},{provide:u0,deps:[]},{provide:QI,deps:[]}]),l_=[{provide:id,useClass:id,deps:[mn,ao,hl,co,cf]},{provide:ky,deps:[mn],useFactory:function JA(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(u){o.push(u)}}},{provide:cf,useClass:cf,deps:[[new gn,Xy]]},{provide:Kr,useClass:Kr,deps:[]},hf,{provide:Aa,useFactory:function YA(){return KA},deps:[]},{provide:a_,useFactory:function QA(){return u_},deps:[]},{provide:Cg,useFactory:function fb(s){return s||function Nl(){return"undefined"!=typeof $localize&&$localize.locale||El}()},deps:[[new Wn(Cg),new gn,new mi]]},{provide:$o,useValue:"USD"}];let pb=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(Z(id))},s.\u0275mod=lr({type:s}),s.\u0275inj=Ii({providers:l_}),s})()},3942:(ut,be,F)=>{"use strict";F.d(be,{Z:()=>Pe});var h=F(2090),Q=F(4859),k=F(9681),se=F(1877);class re{constructor(K,ne){this._delegate=K,this.firebase=ne,(0,k._addComponent)(K,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=K.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(K){this._delegate.automaticDataCollectionEnabled=K}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(K=>{this._delegate.checkDestroyed(),K()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(K,ne=k._DEFAULT_ENTRY_NAME){var ge;this._delegate.checkDestroyed();const Te=this._delegate.container.getProvider(K);return!Te.isInitialized()&&"EXPLICIT"===(null===(ge=Te.getComponent())||void 0===ge?void 0:ge.instantiationMode)&&Te.initialize(),Te.getImmediate({identifier:ne})}_removeServiceInstance(K,ne=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(K).clearInstance(ne)}_addComponent(K){(0,k._addComponent)(this._delegate,K)}_addOrOverwriteComponent(K){(0,k._addOrOverwriteComponent)(this._delegate,K)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const oe=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),H=function le(){const Be=function ae(Be){const K={},ne={__esModule:!0,initializeApp:function ye(Ye,pt={}){const J=k.initializeApp(Ye,pt);if((0,h.r3)(K,J.name))return K[J.name];const pe=new Be(J,ne);return K[J.name]=pe,pe},app:Te,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Ae(Ye){const pt=Ye.name,J=pt.replace("-compat","");if(k._registerComponent(Ye)&&"PUBLIC"===Ye.type){const pe=(ve=Te())=>{if("function"!=typeof ve[J])throw oe.create("invalid-app-argument",{appName:pt});return ve[J]()};void 0!==Ye.serviceProps&&(0,h.ZB)(pe,Ye.serviceProps),ne[J]=pe,Be.prototype[J]=function(...ve){return this._getService.bind(this,pt).apply(this,Ye.multipleInstances?ve:[])}}return"PUBLIC"===Ye.type?ne[J]:null},removeApp:function ge(Ye){delete K[Ye]},useAsService:function rt(Ye,pt){return"serverAuth"===pt?null:pt},modularAPIs:k}};function Te(Ye){if(!(0,h.r3)(K,Ye=Ye||k._DEFAULT_ENTRY_NAME))throw oe.create("no-app",{appName:Ye});return K[Ye]}return ne.default=ne,Object.defineProperty(ne,"apps",{get:function He(){return Object.keys(K).map(Ye=>K[Ye])}}),Te.App=Be,ne}(re);return Be.INTERNAL=Object.assign(Object.assign({},Be.INTERNAL),{createFirebaseNamespace:le,extendNamespace:function K(ne){(0,h.ZB)(Be,ne)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Be}(),$=new se.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Be=self.firebase.SDK_VERSION;Be&&Be.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Pe=H;!function De(Be){(0,k.registerVersion)("@firebase/app-compat","0.1.19",Be)}()},9681:(ut,be,F)=>{"use strict";F.r(be),F.d(be,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>Xr,_DEFAULT_ENTRY_NAME:()=>st,_addComponent:()=>_r,_addOrOverwriteComponent:()=>sn,_apps:()=>ur,_clearComponents:()=>bi,_components:()=>Kt,_getProvider:()=>Ii,_registerComponent:()=>Jr,_removeServiceInstance:()=>Rn,deleteApp:()=>ot,getApp:()=>Me,getApps:()=>vr,initializeApp:()=>hs,onLog:()=>Kn,registerVersion:()=>Ft,setLogLevel:()=>Gs});var h=F(5861),Q=F(4859),k=F(1877),se=F(2090),re=F(2940);class de{constructor(_e){this.container=_e}getPlatformInfoString(){return this.container.getProviders().map($e=>{if(function oe(Ce){const _e=Ce.getComponent();return"VERSION"===(null==_e?void 0:_e.type)}($e)){const it=$e.getImmediate();return`${it.library}/${it.version}`}return null}).filter($e=>$e).join(" ")}}const ae="@firebase/app",H=new k.Yd("@firebase/app"),st="[DEFAULT]",gt={[ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ur=new Map,Kt=new Map;function _r(Ce,_e){try{Ce.container.addComponent(_e)}catch($e){H.debug(`Component ${_e.name} failed to register with FirebaseApp ${Ce.name}`,$e)}}function sn(Ce,_e){Ce.container.addOrOverwriteComponent(_e)}function Jr(Ce){const _e=Ce.name;if(Kt.has(_e))return H.debug(`There were multiple attempts to register component ${_e}.`),!1;Kt.set(_e,Ce);for(const $e of ur.values())_r($e,Ce);return!0}function Ii(Ce,_e){const $e=Ce.container.getProvider("heartbeat").getImmediate({optional:!0});return $e&&$e.triggerHeartbeat(),Ce.container.getProvider(_e)}function Rn(Ce,_e,$e=st){Ii(Ce,_e).clearInstance($e)}function bi(){Kt.clear()}const Wt=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class vo{constructor(_e,$e,it){this._isDeleted=!1,this._options=Object.assign({},_e),this._config=Object.assign({},$e),this._name=$e.name,this._automaticDataCollectionEnabled=$e.automaticDataCollectionEnabled,this._container=it,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this.checkDestroyed(),this._automaticDataCollectionEnabled=_e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(_e){this._isDeleted=_e}checkDestroyed(){if(this.isDeleted)throw Wt.create("app-deleted",{appName:this._name})}}const Xr="9.6.8";function hs(Ce,_e={}){"object"!=typeof _e&&(_e={name:_e});const $e=Object.assign({name:st,automaticDataCollectionEnabled:!1},_e),it=$e.name;if("string"!=typeof it||!it)throw Wt.create("bad-app-name",{appName:String(it)});const bt=ur.get(it);if(bt){if((0,se.vZ)(Ce,bt.options)&&(0,se.vZ)($e,bt.config))return bt;throw Wt.create("duplicate-app",{appName:it})}const ft=new Q.H0(it);for(const lr of Kt.values())ft.addComponent(lr);const on=new vo(Ce,$e,ft);return ur.set(it,on),on}function Me(Ce=st){const _e=ur.get(Ce);if(!_e)throw Wt.create("no-app",{appName:Ce});return _e}function vr(){return Array.from(ur.values())}function ot(Ce){return Di.apply(this,arguments)}function Di(){return(Di=(0,h.Z)(function*(Ce){const _e=Ce.name;ur.has(_e)&&(ur.delete(_e),yield Promise.all(Ce.container.getProviders().map($e=>$e.delete())),Ce.isDeleted=!0)})).apply(this,arguments)}function Ft(Ce,_e,$e){var it;let bt=null!==(it=gt[Ce])&&void 0!==it?it:Ce;$e&&(bt+=`-${$e}`);const ft=bt.match(/\s|\//),on=_e.match(/\s|\//);if(ft||on){const lr=[`Unable to register library "${bt}" with version "${_e}":`];return ft&&lr.push(`library name "${bt}" contains illegal characters (whitespace or "/")`),ft&&on&&lr.push("and"),on&&lr.push(`version name "${_e}" contains illegal characters (whitespace or "/")`),void H.warn(lr.join(" "))}Jr(new Q.wA(`${bt}-version`,()=>({library:bt,version:_e}),"VERSION"))}function Kn(Ce,_e){if(null!==Ce&&"function"!=typeof Ce)throw Wt.create("invalid-log-argument");(0,k.Am)(Ce,_e)}function Gs(Ce){(0,k.Ub)(Ce)}const yn="firebase-heartbeat-store";let gi=null;function Wo(){return gi||(gi=(0,re.openDb)("firebase-heartbeat-database",1,Ce=>{0===Ce.oldVersion&&Ce.createObjectStore(yn)}).catch(Ce=>{throw Wt.create("storage-open",{originalErrorMessage:Ce.message})})),gi}function lt(){return(lt=(0,h.Z)(function*(Ce){try{return(yield Wo()).transaction(yn).objectStore(yn).get(ln(Ce))}catch(_e){throw Wt.create("storage-get",{originalErrorMessage:_e.message})}})).apply(this,arguments)}function yt(Ce,_e){return wo.apply(this,arguments)}function wo(){return(wo=(0,h.Z)(function*(Ce,_e){try{const it=(yield Wo()).transaction(yn,"readwrite");return yield it.objectStore(yn).put(_e,ln(Ce)),it.complete}catch($e){throw Wt.create("storage-set",{originalErrorMessage:$e.message})}})).apply(this,arguments)}function dt(){return(dt=(0,h.Z)(function*(Ce){try{const $e=(yield Wo()).transaction(yn,"readwrite");return yield $e.objectStore(yn).delete(ln(Ce)),$e.complete}catch(_e){throw Wt.create("storage-delete",{originalErrorMessage:_e.message})}})).apply(this,arguments)}function ln(Ce){return`${Ce.name}!${Ce.options.appId}`}class B{constructor(_e){this.container=_e,this._heartbeatsCache=null;const $e=this.container.getProvider("app").getImmediate();this._storage=new we($e),this._heartbeatsCachePromise=this._storage.read().then(it=>(this._heartbeatsCache=it,it))}triggerHeartbeat(){var _e=this;return(0,h.Z)(function*(){const it=_e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),bt=function q(){return(new Date).toISOString().substring(0,10)}();if(null===_e._heartbeatsCache&&(_e._heartbeatsCache=yield _e._heartbeatsCachePromise),!_e._heartbeatsCache.some(ft=>ft.date===bt))return _e._heartbeatsCache.push({date:bt,userAgent:it}),_e._heartbeatsCache=_e._heartbeatsCache.filter(ft=>{const on=new Date(ft.date).valueOf();return Date.now()-on<=2592e6}),_e._storage.overwrite(_e._heartbeatsCache)})()}getHeartbeatsHeader(){var _e=this;return(0,h.Z)(function*(){if(null===_e._heartbeatsCache&&(yield _e._heartbeatsCachePromise),null===_e._heartbeatsCache)return"";const{heartbeatsToSend:$e,unsentEntries:it}=function W(Ce,_e=1024){const $e=[];let it=Ce.slice();for(const bt of Ce){const ft=$e.find(on=>on.userAgent===bt.userAgent);if(ft){if(ft.dates.push(bt.date),ee($e)>_e){ft.dates.pop();break}}else if($e.push({userAgent:bt.userAgent,dates:[bt.date]}),ee($e)>_e){$e.pop();break}it=it.slice(1)}return{heartbeatsToSend:$e,unsentEntries:it}}(_e._heartbeatsCache),bt=(0,se.h$)(JSON.stringify({version:2,heartbeats:$e}));return it.length>0?(_e._heartbeatsCache=it,yield _e._storage.overwrite(_e._heartbeatsCache)):(_e._heartbeatsCache=null,_e._storage.deleteAll()),bt})()}}class we{constructor(_e){this.app=_e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var _e=this;return(0,h.Z)(function*(){if(yield _e._canUseIndexedDBPromise){const it=yield function Nt(Ce){return lt.apply(this,arguments)}(_e.app);return(null==it?void 0:it.heartbeats)||[]}return[]})()}overwrite(_e){var $e=this;return(0,h.Z)(function*(){if(yield $e._canUseIndexedDBPromise)return yt($e.app,{heartbeats:_e})})()}add(_e){var $e=this;return(0,h.Z)(function*(){if(yield $e._canUseIndexedDBPromise){const bt=yield $e.read();return yt($e.app,{heartbeats:[...bt,..._e]})}})()}delete(_e){var $e=this;return(0,h.Z)(function*(){if(yield $e._canUseIndexedDBPromise){const bt=yield $e.read();return yt($e.app,{heartbeats:bt.filter(ft=>!_e.includes(ft))})}})()}deleteAll(){var _e=this;return(0,h.Z)(function*(){if(yield _e._canUseIndexedDBPromise)return function fs(Ce){return dt.apply(this,arguments)}(_e.app)})()}}function ee(Ce){return(0,se.h$)(JSON.stringify({version:2,heartbeats:Ce})).length}!function qe(Ce){Jr(new Q.wA("platform-logger",_e=>new de(_e),"PRIVATE")),Jr(new Q.wA("heartbeat",_e=>new B(_e),"PRIVATE")),Ft(ae,"0.7.18",Ce),Ft(ae,"0.7.18","esm2017"),Ft("fire-js","")}("")},4859:(ut,be,F)=>{"use strict";F.d(be,{wA:()=>k,H0:()=>ae,zt:()=>re});var h=F(5861),Q=F(2090);class k{constructor(H,$,X){this.name=H,this.instanceFactory=$,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(H){return this.instantiationMode=H,this}setMultipleInstances(H){return this.multipleInstances=H,this}setServiceProps(H){return this.serviceProps=H,this}setInstanceCreatedCallback(H){return this.onInstanceCreated=H,this}}const se="[DEFAULT]";class re{constructor(H,$){this.name=H,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(H){const $=this.normalizeInstanceIdentifier(H);if(!this.instancesDeferred.has($)){const X=new Q.BH;if(this.instancesDeferred.set($,X),this.isInitialized($)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:$});je&&X.resolve(je)}catch(je){}}return this.instancesDeferred.get($).promise}getImmediate(H){var $;const X=this.normalizeInstanceIdentifier(null==H?void 0:H.identifier),je=null!==($=null==H?void 0:H.optional)&&void 0!==$&&$;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(De){if(je)return null;throw De}}getComponent(){return this.component}setComponent(H){if(H.name!==this.name)throw Error(`Mismatching Component ${H.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=H,this.shouldAutoInitialize()){if(function oe(le){return"EAGER"===le.instantiationMode}(H))try{this.getOrInitializeService({instanceIdentifier:se})}catch($){}for(const[$,X]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier($);try{const De=this.getOrInitializeService({instanceIdentifier:je});X.resolve(De)}catch(De){}}}}clearInstance(H=se){this.instancesDeferred.delete(H),this.instancesOptions.delete(H),this.instances.delete(H)}delete(){var H=this;return(0,h.Z)(function*(){const $=Array.from(H.instances.values());yield Promise.all([...$.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...$.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(H=se){return this.instances.has(H)}getOptions(H=se){return this.instancesOptions.get(H)||{}}initialize(H={}){const{options:$={}}=H,X=this.normalizeInstanceIdentifier(H.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:X,options:$});for(const[De,Pe]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(De)&&Pe.resolve(je);return je}onInit(H,$){var X;const je=this.normalizeInstanceIdentifier($),De=null!==(X=this.onInitCallbacks.get(je))&&void 0!==X?X:new Set;De.add(H),this.onInitCallbacks.set(je,De);const Pe=this.instances.get(je);return Pe&&H(Pe,je),()=>{De.delete(H)}}invokeOnInitCallbacks(H,$){const X=this.onInitCallbacks.get($);if(X)for(const je of X)try{je(H,$)}catch(De){}}getOrInitializeService({instanceIdentifier:H,options:$={}}){let X=this.instances.get(H);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(le=H,le===se?void 0:le),options:$}),this.instances.set(H,X),this.instancesOptions.set(H,$),this.invokeOnInitCallbacks(X,H),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,H,X)}catch(je){}var le;return X||null}normalizeInstanceIdentifier(H=se){return this.component?this.component.multipleInstances?H:se:H}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ae{constructor(H){this.name=H,this.providers=new Map}addComponent(H){const $=this.getProvider(H.name);if($.isComponentSet())throw new Error(`Component ${H.name} has already been registered with ${this.name}`);$.setComponent(H)}addOrOverwriteComponent(H){this.getProvider(H.name).isComponentSet()&&this.providers.delete(H.name),this.addComponent(H)}getProvider(H){if(this.providers.has(H))return this.providers.get(H);const $=new re(H,this);return this.providers.set(H,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(ut,be,F)=>{"use strict";F.d(be,{in:()=>Q,Yd:()=>oe,Ub:()=>ae,Am:()=>le});const h=[];var Q=(()=>{return(H=Q||(Q={}))[H.DEBUG=0]="DEBUG",H[H.VERBOSE=1]="VERBOSE",H[H.INFO=2]="INFO",H[H.WARN=3]="WARN",H[H.ERROR=4]="ERROR",H[H.SILENT=5]="SILENT",Q;var H})();const k={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},se=Q.INFO,re={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},de=(H,$,...X)=>{if($<H.logLevel)return;const je=(new Date).toISOString(),De=re[$];if(!De)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[De](`[${je}]  ${H.name}:`,...X)};class oe{constructor($){this.name=$,this._logLevel=se,this._logHandler=de,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in Q))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?k[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...$),this._logHandler(this,Q.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...$),this._logHandler(this,Q.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...$),this._logHandler(this,Q.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...$),this._logHandler(this,Q.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...$),this._logHandler(this,Q.ERROR,...$)}}function ae(H){h.forEach($=>{$.setLogLevel(H)})}function le(H,$){for(const X of h){let je=null;$&&$.level&&(je=k[$.level]),X.userLogHandler=null===H?null:(De,Pe,...Be)=>{const K=Be.map(ne=>{if(null==ne)return null;if("string"==typeof ne)return ne;if("number"==typeof ne||"boolean"==typeof ne)return ne.toString();if(ne instanceof Error)return ne.message;try{return JSON.stringify(ne)}catch(ge){return null}}).filter(ne=>ne).join(" ");Pe>=(null!=je?je:De.logLevel)&&H({level:Q[Pe].toLowerCase(),message:K,args:Be,type:De.name})}}}},5861:(ut,be,F)=>{"use strict";function h(k,se,re,de,oe,ae,le){try{var H=k[ae](le),$=H.value}catch(X){return void re(X)}H.done?se($):Promise.resolve($).then(de,oe)}function Q(k){return function(){var se=this,re=arguments;return new Promise(function(de,oe){var ae=k.apply(se,re);function le($){h(ae,de,oe,le,H,"next",$)}function H($){h(ae,de,oe,le,H,"throw",$)}le(void 0)})}}F.d(be,{Z:()=>Q})}},ut=>{ut(ut.s=3654)}]);